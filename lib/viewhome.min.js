/*
 * viewhome.min.js  version 6.4
 *
 * Sweet Home 3D, Copyright (c) 2016 Emmanuel PUYBARET / eTeks <info@eteks.com>
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 */
var __extends=(this&&this.__extends)||(function(){var a=function(e,c){a=Object.setPrototypeOf||({__proto__:[]} instanceof Array&&function(g,f){g.__proto__=f})||function(h,f){for(var g in f){if(f.hasOwnProperty(g)){h[g]=f[g]}}};return a(e,c)};return function(f,c){a(f,c);function e(){this.constructor=f}f.prototype=c===null?Object.create(c):(e.prototype=c.prototype,new e())}})();var HomeXMLHandler=(function(b){__extends(a,b);function a(c){var g=this;if(((c!=null&&c instanceof UserPreferences)||c===null)){var f=arguments;g=b.call(this)||this;if(g.preferences===undefined){g.preferences=null}if(g.home===undefined){g.home=null}if(g.homeElementName===undefined){g.homeElementName=null}if(g.labelText===undefined){g.labelText=null}if(g.leftSideBaseboard===undefined){g.leftSideBaseboard=null}if(g.rightSideBaseboard===undefined){g.rightSideBaseboard=null}if(g.homeBackgroundImage===undefined){g.homeBackgroundImage=null}if(g.backgroundImage===undefined){g.backgroundImage=null}if(g.materialTexture===undefined){g.materialTexture=null}g.buffer={str:"",toString:function(){return this.str}};g.elements=([]);g.attributes=([]);g.groupsFurniture=([]);g.properties=([]);g.textStyles=([]);g.levels=({});g.joinedWalls=({});g.textures=({});g.materials=([]);g.transformations=([]);g.sashes=([]);g.lightSources=([]);g.points=([]);g.furnitureVisibleProperties=([]);g.preferences=c!=null?c:new DefaultUserPreferences(false,null)}else{if(c===undefined){var f=arguments;var d=arguments;var e=null;g=b.call(this)||this;if(g.preferences===undefined){g.preferences=null}if(g.home===undefined){g.home=null}if(g.homeElementName===undefined){g.homeElementName=null}if(g.labelText===undefined){g.labelText=null}if(g.leftSideBaseboard===undefined){g.leftSideBaseboard=null}if(g.rightSideBaseboard===undefined){g.rightSideBaseboard=null}if(g.homeBackgroundImage===undefined){g.homeBackgroundImage=null}if(g.backgroundImage===undefined){g.backgroundImage=null}if(g.materialTexture===undefined){g.materialTexture=null}g.buffer={str:"",toString:function(){return this.str}};g.elements=([]);g.attributes=([]);g.groupsFurniture=([]);g.properties=([]);g.textStyles=([]);g.levels=({});g.joinedWalls=({});g.textures=({});g.materials=([]);g.transformations=([]);g.sashes=([]);g.lightSources=([]);g.points=([]);g.furnitureVisibleProperties=([]);g.preferences=e!=null?e:new DefaultUserPreferences(false,null);if(g.preferences===undefined){g.preferences=null}if(g.home===undefined){g.home=null}if(g.homeElementName===undefined){g.homeElementName=null}if(g.labelText===undefined){g.labelText=null}if(g.leftSideBaseboard===undefined){g.leftSideBaseboard=null}if(g.rightSideBaseboard===undefined){g.rightSideBaseboard=null}if(g.homeBackgroundImage===undefined){g.homeBackgroundImage=null}if(g.backgroundImage===undefined){g.backgroundImage=null}if(g.materialTexture===undefined){g.materialTexture=null}g.buffer={str:"",toString:function(){return this.str}};g.elements=([]);g.attributes=([]);g.groupsFurniture=([]);g.properties=([]);g.textStyles=([]);g.levels=({});g.joinedWalls=({});g.textures=({});g.materials=([]);g.transformations=([]);g.sashes=([]);g.lightSources=([]);g.points=([]);g.furnitureVisibleProperties=([])}else{throw new Error("invalid overload")}}return g}a.prototype.startDocument=function(){this.home=null;(this.elements.length=0);(this.attributes.length=0);(this.groupsFurniture.length=0);(function(c){for(var d in c){delete c[d]}})(this.levels);(function(c){for(var d in c){delete c[d]}})(this.joinedWalls)};a.prototype.startElement=function(h,d,f,c){var j=this;(function(k,i){return k.str=k.str.substring(0,i)})(this.buffer,0);(this.elements.push(f)>0);var e=({});for(var g=0;g<c.getLength();g++){(e[c.getQName(g)]=c.getValue(g).replace("&quot;",'"').replace("&lt;","<").replace("&gt;",">").replace("&amp;","&"))}(this.attributes.push(e)>0);if(!("property"===f)&&!("furnitureVisibleProperty"===f)&&!("textStyle"===f)){(this.properties.push({})>0);(this.textStyles.push({})>0)}if("home"===f){this.setHome(this.createHome(f,e));(this.furnitureVisibleProperties.length=0);this.homeBackgroundImage=null}else{if("environment"===f){(function(i){for(var k in i){delete i[k]}})(this.textures)}else{if("level"===f){this.backgroundImage=null}else{if(("pieceOfFurniture"===f)||("doorOrWindow"===f)||("light"===f)||("furnitureGroup"===f)){(function(i){for(var k in i){delete i[k]}})(this.textures);(this.materials.length=0);(this.transformations.length=0);(this.sashes.length=0);(this.lightSources.length=0);if("furnitureGroup"===f){(this.groupsFurniture.push([])>0)}}else{if("room"===f){(function(i){for(var k in i){delete i[k]}})(this.textures);(this.points.length=0)}else{if("polyline"===f){(this.points.length=0)}else{if("label"===f){this.labelText=null}else{if("wall"===f){(function(i){for(var k in i){delete i[k]}})(this.textures);this.leftSideBaseboard=null;this.rightSideBaseboard=null}else{if("baseboard"===f){(function(k){var i=j.textures[a.UNIQUE_ATTRIBUTE];delete j.textures[a.UNIQUE_ATTRIBUTE];return i})(this.textures)}else{if("material"===f){this.materialTexture=null}}}}}}}}}}};a.prototype.characters=function(c,e,d){(function(f){f.str=f.str.concat(c.substr(e,d));return f})(this.buffer)};a.prototype.endElement=function(m,i,D){this.elements.pop();var p=(this.elements.length==0)?null:(function(E){return E[E.length-1]})(this.elements);var x=this.attributes.pop();if(this.homeElementName!=null&&(this.homeElementName===D)){this.setHomeAttributes(this.home,D,x)}else{if("furnitureVisibleProperty"===D){try{if((function(E,F){return E[F]===undefined?null:E[F]})(x,"name")==null){throw new SAXException("Missing name attribute")}(this.furnitureVisibleProperties.push((function(E,F){return E[F]===undefined?null:E[F]})(x,"name"))>0)}catch(z){}}else{if("environment"===D){this.setEnvironmentAttributes(this.home.getEnvironment(),D,x)}else{if("compass"===D){this.setCompassAttributes(this.home.getCompass(),D,x)}else{if("print"===D){this.home.setPrint(this.createPrint(x))}else{if("level"===D){var c=this.createLevel(D,x);this.setLevelAttributes(c,D,x);(this.levels[(function(E,F){return E[F]===undefined?null:E[F]})(x,"id")]=c);this.home.addLevel(c)}else{if(("camera"===D)||("observerCamera"===D)){var y=this.createCamera(D,x);this.setCameraAttributes(y,D,x);var r=(function(E,F){return E[F]===undefined?null:E[F]})(x,"attribute");if("cameraPath"===r){var w=(this.home.getEnvironment().getVideoCameraPath().slice(0));(w.push(y)>0);this.home.getEnvironment().setVideoCameraPath(w)}else{if("topCamera"===r){var j=this.home.getTopCamera();j.setCamera(y);j.setTime(y.getTime());j.setLens(y.getLens())}else{if("observerCamera"===r){var C=this.home.getObserverCamera();C.setCamera(y);C.setTime(y.getTime());C.setLens(y.getLens());C.setFixedSize(y.isFixedSize())}else{if("storedCamera"===r){var t=(this.home.getStoredCameras().slice(0));(t.push(y)>0);this.home.setStoredCameras(t)}}}}}else{if(("pieceOfFurniture"===D)||("doorOrWindow"===D)||("light"===D)||("furnitureGroup"===D)){var g="furnitureGroup"===D?this.createFurnitureGroup(D,x,this.groupsFurniture.pop()):this.createPieceOfFurniture(D,x);this.setPieceOfFurnitureAttributes(g,D,x);if(this.homeElementName!=null&&(this.homeElementName===p)){this.home.addPieceOfFurniture$com_eteks_sweethome3d_model_HomePieceOfFurniture(g);var h=(function(E,F){return E[F]===undefined?null:E[F]})(x,"level");if(h!=null){g.setLevel((function(E,F){return E[F]===undefined?null:E[F]})(this.levels,h))}}else{if("furnitureGroup"===p){((function(E){return E[E.length-1]})(this.groupsFurniture).push(g)>0)}}}else{if("wall"===D){var B=this.createWall(D,x);(this.joinedWalls[(function(E,F){return E[F]===undefined?null:E[F]})(x,"id")]=new a.JoinedWall(B,(function(E,F){return E[F]===undefined?null:E[F]})(x,"wallAtStart"),(function(E,F){return E[F]===undefined?null:E[F]})(x,"wallAtEnd")));this.setWallAttributes(B,D,x);this.home.addWall(B);var h=(function(E,F){return E[F]===undefined?null:E[F]})(x,"level");if(h!=null){B.setLevel((function(E,F){return E[F]===undefined?null:E[F]})(this.levels,h))}}else{if("baseboard"===D){var n=this.createBaseboard(D,x);if("leftSideBaseboard"===(function(E,F){return E[F]===undefined?null:E[F]})(x,"attribute")){this.leftSideBaseboard=n}else{this.rightSideBaseboard=n}}else{if("room"===D){var A=this.createRoom(D,x,this.points.slice(0));this.setRoomAttributes(A,D,x);this.home.addRoom$com_eteks_sweethome3d_model_Room(A);var h=(function(E,F){return E[F]===undefined?null:E[F]})(x,"level");if(h!=null){A.setLevel((function(E,F){return E[F]===undefined?null:E[F]})(this.levels,h))}}else{if("polyline"===D){var s=this.createPolyline(D,x,this.points.slice(0));this.setPolylineAttributes(s,D,x);this.home.addPolyline$com_eteks_sweethome3d_model_Polyline(s);var h=(function(E,F){return E[F]===undefined?null:E[F]})(x,"level");if(h!=null){s.setLevel((function(E,F){return E[F]===undefined?null:E[F]})(this.levels,h))}}else{if("dimensionLine"===D){var l=this.createDimensionLine(D,x);this.setDimensionLineAttributes(l,D,x);this.home.addDimensionLine(l);var h=(function(E,F){return E[F]===undefined?null:E[F]})(x,"level");if(h!=null){l.setLevel((function(E,F){return E[F]===undefined?null:E[F]})(this.levels,h))}}else{if("label"===D){var o=this.createLabel(D,x,this.labelText);this.setLabelAttributes(o,D,x);this.home.addLabel(o);var h=(function(E,F){return E[F]===undefined?null:E[F]})(x,"level");if(h!=null){o.setLevel((function(E,F){return E[F]===undefined?null:E[F]})(this.levels,h))}}else{if("text"===D){this.labelText=this.getCharacters()}else{if("textStyle"===D){var r=(function(E,F){return E[F]===undefined?null:E[F]})(x,"attribute");((function(E){return E[E.length-1]})(this.textStyles)[r!=null?r:a.UNIQUE_ATTRIBUTE]=this.createTextStyle(D,x))}else{if("texture"===D){if("material"===p){this.materialTexture=this.createTexture(D,x)}else{var r=(function(E,F){return E[F]===undefined?null:E[F]})(x,"attribute");(this.textures[r!=null?r:a.UNIQUE_ATTRIBUTE]=this.createTexture(D,x))}}else{if("material"===D){(this.materials.push(this.createMaterial(D,x))>0)}else{if("transformation"===D){var f=(function(E,F){return E[F]===undefined?null:E[F]})(x,"matrix");if(f==null){throw new SAXException("Missing attribute matrix")}else{var e=f.split(" ",12);if(e.length<12){throw new SAXException("Missing values for attribute matrix")}try{var v=[[parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])],[parseFloat(e[4]),parseFloat(e[5]),parseFloat(e[6]),parseFloat(e[7])],[parseFloat(e[8]),parseFloat(e[9]),parseFloat(e[10]),parseFloat(e[11])]];var q=new Transformation((function(E,F){return E[F]===undefined?null:E[F]})(x,"name"),v);(this.transformations.push(this.resolveObject(q,D,x))>0)}catch(z){throw new SAXException("Invalid value for attribute matrix",z)}}}else{if("point"===D){(this.points.push([this.parseFloat(x,"x"),this.parseFloat(x,"y")])>0)}else{if("sash"===D){var u=new Sash(this.parseFloat(x,"xAxis"),this.parseFloat(x,"yAxis"),this.parseFloat(x,"width"),this.parseFloat(x,"startAngle"),this.parseFloat(x,"endAngle"));(this.sashes.push(this.resolveObject(u,D,x))>0)}else{if("lightSource"===D){var k=new LightSource(this.parseFloat(x,"x"),this.parseFloat(x,"y"),this.parseFloat(x,"z"),this.parseOptionalColor(x,"color"),this.parseOptionalFloat(x,"diameter"));(this.lightSources.push(this.resolveObject(k,D,x))>0)}else{if("backgroundImage"===D){var d=new BackgroundImage(this.parseContent((function(E,F){return E[F]===undefined?null:E[F]})(x,"image"),null,false),this.parseFloat(x,"scaleDistance"),this.parseFloat(x,"scaleDistanceXStart"),this.parseFloat(x,"scaleDistanceYStart"),this.parseFloat(x,"scaleDistanceXEnd"),this.parseFloat(x,"scaleDistanceYEnd"),(function(E,F){return E[F]===undefined?null:E[F]})(x,"xOrigin")!=null?this.parseFloat(x,"xOrigin"):0,(function(E,F){return E[F]===undefined?null:E[F]})(x,"yOrigin")!=null?this.parseFloat(x,"yOrigin"):0,!("false"===(function(E,F){return E[F]===undefined?null:E[F]})(x,"visible")));d=this.resolveObject(d,D,x);if(this.homeElementName!=null&&(this.homeElementName===p)){this.homeBackgroundImage=d}else{this.backgroundImage=d}}else{if("property"===D){if(this.homeElementName!=null){((function(E){return E[E.length-1]})(this.properties)[(function(E,F){return E[F]===undefined?null:E[F]})(x,"name")]=(function(E,F){return E[F]===undefined?null:E[F]})(x,"value"))}}}}}}}}}}}}}}}}}}}}}}}}}if(!("property"===D)&&!("furnitureVisibleProperty"===D)&&!("textStyle"===D)){this.properties.pop();this.textStyles.pop()}};a.prototype.getCharacters=function(){return this.buffer.str.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};a.prototype.endDocument=function(){var e=(function(i){return Object.keys(i).map(function(j){return i[j]})})(this.joinedWalls);for(var h=0;h<e.length;h++){var f=e[h];var c=f.getWall();if(f.getWallAtStartId()!=null){var d=(function(i,j){return i[j]===undefined?null:i[j]})(this.joinedWalls,f.getWallAtStartId());if(d!=null){c.setWallAtStart(d.getWall())}}if(f.getWallAtEndId()!=null){var g=(function(i,j){return i[j]===undefined?null:i[j]})(this.joinedWalls,f.getWallAtEndId());if(g!=null){c.setWallAtEnd(g.getWall())}}}};a.prototype.resolveObject=function(e,c,d){return e};a.prototype.createHome=function(c,e){var g;if((function(h,i){return h[i]===undefined?null:h[i]})(e,"wallHeight")!=null){g=new Home(this.parseFloat(e,"wallHeight"))}else{g=new Home()}var d=(function(h,i){return h[i]===undefined?null:h[i]})(e,"version");if(d!=null){try{g.setVersion(parseInt(d))}catch(f){throw new SAXException("Invalid value for integer attribute version",f)}}return this.resolveObject(g,c,e)};a.prototype.setHomeAttributes=function(h,k,d){var e=(function(n){var l=[];for(var m in n){l.push({k:m,v:n[m],getKey:function(){return this.k},getValue:function(){return this.v}})}return l})((function(l){return l[l.length-1]})(this.properties));for(var f=0;f<e.length;f++){var j=e[f];h.setProperty(j.getKey(),j.getValue())}if(this.furnitureVisibleProperties.length>0){this.home.setFurnitureVisibleProperties(this.furnitureVisibleProperties)}this.home.setBackgroundImage(this.homeBackgroundImage);h.setName((function(l,n){return l[n]===undefined?null:l[n]})(d,"name"));var i=(function(l,n){return l[n]===undefined?null:l[n]})(d,"selectedLevel");if(i!=null){this.home.setSelectedLevel((function(l,n){return l[n]===undefined?null:l[n]})(this.levels,i))}if("observerCamera"===(function(l,n){return l[n]===undefined?null:l[n]})(d,"camera")){this.home.setCamera(this.home.getObserverCamera())}h.setBasePlanLocked("true"===(function(l,n){return l[n]===undefined?null:l[n]})(d,"basePlanLocked"));var c=(function(l,n){return l[n]===undefined?null:l[n]})(d,"furnitureSortedProperty");if(c!=null){try{h.setFurnitureSortedProperty(c)}catch(g){}}h.setFurnitureDescendingSorted("true"===(function(l,n){return l[n]===undefined?null:l[n]})(d,"furnitureDescendingSorted"));if(d.structure){h.structure=this.parseContent(d.structure,null,false)}};a.prototype.setEnvironmentAttributes=function(t,k,i){this.setProperties(t);var u=this.parseOptionalColor(i,"groundColor");if(u!=null){t.setGroundColor(u)}t.setGroundTexture((function(w,x){return w[x]===undefined?null:w[x]})(this.textures,"groundTexture"));t.setBackgroundImageVisibleOnGround3D("true"===(function(w,x){return w[x]===undefined?null:w[x]})(i,"backgroundImageVisibleOnGround3D"));var r=this.parseOptionalColor(i,"skyColor");if(r!=null){t.setSkyColor(r)}t.setSkyTexture((function(w,x){return w[x]===undefined?null:w[x]})(this.textures,"skyTexture"));var m=this.parseOptionalColor(i,"lightColor");if(m!=null){t.setLightColor(m)}var j=this.parseOptionalFloat(i,"wallsAlpha");if(j!=null){t.setWallsAlpha(j)}t.setAllLevelsVisible("true"===(function(w,x){return w[x]===undefined?null:w[x]})(i,"allLevelsVisible"));t.setObserverCameraElevationAdjusted(!("false"===(function(w,x){return w[x]===undefined?null:w[x]})(i,"observerCameraElevationAdjusted")));var d=this.parseOptionalColor(i,"ceillingLightColor");if(d!=null){t.setCeillingLightColor(d)}var c=(function(w,x){return w[x]===undefined?null:w[x]})(i,"drawingMode");if(c!=null){try{t.setDrawingMode(HomeEnvironment.DrawingMode[c])}catch(p){}}var h=this.parseOptionalFloat(i,"subpartSizeUnderLight");if(h!=null){t.setSubpartSizeUnderLight(h)}var o=this.parseOptionalInteger(i,"photoWidth");if(o!=null){t.setPhotoWidth(o)}var n=this.parseOptionalInteger(i,"photoHeight");if(n!=null){t.setPhotoHeight(n)}var q=(function(w,x){return w[x]===undefined?null:w[x]})(i,"photoAspectRatio");if(q!=null){try{t.setPhotoAspectRatio(AspectRatio[q])}catch(p){}}var v=this.parseOptionalInteger(i,"photoQuality");if(v!=null){t.setPhotoQuality(v)}var f=this.parseOptionalInteger(i,"videoWidth");if(f!=null){t.setVideoWidth(f)}var e=(function(w,x){return w[x]===undefined?null:w[x]})(i,"videoAspectRatio");if(e!=null){try{t.setVideoAspectRatio(AspectRatio[e])}catch(p){}}var s=this.parseOptionalInteger(i,"videoQuality");if(s!=null){t.setVideoQuality(s)}var g=this.parseOptionalFloat(i,"videoSpeed");if(g!=null){t.setVideoSpeed(g)}var l=this.parseOptionalInteger(i,"videoFrameRate");if(l!=null){t.setVideoFrameRate(l)}};a.prototype.createPrint=function(c){var f=HomePrint.PaperOrientation.PORTRAIT;try{if((function(g,h){return g[h]===undefined?null:g[h]})(c,"paperOrientation")==null){throw new SAXException("Missing paperOrientation attribute")}f=HomePrint.PaperOrientation[(function(g,h){return g[h]===undefined?null:g[h]})(c,"paperOrientation")]}catch(e){}var d=new HomePrint(f,this.parseFloat(c,"paperWidth"),this.parseFloat(c,"paperHeight"),this.parseFloat(c,"paperTopMargin"),this.parseFloat(c,"paperLeftMargin"),this.parseFloat(c,"paperBottomMargin"),this.parseFloat(c,"paperRightMargin"),!("false"===(function(g,h){return g[h]===undefined?null:g[h]})(c,"furniturePrinted")),!("false"===(function(g,h){return g[h]===undefined?null:g[h]})(c,"planPrinted")),!("false"===(function(g,h){return g[h]===undefined?null:g[h]})(c,"view3DPrinted")),this.parseOptionalFloat(c,"planScale"),(function(g,h){return g[h]===undefined?null:g[h]})(c,"headerFormat"),(function(g,h){return g[h]===undefined?null:g[h]})(c,"footerFormat"));return this.resolveObject(d,"print",c)};a.prototype.setCompassAttributes=function(g,c,d){this.setProperties(g);g.setX(this.parseOptionalFloat(d,"x"));g.setY(this.parseOptionalFloat(d,"y"));g.setDiameter(this.parseOptionalFloat(d,"diameter"));var f=this.parseOptionalFloat(d,"northDirection");if(f!=null){g.setNorthDirection(f)}var h=this.parseOptionalFloat(d,"longitude");if(h!=null){g.setLongitude(h)}var i=this.parseOptionalFloat(d,"latitude");if(i!=null){g.setLatitude(i)}var e=(function(j,l){return j[l]===undefined?null:j[l]})(d,"timeZone");if(e!=null){g.setTimeZone(e)}g.setVisible(!("false"===(function(j,l){return j[l]===undefined?null:j[l]})(d,"visible")))};a.prototype.createCamera=function(l,f){var c=(function(n,o){return n[o]===undefined?null:n[o]})(f,"id");var k=this.parseFloat(f,"x");var j=this.parseFloat(f,"y");var i=this.parseFloat(f,"z");var e=this.parseFloat(f,"yaw");var d=this.parseFloat(f,"pitch");var g=this.parseFloat(f,"fieldOfView");var h;if("observerCamera"===l){h=c!=null?new ObserverCamera(c,k,j,i,e,d,g):new ObserverCamera(k,j,i,e,d,g)}else{h=c!=null?new Camera(c,k,j,i,e,d,g):new Camera(k,j,i,e,d,g)}return this.resolveObject(h,l,f)};a.prototype.setCameraAttributes=function(g,c,d){this.setProperties(g);if(g!=null&&g instanceof ObserverCamera){g.setFixedSize("true"===(function(i,j){return i[j]===undefined?null:i[j]})(d,"fixedSize"))}var e=(function(i,j){return i[j]===undefined?null:i[j]})(d,"lens");if(e!=null){try{g.setLens(Camera.Lens[e])}catch(f){}}var h=(function(i,j){return i[j]===undefined?null:i[j]})(d,"time");if(h!=null){try{g.setTime(parseInt(h))}catch(f){throw new SAXException("Invalid value for long attribute time",f)}}g.setName((function(i,j){return i[j]===undefined?null:i[j]})(d,"name"))};a.prototype.createLevel=function(d,e){var j=(function(l,n){return l[n]===undefined?null:l[n]})(e,"id");var f=(function(l,n){return l[n]===undefined?null:l[n]})(e,"name");var g=this.parseFloat(e,"elevation");var h=this.parseFloat(e,"floorThickness");var c=this.parseFloat(e,"height");var i=j!=null?new Level(j,f,g,h,c):new Level(f,g,h,c);return this.resolveObject(i,d,e)};a.prototype.setLevelAttributes=function(f,c,e){this.setProperties(f);f.setBackgroundImage(this.backgroundImage);var d=this.parseOptionalInteger(e,"elevationIndex");if(d!=null){f.setElevationIndex(d)}f.setVisible(!("false"===(function(g,h){return g[h]===undefined?null:g[h]})(e,"visible")));f.setViewable(!("false"===(function(g,h){return g[h]===undefined?null:g[h]})(e,"viewable")))};a.prototype.createPieceOfFurniture=function(z,H){var C=(function(S,T){return S[T]===undefined?null:S[T]})(H,"id");var t=(function(S,T){return S[T]===undefined?null:S[T]})(H,"catalogId");var A=(function(S,T){return S[T]===undefined?null:S[T]})(H,"tags")!=null?(function(S,T){return S[T]===undefined?null:S[T]})(H,"tags").split(" "):null;var k=(function(S,T){return S[T]===undefined?null:S[T]})(H,"elevation")!=null?this.parseFloat(H,"elevation"):0;var f=(function(S,T){return S[T]===undefined?null:S[T]})(H,"dropOnTopElevation")!=null?this.parseFloat(H,"dropOnTopElevation"):1;var N=null;if((function(S,T){return S[T]===undefined?null:S[T]})(H,"modelRotation")!=null){var P=(function(S,T){return S[T]===undefined?null:S[T]})(H,"modelRotation").split(" ",9);if(P.length<9){throw new SAXException("Missing values for attribute modelRotation")}try{N=[[parseFloat(P[0]),parseFloat(P[1]),parseFloat(P[2])],[parseFloat(P[3]),parseFloat(P[4]),parseFloat(P[5])],[parseFloat(P[6]),parseFloat(P[7]),parseFloat(P[8])]]}catch(I){throw new SAXException("Invalid value for attribute modelRotation",I)}}var q=(function(S,T){return S[T]===undefined?null:S[T]})(H,"name");var r=(function(S,T){return S[T]===undefined?null:S[T]})(H,"description");var M=(function(S,T){return S[T]===undefined?null:S[T]})(H,"information");var E=this.parseOptionalLong(H,"creationDate");var D=this.parseOptionalFloat(H,"grade");var o=this.parseContent((function(S,T){return S[T]===undefined?null:S[T]})(H,"icon"),t,false);var h=this.parseContent((function(S,T){return S[T]===undefined?null:S[T]})(H,"planIcon"),t,false);var e=this.parseContent((function(S,T){return S[T]===undefined?null:S[T]})(H,"model"),t,false);var c=this.parseFloat(H,"width");var l=this.parseFloat(H,"depth");var d=this.parseFloat(H,"height");var y=!("false"===(function(S,T){return S[T]===undefined?null:S[T]})(H,"movable"));var s="true"===(function(S,T){return S[T]===undefined?null:S[T]})(H,"backFaceShown");var R=this.parseOptionalLong(H,"modelSize");var w=(function(S,T){return S[T]===undefined?null:S[T]})(H,"creator");var F=!("false"===(function(S,T){return S[T]===undefined?null:S[T]})(H,"resizable"));var n=!("false"===(function(S,T){return S[T]===undefined?null:S[T]})(H,"deformable"));var j=!("false"===(function(S,T){return S[T]===undefined?null:S[T]})(H,"texturable"));var B=this.parseOptionalDecimal(H,"price");var g=this.parseOptionalDecimal(H,"valueAddedTaxPercentage");var L=(function(S,T){return S[T]===undefined?null:S[T]})(H,"currency");var u;if(("doorOrWindow"===z)||("true"===(function(S,T){return S[T]===undefined?null:S[T]})(H,"doorOrWindow"))){var Q=(function(S,T){return S[T]===undefined?null:S[T]})(H,"wallThickness")!=null?this.parseFloat(H,"wallThickness"):1;var K=(function(S,T){return S[T]===undefined?null:S[T]})(H,"wallDistance")!=null?this.parseFloat(H,"wallDistance"):0;var x=(function(S,T){return S[T]===undefined?null:S[T]})(H,"cutOutShape");if(x==null&&!("doorOrWindow"===z)){x=PieceOfFurniture.DEFAULT_CUT_OUT_SHAPE}var v="true"===(function(S,T){return S[T]===undefined?null:S[T]})(H,"wallCutOutOnBothSides");var J=!("false"===(function(S,T){return S[T]===undefined?null:S[T]})(H,"widthDepthDeformable"));var O=new CatalogDoorOrWindow(t,q,r,M,A,E,D,o,h,e,c,l,d,k,f,y,x,Q,K,v,J,this.sashes.slice(0),N,s,R,w,F,n,j,B,g,L);u=C!=null?new HomeDoorOrWindow(C,O):new HomeDoorOrWindow(O)}else{var G=(function(S,T){return S[T]===undefined?null:S[T]})(H,"staircaseCutOutShape");var p=!("false"===(function(S,T){return S[T]===undefined?null:S[T]})(H,"horizontallyRotatable"));if("light"===z){var m=new CatalogLight(t,q,r,M,A,E,D,o,h,e,c,l,d,k,f,y,this.lightSources.slice(0),G,N,s,R,w,F,n,j,p,B,g,L);u=C!=null?new HomeLight(C,m):new HomeLight(m)}else{var i=new CatalogPieceOfFurniture(t,q,r,M,A,E,D,o,h,e,c,l,d,k,f,y,G,N,s,R,w,F,n,j,p,B,g,L);u=C!=null?new HomePieceOfFurniture(C,i):new HomePieceOfFurniture(i)}}return this.resolveObject(u,z,H)};a.prototype.createFurnitureGroup=function(c,e,h){var j=(function(l,n){return l[n]===undefined?null:l[n]})(e,"id");var i=(function(l,n){return l[n]===undefined?null:l[n]})(e,"angle")!=null?this.parseFloat(e,"angle"):0;var d="true"===(function(l,n){return l[n]===undefined?null:l[n]})(e,"modelMirrored");var f=(function(l,n){return l[n]===undefined?null:l[n]})(e,"name");var g=j!=null?new HomeFurnitureGroup(j,h,i,d,f):new HomeFurnitureGroup(h,i,d,f);return this.resolveObject(g,c,e)};a.prototype.setPieceOfFurnitureAttributes=function(e,l,j){this.setProperties(e);e.setNameStyle((function(x,y){return x[y]===undefined?null:x[y]})((function(x){return x[x.length-1]})(this.textStyles),"nameStyle"));e.setNameVisible("true"===(function(x,y){return x[y]===undefined?null:x[y]})(j,"nameVisible"));var u=this.parseOptionalFloat(j,"nameAngle");if(u!=null){e.setNameAngle(u)}var s=this.parseOptionalFloat(j,"nameXOffset");if(s!=null){e.setNameXOffset(s)}var d=this.parseOptionalFloat(j,"nameYOffset");if(d!=null){e.setNameYOffset(d)}e.setVisible(!("false"===(function(x,y){return x[y]===undefined?null:x[y]})(j,"visible")));if(!(e!=null&&e instanceof HomeFurnitureGroup)){var n=this.parseOptionalFloat(j,"x");if(n!=null){e.setX(n)}var m=this.parseOptionalFloat(j,"y");if(m!=null){e.setY(m)}var v=this.parseOptionalFloat(j,"angle");if(v!=null){e.setAngle(v)}if(e.isHorizontallyRotatable()){var k=this.parseOptionalFloat(j,"pitch");if(k!=null){e.setPitch(k)}var z=this.parseOptionalFloat(j,"roll");if(z!=null){e.setRoll(z)}}var c=this.parseOptionalFloat(j,"widthInPlan");if(c!=null){e.setWidthInPlan(c)}var f=this.parseOptionalFloat(j,"depthInPlan");if(f!=null){e.setDepthInPlan(f)}var h=this.parseOptionalFloat(j,"heightInPlan");if(h!=null){e.setHeightInPlan(h)}if(this.home.getVersion()<5500||("false"===(function(x,y){return x[y]===undefined?null:x[y]})(j,"modelCenteredAtOrigin"))){e.setModelCenteredAtOrigin((function(x,y){return x[y]===undefined?null:x[y]})(j,"modelRotation")==null)}if(e.isResizable()){e.setModelMirrored("true"===(function(x,y){return x[y]===undefined?null:x[y]})(j,"modelMirrored"))}if(e.isTexturable()){if(this.materials.length>0){e.setModelMaterials(this.materials.slice(0))}var t=this.parseOptionalColor(j,"color");if(t!=null){e.setColor(t)}var p=(function(x,y){return x[y]===undefined?null:x[y]})(this.textures,a.UNIQUE_ATTRIBUTE);if(p!=null){e.setTexture(p)}var r=this.parseOptionalFloat(j,"shininess");if(r!=null){e.setShininess(r)}}if(e.isDeformable()){if(this.transformations.length>0){e.setModelTransformations(this.transformations.slice(0))}}if((e!=null&&e instanceof HomeLight)&&(function(x,y){return x[y]===undefined?null:x[y]})(j,"power")!=null){e.setPower(this.parseFloat(j,"power"))}else{if((e!=null&&e instanceof HomeDoorOrWindow)&&("doorOrWindow"===l)){var q=e;q.setBoundToWall(!("false"===(function(x,y){return x[y]===undefined?null:x[y]})(j,"boundToWall")));var i=this.parseOptionalFloat(j,"wallWidth");if(i!=null){q.setWallWidth(i)}var o=this.parseOptionalFloat(j,"wallLeft");if(o!=null){q.setWallLeft(o)}var w=this.parseOptionalFloat(j,"wallHeight");if(w!=null){q.setWallHeight(w)}var g=this.parseOptionalFloat(j,"wallTop");if(g!=null){q.setWallTop(g)}}}}};a.prototype.createWall=function(k,e){var d=(function(l,n){return l[n]===undefined?null:l[n]})(e,"id");var f=this.parseFloat(e,"xStart");var j=this.parseFloat(e,"yStart");var c=this.parseFloat(e,"xEnd");var i=this.parseFloat(e,"yEnd");var h=this.parseFloat(e,"thickness");var g=d!=null?new Wall(d,f,j,c,i,h,0):new Wall(f,j,c,i,h,0);return this.resolveObject(g,k,e)};a.prototype.setWallAttributes=function(d,c,f){this.setProperties(d);d.setLeftSideBaseboard(this.leftSideBaseboard);d.setRightSideBaseboard(this.rightSideBaseboard);d.setHeight(this.parseOptionalFloat(f,"height"));d.setHeightAtEnd(this.parseOptionalFloat(f,"heightAtEnd"));d.setArcExtent(this.parseOptionalFloat(f,"arcExtent"));d.setTopColor(this.parseOptionalColor(f,"topColor"));d.setLeftSideColor(this.parseOptionalColor(f,"leftSideColor"));d.setLeftSideTexture((function(j,l){return j[l]===undefined?null:j[l]})(this.textures,"leftSideTexture"));var e=this.parseOptionalFloat(f,"leftSideShininess");if(e!=null){d.setLeftSideShininess(e)}d.setRightSideColor(this.parseOptionalColor(f,"rightSideColor"));d.setRightSideTexture((function(j,l){return j[l]===undefined?null:j[l]})(this.textures,"rightSideTexture"));var i=this.parseOptionalFloat(f,"rightSideShininess");if(i!=null){d.setRightSideShininess(i)}var h=(function(j,l){return j[l]===undefined?null:j[l]})(f,"pattern");if(h!=null){try{d.setPattern(this.preferences.getPatternsCatalog().getPattern$java_lang_String(h))}catch(g){}}};a.prototype.createRoom=function(c,d,e){var g=(function(h,i){return h[i]===undefined?null:h[i]})(d,"id");var f=g!=null?new Room(g,e):new Room(e);return this.resolveObject(f,c,d)};a.prototype.setRoomAttributes=function(c,m,f){this.setProperties(c);c.setNameStyle((function(n,o){return n[o]===undefined?null:n[o]})((function(n){return n[n.length-1]})(this.textStyles),"nameStyle"));c.setAreaStyle((function(n,o){return n[o]===undefined?null:n[o]})((function(n){return n[n.length-1]})(this.textStyles),"areaStyle"));c.setName((function(n,o){return n[o]===undefined?null:n[o]})(f,"name"));var e=this.parseOptionalFloat(f,"nameAngle");if(e!=null){c.setNameAngle(e)}var d=this.parseOptionalFloat(f,"nameXOffset");if(d!=null){c.setNameXOffset(d)}var j=this.parseOptionalFloat(f,"nameYOffset");if(j!=null){c.setNameYOffset(j)}c.setAreaVisible("true"===(function(n,o){return n[o]===undefined?null:n[o]})(f,"areaVisible"));var k=this.parseOptionalFloat(f,"areaAngle");if(k!=null){c.setAreaAngle(k)}var l=this.parseOptionalFloat(f,"areaXOffset");if(l!=null){c.setAreaXOffset(l)}var g=this.parseOptionalFloat(f,"areaYOffset");if(g!=null){c.setAreaYOffset(g)}c.setFloorVisible(!("false"===(function(n,o){return n[o]===undefined?null:n[o]})(f,"floorVisible")));c.setFloorColor(this.parseOptionalColor(f,"floorColor"));c.setFloorTexture((function(n,o){return n[o]===undefined?null:n[o]})(this.textures,"floorTexture"));var h=this.parseOptionalFloat(f,"floorShininess");if(h!=null){c.setFloorShininess(h)}c.setCeilingVisible(!("false"===(function(n,o){return n[o]===undefined?null:n[o]})(f,"ceilingVisible")));c.setCeilingColor(this.parseOptionalColor(f,"ceilingColor"));c.setCeilingTexture((function(n,o){return n[o]===undefined?null:n[o]})(this.textures,"ceilingTexture"));var i=this.parseOptionalFloat(f,"ceilingShininess");if(i!=null){c.setCeilingShininess(i)}};a.prototype.createPolyline=function(c,e,f){var g=(function(h,i){return h[i]===undefined?null:h[i]})(e,"id");var d=g!=null?new Polyline(g,f):new Polyline(f);return this.resolveObject(d,c,e)};a.prototype.setPolylineAttributes=function(o,t,g){this.setProperties(o);var n=this.parseOptionalFloat(g,"thickness");if(n!=null){o.setThickness(n)}var r=(function(i,u){return i[u]===undefined?null:i[u]})(g,"capStyle");if(r!=null){try{o.setCapStyle(Polyline.CapStyle[r])}catch(m){}}var j=(function(i,u){return i[u]===undefined?null:i[u]})(g,"joinStyle");if(j!=null){try{o.setJoinStyle(Polyline.JoinStyle[j])}catch(m){}}var s=(function(i,u){return i[u]===undefined?null:i[u]})(g,"dashStyle");if(s!=null){try{o.setDashStyle(Polyline.DashStyle[s])}catch(m){}}var c=(function(i,u){return i[u]===undefined?null:i[u]})(g,"dashPattern");if(c!=null){try{var p=c.split(" ");var l=(function(u){var i=[];while(u-->0){i.push(0)}return i})(p.length);for(var h=0;h<p.length;h++){l[h]=parseFloat(p[h])}o.setDashPattern(l)}catch(m){throw new SAXException("Invalid value for dash pattern",m)}}var f=this.parseOptionalFloat(g,"dashOffset");if(f!=null){o.setDashOffset(f)}var k=(function(i,u){return i[u]===undefined?null:i[u]})(g,"startArrowStyle");if(k!=null){try{o.setStartArrowStyle(Polyline.ArrowStyle[k])}catch(m){}}var d=(function(i,u){return i[u]===undefined?null:i[u]})(g,"endArrowStyle");if(d!=null){try{o.setEndArrowStyle(Polyline.ArrowStyle[d])}catch(m){}}var q=this.parseOptionalFloat(g,"elevation");if(q!=null){o.setVisibleIn3D(true);o.setElevation(q)}var e=this.parseOptionalColor(g,"color");if(e!=null){o.setColor(e)}o.setClosedPath("true"===(function(i,u){return i[u]===undefined?null:i[u]})(g,"closedPath"))};a.prototype.createDimensionLine=function(k,f){var d=(function(l,n){return l[n]===undefined?null:l[n]})(f,"id");var g=this.parseFloat(f,"xStart");var j=this.parseFloat(f,"yStart");var c=this.parseFloat(f,"xEnd");var i=this.parseFloat(f,"yEnd");var e=this.parseFloat(f,"offset");var h=d!=null?new DimensionLine(d,g,j,c,i,e):new DimensionLine(g,j,c,i,e);return this.resolveObject(h,k,f)};a.prototype.setDimensionLineAttributes=function(d,c,e){this.setProperties(d);d.setLengthStyle((function(f,g){return f[g]===undefined?null:f[g]})((function(f){return f[f.length-1]})(this.textStyles),"lengthStyle"))};a.prototype.createLabel=function(d,e,g){var i=(function(j,l){return j[l]===undefined?null:j[l]})(e,"id");var c=this.parseFloat(e,"x");var h=this.parseFloat(e,"y");var f=i!=null?new Label(i,g,c,h):new Label(g,c,h);return this.resolveObject(f,d,e)};a.prototype.setLabelAttributes=function(e,c,d){this.setProperties(e);e.setStyle((function(i,j){return i[j]===undefined?null:i[j]})((function(i){return i[i.length-1]})(this.textStyles),a.UNIQUE_ATTRIBUTE));var h=this.parseOptionalFloat(d,"angle");if(h!=null){e.setAngle(h)}var f=this.parseOptionalFloat(d,"elevation");if(f!=null){e.setElevation(f)}var g=this.parseOptionalFloat(d,"pitch");if(g!=null){e.setPitch(g)}e.setColor(this.parseOptionalColor(d,"color"));e.setOutlineColor(this.parseOptionalColor(d,"outlineColor"))};a.prototype.createBaseboard=function(c,d){var e=Baseboard.getInstance(this.parseFloat(d,"thickness"),this.parseFloat(d,"height"),this.parseOptionalColor(d,"color"),(function(f,g){return f[g]===undefined?null:f[g]})(this.textures,a.UNIQUE_ATTRIBUTE));return this.resolveObject(e,c,d)};a.prototype.createTextStyle=function(c,d){var h=TextStyle.Alignment.CENTER;var f=(function(i,j){return i[j]===undefined?null:i[j]})(d,"alignment");if(f!=null){try{h=TextStyle.Alignment[f]}catch(e){}}var g=new TextStyle((function(i,j){return i[j]===undefined?null:i[j]})(d,"fontName"),this.parseFloat(d,"fontSize"),"true"===(function(i,j){return i[j]===undefined?null:i[j]})(d,"bold"),"true"===(function(i,j){return i[j]===undefined?null:i[j]})(d,"italic"),h);return this.resolveObject(g,c,d)};a.prototype.createTexture=function(c,d){var f=(function(g,h){return g[h]===undefined?null:g[h]})(d,"catalogId");var e=new HomeTexture(new CatalogTexture(f,(function(g,h){return g[h]===undefined?null:g[h]})(d,"name"),this.parseContent((function(g,h){return g[h]===undefined?null:g[h]})(d,"image"),f,true),this.parseFloat(d,"width"),this.parseFloat(d,"height"),(function(g,h){return g[h]===undefined?null:g[h]})(d,"creator")),(function(g,h){return g[h]===undefined?null:g[h]})(d,"xOffset")!=null?this.parseFloat(d,"xOffset"):0,(function(g,h){return g[h]===undefined?null:g[h]})(d,"yOffset")!=null?this.parseFloat(d,"yOffset"):0,(function(g,h){return g[h]===undefined?null:g[h]})(d,"angle")!=null?this.parseFloat(d,"angle"):0,(function(g,h){return g[h]===undefined?null:g[h]})(d,"scale")!=null?this.parseFloat(d,"scale"):1,!("false"===(function(g,h){return g[h]===undefined?null:g[h]})(d,"leftToRightOriented")));return this.resolveObject(e,c,d)};a.prototype.createMaterial=function(c,d){var e=new HomeMaterial((function(f,g){return f[g]===undefined?null:f[g]})(d,"name"),(function(f,g){return f[g]===undefined?null:f[g]})(d,"key"),this.parseOptionalColor(d,"color"),this.materialTexture,this.parseOptionalFloat(d,"shininess"));return this.resolveObject(e,c,d)};a.prototype.setProperties=function(d){var c=(function(i){var g=[];for(var h in i){g.push({k:h,v:i[h],getKey:function(){return this.k},getValue:function(){return this.v}})}return g})((function(g){return g[g.length-1]})(this.properties));for(var e=0;e<c.length;e++){var f=c[e];d.setProperty(f.getKey(),f.getValue())}};a.prototype.parseOptionalColor=function(d,e){var c=(function(g,h){return g[h]===undefined?null:g[h]})(d,e);if(c!=null){try{return(parseInt(c,16)|0)}catch(f){throw new SAXException("Invalid value for color attribute "+e,f)}}else{return null}};a.prototype.parseOptionalInteger=function(c,d){var f=(function(g,h){return g[h]===undefined?null:g[h]})(c,d);if(f!=null){try{return parseInt(f)}catch(e){throw new SAXException("Invalid value for integer attribute "+d,e)}}else{return null}};a.prototype.parseOptionalLong=function(c,d){var f=(function(g,h){return g[h]===undefined?null:g[h]})(c,d);if(f!=null){try{return parseInt(f)}catch(e){throw new SAXException("Invalid value for long attribute "+d,e)}}else{return null}};a.prototype.parseOptionalDecimal=function(c,d){var f=(function(g,h){return g[h]===undefined?null:g[h]})(c,d);if(f!=null){try{return new Big(f)}catch(e){throw new SAXException("Invalid value for decimal attribute "+d,e)}}else{return null}};a.prototype.parseOptionalFloat=function(c,d){var f=(function(g,h){return g[h]===undefined?null:g[h]})(c,d);if(f!=null){try{return parseFloat(f)}catch(e){throw new SAXException("Invalid value for float attribute "+d,e)}}else{return null}};a.prototype.parseFloat=function(c,d){var f=(function(g,h){return g[h]===undefined?null:g[h]})(c,d);if(f!=null){try{return parseFloat(f)}catch(e){throw new SAXException("Invalid value for float attribute "+d,e)}}else{throw new SAXException("Missing float attribute "+d)}};a.prototype.parseContent=function(c,e,d){if(c==null){return null}else{if(c.indexOf("://")>=0){return new URLContent(c)}else{return new HomeURLContent("jar:"+this["homeUrl"]+"!/"+c)}}};a.prototype.setHome=function(c){this.home=c;this.homeElementName=(function(d){return d[d.length-1]})(this.elements)};a.prototype.getHome=function(){return this.home};a.UNIQUE_ATTRIBUTE="@&unique&@";return a}(DefaultHandler));HomeXMLHandler.__class="com.eteks.sweethome3d.io.HomeXMLHandler";HomeXMLHandler.__interfaces=["org.xml.sax.ErrorHandler","org.xml.sax.DTDHandler","org.xml.sax.ContentHandler","org.xml.sax.EntityResolver"];(function(b){var a=(function(){function c(d,f,e){if(this.wall===undefined){this.wall=null}if(this.wallAtStartId===undefined){this.wallAtStartId=null}if(this.wallAtEndId===undefined){this.wallAtEndId=null}this.wall=d;this.wallAtStartId=f;this.wallAtEndId=e}c.prototype.getWall=function(){return this.wall};c.prototype.getWallAtStartId=function(){return this.wallAtStartId};c.prototype.getWallAtEndId=function(){return this.wallAtEndId};return c}());b.JoinedWall=a;a.__class="com.eteks.sweethome3d.io.HomeXMLHandler.JoinedWall"})(HomeXMLHandler||(HomeXMLHandler={}));var PatternsCatalog=(function(){function a(b){if(this.patterns===undefined){this.patterns=null}this.patterns=(b.slice(0))}a.prototype.getPatterns=function(){return this.patterns.slice(0)};a.prototype.getPatternsCount=function(){return this.patterns.length};a.prototype.getPattern$int=function(b){return this.patterns[b]};a.prototype.getPattern$java_lang_String=function(b){for(var c=0;c<this.patterns.length;c++){var d=this.patterns[c];if(b===d.getName()){return d}}throw new IllegalArgumentException("No pattern with name "+b)};a.prototype.getPattern=function(b){if(((typeof b==="string")||b===null)){return this.getPattern$java_lang_String(b)}else{if(((typeof b==="number")||b===null)){return this.getPattern$int(b)}else{throw new Error("invalid overload")}}};return a}());PatternsCatalog.__class="com.eteks.sweethome3d.model.PatternsCatalog";var HomePrint=(function(){function a(b,g,k,l,n,c,h,m,f,j,e,d,i){if(this.paperOrientation===undefined){this.paperOrientation=null}if(this.paperWidth===undefined){this.paperWidth=0}if(this.paperHeight===undefined){this.paperHeight=0}if(this.paperTopMargin===undefined){this.paperTopMargin=0}if(this.paperLeftMargin===undefined){this.paperLeftMargin=0}if(this.paperBottomMargin===undefined){this.paperBottomMargin=0}if(this.paperRightMargin===undefined){this.paperRightMargin=0}if(this.furniturePrinted===undefined){this.furniturePrinted=false}if(this.planPrinted===undefined){this.planPrinted=false}if(this.view3DPrinted===undefined){this.view3DPrinted=false}if(this.planScale===undefined){this.planScale=null}if(this.headerFormat===undefined){this.headerFormat=null}if(this.footerFormat===undefined){this.footerFormat=null}this.paperOrientation=b;this.paperWidth=g;this.paperHeight=k;this.paperTopMargin=l;this.paperLeftMargin=n;this.paperBottomMargin=c;this.paperRightMargin=h;this.furniturePrinted=m;this.planPrinted=f;this.view3DPrinted=j;this.planScale=e;this.headerFormat=d;this.footerFormat=i}a.prototype.getPaperOrientation=function(){return this.paperOrientation};a.prototype.getPaperBottomMargin=function(){return this.paperBottomMargin};a.prototype.getPaperHeight=function(){return this.paperHeight};a.prototype.getPaperLeftMargin=function(){return this.paperLeftMargin};a.prototype.getPaperRightMargin=function(){return this.paperRightMargin};a.prototype.getPaperTopMargin=function(){return this.paperTopMargin};a.prototype.getPaperWidth=function(){return this.paperWidth};a.prototype.isFurniturePrinted=function(){return this.furniturePrinted};a.prototype.isPlanPrinted=function(){return this.planPrinted};a.prototype.isView3DPrinted=function(){return this.view3DPrinted};a.prototype.getPlanScale=function(){return this.planScale};a.prototype.getHeaderFormat=function(){return this.headerFormat};a.prototype.getFooterFormat=function(){return this.footerFormat};return a}());HomePrint.__class="com.eteks.sweethome3d.model.HomePrint";HomePrint.__interfaces=["java.io.Serializable"];(function(a){var b;(function(c){c[c.PORTRAIT=0]="PORTRAIT";c[c.LANDSCAPE=1]="LANDSCAPE";c[c.REVERSE_LANDSCAPE=2]="REVERSE_LANDSCAPE"})(b=a.PaperOrientation||(a.PaperOrientation={}))})(HomePrint||(HomePrint={}));var TexturesCategory=(function(){function a(b){if(this.name===undefined){this.name=null}if(this.textures===undefined){this.textures=null}this.name=b;this.textures=([])}a.COMPARATOR_$LI$=function(){if(a.COMPARATOR==null){a.COMPARATOR={compare:function(c,b){return c.toString().localeCompare(b.toString())},equals:function(c,b){return c.toString().localeCompare(b.toString())===0}}}return a.COMPARATOR};a.prototype.getName=function(){return this.name};a.prototype.getTextures=function(){return this.textures.slice(0)};a.prototype.getTexturesCount=function(){return this.textures.length};a.prototype.getTexture=function(b){return this.textures[b]};a.prototype.getIndexOfTexture=function(b){return this.textures.indexOf(b)};a.prototype.add=function(c){c.setCategory(this);var b=(function(e,h){var f=function(m,l){if(m.compareTo){return m.compareTo(l)}else{return m.localeCompare(l)}};var d=0;var j=e.length-1;while(d<=j){var g=(d+j)>>>1;var k=e[g];var i=f(k,h);if(i<0){d=g+1}else{if(i>0){j=g-1}else{return g}}}return -(d+1)})(this.textures,c);if(b<0){b=-b-1}this.textures.splice(b,0,c)};a.prototype["delete"]=function(b){var c=this.textures.indexOf(b);if(c===-1){throw new IllegalArgumentException(this.name+" doesn't contain texture "+b.getName())}this.textures=(this.textures.slice(0));this.textures.splice(c,1)[0]};a.prototype.equals=function(b){return(b!=null&&b instanceof a)&&a.COMPARATOR_$LI$().equals(this.name,b.name)};a.prototype.hashCode=function(){return(function(b){if(b.hashCode){return b.hashCode()}else{return b.toString().split("").reduce(function(c,d){return(((c<<5)-c)+d.charCodeAt(0))|0},0)}})(this.name)};a.prototype.compareTo=function(b){return a.COMPARATOR_$LI$().compare(this.name,b.name)};return a}());TexturesCategory.__class="com.eteks.sweethome3d.model.TexturesCategory";TexturesCategory.__interfaces=["java.lang.Comparable"];var CatalogTexture=(function(){function a(t,B,r,v,q,k,w){if(((typeof t==="string")||t===null)&&((typeof B==="string")||B===null)&&((r!=null&&(r.constructor!=null&&r.constructor.__interfaces!=null&&r.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||r===null)&&((typeof v==="number")||v===null)&&((typeof q==="number")||q===null)&&((typeof k==="string")||k===null)&&((typeof w==="boolean")||w===null)){var j=arguments;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.creator===undefined){this.creator=null}if(this.modifiable===undefined){this.modifiable=false}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}this.id=t;this.name=B;this.image=r;this.width=v;this.height=q;this.creator=k;this.modifiable=w}else{if(((typeof t==="string")||t===null)&&((typeof B==="string")||B===null)&&((r!=null&&(r.constructor!=null&&r.constructor.__interfaces!=null&&r.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||r===null)&&((typeof v==="number")||v===null)&&((typeof q==="number")||q===null)&&((typeof k==="string")||k===null)&&w===undefined){var j=arguments;var f=arguments;var u=false;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.creator===undefined){this.creator=null}if(this.modifiable===undefined){this.modifiable=false}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}this.id=t;this.name=B;this.image=r;this.width=v;this.height=q;this.creator=k;this.modifiable=u;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.creator===undefined){this.creator=null}if(this.modifiable===undefined){this.modifiable=false}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}}else{if(((typeof t==="string")||t===null)&&((B!=null&&(B.constructor!=null&&B.constructor.__interfaces!=null&&B.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||B===null)&&((typeof r==="number")||r===null)&&((typeof v==="number")||v===null)&&((typeof q==="boolean")||q===null)&&k===undefined&&w===undefined){var j=arguments;var y=j[0];var n=j[1];var o=j[2];var A=j[3];var s=j[4];var d=arguments;var g=null;var i=null;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.creator===undefined){this.creator=null}if(this.modifiable===undefined){this.modifiable=false}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}this.id=g;this.name=y;this.image=n;this.width=o;this.height=A;this.creator=i;this.modifiable=s;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.creator===undefined){this.creator=null}if(this.modifiable===undefined){this.modifiable=false}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}}else{if(((typeof t==="string")||t===null)&&((B!=null&&(B.constructor!=null&&B.constructor.__interfaces!=null&&B.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||B===null)&&((typeof r==="number")||r===null)&&((typeof v==="number")||v===null)&&q===undefined&&k===undefined&&w===undefined){var j=arguments;var x=j[0];var l=j[1];var m=j[2];var z=j[3];var c=arguments;var e=null;var h=null;var b=arguments;var p=false;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.creator===undefined){this.creator=null}if(this.modifiable===undefined){this.modifiable=false}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}this.id=e;this.name=x;this.image=l;this.width=m;this.height=z;this.creator=h;this.modifiable=p;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.creator===undefined){this.creator=null}if(this.modifiable===undefined){this.modifiable=false}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.creator===undefined){this.creator=null}if(this.modifiable===undefined){this.modifiable=false}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}}else{throw new Error("invalid overload")}}}}}a.__static_initialize=function(){if(!a.__static_initialized){a.__static_initialized=true;a.__static_initializer_0()}};a.EMPTY_CRITERIA_$LI$=function(){a.__static_initialize();if(a.EMPTY_CRITERIA==null){a.EMPTY_CRITERIA=[]}return a.EMPTY_CRITERIA};a.COMPARATOR_$LI$=function(){a.__static_initialize();return a.COMPARATOR};a.recentFilters_$LI$=function(){a.__static_initialize();return a.recentFilters};a.__static_initializer_0=function(){a.COMPARATOR={compare:function(c,b){return c.toString().localeCompare(b.toString())},equals:function(c,b){return c.toString().localeCompare(b.toString())===0}};a.COMPARATOR_$LI$();a.recentFilters=({})};a.prototype.getId=function(){return this.id};a.prototype.getName=function(){return this.name};a.prototype.getImage=function(){return this.image};a.prototype.getIcon=function(){return this.getImage()};a.prototype.getWidth=function(){return this.width};a.prototype.getHeight=function(){return this.height};a.prototype.getCreator=function(){return this.creator};a.prototype.isModifiable=function(){return this.modifiable};a.prototype.getCategory=function(){return this.category};a.prototype.setCategory=function(b){this.category=b};a.prototype.equals=function(b){return(function(d,c){if(d&&d.equals){return d.equals(c)}else{return d===c}})(this,b)};a.prototype.hashCode=function(){return(function(b){if(b.hashCode){return b.hashCode()}else{return b.toString().split("").reduce(function(c,d){return(((c<<5)-c)+d.charCodeAt(0))|0},0)}})(this)};a.prototype.compareTo=function(c){var b=a.COMPARATOR_$LI$().compare(this.name,c.name);if(b!==0){return b}else{return this.modifiable===c.modifiable?0:(this.modifiable?1:-1)}};a.prototype.matchesFilter=function(d){var e=this.getFilterCollationKeys(d);var f=0;if(e.length>0){var b=this.getTextureCollationKey();for(var c=0;c<e.length;c++){if(this.isSubCollationKey(b,e[c],0)){f++}else{break}}}return f===e.length};a.prototype.getFilterCollationKeys=function(d){if(d.length===0){return a.EMPTY_CRITERIA_$LI$()}var c=(function(h,i){return h[i]===undefined?null:h[i]})(a.recentFilters_$LI$(),d);if(c==null){var g=d.split("\\s|\\p{Punct}|\\|");var f=([]);for(var b=0;b<g.length;b++){var e=g[b];if(e.length>0){(f.push(a.COMPARATOR_$LI$().getCollationKey(e).toByteArray())>0)}}if(f.length===0){c=a.EMPTY_CRITERIA_$LI$()}else{c=f.slice(0)}(a.recentFilters_$LI$()[d]=c)}return c};a.prototype.getTextureCollationKey=function(){var c=this;if(this.filterCollationKey==null){var b={str:"",toString:function(){return this.str}};(function(d){d.str=d.str.concat(c.getName());return d})(b);(function(d){d.str=d.str.concat("|");return d})(b);if(this.getCategory()!=null){(function(d){d.str=d.str.concat(c.getCategory().getName());return d})(b);(function(d){d.str=d.str.concat("|");return d})(b)}if(this.getCreator()!=null){(function(d){d.str=d.str.concat(c.getCreator());return d})(b);(function(d){d.str=d.str.concat("|");return d})(b)}this.filterCollationKey=a.COMPARATOR_$LI$().getCollationKey(b.str).toByteArray()}return this.filterCollationKey};a.prototype.isSubCollationKey=function(e,h,g){for(var d=g,f=e.length-4,b=h.length-4;d<f&&d<f-b+1;d++){if(e[d]===h[0]){for(var c=1;c<b;c++){if(e[d+c]!==h[c]){return this.isSubCollationKey(e,h,d+1)}}return true}}return false};a.__static_initialized=false;return a}());CatalogTexture.__class="com.eteks.sweethome3d.model.CatalogTexture";CatalogTexture.__interfaces=["com.eteks.sweethome3d.model.CatalogItem","java.lang.Comparable","com.eteks.sweethome3d.model.TextureImage","java.io.Serializable"];var Transformation=(function(){function a(c,b){if(this.name===undefined){this.name=null}if(this.matrix===undefined){this.matrix=null}this.name=c;this.matrix=b}a.prototype.getName=function(){return this.name};a.prototype.getMatrix=function(){return[[this.matrix[0][0],this.matrix[0][1],this.matrix[0][2],this.matrix[0][3]],[this.matrix[1][0],this.matrix[1][1],this.matrix[1][2],this.matrix[1][3]],[this.matrix[2][0],this.matrix[2][1],this.matrix[2][2],this.matrix[2][3]]]};a.prototype.equals=function(c){if(c!=null&&c instanceof a){var e=c;if(e.name===this.name){for(var d=0;d<this.matrix.length;d++){for(var b=0;b<this.matrix[d].length;b++){if(e.matrix[d][b]!==this.matrix[d][b]){return false}}}return true}}return false};a.prototype.hashCode=function(){return(function(b){if(b.hashCode){return b.hashCode()}else{return b.toString().split("").reduce(function(c,d){return(((c<<5)-c)+d.charCodeAt(0))|0},0)}})(this.name)+(function(c){function b(g){if(g==null){return 0}var d=1;for(var e=0;e<g.length;e++){var f=1;if(Array.isArray(g[e])){f=b(g[e])}else{if(typeof g[e]=="number"){f=(g[e]*1000)|0}}d=31*d+f}return d}return b})(this.matrix)};return a}());Transformation.__class="com.eteks.sweethome3d.model.Transformation";Transformation.__interfaces=["java.io.Serializable"];var LightSource=(function(){function a(c,i,h,d,e){if(((typeof c==="number")||c===null)&&((typeof i==="number")||i===null)&&((typeof h==="number")||h===null)&&((typeof d==="number")||d===null)&&((typeof e==="number")||e===null)){var g=arguments;if(this.x===undefined){this.x=0}if(this.y===undefined){this.y=0}if(this.z===undefined){this.z=0}if(this.color===undefined){this.color=0}if(this.diameter===undefined){this.diameter=null}this.x=c;this.y=i;this.z=h;this.color=d;this.diameter=e}else{if(((typeof c==="number")||c===null)&&((typeof i==="number")||i===null)&&((typeof h==="number")||h===null)&&((typeof d==="number")||d===null)&&e===undefined){var g=arguments;var b=arguments;var f=null;if(this.x===undefined){this.x=0}if(this.y===undefined){this.y=0}if(this.z===undefined){this.z=0}if(this.color===undefined){this.color=0}if(this.diameter===undefined){this.diameter=null}this.x=c;this.y=i;this.z=h;this.color=d;this.diameter=f;if(this.x===undefined){this.x=0}if(this.y===undefined){this.y=0}if(this.z===undefined){this.z=0}if(this.color===undefined){this.color=0}if(this.diameter===undefined){this.diameter=null}}else{throw new Error("invalid overload")}}}a.prototype.getX=function(){return this.x};a.prototype.getY=function(){return this.y};a.prototype.getZ=function(){return this.z};a.prototype.getColor=function(){return this.color};a.prototype.getDiameter=function(){return this.diameter};return a}());LightSource.__class="com.eteks.sweethome3d.model.LightSource";LightSource.__interfaces=["java.io.Serializable"];var TextStyle=(function(){function a(x,i,B,q,u,v){if(((typeof x==="string")||x===null)&&((typeof i==="number")||i===null)&&((typeof B==="boolean")||B===null)&&((typeof q==="boolean")||q===null)&&((typeof u==="number")||u===null)&&((typeof v==="boolean")||v===null)){var t=arguments;if(this.fontName===undefined){this.fontName=null}if(this.fontSize===undefined){this.fontSize=0}if(this.bold===undefined){this.bold=false}if(this.italic===undefined){this.italic=false}if(this.alignment===undefined){this.alignment=null}this.fontName=x;this.fontSize=i;this.bold=B;this.italic=q;this.alignment=u;if(v){(a.textStylesCache_$LI$().push(this)>0)}}else{if(((typeof x==="string")||x===null)&&((typeof i==="number")||i===null)&&((typeof B==="boolean")||B===null)&&((typeof q==="boolean")||q===null)&&((typeof u==="number")||u===null)&&v===undefined){var t=arguments;var f=arguments;var A=true;if(this.fontName===undefined){this.fontName=null}if(this.fontSize===undefined){this.fontSize=0}if(this.bold===undefined){this.bold=false}if(this.italic===undefined){this.italic=false}if(this.alignment===undefined){this.alignment=null}this.fontName=x;this.fontSize=i;this.bold=B;this.italic=q;this.alignment=u;if(A){(a.textStylesCache_$LI$().push(this)>0)}if(this.fontName===undefined){this.fontName=null}if(this.fontSize===undefined){this.fontSize=0}if(this.bold===undefined){this.bold=false}if(this.italic===undefined){this.italic=false}if(this.alignment===undefined){this.alignment=null}}else{if(((typeof x==="string")||x===null)&&((typeof i==="number")||i===null)&&((typeof B==="boolean")||B===null)&&((typeof q==="boolean")||q===null)&&u===undefined&&v===undefined){var t=arguments;var d=arguments;var G=a.Alignment.CENTER;var b=arguments;var z=true;if(this.fontName===undefined){this.fontName=null}if(this.fontSize===undefined){this.fontSize=0}if(this.bold===undefined){this.bold=false}if(this.italic===undefined){this.italic=false}if(this.alignment===undefined){this.alignment=null}this.fontName=x;this.fontSize=i;this.bold=B;this.italic=q;this.alignment=G;if(z){(a.textStylesCache_$LI$().push(this)>0)}if(this.fontName===undefined){this.fontName=null}if(this.fontSize===undefined){this.fontSize=0}if(this.bold===undefined){this.bold=false}if(this.italic===undefined){this.italic=false}if(this.alignment===undefined){this.alignment=null}if(this.fontName===undefined){this.fontName=null}if(this.fontSize===undefined){this.fontSize=0}if(this.bold===undefined){this.bold=false}if(this.italic===undefined){this.italic=false}if(this.alignment===undefined){this.alignment=null}}else{if(((typeof x==="number")||x===null)&&((typeof i==="boolean")||i===null)&&((typeof B==="boolean")||B===null)&&q===undefined&&u===undefined&&v===undefined){var t=arguments;var r=t[0];var j=t[1];var g=t[2];var s=arguments;var F=null;var p=arguments;var E=a.Alignment.CENTER;var o=arguments;var y=true;if(this.fontName===undefined){this.fontName=null}if(this.fontSize===undefined){this.fontSize=0}if(this.bold===undefined){this.bold=false}if(this.italic===undefined){this.italic=false}if(this.alignment===undefined){this.alignment=null}this.fontName=F;this.fontSize=r;this.bold=j;this.italic=g;this.alignment=E;if(y){(a.textStylesCache_$LI$().push(this)>0)}if(this.fontName===undefined){this.fontName=null}if(this.fontSize===undefined){this.fontSize=0}if(this.bold===undefined){this.bold=false}if(this.italic===undefined){this.italic=false}if(this.alignment===undefined){this.alignment=null}if(this.fontName===undefined){this.fontName=null}if(this.fontSize===undefined){this.fontSize=0}if(this.bold===undefined){this.bold=false}if(this.italic===undefined){this.italic=false}if(this.alignment===undefined){this.alignment=null}if(this.fontName===undefined){this.fontName=null}if(this.fontSize===undefined){this.fontSize=0}if(this.bold===undefined){this.bold=false}if(this.italic===undefined){this.italic=false}if(this.alignment===undefined){this.alignment=null}}else{if(((typeof x==="number")||x===null)&&i===undefined&&B===undefined&&q===undefined&&u===undefined&&v===undefined){var t=arguments;var n=t[0];var m=arguments;var e=false;var c=false;var l=arguments;var D=null;var k=arguments;var C=a.Alignment.CENTER;var h=arguments;var w=true;if(this.fontName===undefined){this.fontName=null}if(this.fontSize===undefined){this.fontSize=0}if(this.bold===undefined){this.bold=false}if(this.italic===undefined){this.italic=false}if(this.alignment===undefined){this.alignment=null}this.fontName=D;this.fontSize=n;this.bold=e;this.italic=c;this.alignment=C;if(w){(a.textStylesCache_$LI$().push(this)>0)}if(this.fontName===undefined){this.fontName=null}if(this.fontSize===undefined){this.fontSize=0}if(this.bold===undefined){this.bold=false}if(this.italic===undefined){this.italic=false}if(this.alignment===undefined){this.alignment=null}if(this.fontName===undefined){this.fontName=null}if(this.fontSize===undefined){this.fontSize=0}if(this.bold===undefined){this.bold=false}if(this.italic===undefined){this.italic=false}if(this.alignment===undefined){this.alignment=null}if(this.fontName===undefined){this.fontName=null}if(this.fontSize===undefined){this.fontSize=0}if(this.bold===undefined){this.bold=false}if(this.italic===undefined){this.italic=false}if(this.alignment===undefined){this.alignment=null}if(this.fontName===undefined){this.fontName=null}if(this.fontSize===undefined){this.fontSize=0}if(this.bold===undefined){this.bold=false}if(this.italic===undefined){this.italic=false}if(this.alignment===undefined){this.alignment=null}}else{throw new Error("invalid overload")}}}}}}a.textStylesCache_$LI$=function(){if(a.textStylesCache==null){a.textStylesCache=([])}return a.textStylesCache};a.prototype.getInstance=function(e,f,d,b,j){var h=new a(e,f,d,b,j,false);for(var c=a.textStylesCache_$LI$().length-1;c>=0;c--){var g=a.textStylesCache_$LI$()[c];if(g==null){a.textStylesCache_$LI$().splice(c,1)[0]}else{if(g.equals(h)){return h}}}(a.textStylesCache_$LI$().push(h)>0);return h};a.prototype.getFontName=function(){return this.fontName};a.prototype.getFontSize=function(){return this.fontSize};a.prototype.isBold=function(){return this.bold};a.prototype.isItalic=function(){return this.italic};a.prototype.getAlignment=function(){return this.alignment};a.prototype.deriveStyle$java_lang_String=function(b){if(this.getFontName()===b||(b!=null&&(b===this.getFontName()))){return this}else{return this.getInstance(b,this.getFontSize(),this.isBold(),this.isItalic(),this.getAlignment())}};a.prototype.deriveStyle=function(b){if(((typeof b==="string")||b===null)){return this.deriveStyle$java_lang_String(b)}else{if(((typeof b==="number")||b===null)){return this.deriveStyle$com_eteks_sweethome3d_model_TextStyle_Alignment(b)}else{if(((typeof b==="number")||b===null)){return this.deriveStyle$float(b)}else{throw new Error("invalid overload")}}}};a.prototype.deriveStyle$float=function(b){if(this.getFontSize()===b){return this}else{return this.getInstance(this.getFontName(),b,this.isBold(),this.isItalic(),this.getAlignment())}};a.prototype.deriveStyle$com_eteks_sweethome3d_model_TextStyle_Alignment=function(b){if(this.getAlignment()===b){return this}else{return this.getInstance(this.getFontName(),this.getFontSize(),this.isBold(),this.isItalic(),b)}};a.prototype.deriveBoldStyle=function(b){if(this.isBold()===b){return this}else{return this.getInstance(this.getFontName(),this.getFontSize(),b,this.isItalic(),this.getAlignment())}};a.prototype.deriveItalicStyle=function(b){if(this.isItalic()===b){return this}else{return this.getInstance(this.getFontName(),this.getFontSize(),this.isBold(),b,this.getAlignment())}};a.prototype.equals=function(b){if(b!=null&&b instanceof a){var c=b;return(c.fontName===this.fontName||(c.fontName!=null&&(c.fontName===this.fontName)))&&c.fontSize===this.fontSize&&c.bold===this.bold&&c.italic===this.italic&&c.alignment===this.alignment}return false};a.prototype.hashCode=function(){var b=(function(d){var c=new ArrayBuffer(4);(new Float32Array(c))[0]=d;return(new Uint32Array(c))[0]})(this.fontSize);if(this.fontName!=null){b+=(function(c){if(c.hashCode){return c.hashCode()}else{return c.toString().split("").reduce(function(d,e){return(((d<<5)-d)+e.charCodeAt(0))|0},0)}})(this.fontName)}if(this.bold){b++}if(this.italic){b++}b+=0;return b};return a}());TextStyle.__class="com.eteks.sweethome3d.model.TextStyle";TextStyle.__interfaces=["java.io.Serializable"];(function(a){var b;(function(c){c[c.LEFT=0]="LEFT";c[c.CENTER=1]="CENTER";c[c.RIGHT=2]="RIGHT"})(b=a.Alignment||(a.Alignment={}))})(TextStyle||(TextStyle={}));var HomeTexture=(function(){function a(r,v,x,q,z,w){if(((r!=null&&(r.constructor!=null&&r.constructor.__interfaces!=null&&r.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0))||r===null)&&((typeof v==="number")||v===null)&&((typeof x==="number")||x===null)&&((typeof q==="number")||q===null)&&((typeof z==="number")||z===null)&&((typeof w==="boolean")||w===null)){var D=arguments;if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}this.name=r.getName();this.creator=r.getCreator();this.image=r.getImage();this.width=r.getWidth();this.height=r.getHeight();this.xOffset=v;this.yOffset=x;this.angle=q;this.scale=z;this.leftToRightOriented=w;if(r!=null&&r instanceof a){this.catalogId=r.getCatalogId()}else{if(r!=null&&r instanceof CatalogTexture){this.catalogId=r.getId()}else{this.catalogId=null}}}else{if(((r!=null&&(r.constructor!=null&&r.constructor.__interfaces!=null&&r.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0))||r===null)&&((typeof v==="number")||v===null)&&((typeof x==="number")||x===null)&&((typeof q==="boolean")||q===null)&&z===undefined&&w===undefined){var D=arguments;var L=D[1];var K=D[2];var n=D[3];var u=arguments;var p=0;var C=0;if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}this.name=r.getName();this.creator=r.getCreator();this.image=r.getImage();this.width=r.getWidth();this.height=r.getHeight();this.xOffset=p;this.yOffset=C;this.angle=L;this.scale=K;this.leftToRightOriented=n;if(r!=null&&r instanceof a){this.catalogId=r.getCatalogId()}else{if(r!=null&&r instanceof CatalogTexture){this.catalogId=r.getId()}else{this.catalogId=null}}if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}}else{if(((r!=null&&(r.constructor!=null&&r.constructor.__interfaces!=null&&r.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0))||r===null)&&((typeof v==="number")||v===null)&&((typeof x==="boolean")||x===null)&&q===undefined&&z===undefined&&w===undefined){var D=arguments;var J=D[1];var l=D[2];var t=arguments;var I=1;var s=arguments;var o=0;var B=0;if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}this.name=r.getName();this.creator=r.getCreator();this.image=r.getImage();this.width=r.getWidth();this.height=r.getHeight();this.xOffset=o;this.yOffset=B;this.angle=J;this.scale=I;this.leftToRightOriented=l;if(r!=null&&r instanceof a){this.catalogId=r.getCatalogId()}else{if(r!=null&&r instanceof CatalogTexture){this.catalogId=r.getId()}else{this.catalogId=null}}if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}}else{if(((r!=null&&(r.constructor!=null&&r.constructor.__interfaces!=null&&r.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0))||r===null)&&((typeof v==="number")||v===null)&&x===undefined&&q===undefined&&z===undefined&&w===undefined){var D=arguments;var G=D[1];var h=arguments;var k=true;var g=arguments;var H=1;var f=arguments;var m=0;var A=0;if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}this.name=r.getName();this.creator=r.getCreator();this.image=r.getImage();this.width=r.getWidth();this.height=r.getHeight();this.xOffset=m;this.yOffset=A;this.angle=G;this.scale=H;this.leftToRightOriented=k;if(r!=null&&r instanceof a){this.catalogId=r.getCatalogId()}else{if(r!=null&&r instanceof CatalogTexture){this.catalogId=r.getId()}else{this.catalogId=null}}if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}}else{if(((r!=null&&(r.constructor!=null&&r.constructor.__interfaces!=null&&r.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0))||r===null)&&v===undefined&&x===undefined&&q===undefined&&z===undefined&&w===undefined){var D=arguments;var e=arguments;var E=0;var d=arguments;var i=true;var c=arguments;var F=1;var b=arguments;var j=0;var y=0;if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}this.name=r.getName();this.creator=r.getCreator();this.image=r.getImage();this.width=r.getWidth();this.height=r.getHeight();this.xOffset=j;this.yOffset=y;this.angle=E;this.scale=F;this.leftToRightOriented=i;if(r!=null&&r instanceof a){this.catalogId=r.getCatalogId()}else{if(r!=null&&r instanceof CatalogTexture){this.catalogId=r.getId()}else{this.catalogId=null}}if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}if(this.catalogId===undefined){this.catalogId=null}if(this.name===undefined){this.name=null}if(this.creator===undefined){this.creator=null}if(this.image===undefined){this.image=null}if(this.width===undefined){this.width=0}if(this.height===undefined){this.height=0}if(this.xOffset===undefined){this.xOffset=0}if(this.yOffset===undefined){this.yOffset=0}if(this.angle===undefined){this.angle=0}if(this.scale===undefined){this.scale=0}if(this.leftToRightOriented===undefined){this.leftToRightOriented=false}}else{throw new Error("invalid overload")}}}}}}a.prototype.getCatalogId=function(){return this.catalogId};a.prototype.getName=function(){return this.name};a.prototype.getCreator=function(){return this.creator};a.prototype.getImage=function(){return this.image};a.prototype.getWidth=function(){return this.width};a.prototype.getHeight=function(){return this.height};a.prototype.getXOffset=function(){return this.xOffset};a.prototype.getYOffset=function(){return this.yOffset};a.prototype.getAngle=function(){return this.angle};a.prototype.getScale=function(){return this.scale};a.prototype.isLeftToRightOriented=function(){return this.leftToRightOriented};a.prototype.equals=function(c){if(c===this){return true}else{if(c!=null&&c instanceof a){var b=c;return(b.name===this.name||b.name!=null&&(b.name===this.name))&&(b.image===this.image||b.image!=null&&(function(e,d){if(e&&e.equals){return e.equals(d)}else{return e===d}})(b.image,this.image))&&b.width===this.width&&b.height===this.height&&b.xOffset===this.xOffset&&b.yOffset===this.yOffset&&b.leftToRightOriented===this.leftToRightOriented&&b.angle===this.angle&&b.scale===this.scale}else{return false}}};a.prototype.hashCode=function(){return(this.name!=null?(function(b){if(b.hashCode){return b.hashCode()}else{return b.toString().split("").reduce(function(c,d){return(((c<<5)-c)+d.charCodeAt(0))|0},0)}})(this.name):0)+(this.image!=null?(function(b){if(b.hashCode){return b.hashCode()}else{return b.toString().split("").reduce(function(c,d){return(((c<<5)-c)+d.charCodeAt(0))|0},0)}})(this.image):0)+(function(c){var b=new ArrayBuffer(4);(new Float32Array(b))[0]=c;return(new Uint32Array(b))[0]})(this.width)+(function(c){var b=new ArrayBuffer(4);(new Float32Array(b))[0]=c;return(new Uint32Array(b))[0]})(this.height)+(function(c){var b=new ArrayBuffer(4);(new Float32Array(b))[0]=c;return(new Uint32Array(b))[0]})(this.xOffset)+(function(c){var b=new ArrayBuffer(4);(new Float32Array(b))[0]=c;return(new Uint32Array(b))[0]})(this.yOffset)+(function(c){var b=new ArrayBuffer(4);(new Float32Array(b))[0]=c;return(new Uint32Array(b))[0]})(this.angle)+(function(c){var b=new ArrayBuffer(4);(new Float32Array(b))[0]=c;return(new Uint32Array(b))[0]})(this.scale)};return a}());HomeTexture.__class="com.eteks.sweethome3d.model.HomeTexture";HomeTexture.__interfaces=["com.eteks.sweethome3d.model.TextureImage","java.io.Serializable"];var AspectRatio;(function(a){a[a.FREE_RATIO=0]="FREE_RATIO";a[a.VIEW_3D_RATIO=1]="VIEW_3D_RATIO";a[a.RATIO_4_3=2]="RATIO_4_3";a[a.RATIO_3_2=3]="RATIO_3_2";a[a.RATIO_16_9=4]="RATIO_16_9";a[a.RATIO_2_1=5]="RATIO_2_1";a[a.RATIO_24_10=6]="RATIO_24_10";a[a.SQUARE_RATIO=7]="SQUARE_RATIO"})(AspectRatio||(AspectRatio={}));var AspectRatio_$WRAPPER=(function(){function a(d,b,c){this._$ordinal=d;this._$name=b;if(this.value===undefined){this.value=null}this.value=c}a.prototype.getValue=function(){return this.value};a.prototype.name=function(){return this._$name};a.prototype.ordinal=function(){return this._$ordinal};a.prototype.compareTo=function(b){return this._$ordinal-(isNaN(b)?b._$ordinal:b)};return a}());AspectRatio.__class="com.eteks.sweethome3d.model.AspectRatio";AspectRatio.__interfaces=["java.lang.Comparable","java.io.Serializable"];AspectRatio["_$wrappers"]=[new AspectRatio_$WRAPPER(0,"FREE_RATIO",null),new AspectRatio_$WRAPPER(1,"VIEW_3D_RATIO",null),new AspectRatio_$WRAPPER(2,"RATIO_4_3",4/3),new AspectRatio_$WRAPPER(3,"RATIO_3_2",1.5),new AspectRatio_$WRAPPER(4,"RATIO_16_9",16/9),new AspectRatio_$WRAPPER(5,"RATIO_2_1",2/1),new AspectRatio_$WRAPPER(6,"RATIO_24_10",2.4),new AspectRatio_$WRAPPER(7,"SQUARE_RATIO",1)];var Baseboard=(function(){function a(i,j,e,h,d){if(((typeof i==="number")||i===null)&&((typeof j==="number")||j===null)&&((typeof e==="number")||e===null)&&((h!=null&&h instanceof HomeTexture)||h===null)&&((typeof d==="boolean")||d===null)){var g=arguments;if(this.thickness===undefined){this.thickness=0}if(this.height===undefined){this.height=0}if(this.color===undefined){this.color=null}if(this.texture===undefined){this.texture=null}this.height=j;this.thickness=i;this.color=e;this.texture=h;if(d){(a.baseboardsCache_$LI$().push(this)>0)}}else{if(((typeof i==="number")||i===null)&&((typeof j==="number")||j===null)&&((typeof e==="number")||e===null)&&((h!=null&&h instanceof HomeTexture)||h===null)&&d===undefined){var g=arguments;var f=arguments;var k=f[1];var c=f[0];var b=true;if(this.thickness===undefined){this.thickness=0}if(this.height===undefined){this.height=0}if(this.color===undefined){this.color=null}if(this.texture===undefined){this.texture=null}this.height=c;this.thickness=k;this.color=e;this.texture=h;if(b){(a.baseboardsCache_$LI$().push(this)>0)}if(this.thickness===undefined){this.thickness=0}if(this.height===undefined){this.height=0}if(this.color===undefined){this.color=null}if(this.texture===undefined){this.texture=null}}else{throw new Error("invalid overload")}}}a.baseboardsCache_$LI$=function(){if(a.baseboardsCache==null){a.baseboardsCache=([])}return a.baseboardsCache};a.getInstance=function(e,b,c,g){var h=new a(e,b,c,g,false);for(var d=a.baseboardsCache_$LI$().length-1;d>=0;d--){var f=a.baseboardsCache_$LI$()[d];if(f==null){a.baseboardsCache_$LI$().splice(d,1)[0]}else{if(f.equals(h)){return h}}}(a.baseboardsCache_$LI$().push(h)>0);return h};a.prototype.getThickness=function(){return this.thickness};a.prototype.getHeight=function(){return this.height};a.prototype.getColor=function(){return this.color};a.prototype.getTexture=function(){return this.texture};a.prototype.equals=function(b){if(b!=null&&b instanceof a){var c=b;return c.thickness===this.thickness&&c.height===this.height&&(c.color===this.color||c.color!=null&&(c.color===this.color))&&(c.texture===this.texture||c.texture!=null&&c.texture.equals(this.texture))}return false};a.prototype.hashCode=function(){var b=(function(d){var c=new ArrayBuffer(4);(new Float32Array(c))[0]=d;return(new Uint32Array(c))[0]})(this.thickness)+(function(d){var c=new ArrayBuffer(4);(new Float32Array(c))[0]=d;return(new Uint32Array(c))[0]})(this.height);if(this.color!=null){b+=(function(c){if(c.hashCode){return c.hashCode()}else{return c.toString().split("").reduce(function(d,e){return(((d<<5)-d)+e.charCodeAt(0))|0},0)}})(this.color)}if(this.texture!=null){b+=(function(c){if(c.hashCode){return c.hashCode()}else{return c.toString().split("").reduce(function(d,e){return(((d<<5)-d)+e.charCodeAt(0))|0},0)}})(this.texture)}return b};return a}());Baseboard.__class="com.eteks.sweethome3d.model.Baseboard";Baseboard.__interfaces=["java.io.Serializable"];var FurnitureCatalog=(function(){function a(){this.categories=([]);this.furnitureChangeSupport=(new CollectionChangeSupport(this))}a.prototype.getCategories=function(){return this.categories.slice(0)};a.prototype.getCategoriesCount=function(){return this.categories.length};a.prototype.getCategory=function(b){return this.categories[b]};a.prototype.addFurnitureListener=function(b){this.furnitureChangeSupport.addCollectionListener((b))};a.prototype.removeFurnitureListener=function(b){this.furnitureChangeSupport.removeCollectionListener((b))};a.prototype.add=function(d,c){var b=(function(f,i){var g=function(n,l){if(n.compareTo){return n.compareTo(l)}else{return n.localeCompare(l)}};var e=0;var k=f.length-1;while(e<=k){var h=(e+k)>>>1;var m=f[h];var j=g(m,i);if(j<0){e=h+1}else{if(j>0){k=h-1}else{return h}}}return -(e+1)})(this.categories,d);if(b<0){d=new FurnitureCategory(d.getName());this.categories.splice(-b-1,0,d)}else{d=this.categories[b]}d.add(c);this.furnitureChangeSupport.fireCollectionChanged(c,d.getIndexOfPieceOfFurniture(c),CollectionEvent.Type.ADD)};a.prototype["delete"]=function(b){var d=b.getCategory();if(d!=null){var c=d.getIndexOfPieceOfFurniture(b);if(c>=0){d["delete"](b);if(d.getFurnitureCount()===0){this.categories=(this.categories.slice(0));(function(e){var f=e.indexOf(d);if(f>=0){e.splice(f,1);return true}else{return false}})(this.categories)}this.furnitureChangeSupport.fireCollectionChanged(b,c,CollectionEvent.Type.DELETE);return}}throw new IllegalArgumentException("catalog doesn't contain piece "+b.getName())};return a}());FurnitureCatalog.__class="com.eteks.sweethome3d.model.FurnitureCatalog";var HomeDescriptor=(function(){function a(b,d,c){if(this.name===undefined){this.name=null}if(this.content===undefined){this.content=null}if(this.icon===undefined){this.icon=null}this.name=b;this.content=d;this.icon=c}a.prototype.getName=function(){return this.name};a.prototype.getContent=function(){return this.content};a.prototype.getIcon=function(){return this.icon};return a}());HomeDescriptor.__class="com.eteks.sweethome3d.model.HomeDescriptor";var BackgroundImage=(function(){function a(f,m,l,c,g,d,b,j,e){if(((f!=null&&(f.constructor!=null&&f.constructor.__interfaces!=null&&f.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||f===null)&&((typeof m==="number")||m===null)&&((typeof l==="number")||l===null)&&((typeof c==="number")||c===null)&&((typeof g==="number")||g===null)&&((typeof d==="number")||d===null)&&((typeof b==="number")||b===null)&&((typeof j==="number")||j===null)&&((typeof e==="boolean")||e===null)){var i=arguments;if(this.image===undefined){this.image=null}if(this.scaleDistance===undefined){this.scaleDistance=0}if(this.scaleDistanceXStart===undefined){this.scaleDistanceXStart=0}if(this.scaleDistanceYStart===undefined){this.scaleDistanceYStart=0}if(this.scaleDistanceXEnd===undefined){this.scaleDistanceXEnd=0}if(this.scaleDistanceYEnd===undefined){this.scaleDistanceYEnd=0}if(this.xOrigin===undefined){this.xOrigin=0}if(this.yOrigin===undefined){this.yOrigin=0}if(this.invisible===undefined){this.invisible=false}this.image=f;this.scaleDistance=m;this.scaleDistanceXStart=l;this.scaleDistanceYStart=c;this.scaleDistanceXEnd=g;this.scaleDistanceYEnd=d;this.xOrigin=b;this.yOrigin=j;this.invisible=!e}else{if(((f!=null&&(f.constructor!=null&&f.constructor.__interfaces!=null&&f.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||f===null)&&((typeof m==="number")||m===null)&&((typeof l==="number")||l===null)&&((typeof c==="number")||c===null)&&((typeof g==="number")||g===null)&&((typeof d==="number")||d===null)&&((typeof b==="number")||b===null)&&((typeof j==="number")||j===null)&&e===undefined){var i=arguments;var h=arguments;var k=true;if(this.image===undefined){this.image=null}if(this.scaleDistance===undefined){this.scaleDistance=0}if(this.scaleDistanceXStart===undefined){this.scaleDistanceXStart=0}if(this.scaleDistanceYStart===undefined){this.scaleDistanceYStart=0}if(this.scaleDistanceXEnd===undefined){this.scaleDistanceXEnd=0}if(this.scaleDistanceYEnd===undefined){this.scaleDistanceYEnd=0}if(this.xOrigin===undefined){this.xOrigin=0}if(this.yOrigin===undefined){this.yOrigin=0}if(this.invisible===undefined){this.invisible=false}this.image=f;this.scaleDistance=m;this.scaleDistanceXStart=l;this.scaleDistanceYStart=c;this.scaleDistanceXEnd=g;this.scaleDistanceYEnd=d;this.xOrigin=b;this.yOrigin=j;this.invisible=!k;if(this.image===undefined){this.image=null}if(this.scaleDistance===undefined){this.scaleDistance=0}if(this.scaleDistanceXStart===undefined){this.scaleDistanceXStart=0}if(this.scaleDistanceYStart===undefined){this.scaleDistanceYStart=0}if(this.scaleDistanceXEnd===undefined){this.scaleDistanceXEnd=0}if(this.scaleDistanceYEnd===undefined){this.scaleDistanceYEnd=0}if(this.xOrigin===undefined){this.xOrigin=0}if(this.yOrigin===undefined){this.yOrigin=0}if(this.invisible===undefined){this.invisible=false}}else{throw new Error("invalid overload")}}}a.prototype.getImage=function(){return this.image};a.prototype.getScaleDistance=function(){return this.scaleDistance};a.prototype.getScaleDistanceXStart=function(){return this.scaleDistanceXStart};a.prototype.getScaleDistanceYStart=function(){return this.scaleDistanceYStart};a.prototype.getScaleDistanceXEnd=function(){return this.scaleDistanceXEnd};a.prototype.getScaleDistanceYEnd=function(){return this.scaleDistanceYEnd};a.prototype.getScale=function(){return a.getScale(this.scaleDistance,this.scaleDistanceXStart,this.scaleDistanceYStart,this.scaleDistanceXEnd,this.scaleDistanceYEnd)};a.getScale=function(e,b,f,d,c){return(e/java.awt.geom.Point2D.distance(b,f,d,c))};a.prototype.getXOrigin=function(){return this.xOrigin};a.prototype.getYOrigin=function(){return this.yOrigin};a.prototype.isVisible=function(){return !this.invisible};return a}());BackgroundImage.__class="com.eteks.sweethome3d.model.BackgroundImage";BackgroundImage.__interfaces=["java.io.Serializable"];var HomeObject=(function(){function a(e){if(((typeof e==="string")||e===null)){var d=arguments;if(this.id===undefined){this.id=null}if(this.properties===undefined){this.properties=null}if(this.propertyChangeSupport===undefined){this.propertyChangeSupport=null}if(e==null){throw new IllegalArgumentException("ID must exist")}this.id=e}else{if(e===undefined){var d=arguments;var c=arguments;var b=a.createId(a.ID_DEFAULT_PREFIX);if(this.id===undefined){this.id=null}if(this.properties===undefined){this.properties=null}if(this.propertyChangeSupport===undefined){this.propertyChangeSupport=null}if(b==null){throw new IllegalArgumentException("ID must exist")}this.id=b;if(this.id===undefined){this.id=null}if(this.properties===undefined){this.properties=null}if(this.propertyChangeSupport===undefined){this.propertyChangeSupport=null}}else{throw new Error("invalid overload")}}}a.createId=function(b){return b+"-"+UUID.randomUUID()};a.prototype.addPropertyChangeListener=function(b,c){if(this.propertyChangeSupport==null){this.propertyChangeSupport=new PropertyChangeSupport(this)}if(c===undefined){this.propertyChangeSupport.addPropertyChangeListener(b)}else{this.propertyChangeSupport.addPropertyChangeListener(b,c)}};a.prototype.removePropertyChangeListener=function(b,c){if(this.propertyChangeSupport!=null){if(c===undefined){this.propertyChangeSupport.removePropertyChangeListener(b)}else{this.propertyChangeSupport.removePropertyChangeListener(b,c)}if(this.propertyChangeSupport.getPropertyChangeListeners().length===0){this.propertyChangeSupport=null}}};a.prototype.firePropertyChange=function(b,c,d){if(this.propertyChangeSupport!=null){this.propertyChangeSupport.firePropertyChange(b,c,d)}};a.prototype.getId=function(){return this.id};a.prototype.getProperty=function(b){if(this.properties!=null){return(function(c,d){return c[d]===undefined?null:c[d]})(this.properties,b)}else{return null}};a.prototype.setProperty=function(c,e){var f=this;var b=this.properties!=null?(function(g,h){return g[h]===undefined?null:g[h]})(this.properties,c):null;if(e==null){if(this.properties!=null&&b!=null){try{(function(h){var g=f.properties[c];delete f.properties[c];return g})(this.properties);if(Object.keys(this.properties).length===0){this.properties=null}}catch(d){this.properties=null}this.firePropertyChange(c,b,null)}}else{if(this.properties==null||(Object.keys(this.properties).length===1&&b!=null)){this.properties=(function(g){var h={};h[g]=e;return h})(c)}else{if(Object.keys(this.properties).length===1){this.properties=((function(i){var g={};for(var h in i){g[h]=i[h]}return g})(this.properties))}(this.properties[c]=e)}this.firePropertyChange(c,b,e)}};a.prototype.getPropertyNames=function(){if(this.properties!=null){return Object.keys(this.properties)}else{return[]}};a.prototype.duplicate=function(){var f=(function(g){if(g.clone!=undefined){return g.clone()}else{var h=Object.create(g);for(var c in g){if(g.hasOwnProperty(c)){h[c]=g[c]}}return h}})(this);var b=0;var e;while((b<this.id.length&&(function(g){return g.charCodeAt==null?g:g.charCodeAt(0)})((e=this.id.charAt(b).toLowerCase()))>="a".charCodeAt(0)&&(function(g){return g.charCodeAt==null?g:g.charCodeAt(0)})(e)<="z".charCodeAt(0))){b++}var d=b>=0?this.id.substring(0,b):a.ID_DEFAULT_PREFIX;f.id=a.createId(d);return f};a.prototype.clone=function(){var d=this;try{var c=(function(f){var g=Object.create(f);for(var e in f){if(f.hasOwnProperty(e)){g[e]=f[e]}}return g})(this);if(this.properties!=null){c.properties=Object.keys(c.properties).length===1?(function(e){var f={};f[e]=(function(g){var h=0;return{next:function(){return h<g.length?g[h++]:null},hasNext:function(){return h<g.length}}})((function(g){return Object.keys(g).map(function(h){return g[h]})})(d.properties)).next();return f})((function(e){var f=0;return{next:function(){return f<e.length?e[f++]:null},hasNext:function(){return f<e.length}}})(Object.keys(this.properties)).next()):((function(g){var e={};for(var f in g){e[f]=g[f]}return e})(this.properties))}c.propertyChangeSupport=null;return c}catch(b){throw new IllegalStateException("Super class isn't cloneable")}};a.ID_DEFAULT_PREFIX="object";return a}());HomeObject.__class="com.eteks.sweethome3d.model.HomeObject";HomeObject.__interfaces=["java.lang.Cloneable","java.io.Serializable"];HomeObject.__transients=["propertyChangeSupport"];var TexturesCatalog=(function(){function a(){this.categories=([]);this.texturesChangeSupport=(new CollectionChangeSupport(this))}a.prototype.getCategories=function(){return this.categories.slice(0)};a.prototype.getCategoriesCount=function(){return this.categories.length};a.prototype.getCategory=function(b){return this.categories[b]};a.prototype.addTexturesListener=function(b){this.texturesChangeSupport.addCollectionListener((b))};a.prototype.removeTexturesListener=function(b){this.texturesChangeSupport.removeCollectionListener((b))};a.prototype.add=function(d,c){var b=(function(f,i){var g=function(n,l){if(n.compareTo){return n.compareTo(l)}else{return n.localeCompare(l)}};var e=0;var k=f.length-1;while(e<=k){var h=(e+k)>>>1;var m=f[h];var j=g(m,i);if(j<0){e=h+1}else{if(j>0){k=h-1}else{return h}}}return -(e+1)})(this.categories,d);if(b<0){d=new TexturesCategory(d.getName());this.categories.splice(-b-1,0,d)}else{d=this.categories[b]}d.add(c);this.texturesChangeSupport.fireCollectionChanged(c,d.getIndexOfTexture(c),CollectionEvent.Type.ADD)};a.prototype["delete"]=function(c){var b=c.getCategory();if(b!=null){var d=b.getIndexOfTexture(c);if(d>=0){b["delete"](c);if(b.getTexturesCount()===0){this.categories=(this.categories.slice(0));(function(e){var f=e.indexOf(b);if(f>=0){e.splice(f,1);return true}else{return false}})(this.categories)}this.texturesChangeSupport.fireCollectionChanged(c,d,CollectionEvent.Type.DELETE);return}}throw new IllegalArgumentException("catalog doesn't contain texture "+c.getName())};return a}());TexturesCatalog.__class="com.eteks.sweethome3d.model.TexturesCatalog";var CatalogPieceOfFurniture=(function(){function a(H,Z,N,I,w,ay,bs,j,am,by,aI,b,br,aH,aW,bG,i,an,bp,O,v,aA,U,a5,a4,c,y,ag,h,bq,D,G,be,av){if(((typeof H==="string")||H===null)&&((typeof Z==="string")||Z===null)&&((typeof N==="string")||N===null)&&((typeof I==="string")||I===null)&&((w!=null&&w instanceof Array&&(w.length==0||w[0]==null||(typeof w[0]==="string")))||w===null)&&((typeof ay==="number")||ay===null)&&((typeof bs==="number")||bs===null)&&((j!=null&&(j.constructor!=null&&j.constructor.__interfaces!=null&&j.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||j===null)&&((am!=null&&(am.constructor!=null&&am.constructor.__interfaces!=null&&am.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||am===null)&&((by!=null&&(by.constructor!=null&&by.constructor.__interfaces!=null&&by.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||by===null)&&((typeof aI==="number")||aI===null)&&((typeof b==="number")||b===null)&&((typeof br==="number")||br===null)&&((typeof aH==="number")||aH===null)&&((typeof aW==="number")||aW===null)&&((typeof bG==="boolean")||bG===null)&&((typeof i==="boolean")||i===null)&&((typeof an==="string")||an===null)&&((typeof bp==="number")||bp===null)&&((O!=null&&O instanceof Array&&(O.length==0||O[0]==null||O[0] instanceof Array))||O===null)&&((typeof v==="boolean")||v===null)&&((typeof aA==="number")||aA===null)&&((typeof U==="string")||U===null)&&((typeof a5==="boolean")||a5===null)&&((typeof a4==="boolean")||a4===null)&&((typeof c==="boolean")||c===null)&&((typeof y==="boolean")||y===null)&&((ag!=null&&ag instanceof Big)||ag===null)&&((h!=null&&h instanceof Big)||h===null)&&((typeof bq==="string")||bq===null)&&((D!=null&&(D instanceof Object))||D===null)&&((typeof G==="number")||G===null)&&((typeof be==="boolean")||be===null)&&((typeof av==="boolean")||av===null)){var e=arguments;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.backFaceShown===undefined){this.backFaceShown=false}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}this.id=H;this.name=Z;this.description=N;this.information=I;this.tags=w;this.creationDate=ay;this.grade=bs;this.icon=j;this.planIcon=am;this.model=by;this.width=aI;this.depth=b;this.height=br;this.elevation=aH;this.dropOnTopElevation=aW;this.movable=bG;this.doorOrWindow=i;this.color=bp;this.staircaseCutOutShape=an;this.creator=U;this.horizontallyRotatable=y;this.price=ag;this.valueAddedTaxPercentage=h;this.currency=bq;this.properties=D==null||Object.keys(D).length===0?{}:(Object.keys(D).length===1?(function(bH){var bI={};bI[bH]=(function(bJ){var bK=0;return{next:function(){return bK<bJ.length?bJ[bK++]:null},hasNext:function(){return bK<bJ.length}}})((function(bJ){return Object.keys(bJ).map(function(bK){return bJ[bK]})})(D)).next();return bI})((function(bH){var bI=0;return{next:function(){return bI<bH.length?bH[bI++]:null},hasNext:function(){return bI<bH.length}}})(Object.keys(D)).next()):((function(bJ){var bH={};for(var bI in bJ){bH[bI]=bJ[bI]}return bH})(D)));if(O==null){this.modelRotation=a.INDENTITY_ROTATION_$LI$()}else{this.modelRotation=this.deepCopy(O)}this.backFaceShown=v;this.modelSize=aA;this.resizable=a5;this.deformable=a4;this.texturable=c;this.iconYaw=G;this.proportional=be;this.modifiable=av}else{if(((typeof H==="string")||H===null)&&((typeof Z==="string")||Z===null)&&((typeof N==="string")||N===null)&&((typeof I==="string")||I===null)&&((w!=null&&w instanceof Array&&(w.length==0||w[0]==null||(typeof w[0]==="string")))||w===null)&&((typeof ay==="number")||ay===null)&&((typeof bs==="number")||bs===null)&&((j!=null&&(j.constructor!=null&&j.constructor.__interfaces!=null&&j.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||j===null)&&((am!=null&&(am.constructor!=null&&am.constructor.__interfaces!=null&&am.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||am===null)&&((by!=null&&(by.constructor!=null&&by.constructor.__interfaces!=null&&by.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||by===null)&&((typeof aI==="number")||aI===null)&&((typeof b==="number")||b===null)&&((typeof br==="number")||br===null)&&((typeof aH==="number")||aH===null)&&((typeof aW==="number")||aW===null)&&((typeof bG==="boolean")||bG===null)&&((typeof i==="string")||i===null)&&((an!=null&&an instanceof Array&&(an.length==0||an[0]==null||an[0] instanceof Array))||an===null)&&((typeof bp==="boolean")||bp===null)&&((typeof O==="number")||O===null)&&((typeof v==="string")||v===null)&&((typeof aA==="boolean")||aA===null)&&((typeof U==="boolean")||U===null)&&((typeof a5==="boolean")||a5===null)&&((typeof a4==="boolean")||a4===null)&&((c!=null&&c instanceof Big)||c===null)&&((y!=null&&y instanceof Big)||y===null)&&((typeof ag==="string")||ag===null)&&((h!=null&&(h instanceof Object))||h===null)&&bq===undefined&&D===undefined&&G===undefined&&be===undefined&&av===undefined){var e=arguments;var ah=e[16];var bc=e[17];var aF=e[18];var bx=e[19];var a3=e[20];var aN=e[21];var C=e[22];var aT=e[23];var bo=e[24];var at=e[25];var Y=e[26];var aY=e[27];var al=e[28];var bF=arguments;var M=false;var t=null;var V=Math.PI/8;var u=true;var bi=false;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.backFaceShown===undefined){this.backFaceShown=false}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}this.id=H;this.name=Z;this.description=N;this.information=I;this.tags=w;this.creationDate=ay;this.grade=bs;this.icon=j;this.planIcon=am;this.model=by;this.width=aI;this.depth=b;this.height=br;this.elevation=aH;this.dropOnTopElevation=aW;this.movable=bG;this.doorOrWindow=M;this.color=t;this.staircaseCutOutShape=ah;this.creator=a3;this.horizontallyRotatable=bo;this.price=at;this.valueAddedTaxPercentage=Y;this.currency=aY;this.properties=al==null||Object.keys(al).length===0?{}:(Object.keys(al).length===1?(function(bH){var bI={};bI[bH]=(function(bJ){var bK=0;return{next:function(){return bK<bJ.length?bJ[bK++]:null},hasNext:function(){return bK<bJ.length}}})((function(bJ){return Object.keys(bJ).map(function(bK){return bJ[bK]})})(al)).next();return bI})((function(bH){var bI=0;return{next:function(){return bI<bH.length?bH[bI++]:null},hasNext:function(){return bI<bH.length}}})(Object.keys(al)).next()):((function(bJ){var bH={};for(var bI in bJ){bH[bI]=bJ[bI]}return bH})(al)));if(bc==null){this.modelRotation=a.INDENTITY_ROTATION_$LI$()}else{this.modelRotation=this.deepCopy(bc)}this.backFaceShown=aF;this.modelSize=bx;this.resizable=aN;this.deformable=C;this.texturable=aT;this.iconYaw=V;this.proportional=u;this.modifiable=bi;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.backFaceShown===undefined){this.backFaceShown=false}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}}else{if(((typeof H==="string")||H===null)&&((typeof Z==="string")||Z===null)&&((typeof N==="string")||N===null)&&((typeof I==="string")||I===null)&&((w!=null&&w instanceof Array&&(w.length==0||w[0]==null||(typeof w[0]==="string")))||w===null)&&((typeof ay==="number")||ay===null)&&((typeof bs==="number")||bs===null)&&((j!=null&&(j.constructor!=null&&j.constructor.__interfaces!=null&&j.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||j===null)&&((am!=null&&(am.constructor!=null&&am.constructor.__interfaces!=null&&am.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||am===null)&&((by!=null&&(by.constructor!=null&&by.constructor.__interfaces!=null&&by.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||by===null)&&((typeof aI==="number")||aI===null)&&((typeof b==="number")||b===null)&&((typeof br==="number")||br===null)&&((typeof aH==="number")||aH===null)&&((typeof aW==="number")||aW===null)&&((typeof bG==="boolean")||bG===null)&&((typeof i==="string")||i===null)&&((an!=null&&an instanceof Array&&(an.length==0||an[0]==null||an[0] instanceof Array))||an===null)&&((typeof bp==="boolean")||bp===null)&&((typeof O==="number")||O===null)&&((typeof v==="string")||v===null)&&((typeof aA==="boolean")||aA===null)&&((typeof U==="boolean")||U===null)&&((typeof a5==="boolean")||a5===null)&&((typeof a4==="boolean")||a4===null)&&((c!=null&&c instanceof Big)||c===null)&&((y!=null&&y instanceof Big)||y===null)&&((typeof ag==="string")||ag===null)&&h===undefined&&bq===undefined&&D===undefined&&G===undefined&&be===undefined&&av===undefined){var e=arguments;var af=e[16];var bb=e[17];var aC=e[18];var bw=e[19];var a2=e[20];var aM=e[21];var B=e[22];var aS=e[23];var bn=e[24];var ar=e[25];var X=e[26];var aX=e[27];var bE=arguments;var bm=true;var ak=null;var bD=arguments;var L=false;var r=null;var S=Math.PI/8;var s=true;var bh=false;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.backFaceShown===undefined){this.backFaceShown=false}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}this.id=H;this.name=Z;this.description=N;this.information=I;this.tags=w;this.creationDate=ay;this.grade=bs;this.icon=j;this.planIcon=am;this.model=by;this.width=aI;this.depth=b;this.height=br;this.elevation=aH;this.dropOnTopElevation=aW;this.movable=bG;this.doorOrWindow=L;this.color=r;this.staircaseCutOutShape=af;this.creator=a2;this.horizontallyRotatable=bm;this.price=ar;this.valueAddedTaxPercentage=X;this.currency=aX;this.properties=ak==null||Object.keys(ak).length===0?{}:(Object.keys(ak).length===1?(function(bH){var bI={};bI[bH]=(function(bJ){var bK=0;return{next:function(){return bK<bJ.length?bJ[bK++]:null},hasNext:function(){return bK<bJ.length}}})((function(bJ){return Object.keys(bJ).map(function(bK){return bJ[bK]})})(ak)).next();return bI})((function(bH){var bI=0;return{next:function(){return bI<bH.length?bH[bI++]:null},hasNext:function(){return bI<bH.length}}})(Object.keys(ak)).next()):((function(bJ){var bH={};for(var bI in bJ){bH[bI]=bJ[bI]}return bH})(ak)));if(bb==null){this.modelRotation=a.INDENTITY_ROTATION_$LI$()}else{this.modelRotation=this.deepCopy(bb)}this.backFaceShown=aC;this.modelSize=bw;this.resizable=aM;this.deformable=B;this.texturable=aS;this.iconYaw=S;this.proportional=s;this.modifiable=bh;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.backFaceShown===undefined){this.backFaceShown=false}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.backFaceShown===undefined){this.backFaceShown=false}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}}else{if(((typeof H==="string")||H===null)&&((typeof Z==="string")||Z===null)&&((typeof N==="string")||N===null)&&((typeof I==="string")||I===null)&&((w!=null&&w instanceof Array&&(w.length==0||w[0]==null||(typeof w[0]==="string")))||w===null)&&((typeof ay==="number")||ay===null)&&((typeof bs==="number")||bs===null)&&((j!=null&&(j.constructor!=null&&j.constructor.__interfaces!=null&&j.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||j===null)&&((am!=null&&(am.constructor!=null&&am.constructor.__interfaces!=null&&am.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||am===null)&&((by!=null&&(by.constructor!=null&&by.constructor.__interfaces!=null&&by.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||by===null)&&((typeof aI==="number")||aI===null)&&((typeof b==="number")||b===null)&&((typeof br==="number")||br===null)&&((typeof aH==="number")||aH===null)&&((typeof aW==="number")||aW===null)&&((typeof bG==="boolean")||bG===null)&&((typeof i==="string")||i===null)&&((an!=null&&an instanceof Array&&(an.length==0||an[0]==null||an[0] instanceof Array))||an===null)&&((typeof bp==="boolean")||bp===null)&&((typeof O==="string")||O===null)&&((typeof v==="boolean")||v===null)&&((typeof aA==="boolean")||aA===null)&&((typeof U==="boolean")||U===null)&&((a5!=null&&a5 instanceof Big)||a5===null)&&((a4!=null&&a4 instanceof Big)||a4===null)&&((typeof c==="string")||c===null)&&y===undefined&&ag===undefined&&h===undefined&&bq===undefined&&D===undefined&&G===undefined&&be===undefined&&av===undefined){var e=arguments;var ae=e[16];var ba=e[17];var aB=e[18];var a1=e[19];var aL=e[20];var A=e[21];var aR=e[22];var aq=e[23];var W=e[24];var aV=e[25];var bC=arguments;var bv=null;var bl=true;var bB=arguments;var bk=true;var aj=null;var bA=arguments;var K=false;var o=null;var Q=Math.PI/8;var p=true;var bg=false;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.backFaceShown===undefined){this.backFaceShown=false}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}this.id=H;this.name=Z;this.description=N;this.information=I;this.tags=w;this.creationDate=ay;this.grade=bs;this.icon=j;this.planIcon=am;this.model=by;this.width=aI;this.depth=b;this.height=br;this.elevation=aH;this.dropOnTopElevation=aW;this.movable=bG;this.doorOrWindow=K;this.color=o;this.staircaseCutOutShape=ae;this.creator=a1;this.horizontallyRotatable=bk;this.price=aq;this.valueAddedTaxPercentage=W;this.currency=aV;this.properties=aj==null||Object.keys(aj).length===0?{}:(Object.keys(aj).length===1?(function(bH){var bI={};bI[bH]=(function(bJ){var bK=0;return{next:function(){return bK<bJ.length?bJ[bK++]:null},hasNext:function(){return bK<bJ.length}}})((function(bJ){return Object.keys(bJ).map(function(bK){return bJ[bK]})})(aj)).next();return bI})((function(bH){var bI=0;return{next:function(){return bI<bH.length?bH[bI++]:null},hasNext:function(){return bI<bH.length}}})(Object.keys(aj)).next()):((function(bJ){var bH={};for(var bI in bJ){bH[bI]=bJ[bI]}return bH})(aj)));if(ba==null){this.modelRotation=a.INDENTITY_ROTATION_$LI$()}else{this.modelRotation=this.deepCopy(ba)}this.backFaceShown=aB;this.modelSize=bv;this.resizable=aL;this.deformable=A;this.texturable=aR;this.iconYaw=Q;this.proportional=p;this.modifiable=bg;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.backFaceShown===undefined){this.backFaceShown=false}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.backFaceShown===undefined){this.backFaceShown=false}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.backFaceShown===undefined){this.backFaceShown=false}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}}else{if(((typeof H==="string")||H===null)&&((Z!=null&&(Z.constructor!=null&&Z.constructor.__interfaces!=null&&Z.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||Z===null)&&((N!=null&&(N.constructor!=null&&N.constructor.__interfaces!=null&&N.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||N===null)&&((typeof I==="number")||I===null)&&((typeof w==="number")||w===null)&&((typeof ay==="number")||ay===null)&&((typeof bs==="number")||bs===null)&&((typeof j==="boolean")||j===null)&&((typeof am==="string")||am===null)&&((typeof by==="number")||by===null)&&((aI!=null&&aI instanceof Array&&(aI.length==0||aI[0]==null||aI[0] instanceof Array))||aI===null)&&((typeof b==="boolean")||b===null)&&((typeof br==="number")||br===null)&&((typeof aH==="string")||aH===null)&&((typeof aW==="number")||aW===null)&&((typeof bG==="boolean")||bG===null)&&i===undefined&&an===undefined&&bp===undefined&&O===undefined&&v===undefined&&aA===undefined&&U===undefined&&a5===undefined&&a4===undefined&&c===undefined&&y===undefined&&ag===undefined&&h===undefined&&bq===undefined&&D===undefined&&G===undefined&&be===undefined&&av===undefined){var e=arguments;var ab=e[0];var ac=e[1];var g=e[2];var ax=e[3];var aG=e[4];var aQ=e[5];var F=e[6];var a7=e[7];var ad=e[8];var k=e[9];var a9=e[10];var az=e[11];var bu=e[12];var a0=e[13];var P=e[14];var m=e[15];var bz=arguments;var d=null;var bt=null;var bd=null;var au=[];var aD=Date.now();var l=null;var q=null;var x=1;var J=false;var aK=true;var z=true;var aP=true;var bj=true;var ap=null;var T=null;var aU=null;var ai=null;var bf=true;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.backFaceShown===undefined){this.backFaceShown=false}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}this.id=d;this.name=ab;this.description=bt;this.information=bd;this.tags=au;this.creationDate=aD;this.grade=l;this.icon=ac;this.planIcon=q;this.model=g;this.width=ax;this.depth=aG;this.height=aQ;this.elevation=F;this.dropOnTopElevation=x;this.movable=a7;this.doorOrWindow=J;this.color=k;this.staircaseCutOutShape=ad;this.creator=a0;this.horizontallyRotatable=bj;this.price=ap;this.valueAddedTaxPercentage=T;this.currency=aU;this.properties=ai==null||Object.keys(ai).length===0?{}:(Object.keys(ai).length===1?(function(bH){var bI={};bI[bH]=(function(bJ){var bK=0;return{next:function(){return bK<bJ.length?bJ[bK++]:null},hasNext:function(){return bK<bJ.length}}})((function(bJ){return Object.keys(bJ).map(function(bK){return bJ[bK]})})(ai)).next();return bI})((function(bH){var bI=0;return{next:function(){return bI<bH.length?bH[bI++]:null},hasNext:function(){return bI<bH.length}}})(Object.keys(ai)).next()):((function(bJ){var bH={};for(var bI in bJ){bH[bI]=bJ[bI]}return bH})(ai)));if(a9==null){this.modelRotation=a.INDENTITY_ROTATION_$LI$()}else{this.modelRotation=this.deepCopy(a9)}this.backFaceShown=az;this.modelSize=bu;this.resizable=aK;this.deformable=z;this.texturable=aP;this.iconYaw=P;this.proportional=m;this.modifiable=bf;if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.backFaceShown===undefined){this.backFaceShown=false}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}}else{if(((typeof H==="string")||H===null)&&((typeof Z==="string")||Z===null)&&((typeof N==="string")||N===null)&&((I!=null&&(I.constructor!=null&&I.constructor.__interfaces!=null&&I.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||I===null)&&((w!=null&&(w.constructor!=null&&w.constructor.__interfaces!=null&&w.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||w===null)&&((ay!=null&&(ay.constructor!=null&&ay.constructor.__interfaces!=null&&ay.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||ay===null)&&((typeof bs==="number")||bs===null)&&((typeof j==="number")||j===null)&&((typeof am==="number")||am===null)&&((typeof by==="number")||by===null)&&((typeof aI==="boolean")||aI===null)&&((b!=null&&b instanceof Array&&(b.length==0||b[0]==null||b[0] instanceof Array))||b===null)&&((typeof br==="string")||br===null)&&((typeof aH==="boolean")||aH===null)&&((aW!=null&&aW instanceof Big)||aW===null)&&((bG!=null&&bG instanceof Big)||bG===null)&&i===undefined&&an===undefined&&bp===undefined&&O===undefined&&v===undefined&&aA===undefined&&U===undefined&&a5===undefined&&a4===undefined&&c===undefined&&y===undefined&&ag===undefined&&h===undefined&&bq===undefined&&D===undefined&&G===undefined&&be===undefined&&av===undefined){var e=arguments;var aa=e[3];var n=e[4];var f=e[5];var aw=e[6];var aE=e[7];var aO=e[8];var E=e[9];var a6=e[10];var a8=e[11];var aZ=e[12];var aJ=e[13];var ao=e[14];var R=e[15];if(this.id===undefined){this.id=null}if(this.name===undefined){this.name=null}if(this.description===undefined){this.description=null}if(this.information===undefined){this.information=null}if(this.tags===undefined){this.tags=null}if(this.creationDate===undefined){this.creationDate=null}if(this.grade===undefined){this.grade=null}if(this.icon===undefined){this.icon=null}if(this.planIcon===undefined){this.planIcon=null}if(this.model===undefined){this.model=null}if(this.width===undefined){this.width=0}if(this.depth===undefined){this.depth=0}if(this.height===undefined){this.height=0}if(this.proportional===undefined){this.proportional=false}if(this.elevation===undefined){this.elevation=0}if(this.dropOnTopElevation===undefined){this.dropOnTopElevation=0}if(this.movable===undefined){this.movable=false}if(this.doorOrWindow===undefined){this.doorOrWindow=false}if(this.staircaseCutOutShape===undefined){this.staircaseCutOutShape=null}if(this.modelRotation===undefined){this.modelRotation=null}if(this.modelSize===undefined){this.modelSize=null}if(this.creator===undefined){this.creator=null}if(this.backFaceShown===undefined){this.backFaceShown=false}if(this.color===undefined){this.color=null}if(this.iconYaw===undefined){this.iconYaw=0}if(this.modifiable===undefined){this.modifiable=false}if(this.resizable===undefined){this.resizable=false}if(this.deformable===undefined){this.deformable=false}if(this.texturable===undefined){this.texturable=false}if(this.horizontallyRotatable===undefined){this.horizontallyRotatable=false}if(this.price===undefined){this.price=null}if(this.valueAddedTaxPercentage===undefined){this.valueAddedTaxPercentage=null}if(this.currency===undefined){this.currency=null}if(this.properties===undefined){this.properties=null}if(this.category===undefined){this.category=null}if(this.filterCollationKey===undefined){this.filterCollationKey=null}}else{throw new Error("invalid overload")}}}}}}}a.__static_initialize=function(){if(!a.__static_initialized){a.__static_initialized=true;a.__static_initializer_0()}};a.INDENTITY_ROTATION_$LI$=function(){a.__static_initialize();if(a.INDENTITY_ROTATION==null){a.INDENTITY_ROTATION=[[1,0,0],[0,1,0],[0,0,1]]}return a.INDENTITY_ROTATION};a.EMPTY_CRITERIA_$LI$=function(){a.__static_initialize();if(a.EMPTY_CRITERIA==null){a.EMPTY_CRITERIA=[]}return a.EMPTY_CRITERIA};a.COMPARATOR_$LI$=function(){a.__static_initialize();return a.COMPARATOR};a.recentFilters_$LI$=function(){a.__static_initialize();return a.recentFilters};a.__static_initializer_0=function(){a.COMPARATOR={compare:function(c,b){return c.toString().localeCompare(b.toString())},equals:function(c,b){return c.toString().localeCompare(b.toString())===0}};a.COMPARATOR_$LI$();a.recentFilters=({})};a.prototype.getId=function(){return this.id};a.prototype.getName=function(){return this.name};a.prototype.getDescription=function(){return this.description};a.prototype.getInformation=function(){return this.information};a.prototype.getTags=function(){return this.tags};a.prototype.getCreationDate=function(){return this.creationDate};a.prototype.getGrade=function(){return this.grade};a.prototype.getDepth=function(){return this.depth};a.prototype.getHeight=function(){return this.height};a.prototype.getWidth=function(){return this.width};a.prototype.getElevation=function(){return this.elevation};a.prototype.getDropOnTopElevation=function(){return this.dropOnTopElevation};a.prototype.isMovable=function(){return this.movable};a.prototype.isDoorOrWindow=function(){return this.doorOrWindow};a.prototype.getIcon=function(){return this.icon};a.prototype.getPlanIcon=function(){return this.planIcon};a.prototype.getModel=function(){return this.model};a.prototype.getModelSize=function(){return this.modelSize};a.prototype.getModelRotation=function(){return this.deepCopy(this.modelRotation)};a.prototype.deepCopy=function(b){return[[b[0][0],b[0][1],b[0][2]],[b[1][0],b[1][1],b[1][2]],[b[2][0],b[2][1],b[2][2]]]};a.prototype.getStaircaseCutOutShape=function(){return this.staircaseCutOutShape};a.prototype.getCreator=function(){return this.creator};a.prototype.isBackFaceShown=function(){return this.backFaceShown};a.prototype.getColor=function(){return this.color};a.prototype.getIconYaw=function(){return this.iconYaw};a.prototype.isProportional=function(){return this.proportional};a.prototype.isModifiable=function(){return this.modifiable};a.prototype.isResizable=function(){return this.resizable};a.prototype.isDeformable=function(){return this.deformable};a.prototype.isWidthDepthDeformable=function(){return this.isDeformable()};a.prototype.isTexturable=function(){return this.texturable};a.prototype.isHorizontallyRotatable=function(){return this.horizontallyRotatable};a.prototype.getPrice=function(){return this.price};a.prototype.getValueAddedTaxPercentage=function(){return this.valueAddedTaxPercentage};a.prototype.getCurrency=function(){return this.currency};a.prototype.getProperty=function(b){return(function(c,d){return c[d]===undefined?null:c[d]})(this.properties,b)};a.prototype.getPropertyNames=function(){return Object.keys(this.properties)};a.prototype.getCategory=function(){return this.category};a.prototype.setCategory=function(b){this.category=b};a.prototype.equals=function(b){return(function(d,c){if(d&&d.equals){return d.equals(c)}else{return d===c}})(this,b)};a.prototype.hashCode=function(){return(function(b){if(b.hashCode){return b.hashCode()}else{return b.toString().split("").reduce(function(c,d){return(((c<<5)-c)+d.charCodeAt(0))|0},0)}})(this)};a.prototype.compareTo=function(c){var b=a.COMPARATOR_$LI$().compare(this.name,c.name);if(b!==0){return b}else{return this.modifiable===c.modifiable?0:(this.modifiable?1:-1)}};a.prototype.matchesFilter=function(d){var e=this.getFilterCollationKeys(d);var f=0;if(e.length>0){var b=this.getPieceOfFurnitureCollationKey();for(var c=0;c<e.length;c++){if(this.isSubCollationKey(b,e[c],0)){f++}else{break}}}return f===e.length};a.prototype.getFilterCollationKeys=function(d){if(d.length===0){return a.EMPTY_CRITERIA_$LI$()}var c=(function(h,i){return h[i]===undefined?null:h[i]})(a.recentFilters_$LI$(),d);if(c==null){var g=d.split("\\s|\\p{Punct}|\\|");var f=([]);for(var b=0;b<g.length;b++){var e=g[b];if(e.length>0){(f.push(a.COMPARATOR_$LI$().getCollationKey(e).toByteArray())>0)}}if(f.length===0){c=a.EMPTY_CRITERIA_$LI$()}else{c=f.slice(0)}(a.recentFilters_$LI$()[d]=c)}return c};a.prototype.getPieceOfFurnitureCollationKey=function(){if(this.filterCollationKey==null){var d={str:"",toString:function(){return this.str}};var e=this.getFilterCriteria();var b=function(f){var g=e[f];if(d.str.length!==0){(function(h){h.str=h.str.concat("|");return h})(d)}(function(h){h.str=h.str.concat(g);return h})(d)};for(var c=0;c<e.length;c++){b(c)}this.filterCollationKey=a.COMPARATOR_$LI$().getCollationKey(d.str).toByteArray()}return this.filterCollationKey};a.prototype.getFilterCriteria=function(){var e=([]);(e.push(this.getName())>0);if(this.getCategory()!=null){(e.push(this.getCategory().getName())>0)}if(this.getCreator()!=null){(e.push(this.getCreator())>0)}if(this.getDescription()!=null){(e.push(this.getDescription())>0)}var d=this.getTags();for(var c=0;c<d.length;c++){var b=d[c];(e.push(b)>0)}return e.slice(0)};a.prototype.isSubCollationKey=function(e,h,g){for(var d=g,f=e.length-4,b=h.length-4;d<f&&d<f-b+1;d++){if(e[d]===h[0]){for(var c=1;c<b;c++){if(e[d+c]!==h[c]){return this.isSubCollationKey(e,h,d+1)}}return true}}return false};a.prototype.clone=function(){try{var c=(function(e){var f=Object.create(e);for(var d in e){if(e.hasOwnProperty(d)){f[d]=e[d]}}return f})(this);c.category=null;return c}catch(b){throw new IllegalStateException("Super class isn't cloneable")}};a.__static_initialized=false;return a}());CatalogPieceOfFurniture.__class="com.eteks.sweethome3d.model.CatalogPieceOfFurniture";CatalogPieceOfFurniture.__interfaces=["com.eteks.sweethome3d.model.CatalogItem","java.lang.Cloneable","com.eteks.sweethome3d.model.PieceOfFurniture","java.lang.Comparable"];var CollectionChangeSupport=(function(){function a(b){if(this.source===undefined){this.source=null}if(this.collectionListeners===undefined){this.collectionListeners=null}this.source=b;this.collectionListeners=([])}a.prototype.addCollectionListener=function(b){(this.collectionListeners.push(b)>0)};a.prototype.removeCollectionListener=function(b){(function(c){var d=c.indexOf(b);if(d>=0){c.splice(d,1);return true}else{return false}})(this.collectionListeners)};a.prototype.fireCollectionChanged$java_lang_Object$com_eteks_sweethome3d_model_CollectionEvent_Type=function(c,b){this.fireCollectionChanged(c,-1,b)};a.prototype.fireCollectionChanged$java_lang_Object$int$com_eteks_sweethome3d_model_CollectionEvent_Type=function(f,c,d){if(!(this.collectionListeners.length==0)){var b=(new CollectionEvent(this.source,f,c,d));var e=this.collectionListeners.slice(0);for(var h=0;h<e.length;h++){var g=e[h];((function(i){return(i.collectionChanged===undefined)?i:i.collectionChanged})(g))(b)}}};a.prototype.fireCollectionChanged=function(d,b,c){if(((d!=null)||d===null)&&((typeof b==="number")||b===null)&&((typeof c==="number")||c===null)){return this.fireCollectionChanged$java_lang_Object$int$com_eteks_sweethome3d_model_CollectionEvent_Type(d,b,c)}else{if(((d!=null)||d===null)&&((typeof b==="number")||b===null)&&c===undefined){return this.fireCollectionChanged$java_lang_Object$com_eteks_sweethome3d_model_CollectionEvent_Type(d,b)}else{throw new Error("invalid overload")}}};return a}());CollectionChangeSupport.__class="com.eteks.sweethome3d.model.CollectionChangeSupport";var CollectionEvent=(function(a){__extends(b,a);function b(c,k,h,j){var f=this;if(((c!=null)||c===null)&&((k!=null)||k===null)&&((typeof h==="number")||h===null)&&((typeof j==="number")||j===null)){var g=arguments;f=a.call(this,c)||this;if(f.item===undefined){f.item=null}if(f.index===undefined){f.index=0}if(f.type===undefined){f.type=null}f.item=k;f.index=h;f.type=j}else{if(((c!=null)||c===null)&&((k!=null)||k===null)&&((typeof h==="number")||h===null)&&j===undefined){var g=arguments;var i=g[2];var d=arguments;var e=-1;f=a.call(this,c)||this;if(f.item===undefined){f.item=null}if(f.index===undefined){f.index=0}if(f.type===undefined){f.type=null}f.item=k;f.index=e;f.type=i;if(f.item===undefined){f.item=null}if(f.index===undefined){f.index=0}if(f.type===undefined){f.type=null}}else{throw new Error("invalid overload")}}return f}b.prototype.getItem=function(){return this.item};b.prototype.getIndex=function(){return this.index};b.prototype.getType=function(){return this.type};return b}(EventObject));CollectionEvent.__class="com.eteks.sweethome3d.model.CollectionEvent";CollectionEvent.__interfaces=["java.io.Serializable"];(function(b){var a;(function(c){c[c.ADD=0]="ADD";c[c.DELETE=1]="DELETE"})(a=b.Type||(b.Type={}))})(CollectionEvent||(CollectionEvent={}));CollectionEvent.__transients=["source"];var SelectionEvent=(function(b){__extends(a,b);function a(c,e){var d=b.call(this,c)||this;if(d.selectedItems===undefined){d.selectedItems=null}d.selectedItems=e;return d}a.prototype.getSelectedItems=function(){return this.selectedItems};return a}(EventObject));SelectionEvent.__class="com.eteks.sweethome3d.model.SelectionEvent";SelectionEvent.__interfaces=["java.io.Serializable"];SelectionEvent.__transients=["source"];var FurnitureCategory=(function(){function a(b){if(this.name===undefined){this.name=null}if(this.furniture===undefined){this.furniture=null}this.name=b;this.furniture=([])}a.COMPARATOR_$LI$=function(){if(a.COMPARATOR==null){a.COMPARATOR={compare:function(c,b){return c.toString().localeCompare(b.toString())},equals:function(c,b){return c.toString().localeCompare(b.toString())===0}}}return a.COMPARATOR};a.prototype.getName=function(){return this.name};a.prototype.getFurniture=function(){return this.furniture.slice(0)};a.prototype.getFurnitureCount=function(){return this.furniture.length};a.prototype.getPieceOfFurniture=function(b){return this.furniture[b]};a.prototype.getIndexOfPieceOfFurniture=function(b){return this.furniture.indexOf(b)};a.prototype.add=function(c){c.setCategory(this);var b=(function(e,h){var f=function(m,l){if(m.compareTo){return m.compareTo(l)}else{return m.localeCompare(l)}};var d=0;var j=e.length-1;while(d<=j){var g=(d+j)>>>1;var k=e[g];var i=f(k,h);if(i<0){d=g+1}else{if(i>0){j=g-1}else{return g}}}return -(d+1)})(this.furniture,c);if(b<0){b=-b-1}this.furniture.splice(b,0,c)};a.prototype["delete"]=function(b){var c=this.furniture.indexOf(b);if(c===-1){throw new IllegalArgumentException(this.name+" doesn't contain piece "+b.getName())}this.furniture=(this.furniture.slice(0));this.furniture.splice(c,1)[0]};a.prototype.equals=function(b){return(b!=null&&b instanceof a)&&a.COMPARATOR_$LI$().equals(this.name,b.name)};a.prototype.hashCode=function(){return(function(b){if(b.hashCode){return b.hashCode()}else{return b.toString().split("").reduce(function(c,d){return(((c<<5)-c)+d.charCodeAt(0))|0},0)}})(this.name)};a.prototype.compareTo=function(b){return a.COMPARATOR_$LI$().compare(this.name,b.name)};return a}());FurnitureCategory.__class="com.eteks.sweethome3d.model.FurnitureCategory";FurnitureCategory.__interfaces=["java.lang.Comparable"];var HomeMaterial=(function(){function a(c,j,e,i,l){if(((typeof c==="string")||c===null)&&((typeof j==="string")||j===null)&&((typeof e==="number")||e===null)&&((i!=null&&i instanceof HomeTexture)||i===null)&&((typeof l==="number")||l===null)){var g=arguments;if(this.name===undefined){this.name=null}if(this.key===undefined){this.key=null}if(this.color===undefined){this.color=null}if(this.texture===undefined){this.texture=null}if(this.shininess===undefined){this.shininess=null}this.name=c;this.key=j;this.color=e;this.texture=i;this.shininess=l}else{if(((typeof c==="string")||c===null)&&((typeof j==="number")||j===null)&&((e!=null&&e instanceof HomeTexture)||e===null)&&((typeof i==="number")||i===null)&&l===undefined){var g=arguments;var k=g[1];var h=g[2];var d=g[3];var b=arguments;var f=null;if(this.name===undefined){this.name=null}if(this.key===undefined){this.key=null}if(this.color===undefined){this.color=null}if(this.texture===undefined){this.texture=null}if(this.shininess===undefined){this.shininess=null}this.name=c;this.key=f;this.color=k;this.texture=h;this.shininess=d;if(this.name===undefined){this.name=null}if(this.key===undefined){this.key=null}if(this.color===undefined){this.color=null}if(this.texture===undefined){this.texture=null}if(this.shininess===undefined){this.shininess=null}}else{throw new Error("invalid overload")}}}a.prototype.getName=function(){return this.name};a.prototype.getKey=function(){return this.key};a.prototype.getColor=function(){return this.color};a.prototype.getTexture=function(){return this.texture};a.prototype.getShininess=function(){return this.shininess};a.prototype.equals=function(b){if(b!=null&&b instanceof a){var c=b;return(c.name===this.name||(c.name!=null&&(c.name===this.name)))&&(c.key===this.key||(c.key!=null&&(c.key===this.name)))&&(c.color===this.color||(c.color!=null&&(c.color===this.color)))&&(c.texture===this.texture||(c.texture!=null&&c.texture.equals(this.texture)))&&(c.shininess===this.shininess||(c.shininess!=null&&(c.shininess===this.shininess)))}return false};a.prototype.hashCode=function(){var b=0;if(this.name!=null){b+=(function(c){if(c.hashCode){return c.hashCode()}else{return c.toString().split("").reduce(function(d,e){return(((d<<5)-d)+e.charCodeAt(0))|0},0)}})(this.name)}if(this.key!=null){b+=(function(c){if(c.hashCode){return c.hashCode()}else{return c.toString().split("").reduce(function(d,e){return(((d<<5)-d)+e.charCodeAt(0))|0},0)}})(this.key)}if(this.color!=null){b+=(function(c){if(c.hashCode){return c.hashCode()}else{return c.toString().split("").reduce(function(d,e){return(((d<<5)-d)+e.charCodeAt(0))|0},0)}})(this.color)}if(this.texture!=null){b+=(function(c){if(c.hashCode){return c.hashCode()}else{return c.toString().split("").reduce(function(d,e){return(((d<<5)-d)+e.charCodeAt(0))|0},0)}})(this.texture)}if(this.shininess!=null){b+=(function(c){if(c.hashCode){return c.hashCode()}else{return c.toString().split("").reduce(function(d,e){return(((d<<5)-d)+e.charCodeAt(0))|0},0)}})(this.shininess)}return b};return a}());HomeMaterial.__class="com.eteks.sweethome3d.model.HomeMaterial";HomeMaterial.__interfaces=["java.io.Serializable"];var Sash=(function(){function a(f,c,e,d,b){if(this.xAxis===undefined){this.xAxis=0}if(this.yAxis===undefined){this.yAxis=0}if(this.width===undefined){this.width=0}if(this.startAngle===undefined){this.startAngle=0}if(this.endAngle===undefined){this.endAngle=0}this.xAxis=f;this.yAxis=c;this.width=e;this.startAngle=d;this.endAngle=b}a.prototype.getXAxis=function(){return this.xAxis};a.prototype.getYAxis=function(){return this.yAxis};a.prototype.getWidth=function(){return this.width};a.prototype.getStartAngle=function(){return this.startAngle};a.prototype.getEndAngle=function(){return this.endAngle};return a}());Sash.__class="com.eteks.sweethome3d.model.Sash";Sash.__interfaces=["java.io.Serializable"];var PieceOfFurniture;(function(a){a.DEFAULT_CUT_OUT_SHAPE="M0,0 v1 h1 v-1 z"})(PieceOfFurniture||(PieceOfFurniture={}));var HomeController3D=(function(){function a(f,c,b,e,d){if(this.home===undefined){this.home=null}if(this.preferences===undefined){this.preferences=null}if(this.viewFactory===undefined){this.viewFactory=null}if(this.contentManager===undefined){this.contentManager=null}if(this.undoSupport===undefined){this.undoSupport=null}if(this.home3DView===undefined){this.home3DView=null}if(this.topCameraState===undefined){this.topCameraState=null}if(this.observerCameraState===undefined){this.observerCameraState=null}if(this.cameraState===undefined){this.cameraState=null}this.home=f;this.preferences=c;this.viewFactory=b;this.contentManager=e;this.undoSupport=d;this.topCameraState=new a.TopCameraState(this,c);this.observerCameraState=new a.ObserverCameraState(this);this.setCameraState(f.getCamera()===f.getTopCamera()?this.topCameraState:this.observerCameraState);this.addModelListeners(f)}a.prototype.addModelListeners=function(e){e.addPropertyChangeListener("CAMERA",new a.HomeController3D$0(this,e));var c=new a.HomeController3D$1(this,e);var d=e.getSelectedLevel();if(d!=null){d.addPropertyChangeListener(c)}e.addPropertyChangeListener("SELECTED_LEVEL",new a.HomeController3D$2(this,e,c));var b=new a.HomeController3D$3(this,e);e.addPropertyChangeListener("SELECTED_LEVEL",b);e.getEnvironment().addPropertyChangeListener("ALL_LEVELS_VISIBLE",b)};a.prototype.getObserverCameraMinimumElevation=function(d){var c=d.getLevels();var b=c.length===0?10:10+c[0].getElevation();return b};a.prototype.getView=function(){if(this.home3DView==null){this.home3DView=this.viewFactory.createView3D(this.home,this.preferences,this)}return this.home3DView};a.prototype.viewFromTop=function(){this.home.setCamera(this.home.getTopCamera())};a.prototype.viewFromObserver=function(){this.home.setCamera(this.home.getObserverCamera())};a.prototype.storeCamera=function(c){var f=this.home.getCamera().duplicate();f.setName(c);var e=this.home.getStoredCameras();var b=([]);(function(i,h){return i.push.apply(i,h)})(b,e);for(var d=b.length-1;d>=0;d--){var g=b[d];if((c===g.getName())||(f.getX()===g.getX()&&f.getY()===g.getY()&&f.getZ()===g.getZ()&&f.getPitch()===g.getPitch()&&f.getYaw()===g.getYaw()&&f.getFieldOfView()===g.getFieldOfView()&&f.getTime()===g.getTime()&&f.getLens()===g.getLens())){b.splice(d,1)[0]}}b.splice(0,0,f);while((b.length>this.preferences.getStoredCamerasMaxCount())){b.splice(b.length-1,1)[0]}this.home.setStoredCameras(b)};a.prototype.goToCamera=function(c){if(c!=null&&c instanceof ObserverCamera){this.viewFromObserver()}else{this.viewFromTop()}this.cameraState.goToCamera(c);var b=(this.home.getStoredCameras().slice(0));(function(d){var e=d.indexOf(c);if(e>=0){d.splice(e,1);return true}else{return false}})(b);b.splice(0,0,c);this.home.setStoredCameras(b)};a.prototype.deleteCameras=function(d){var c=this.home.getStoredCameras();var b=([]);for(var f=0;f<c.length;f++){var e=c[f];if(!(d.indexOf((e))>=0)){(b.push(e)>0)}}this.home.setStoredCameras(b)};a.prototype.displayAllLevels=function(){this.home.getEnvironment().setAllLevelsVisible(true)};a.prototype.displaySelectedLevel=function(){this.home.getEnvironment().setAllLevelsVisible(false)};a.prototype.setCameraState=function(b){if(this.cameraState!=null){this.cameraState.exit()}this.cameraState=b;this.cameraState.enter()};a.prototype.moveCamera=function(b){this.cameraState.moveCamera(b)};a.prototype.moveCameraSideways=function(b){this.cameraState.moveCameraSideways(b)};a.prototype.elevateCamera=function(b){this.cameraState.elevateCamera(b)};a.prototype.rotateCameraYaw=function(b){this.cameraState.rotateCameraYaw(b)};a.prototype.rotateCameraPitch=function(b){this.cameraState.rotateCameraPitch(b)};a.prototype.modifyFieldOfView=function(b){this.cameraState.modifyFieldOfView(b)};a.prototype.getObserverCameraState=function(){return this.observerCameraState};a.prototype.getTopCameraState=function(){return this.topCameraState};return a}());HomeController3D.__class="com.eteks.sweethome3d.viewcontroller.HomeController3D";HomeController3D.__interfaces=["com.eteks.sweethome3d.viewcontroller.Controller"];(function(g){var i=(function(){function j(){}j.prototype.enter=function(){};j.prototype.exit=function(){};j.prototype.moveCamera=function(k){};j.prototype.moveCameraSideways=function(k){};j.prototype.elevateCamera=function(k){};j.prototype.rotateCameraYaw=function(k){};j.prototype.rotateCameraPitch=function(k){};j.prototype.modifyFieldOfView=function(k){};j.prototype.goToCamera=function(k){};return j}());g.CameraControllerState=i;i.__class="com.eteks.sweethome3d.viewcontroller.HomeController3D.CameraControllerState";var h=(function(){function j(k){if(this.topCameraState===undefined){this.topCameraState=null}this.topCameraState=(k)}j.prototype.propertyChange=function(l){var m=this.topCameraState;var k=l.getSource();if(m==null){k.removePropertyChangeListener(l.getPropertyName(),this)}else{m.setAerialViewCenteredOnSelectionEnabled(k.isAerialViewCenteredOnSelectionEnabled())}};return j}());g.UserPreferencesChangeListener=h;h.__class="com.eteks.sweethome3d.viewcontroller.HomeController3D.UserPreferencesChangeListener";h.__interfaces=["java.util.EventListener","java.beans.PropertyChangeListener"];var f=(function(k){__extends(j,k);function j(m,l){var n=k.call(this)||this;n.__parent=m;n.MIN_WIDTH=100;n.MIN_DEPTH=n.MIN_WIDTH;n.MIN_HEIGHT=20;if(n.topCamera===undefined){n.topCamera=null}if(n.aerialViewBoundsLowerPoint===undefined){n.aerialViewBoundsLowerPoint=null}if(n.aerialViewBoundsUpperPoint===undefined){n.aerialViewBoundsUpperPoint=null}if(n.minDistanceToAerialViewCenter===undefined){n.minDistanceToAerialViewCenter=0}if(n.maxDistanceToAerialViewCenter===undefined){n.maxDistanceToAerialViewCenter=0}if(n.aerialViewCenteredOnSelectionEnabled===undefined){n.aerialViewCenteredOnSelectionEnabled=false}if(n.previousSelectionEmpty===undefined){n.previousSelectionEmpty=false}n.distanceToCenterWithSelection=-1;n.objectChangeListener=new j.TopCameraState$0(n);n.levelsListener=function(o){if(o.getType()===CollectionEvent.Type.ADD){o.getItem().addPropertyChangeListener(n.objectChangeListener)}else{if(o.getType()===CollectionEvent.Type.DELETE){o.getItem().removePropertyChangeListener(n.objectChangeListener)}}n.updateCameraFromHomeBounds(false,false)};n.wallsListener=function(o){if(o.getType()===CollectionEvent.Type.ADD){o.getItem().addPropertyChangeListener(n.objectChangeListener)}else{if(o.getType()===CollectionEvent.Type.DELETE){o.getItem().removePropertyChangeListener(n.objectChangeListener)}}n.updateCameraFromHomeBounds(false,false)};n.furnitureListener=function(o){if(o.getType()===CollectionEvent.Type.ADD){n.addPropertyChangeListener(o.getItem(),n.objectChangeListener);n.updateCameraFromHomeBounds(m.home.getFurniture().length===1&&(m.home.getWalls().length==0)&&(m.home.getRooms().length==0),false)}else{if(o.getType()===CollectionEvent.Type.DELETE){n.removePropertyChangeListener(o.getItem(),n.objectChangeListener);n.updateCameraFromHomeBounds(false,false)}}};n.roomsListener=function(o){if(o.getType()===CollectionEvent.Type.ADD){o.getItem().addPropertyChangeListener(n.objectChangeListener)}else{if(o.getType()===CollectionEvent.Type.DELETE){o.getItem().removePropertyChangeListener(n.objectChangeListener)}}n.updateCameraFromHomeBounds(false,false)};n.polylinesListener=function(o){if(o.getType()===CollectionEvent.Type.ADD){o.getItem().addPropertyChangeListener(n.objectChangeListener)}else{if(o.getType()===CollectionEvent.Type.DELETE){o.getItem().removePropertyChangeListener(n.objectChangeListener)}}n.updateCameraFromHomeBounds(false,false)};n.labelsListener=function(o){if(o.getType()===CollectionEvent.Type.ADD){o.getItem().addPropertyChangeListener(n.objectChangeListener)}else{if(o.getType()===CollectionEvent.Type.DELETE){o.getItem().removePropertyChangeListener(n.objectChangeListener)}}n.updateCameraFromHomeBounds(false,false)};n.selectionListener=new j.TopCameraState$1(n);if(n.userPreferencesChangeListener===undefined){n.userPreferencesChangeListener=null}n.userPreferencesChangeListener=new g.UserPreferencesChangeListener(n);return n}j.prototype.addPropertyChangeListener=function(m,o){if(m!=null&&m instanceof HomeFurnitureGroup){var l=m.getFurniture();for(var n=0;n<l.length;n++){var p=l[n];this.addPropertyChangeListener(p,o)}}else{m.addPropertyChangeListener(o)}};j.prototype.removePropertyChangeListener=function(m,n){if(m!=null&&m instanceof HomeFurnitureGroup){var p=m.getFurniture();for(var l=0;l<p.length;l++){var o=p[l];this.removePropertyChangeListener(o,n)}}else{m.removePropertyChangeListener(n)}};j.prototype.enter=function(){this.topCamera=this.__parent.home.getCamera();this.previousSelectionEmpty=(this.__parent.home.getSelectedItems().length==0);this.aerialViewCenteredOnSelectionEnabled=this.__parent.preferences.isAerialViewCenteredOnSelectionEnabled();this.updateCameraFromHomeBounds(false,false);var r=this.__parent.home.getLevels();for(var x=0;x<r.length;x++){var m=r[x];m.addPropertyChangeListener(this.objectChangeListener)}this.__parent.home.addLevelsListener((this.levelsListener));var q=this.__parent.home.getWalls();for(var w=0;w<q.length;w++){var A=q[w];A.addPropertyChangeListener(this.objectChangeListener)}this.__parent.home.addWallsListener((this.wallsListener));var o=this.__parent.home.getFurniture();for(var v=0;v<o.length;v++){var p=o[v];this.addPropertyChangeListener(p,this.objectChangeListener)}this.__parent.home.addFurnitureListener((this.furnitureListener));var n=this.__parent.home.getRooms();for(var u=0;u<n.length;u++){var C=n[u];C.addPropertyChangeListener(this.objectChangeListener)}this.__parent.home.addRoomsListener((this.roomsListener));var l=this.__parent.home.getPolylines();for(var s=0;s<l.length;s++){var z=l[s];z.addPropertyChangeListener(this.objectChangeListener)}this.__parent.home.addPolylinesListener((this.polylinesListener));var y=this.__parent.home.getLabels();for(var B=0;B<y.length;B++){var t=y[B];t.addPropertyChangeListener(this.objectChangeListener)}this.__parent.home.addLabelsListener((this.labelsListener));this.__parent.home.addSelectionListener(this.selectionListener);this.__parent.preferences.addPropertyChangeListener("AERIAL_VIEW_CENTERED_ON_SELECTION_ENABLED",this.userPreferencesChangeListener)};j.prototype.setAerialViewCenteredOnSelectionEnabled=function(l){this.aerialViewCenteredOnSelectionEnabled=l;this.updateCameraFromHomeBounds(false,false)};j.prototype.updateCameraFromHomeBounds=function(n,l){if(this.aerialViewBoundsLowerPoint==null){this.updateAerialViewBoundsFromHomeBounds(this.aerialViewCenteredOnSelectionEnabled)}var m;if(l&&this.__parent.preferences.isAerialViewCenteredOnSelectionEnabled()&&this.distanceToCenterWithSelection!==-1){m=this.distanceToCenterWithSelection}else{m=this.getCameraToAerialViewCenterDistance()}if(!(this.__parent.home.getSelectedItems().length==0)){this.distanceToCenterWithSelection=m}this.updateAerialViewBoundsFromHomeBounds(this.aerialViewCenteredOnSelectionEnabled);this.updateCameraIntervalToAerialViewCenter();this.placeCameraAt(m,n)};j.prototype.getCameraToAerialViewCenterDistance=function(){return Math.sqrt(Math.pow((this.aerialViewBoundsLowerPoint[0]+this.aerialViewBoundsUpperPoint[0])/2-this.topCamera.getX(),2)+Math.pow((this.aerialViewBoundsLowerPoint[1]+this.aerialViewBoundsUpperPoint[1])/2-this.topCamera.getY(),2)+Math.pow((this.aerialViewBoundsLowerPoint[2]+this.aerialViewBoundsUpperPoint[2])/2-this.topCamera.getZ(),2))};j.prototype.updateAerialViewBoundsFromHomeBounds=function(q){this.aerialViewBoundsLowerPoint=this.aerialViewBoundsUpperPoint=null;var B=[];if(q){B=([]);var y=this.__parent.home.getSelectedItems();for(var u=0;u<y.length;u++){var C=y[u];if((C!=null&&(C.constructor!=null&&C.constructor.__interfaces!=null&&C.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Elevatable")>=0))&&this.isItemAtVisibleLevel(C)&&(!(C!=null&&C instanceof HomePieceOfFurniture)||C.isVisible())&&(!(C!=null&&C instanceof Label)||C.getPitch()!=null)){(B.push(C)>0)}}}var W=B.length===0||!q;var N=false;var x=W?this.__parent.home.getWalls():Home.getWallsSubList(B);for(var s=0;s<x.length;s++){var t=x[s];if(this.isItemAtVisibleLevel(t)){N=true;var L=t.getLevel()!=null?t.getLevel().getElevation():0;var K=W?0:L;var n=t.getHeight();var A=void 0;if(n!=null){A=L+n}else{A=L+this.__parent.home.getWallHeight()}var r=t.getHeightAtEnd();if(r!=null){A=Math.max(A,L+r)}var w=t.getPoints$();for(var p=0;p<w.length;p++){var G=w[p];this.updateAerialViewBounds(G[0],G[1],K,A)}}}var v=W?this.__parent.home.getFurniture():Home.getFurnitureSubList(B);for(var o=0;o<v.length;o++){var z=v[o];if(z.isVisible()&&this.isItemAtVisibleLevel(z)){var K=void 0;var A=void 0;if(W){K=Math.max(0,z.getGroundElevation());A=Math.max(0,z.getGroundElevation()+z.getHeightInPlan())}else{K=z.getGroundElevation();A=z.getGroundElevation()+z.getHeightInPlan()}var m=z.getPoints();for(var T=0;T<m.length;T++){var G=m[T];this.updateAerialViewBounds(G[0],G[1],K,A)}}}var l=W?this.__parent.home.getRooms():Home.getRoomsSubList(B);for(var S=0;S<l.length;S++){var D=l[S];if(this.isItemAtVisibleLevel(D)){var K=0;var A=this.MIN_HEIGHT;var I=D.getLevel();if(I!=null){K=I.getElevation()-I.getFloorThickness();A=I.getElevation();if(W){K=Math.max(0,K);A=Math.max(this.MIN_HEIGHT,I.getElevation())}}var X=D.getPoints();for(var R=0;R<X.length;R++){var G=X[R];this.updateAerialViewBounds(G[0],G[1],K,A)}}}var V=W?this.__parent.home.getPolylines():Home.getPolylinesSubList(B);for(var P=0;P<V.length;P++){var Q=V[P];if(Q.isVisibleIn3D()&&this.isItemAtVisibleLevel(Q)){var K=void 0;var A=void 0;if(W){K=Math.max(0,Q.getGroundElevation());A=Math.max(this.MIN_HEIGHT,Q.getGroundElevation())}else{K=A=Q.getGroundElevation()}var U=Q.getPoints();for(var O=0;O<U.length;O++){var G=U[O];this.updateAerialViewBounds(G[0],G[1],K,A)}}}var J=W?this.__parent.home.getLabels():Home.getLabelsSubList(B);for(var F=0;F<J.length;F++){var M=J[F];if(M.getPitch()!=null&&this.isItemAtVisibleLevel(M)){var K=void 0;var A=void 0;if(W){K=Math.max(0,M.getGroundElevation());A=Math.max(this.MIN_HEIGHT,M.getGroundElevation())}else{K=A=M.getGroundElevation()}var H=M.getPoints();for(var E=0;E<H.length;E++){var G=H[E];this.updateAerialViewBounds(G[0],G[1],K,A)}}}if(this.aerialViewBoundsLowerPoint==null){this.aerialViewBoundsLowerPoint=[0,0,0];this.aerialViewBoundsUpperPoint=[this.MIN_WIDTH,this.MIN_DEPTH,this.MIN_HEIGHT]}else{if(N&&W){if(this.MIN_WIDTH>this.aerialViewBoundsUpperPoint[0]-this.aerialViewBoundsLowerPoint[0]){this.aerialViewBoundsLowerPoint[0]=(this.aerialViewBoundsLowerPoint[0]+this.aerialViewBoundsUpperPoint[0])/2-this.MIN_WIDTH/2;this.aerialViewBoundsUpperPoint[0]=this.aerialViewBoundsLowerPoint[0]+this.MIN_WIDTH}if(this.MIN_DEPTH>this.aerialViewBoundsUpperPoint[1]-this.aerialViewBoundsLowerPoint[1]){this.aerialViewBoundsLowerPoint[1]=(this.aerialViewBoundsLowerPoint[1]+this.aerialViewBoundsUpperPoint[1])/2-this.MIN_DEPTH/2;this.aerialViewBoundsUpperPoint[1]=this.aerialViewBoundsLowerPoint[1]+this.MIN_DEPTH}if(this.MIN_HEIGHT>this.aerialViewBoundsUpperPoint[2]-this.aerialViewBoundsLowerPoint[2]){this.aerialViewBoundsLowerPoint[2]=(this.aerialViewBoundsLowerPoint[2]+this.aerialViewBoundsUpperPoint[2])/2-this.MIN_HEIGHT/2;this.aerialViewBoundsUpperPoint[2]=this.aerialViewBoundsLowerPoint[2]+this.MIN_HEIGHT}}}};j.prototype.updateAerialViewBounds=function(l,o,n,m){if(this.aerialViewBoundsLowerPoint==null){this.aerialViewBoundsLowerPoint=[l,o,n];this.aerialViewBoundsUpperPoint=[l,o,m]}else{this.aerialViewBoundsLowerPoint[0]=Math.min(this.aerialViewBoundsLowerPoint[0],l);this.aerialViewBoundsUpperPoint[0]=Math.max(this.aerialViewBoundsUpperPoint[0],l);this.aerialViewBoundsLowerPoint[1]=Math.min(this.aerialViewBoundsLowerPoint[1],o);this.aerialViewBoundsUpperPoint[1]=Math.max(this.aerialViewBoundsUpperPoint[1],o);this.aerialViewBoundsLowerPoint[2]=Math.min(this.aerialViewBoundsLowerPoint[2],n);this.aerialViewBoundsUpperPoint[2]=Math.max(this.aerialViewBoundsUpperPoint[2],m)}};j.prototype.isItemAtVisibleLevel=function(l){return l.getLevel()==null||l.getLevel().isViewableAndVisible()};j.prototype.updateCameraIntervalToAerialViewCenter=function(){var m=this.aerialViewBoundsUpperPoint[0]-this.aerialViewBoundsLowerPoint[0];var o=this.aerialViewBoundsUpperPoint[1]-this.aerialViewBoundsLowerPoint[1];var l=this.aerialViewBoundsUpperPoint[2]-this.aerialViewBoundsLowerPoint[2];var n=Math.sqrt(m*m+o*o+l*l)/2;this.minDistanceToAerialViewCenter=n*1.05;this.maxDistanceToAerialViewCenter=Math.max(5*this.minDistanceToAerialViewCenter,5000)};j.prototype.moveCamera=function(m){m*=5;var l=this.getCameraToAerialViewCenterDistance()-m;this.placeCameraAt(l,false)};j.prototype.placeCameraAt=function(l,n){l=Math.max(l,this.minDistanceToAerialViewCenter);l=Math.min(l,this.maxDistanceToAerialViewCenter);if(n){l=Math.min(l,3*this.minDistanceToAerialViewCenter)}var m=l*Math.cos(this.topCamera.getPitch());this.topCamera.setX((this.aerialViewBoundsLowerPoint[0]+this.aerialViewBoundsUpperPoint[0])/2+(Math.sin(this.topCamera.getYaw())*m));this.topCamera.setY((this.aerialViewBoundsLowerPoint[1]+this.aerialViewBoundsUpperPoint[1])/2-(Math.cos(this.topCamera.getYaw())*m));this.topCamera.setZ((this.aerialViewBoundsLowerPoint[2]+this.aerialViewBoundsUpperPoint[2])/2+Math.sin(this.topCamera.getPitch())*l)};j.prototype.rotateCameraYaw=function(n){var l=this.topCamera.getYaw()+n;var m=this.getCameraToAerialViewCenterDistance()*Math.cos(this.topCamera.getPitch());this.topCamera.setYaw(l);this.topCamera.setX((this.aerialViewBoundsLowerPoint[0]+this.aerialViewBoundsUpperPoint[0])/2+(Math.sin(l)*m));this.topCamera.setY((this.aerialViewBoundsLowerPoint[1]+this.aerialViewBoundsUpperPoint[1])/2-(Math.cos(l)*m))};j.prototype.rotateCameraPitch=function(o){var n=this.topCamera.getPitch()+o;n=Math.max(n,0);n=Math.min(n,Math.PI/2);var l=this.getCameraToAerialViewCenterDistance();var m=l*Math.cos(n);this.topCamera.setPitch(n);this.topCamera.setX((this.aerialViewBoundsLowerPoint[0]+this.aerialViewBoundsUpperPoint[0])/2+(Math.sin(this.topCamera.getYaw())*m));this.topCamera.setY((this.aerialViewBoundsLowerPoint[1]+this.aerialViewBoundsUpperPoint[1])/2-(Math.cos(this.topCamera.getYaw())*m));this.topCamera.setZ((this.aerialViewBoundsLowerPoint[2]+this.aerialViewBoundsUpperPoint[2])/2+(l*Math.sin(n)))};j.prototype.goToCamera=function(l){this.topCamera.setCamera(l);this.topCamera.setTime(l.getTime());this.topCamera.setLens(l.getLens());this.updateCameraFromHomeBounds(false,false)};j.prototype.exit=function(){this.topCamera=null;var o=this.__parent.home.getWalls();for(var t=0;t<o.length;t++){var A=o[t];A.removePropertyChangeListener(this.objectChangeListener)}this.__parent.home.removeWallsListener((this.wallsListener));var n=this.__parent.home.getFurniture();for(var s=0;s<n.length;s++){var p=n[s];this.removePropertyChangeListener(p,this.objectChangeListener)}this.__parent.home.removeFurnitureListener((this.furnitureListener));var m=this.__parent.home.getRooms();for(var q=0;q<m.length;q++){var B=m[q];B.removePropertyChangeListener(this.objectChangeListener)}this.__parent.home.removeRoomsListener((this.roomsListener));var w=this.__parent.home.getPolylines();for(var C=0;C<w.length;C++){var x=w[C];x.removePropertyChangeListener(this.objectChangeListener)}this.__parent.home.removePolylinesListener((this.polylinesListener));var v=this.__parent.home.getLabels();for(var z=0;z<v.length;z++){var r=v[z];r.removePropertyChangeListener(this.objectChangeListener)}this.__parent.home.removeLabelsListener((this.labelsListener));var u=this.__parent.home.getLevels();for(var y=0;y<u.length;y++){var l=u[y];l.removePropertyChangeListener(this.objectChangeListener)}this.__parent.home.removeLevelsListener((this.levelsListener));this.__parent.home.removeSelectionListener(this.selectionListener);this.__parent.preferences.removePropertyChangeListener("AERIAL_VIEW_CENTERED_ON_SELECTION_ENABLED",this.userPreferencesChangeListener)};return j}(g.CameraControllerState));g.TopCameraState=f;f.__class="com.eteks.sweethome3d.viewcontroller.HomeController3D.TopCameraState";(function(j){var l=(function(){function m(n){this.__parent=n}m.prototype.propertyChange=function(n){this.__parent.updateCameraFromHomeBounds(false,false)};return m}());j.TopCameraState$0=l;l.__interfaces=["java.util.EventListener","java.beans.PropertyChangeListener"];var k=(function(){function m(n){this.__parent=n}m.prototype.selectionChanged=function(o){var n=(o.getSelectedItems().length==0);this.__parent.updateCameraFromHomeBounds(false,this.__parent.previousSelectionEmpty&&!n);this.__parent.previousSelectionEmpty=n};return m}());j.TopCameraState$1=k;k.__interfaces=["java.util.EventListener","com.eteks.sweethome3d.model.SelectionListener"]})(f=g.TopCameraState||(g.TopCameraState={}));var e=(function(k){__extends(j,k);function j(l){var m=k.call(this)||this;m.__parent=l;if(m.observerCamera===undefined){m.observerCamera=null}m.levelElevationChangeListener=new j.ObserverCameraState$0(m);m.levelsListener=function(n){if(n.getType()===CollectionEvent.Type.ADD){n.getItem().addPropertyChangeListener(m.levelElevationChangeListener)}else{if(n.getType()===CollectionEvent.Type.DELETE){n.getItem().removePropertyChangeListener(m.levelElevationChangeListener)}}m.updateCameraMinimumElevation()};return m}j.prototype.enter=function(){this.observerCamera=this.__parent.home.getCamera();var l=this.__parent.home.getLevels();for(var m=0;m<l.length;m++){var n=l[m];n.addPropertyChangeListener(this.levelElevationChangeListener)}this.__parent.home.addLevelsListener((this.levelsListener));if(this.__parent.preferences.isObserverCameraSelectedAtChange()){this.__parent.home.setSelectedItems([this.observerCamera].slice(0))}};j.prototype.moveCamera=function(l){this.observerCamera.setX(this.observerCamera.getX()-Math.sin(this.observerCamera.getYaw())*l);this.observerCamera.setY(this.observerCamera.getY()+Math.cos(this.observerCamera.getYaw())*l);if(this.__parent.preferences.isObserverCameraSelectedAtChange()){this.__parent.home.setSelectedItems([this.observerCamera].slice(0))}};j.prototype.moveCameraSideways=function(l){this.observerCamera.setX(this.observerCamera.getX()-Math.cos(this.observerCamera.getYaw())*l);this.observerCamera.setY(this.observerCamera.getY()-Math.sin(this.observerCamera.getYaw())*l);if(this.__parent.preferences.isObserverCameraSelectedAtChange()){this.__parent.home.setSelectedItems([this.observerCamera].slice(0))}};j.prototype.elevateCamera=function(m){var l=this.observerCamera.getZ()+m;l=Math.min(Math.max(l,this.getMinimumElevation()),this.__parent.preferences.getLengthUnit().getMaximumElevation());this.observerCamera.setZ(l);if(this.__parent.preferences.isObserverCameraSelectedAtChange()){this.__parent.home.setSelectedItems([this.observerCamera].slice(0))}};j.prototype.updateCameraMinimumElevation=function(){this.observerCamera.setZ(Math.max(this.observerCamera.getZ(),this.getMinimumElevation()))};j.prototype.getMinimumElevation=function(){var l=this.__parent.home.getLevels();if(l.length>0){return 10+l[0].getElevation()}else{return 10}};j.prototype.rotateCameraYaw=function(l){this.observerCamera.setYaw(this.observerCamera.getYaw()+l);if(this.__parent.preferences.isObserverCameraSelectedAtChange()){this.__parent.home.setSelectedItems([this.observerCamera].slice(0))}};j.prototype.rotateCameraPitch=function(m){var l=this.observerCamera.getPitch()+m;l=Math.min(Math.max(-Math.PI/2,l),Math.PI/2);this.observerCamera.setPitch(l);if(this.__parent.preferences.isObserverCameraSelectedAtChange()){this.__parent.home.setSelectedItems([this.observerCamera].slice(0))}};j.prototype.modifyFieldOfView=function(m){var l=this.observerCamera.getFieldOfView()+m;l=Math.min(Math.max((function(n){return n*Math.PI/180})(2),l),(function(n){return n*Math.PI/180})(120));this.observerCamera.setFieldOfView(l);if(this.__parent.preferences.isObserverCameraSelectedAtChange()){this.__parent.home.setSelectedItems([this.observerCamera].slice(0))}};j.prototype.goToCamera=function(l){this.observerCamera.setCamera(l);this.observerCamera.setTime(l.getTime());this.observerCamera.setLens(l.getLens())};j.prototype.exit=function(){var p=this;var o=this.__parent.home.getSelectedItems();if((o.indexOf((this.observerCamera))>=0)){o=(o.slice(0));(function(q){var r=q.indexOf(p.observerCamera);if(r>=0){q.splice(r,1);return true}else{return false}})(o);this.__parent.home.setSelectedItems(o)}var m=this.__parent.home.getLevels();for(var l=0;l<m.length;l++){var n=m[l];n.removePropertyChangeListener(this.levelElevationChangeListener)}this.__parent.home.removeLevelsListener((this.levelsListener));this.observerCamera=null};return j}(g.CameraControllerState));g.ObserverCameraState=e;e.__class="com.eteks.sweethome3d.viewcontroller.HomeController3D.ObserverCameraState";(function(j){var k=(function(){function l(m){this.__parent=m}l.prototype.propertyChange=function(m){if("ELEVATION"===m.getPropertyName()){this.__parent.updateCameraMinimumElevation()}};return l}());j.ObserverCameraState$0=k;k.__interfaces=["java.util.EventListener","java.beans.PropertyChangeListener"]})(e=g.ObserverCameraState||(g.ObserverCameraState={}));var d=(function(){function j(k,l){this.home=l;this.__parent=k}j.prototype.propertyChange=function(k){this.__parent.setCameraState(this.home.getCamera()===this.home.getTopCamera()?this.__parent.topCameraState:this.__parent.observerCameraState)};return j}());g.HomeController3D$0=d;d.__interfaces=["java.util.EventListener","java.beans.PropertyChangeListener"];var c=(function(){function j(k,l){this.home=l;this.__parent=k}j.prototype.propertyChange=function(k){if(("ELEVATION"===k.getPropertyName())&&this.home.getEnvironment().isObserverCameraElevationAdjusted()){this.home.getObserverCamera().setZ(Math.max(this.__parent.getObserverCameraMinimumElevation(this.home),this.home.getObserverCamera().getZ()+k.getNewValue()-k.getOldValue()))}};return j}());g.HomeController3D$1=c;c.__interfaces=["java.util.EventListener","java.beans.PropertyChangeListener"];var b=(function(){function j(l,m,k){this.home=m;this.levelElevationChangeListener=k;this.__parent=l}j.prototype.propertyChange=function(l){var k=l.getOldValue();var m=this.home.getSelectedLevel();if(this.home.getEnvironment().isObserverCameraElevationAdjusted()){this.home.getObserverCamera().setZ(Math.max(this.__parent.getObserverCameraMinimumElevation(this.home),this.home.getObserverCamera().getZ()+(m==null?0:m.getElevation())-(k==null?0:k.getElevation())))}if(k!=null){k.removePropertyChangeListener(this.levelElevationChangeListener)}if(m!=null){m.addPropertyChangeListener(this.levelElevationChangeListener)}};return j}());g.HomeController3D$2=b;b.__interfaces=["java.util.EventListener","java.beans.PropertyChangeListener"];var a=(function(){function j(k,l){this.home=l;this.__parent=k}j.prototype.propertyChange=function(l){var n=this.home.getLevels();var m=this.home.getSelectedLevel();var o=true;for(var k=0;k<n.length;k++){n[k].setVisible(o);if(n[k]===m&&!this.home.getEnvironment().isAllLevelsVisible()){o=false}}};return j}());g.HomeController3D$3=a;a.__interfaces=["java.util.EventListener","java.beans.PropertyChangeListener"]})(HomeController3D||(HomeController3D={}));var View;(function(b){var a;(function(c){c[c.MOUSE=0]="MOUSE";c[c.TOUCH=1]="TOUCH"})(a=b.PointerType||(b.PointerType={}))})(View||(View={}));var Room=(function(b){__extends(a,b);function a(i,d){var h=this;if(((typeof i==="string")||i===null)&&((d!=null&&d instanceof Array&&(d.length==0||d[0]==null||d[0] instanceof Array))||d===null)){var f=arguments;h=b.call(this,i)||this;if(h.name===undefined){h.name=null}if(h.nameXOffset===undefined){h.nameXOffset=0}if(h.nameYOffset===undefined){h.nameYOffset=0}if(h.nameStyle===undefined){h.nameStyle=null}if(h.nameAngle===undefined){h.nameAngle=0}if(h.points===undefined){h.points=null}if(h.areaVisible===undefined){h.areaVisible=false}if(h.areaXOffset===undefined){h.areaXOffset=0}if(h.areaYOffset===undefined){h.areaYOffset=0}if(h.areaStyle===undefined){h.areaStyle=null}if(h.areaAngle===undefined){h.areaAngle=0}if(h.floorVisible===undefined){h.floorVisible=false}if(h.floorColor===undefined){h.floorColor=null}if(h.floorTexture===undefined){h.floorTexture=null}if(h.floorShininess===undefined){h.floorShininess=0}if(h.ceilingVisible===undefined){h.ceilingVisible=false}if(h.ceilingColor===undefined){h.ceilingColor=null}if(h.ceilingTexture===undefined){h.ceilingTexture=null}if(h.ceilingShininess===undefined){h.ceilingShininess=0}if(h.level===undefined){h.level=null}if(h.shapeCache===undefined){h.shapeCache=null}if(h.areaCache===undefined){h.areaCache=null}if(d.length<=1){throw new IllegalStateException("Room points must containt at least two points")}h.points=h.deepCopy(d);h.areaVisible=true;h.nameYOffset=-40;h.floorVisible=true;h.ceilingVisible=true}else{if(((i!=null&&i instanceof Array&&(i.length==0||i[0]==null||i[0] instanceof Array))||i===null)&&d===undefined){var f=arguments;var e=f[0];var g=arguments;var c=HomeObject.createId("room");h=b.call(this,c)||this;if(h.name===undefined){h.name=null}if(h.nameXOffset===undefined){h.nameXOffset=0}if(h.nameYOffset===undefined){h.nameYOffset=0}if(h.nameStyle===undefined){h.nameStyle=null}if(h.nameAngle===undefined){h.nameAngle=0}if(h.points===undefined){h.points=null}if(h.areaVisible===undefined){h.areaVisible=false}if(h.areaXOffset===undefined){h.areaXOffset=0}if(h.areaYOffset===undefined){h.areaYOffset=0}if(h.areaStyle===undefined){h.areaStyle=null}if(h.areaAngle===undefined){h.areaAngle=0}if(h.floorVisible===undefined){h.floorVisible=false}if(h.floorColor===undefined){h.floorColor=null}if(h.floorTexture===undefined){h.floorTexture=null}if(h.floorShininess===undefined){h.floorShininess=0}if(h.ceilingVisible===undefined){h.ceilingVisible=false}if(h.ceilingColor===undefined){h.ceilingColor=null}if(h.ceilingTexture===undefined){h.ceilingTexture=null}if(h.ceilingShininess===undefined){h.ceilingShininess=0}if(h.level===undefined){h.level=null}if(h.shapeCache===undefined){h.shapeCache=null}if(h.areaCache===undefined){h.areaCache=null}if(e.length<=1){throw new IllegalStateException("Room points must containt at least two points")}h.points=h.deepCopy(e);h.areaVisible=true;h.nameYOffset=-40;h.floorVisible=true;h.ceilingVisible=true;if(h.name===undefined){h.name=null}if(h.nameXOffset===undefined){h.nameXOffset=0}if(h.nameYOffset===undefined){h.nameYOffset=0}if(h.nameStyle===undefined){h.nameStyle=null}if(h.nameAngle===undefined){h.nameAngle=0}if(h.points===undefined){h.points=null}if(h.areaVisible===undefined){h.areaVisible=false}if(h.areaXOffset===undefined){h.areaXOffset=0}if(h.areaYOffset===undefined){h.areaYOffset=0}if(h.areaStyle===undefined){h.areaStyle=null}if(h.areaAngle===undefined){h.areaAngle=0}if(h.floorVisible===undefined){h.floorVisible=false}if(h.floorColor===undefined){h.floorColor=null}if(h.floorTexture===undefined){h.floorTexture=null}if(h.floorShininess===undefined){h.floorShininess=0}if(h.ceilingVisible===undefined){h.ceilingVisible=false}if(h.ceilingColor===undefined){h.ceilingColor=null}if(h.ceilingTexture===undefined){h.ceilingTexture=null}if(h.ceilingShininess===undefined){h.ceilingShininess=0}if(h.level===undefined){h.level=null}if(h.shapeCache===undefined){h.shapeCache=null}if(h.areaCache===undefined){h.areaCache=null}}else{throw new Error("invalid overload")}}return h}a.TWICE_PI_$LI$=function(){if(a.TWICE_PI==null){a.TWICE_PI=2*Math.PI}return a.TWICE_PI};a.prototype.getName=function(){return this.name};a.prototype.setName=function(c){if(c!==this.name&&(c==null||!(c===this.name))){var d=this.name;this.name=c;this.firePropertyChange("NAME",d,c)}};a.prototype.getNameXOffset=function(){return this.nameXOffset};a.prototype.setNameXOffset=function(c){if(c!==this.nameXOffset){var d=this.nameXOffset;this.nameXOffset=c;this.firePropertyChange("NAME_X_OFFSET",d,c)}};a.prototype.getNameYOffset=function(){return this.nameYOffset};a.prototype.setNameYOffset=function(c){if(c!==this.nameYOffset){var d=this.nameYOffset;this.nameYOffset=c;this.firePropertyChange("NAME_Y_OFFSET",d,c)}};a.prototype.getNameStyle=function(){return this.nameStyle};a.prototype.setNameStyle=function(d){if(d!==this.nameStyle){var c=this.nameStyle;this.nameStyle=d;this.firePropertyChange("NAME_STYLE",c,d)}};a.prototype.getNameAngle=function(){return this.nameAngle};a.prototype.setNameAngle=function(c){c=((c%a.TWICE_PI_$LI$()+a.TWICE_PI_$LI$())%a.TWICE_PI_$LI$());if(c!==this.nameAngle){var d=this.nameAngle;this.nameAngle=c;this.firePropertyChange("NAME_ANGLE",d,c)}};a.prototype.getPoints=function(){return this.deepCopy(this.points)};a.prototype.getPointCount=function(){return this.points.length};a.prototype.deepCopy=function(e){var c=(function(g){var f=[];while(g-->0){f.push(null)}return f})(e.length);for(var d=0;d<e.length;d++){c[d]=e[d].slice(0)}return c};a.prototype.setPoints=function(c){if(!(JSON.stringify(this.points)===JSON.stringify(c))){this.updatePoints(c)}};a.prototype.updatePoints=function(d){var c=this.points;this.points=this.deepCopy(d);this.shapeCache=null;this.areaCache=null;this.firePropertyChange("POINTS",c,d)};a.prototype.addPoint$float$float=function(c,d){this.addPoint$float$float$int(c,d,this.points.length)};a.prototype.addPoint$float$float$int=function(c,g,d){if(d<0||d>this.points.length){throw Object.defineProperty(new Error("Invalid index "+d),"__classes",{configurable:true,value:["java.lang.Throwable","java.lang.IndexOutOfBoundsException","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]})}var f=(function(i){var h=[];while(i-->0){h.push(null)}return h})(this.points.length+1);(function(m,l,o,n,k){if(m!==o||n>=l+k){while(--k>=0){o[n++]=m[l++]}}else{var j=m.slice(l,l+k);for(var h=0;h<k;h++){o[n++]=j[h]}}})(this.points,0,f,0,d);f[d]=[c,g];(function(m,l,o,n,k){if(m!==o||n>=l+k){while(--k>=0){o[n++]=m[l++]}}else{var j=m.slice(l,l+k);for(var h=0;h<k;h++){o[n++]=j[h]}}})(this.points,d,f,d+1,this.points.length-d);var e=this.points;this.points=f;this.shapeCache=null;this.areaCache=null;this.firePropertyChange("POINTS",e,this.deepCopy(this.points))};a.prototype.addPoint=function(c,e,d){if(((typeof c==="number")||c===null)&&((typeof e==="number")||e===null)&&((typeof d==="number")||d===null)){return this.addPoint$float$float$int(c,e,d)}else{if(((typeof c==="number")||c===null)&&((typeof e==="number")||e===null)&&d===undefined){return this.addPoint$float$float(c,e)}else{throw new Error("invalid overload")}}};a.prototype.setPoint=function(c,f,d){if(d<0||d>=this.points.length){throw Object.defineProperty(new Error("Invalid index "+d),"__classes",{configurable:true,value:["java.lang.Throwable","java.lang.IndexOutOfBoundsException","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]})}if(this.points[d][0]!==c||this.points[d][1]!==f){var e=this.points;this.points=this.deepCopy(this.points);this.points[d][0]=c;this.points[d][1]=f;this.shapeCache=null;this.areaCache=null;this.firePropertyChange("POINTS",e,this.deepCopy(this.points))}};a.prototype.removePoint=function(c){if(c<0||c>=this.points.length){throw Object.defineProperty(new Error("Invalid index "+c),"__classes",{configurable:true,value:["java.lang.Throwable","java.lang.IndexOutOfBoundsException","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]})}else{if(this.points.length<=1){throw new IllegalStateException("Room points must containt at least one point")}}var e=(function(g){var f=[];while(g-->0){f.push(null)}return f})(this.points.length-1);(function(k,j,m,l,h){if(k!==m||l>=j+h){while(--h>=0){m[l++]=k[j++]}}else{var g=k.slice(j,j+h);for(var f=0;f<h;f++){m[l++]=g[f]}}})(this.points,0,e,0,c);(function(k,j,m,l,h){if(k!==m||l>=j+h){while(--h>=0){m[l++]=k[j++]}}else{var g=k.slice(j,j+h);for(var f=0;f<h;f++){m[l++]=g[f]}}})(this.points,c+1,e,c,this.points.length-c-1);var d=this.points;this.points=e;this.shapeCache=null;this.areaCache=null;this.firePropertyChange("POINTS",d,this.deepCopy(this.points))};a.prototype.isAreaVisible=function(){return this.areaVisible};a.prototype.setAreaVisible=function(c){if(c!==this.areaVisible){this.areaVisible=c;this.firePropertyChange("AREA_VISIBLE",!c,c)}};a.prototype.getAreaXOffset=function(){return this.areaXOffset};a.prototype.setAreaXOffset=function(c){if(c!==this.areaXOffset){var d=this.areaXOffset;this.areaXOffset=c;this.firePropertyChange("AREA_X_OFFSET",d,c)}};a.prototype.getAreaYOffset=function(){return this.areaYOffset};a.prototype.setAreaYOffset=function(c){if(c!==this.areaYOffset){var d=this.areaYOffset;this.areaYOffset=c;this.firePropertyChange("AREA_Y_OFFSET",d,c)}};a.prototype.getAreaStyle=function(){return this.areaStyle};a.prototype.setAreaStyle=function(d){if(d!==this.areaStyle){var c=this.areaStyle;this.areaStyle=d;this.firePropertyChange("AREA_STYLE",c,d)}};a.prototype.getAreaAngle=function(){return this.areaAngle};a.prototype.setAreaAngle=function(d){d=((d%a.TWICE_PI_$LI$()+a.TWICE_PI_$LI$())%a.TWICE_PI_$LI$());if(d!==this.areaAngle){var c=this.areaAngle;this.areaAngle=d;this.firePropertyChange("AREA_ANGLE",c,d)}};a.prototype.getXCenter=function(){var c=this.points[0][0];var e=this.points[0][0];for(var d=1;d<this.points.length;d++){c=Math.min(c,this.points[d][0]);e=Math.max(e,this.points[d][0])}return(c+e)/2};a.prototype.getYCenter=function(){var c=this.points[0][1];var e=this.points[0][1];for(var d=1;d<this.points.length;d++){c=Math.min(c,this.points[d][1]);e=Math.max(e,this.points[d][1])}return(c+e)/2};a.prototype.getFloorColor=function(){return this.floorColor};a.prototype.setFloorColor=function(c){if(c!==this.floorColor&&(c==null||!(c===this.floorColor))){var d=this.floorColor;this.floorColor=c;this.firePropertyChange("FLOOR_COLOR",d,c)}};a.prototype.getFloorTexture=function(){return this.floorTexture};a.prototype.setFloorTexture=function(c){if(c!==this.floorTexture&&(c==null||!c.equals(this.floorTexture))){var d=this.floorTexture;this.floorTexture=c;this.firePropertyChange("FLOOR_TEXTURE",d,c)}};a.prototype.isFloorVisible=function(){return this.floorVisible};a.prototype.setFloorVisible=function(c){if(c!==this.floorVisible){this.floorVisible=c;this.firePropertyChange("FLOOR_VISIBLE",!c,c)}};a.prototype.getFloorShininess=function(){return this.floorShininess};a.prototype.setFloorShininess=function(d){if(d!==this.floorShininess){var c=this.floorShininess;this.floorShininess=d;this.firePropertyChange("FLOOR_SHININESS",c,d)}};a.prototype.getCeilingColor=function(){return this.ceilingColor};a.prototype.setCeilingColor=function(c){if(c!==this.ceilingColor&&(c==null||!(c===this.ceilingColor))){var d=this.ceilingColor;this.ceilingColor=c;this.firePropertyChange("CEILING_COLOR",d,c)}};a.prototype.getCeilingTexture=function(){return this.ceilingTexture};a.prototype.setCeilingTexture=function(c){if(c!==this.ceilingTexture&&(c==null||!c.equals(this.ceilingTexture))){var d=this.ceilingTexture;this.ceilingTexture=c;this.firePropertyChange("CEILING_TEXTURE",d,c)}};a.prototype.isCeilingVisible=function(){return this.ceilingVisible};a.prototype.setCeilingVisible=function(c){if(c!==this.ceilingVisible){this.ceilingVisible=c;this.firePropertyChange("CEILING_VISIBLE",!c,c)}};a.prototype.getCeilingShininess=function(){return this.ceilingShininess};a.prototype.setCeilingShininess=function(d){if(d!==this.ceilingShininess){var c=this.ceilingShininess;this.ceilingShininess=d;this.firePropertyChange("CEILING_SHININESS",c,d)}};a.prototype.getLevel=function(){return this.level};a.prototype.setLevel=function(d){if(d!==this.level){var c=this.level;this.level=d;this.firePropertyChange("LEVEL",c,d)}};a.prototype.isAtLevel=function(c){return this.level===c||this.level!=null&&c!=null&&this.level.getElevation()===c.getElevation()&&this.level.getElevationIndex()<c.getElevationIndex()};a.prototype.getArea=function(){if(this.areaCache==null){var d=new java.awt.geom.Area(this.getShape());if(d.isSingular()){this.areaCache=Math.abs(this.getSignedArea(this.getPoints()))}else{var h=0;var g=([]);for(var f=d.getPathIterator(null);!f.isDone();){var e=[0,0];switch((f.currentSegment(e))){case java.awt.geom.PathIterator.SEG_MOVETO:(g.push(e)>0);break;case java.awt.geom.PathIterator.SEG_LINETO:(g.push(e)>0);break;case java.awt.geom.PathIterator.SEG_CLOSE:var c=g.slice(0);h+=this.getSignedArea(c);(g.length=0);break}f.next()}this.areaCache=h}}return this.areaCache};a.prototype.getSignedArea=function(e){var d=0;for(var c=1;c<e.length;c++){d+=e[c][0]*e[c-1][1];d-=e[c][1]*e[c-1][0]}d+=e[0][0]*e[e.length-1][1];d-=e[0][1]*e[e.length-1][0];return d/2};a.prototype.isClockwise=function(){return this.getSignedArea(this.getPoints())<0};a.prototype.isSingular=function(){return new java.awt.geom.Area(this.getShape()).isSingular()};a.prototype.intersectsRectangle=function(e,g,c,f){var d=new java.awt.geom.Rectangle2D.Float(e,g,0,0);d.add(c,f);return this.getShape().intersects(d)};a.prototype.containsPoint=function(c,e,d){return this.containsShapeAtWithMargin(this.getShape(),c,e,d)};a.prototype.getPointIndexAt=function(c,f,e){for(var d=0;d<this.points.length;d++){if(Math.abs(c-this.points[d][0])<=e&&Math.abs(f-this.points[d][1])<=e){return d}}return -1};a.prototype.isNameCenterPointAt=function(c,e,d){return Math.abs(c-this.getXCenter()-this.getNameXOffset())<=d&&Math.abs(e-this.getYCenter()-this.getNameYOffset())<=d};a.prototype.isAreaCenterPointAt=function(c,e,d){return Math.abs(c-this.getXCenter()-this.getAreaXOffset())<=d&&Math.abs(e-this.getYCenter()-this.getAreaYOffset())<=d};a.prototype.containsShapeAtWithMargin=function(d,c,f,e){if(e===0){return d.contains(c,f)}else{return d.intersects(c-e,f-e,2*e,2*e)}};a.prototype.getShape=function(){if(this.shapeCache==null){var d=new java.awt.geom.GeneralPath();d.moveTo(this.points[0][0],this.points[0][1]);for(var c=1;c<this.points.length;c++){d.lineTo(this.points[c][0],this.points[c][1])}d.closePath();this.shapeCache=d}return this.shapeCache};a.prototype.move=function(d,c){if(d!==0||c!==0){var f=this.getPoints();for(var e=0;e<f.length;e++){f[e][0]+=d;f[e][1]+=c}this.updatePoints(f)}};a.prototype.clone=function(){var d=this;var c=(function(g){if(b.prototype.clone!=undefined){return b.prototype.clone.call(d)}else{var e=Object.create(g);for(var f in g){if(g.hasOwnProperty(f)){e[f]=g[f]}}return e}})(this);c.level=null;return c};return a}(HomeObject));Room.__class="com.eteks.sweethome3d.model.Room";Room.__interfaces=["java.lang.Cloneable","com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.Elevatable","java.io.Serializable"];Room.__transients=["shapeCache","areaCache","propertyChangeSupport"];var Label=(function(a){__extends(b,a);function b(e,k,j,i){var g=this;if(((typeof e==="string")||e===null)&&((typeof k==="string")||k===null)&&((typeof j==="number")||j===null)&&((typeof i==="number")||i===null)){var h=arguments;g=a.call(this,e)||this;if(g.text===undefined){g.text=null}if(g.x===undefined){g.x=0}if(g.y===undefined){g.y=0}if(g.style===undefined){g.style=null}if(g.color===undefined){g.color=null}if(g.outlineColor===undefined){g.outlineColor=null}if(g.angle===undefined){g.angle=0}if(g.pitch===undefined){g.pitch=null}if(g.elevation===undefined){g.elevation=0}if(g.level===undefined){g.level=null}g.text=k;g.x=j;g.y=i}else{if(((typeof e==="string")||e===null)&&((typeof k==="number")||k===null)&&((typeof j==="number")||j===null)&&i===undefined){var h=arguments;var f=h[0];var l=h[1];var d=h[2];var c=arguments;var m=HomeObject.createId("label");g=a.call(this,m)||this;if(g.text===undefined){g.text=null}if(g.x===undefined){g.x=0}if(g.y===undefined){g.y=0}if(g.style===undefined){g.style=null}if(g.color===undefined){g.color=null}if(g.outlineColor===undefined){g.outlineColor=null}if(g.angle===undefined){g.angle=0}if(g.pitch===undefined){g.pitch=null}if(g.elevation===undefined){g.elevation=0}if(g.level===undefined){g.level=null}g.text=f;g.x=l;g.y=d;if(g.text===undefined){g.text=null}if(g.x===undefined){g.x=0}if(g.y===undefined){g.y=0}if(g.style===undefined){g.style=null}if(g.color===undefined){g.color=null}if(g.outlineColor===undefined){g.outlineColor=null}if(g.angle===undefined){g.angle=0}if(g.pitch===undefined){g.pitch=null}if(g.elevation===undefined){g.elevation=0}if(g.level===undefined){g.level=null}}else{throw new Error("invalid overload")}}return g}b.TWICE_PI_$LI$=function(){if(b.TWICE_PI==null){b.TWICE_PI=2*Math.PI}return b.TWICE_PI};b.prototype.getText=function(){return this.text};b.prototype.setText=function(d){if(d!==this.text&&(d==null||!(d===this.text))){var c=this.text;this.text=d;this.firePropertyChange("TEXT",c,d)}};b.prototype.getX=function(){return this.x};b.prototype.setX=function(c){if(c!==this.x){var d=this.x;this.x=c;this.firePropertyChange("X",d,c)}};b.prototype.getY=function(){return this.y};b.prototype.setY=function(d){if(d!==this.y){var c=this.y;this.y=d;this.firePropertyChange("Y",c,d)}};b.prototype.getGroundElevation=function(){if(this.level!=null){return this.elevation+this.level.getElevation()}else{return this.elevation}};b.prototype.getElevation=function(){return this.elevation};b.prototype.setElevation=function(d){if(d!==this.elevation){var c=this.elevation;this.elevation=d;this.firePropertyChange("ELEVATION",c,d)}};b.prototype.getStyle=function(){return this.style};b.prototype.setStyle=function(d){if(d!==this.style){var c=this.style;this.style=d;this.firePropertyChange("STYLE",c,d)}};b.prototype.getColor=function(){return this.color};b.prototype.setColor=function(c){if(c!==this.color){var d=this.color;this.color=c;this.firePropertyChange("COLOR",d,c)}};b.prototype.getOutlineColor=function(){return this.outlineColor};b.prototype.setOutlineColor=function(c){if(c!==this.outlineColor){var d=this.outlineColor;this.outlineColor=c;this.firePropertyChange("OUTLINE_COLOR",d,c)}};b.prototype.getAngle=function(){return this.angle};b.prototype.setAngle=function(d){d=((d%b.TWICE_PI_$LI$()+b.TWICE_PI_$LI$())%b.TWICE_PI_$LI$());if(d!==this.angle){var c=this.angle;this.angle=d;this.firePropertyChange("ANGLE",c,d)}};b.prototype.getPitch=function(){return this.pitch};b.prototype.setPitch=function(d){if(d!=null){d=((d%b.TWICE_PI_$LI$()+b.TWICE_PI_$LI$())%b.TWICE_PI_$LI$())}if(d!==this.pitch&&(d==null||!(d===this.pitch))){var c=this.pitch;this.pitch=d;this.firePropertyChange("PITCH",c,d)}};b.prototype.getLevel=function(){return this.level};b.prototype.setLevel=function(d){if(d!==this.level){var c=this.level;this.level=d;this.firePropertyChange("LEVEL",c,d)}};b.prototype.isAtLevel=function(c){return this.level===c||this.level!=null&&c!=null&&this.level.getElevation()===c.getElevation()&&this.level.getElevationIndex()<c.getElevationIndex()};b.prototype.getPoints=function(){return[[this.x,this.y]]};b.prototype.intersectsRectangle=function(e,g,c,f){var d=new java.awt.geom.Rectangle2D.Float(e,g,0,0);d.add(c,f);return d.contains(this.x,this.y)};b.prototype.containsPoint=function(c,e,d){return Math.abs(c-this.x)<=d&&Math.abs(e-this.y)<=d};b.prototype.move=function(d,c){this.setX(this.getX()+d);this.setY(this.getY()+c)};b.prototype.clone=function(){var d=this;var c=(function(g){if(a.prototype.clone!=undefined){return a.prototype.clone.call(d)}else{var e=Object.create(g);for(var f in g){if(g.hasOwnProperty(f)){e[f]=g[f]}}return e}})(this);c.level=null;return c};return b}(HomeObject));Label.__class="com.eteks.sweethome3d.model.Label";Label.__interfaces=["java.lang.Cloneable","com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.Elevatable","java.io.Serializable"];Label.__transients=["propertyChangeSupport"];var HomeEnvironment=(function(a){__extends(b,a);function b(I,r,s,c,p,E,J){var h=this;if(((typeof I==="string")||I===null)&&((typeof r==="number")||r===null)&&((s!=null&&s instanceof HomeTexture)||s===null)&&((typeof c==="number")||c===null)&&((p!=null&&p instanceof HomeTexture)||p===null)&&((typeof E==="number")||E===null)&&((typeof J==="number")||J===null)){var O=arguments;h=a.call(this,I)||this;if(h.observerCameraElevationAdjusted===undefined){h.observerCameraElevationAdjusted=false}if(h.groundColor===undefined){h.groundColor=0}if(h.groundTexture===undefined){h.groundTexture=null}if(h.backgroundImageVisibleOnGround3D===undefined){h.backgroundImageVisibleOnGround3D=false}if(h.skyColor===undefined){h.skyColor=0}if(h.skyTexture===undefined){h.skyTexture=null}if(h.lightColor===undefined){h.lightColor=0}if(h.ceilingLightColor===undefined){h.ceilingLightColor=0}if(h.wallsAlpha===undefined){h.wallsAlpha=0}if(h.drawingMode===undefined){h.drawingMode=null}if(h.subpartSizeUnderLight===undefined){h.subpartSizeUnderLight=0}if(h.allLevelsVisible===undefined){h.allLevelsVisible=false}if(h.photoWidth===undefined){h.photoWidth=0}if(h.photoHeight===undefined){h.photoHeight=0}if(h.photoAspectRatio===undefined){h.photoAspectRatio=null}if(h.photoAspectRatioName===undefined){h.photoAspectRatioName=null}if(h.photoQuality===undefined){h.photoQuality=0}if(h.videoWidth===undefined){h.videoWidth=0}if(h.videoAspectRatio===undefined){h.videoAspectRatio=null}if(h.videoAspectRatioName===undefined){h.videoAspectRatioName=null}if(h.videoQuality===undefined){h.videoQuality=0}if(h.videoSpeed===undefined){h.videoSpeed=0}if(h.videoFrameRate===undefined){h.videoFrameRate=0}if(h.cameraPath===undefined){h.cameraPath=null}h.observerCameraElevationAdjusted=true;h.groundColor=r;h.groundTexture=s;h.skyColor=c;h.skyTexture=p;h.lightColor=E;h.ceilingLightColor=13684944;h.wallsAlpha=J;h.drawingMode=b.DrawingMode.FILL;h.photoWidth=400;h.photoHeight=300;h.photoAspectRatio=AspectRatio.VIEW_3D_RATIO;h.videoWidth=320;h.videoAspectRatio=AspectRatio.RATIO_4_3;h.videoSpeed=2400/3600;h.videoFrameRate=25;h.cameraPath=[]}else{if(((typeof I==="number")||I===null)&&((r!=null&&r instanceof HomeTexture)||r===null)&&((typeof s==="number")||s===null)&&((c!=null&&c instanceof HomeTexture)||c===null)&&((typeof p==="number")||p===null)&&((typeof E==="number")||E===null)&&J===undefined){var O=arguments;var N=O[0];var n=O[1];var H=O[2];var q=O[3];var C=O[4];var g=O[5];var y=arguments;var R=HomeObject.createId("environment");h=a.call(this,R)||this;if(h.observerCameraElevationAdjusted===undefined){h.observerCameraElevationAdjusted=false}if(h.groundColor===undefined){h.groundColor=0}if(h.groundTexture===undefined){h.groundTexture=null}if(h.backgroundImageVisibleOnGround3D===undefined){h.backgroundImageVisibleOnGround3D=false}if(h.skyColor===undefined){h.skyColor=0}if(h.skyTexture===undefined){h.skyTexture=null}if(h.lightColor===undefined){h.lightColor=0}if(h.ceilingLightColor===undefined){h.ceilingLightColor=0}if(h.wallsAlpha===undefined){h.wallsAlpha=0}if(h.drawingMode===undefined){h.drawingMode=null}if(h.subpartSizeUnderLight===undefined){h.subpartSizeUnderLight=0}if(h.allLevelsVisible===undefined){h.allLevelsVisible=false}if(h.photoWidth===undefined){h.photoWidth=0}if(h.photoHeight===undefined){h.photoHeight=0}if(h.photoAspectRatio===undefined){h.photoAspectRatio=null}if(h.photoAspectRatioName===undefined){h.photoAspectRatioName=null}if(h.photoQuality===undefined){h.photoQuality=0}if(h.videoWidth===undefined){h.videoWidth=0}if(h.videoAspectRatio===undefined){h.videoAspectRatio=null}if(h.videoAspectRatioName===undefined){h.videoAspectRatioName=null}if(h.videoQuality===undefined){h.videoQuality=0}if(h.videoSpeed===undefined){h.videoSpeed=0}if(h.videoFrameRate===undefined){h.videoFrameRate=0}if(h.cameraPath===undefined){h.cameraPath=null}h.observerCameraElevationAdjusted=true;h.groundColor=N;h.groundTexture=n;h.skyColor=H;h.skyTexture=q;h.lightColor=C;h.ceilingLightColor=13684944;h.wallsAlpha=g;h.drawingMode=b.DrawingMode.FILL;h.photoWidth=400;h.photoHeight=300;h.photoAspectRatio=AspectRatio.VIEW_3D_RATIO;h.videoWidth=320;h.videoAspectRatio=AspectRatio.RATIO_4_3;h.videoSpeed=2400/3600;h.videoFrameRate=25;h.cameraPath=[];if(h.observerCameraElevationAdjusted===undefined){h.observerCameraElevationAdjusted=false}if(h.groundColor===undefined){h.groundColor=0}if(h.groundTexture===undefined){h.groundTexture=null}if(h.backgroundImageVisibleOnGround3D===undefined){h.backgroundImageVisibleOnGround3D=false}if(h.skyColor===undefined){h.skyColor=0}if(h.skyTexture===undefined){h.skyTexture=null}if(h.lightColor===undefined){h.lightColor=0}if(h.ceilingLightColor===undefined){h.ceilingLightColor=0}if(h.wallsAlpha===undefined){h.wallsAlpha=0}if(h.drawingMode===undefined){h.drawingMode=null}if(h.subpartSizeUnderLight===undefined){h.subpartSizeUnderLight=0}if(h.allLevelsVisible===undefined){h.allLevelsVisible=false}if(h.photoWidth===undefined){h.photoWidth=0}if(h.photoHeight===undefined){h.photoHeight=0}if(h.photoAspectRatio===undefined){h.photoAspectRatio=null}if(h.photoAspectRatioName===undefined){h.photoAspectRatioName=null}if(h.photoQuality===undefined){h.photoQuality=0}if(h.videoWidth===undefined){h.videoWidth=0}if(h.videoAspectRatio===undefined){h.videoAspectRatio=null}if(h.videoAspectRatioName===undefined){h.videoAspectRatioName=null}if(h.videoQuality===undefined){h.videoQuality=0}if(h.videoSpeed===undefined){h.videoSpeed=0}if(h.videoFrameRate===undefined){h.videoFrameRate=0}if(h.cameraPath===undefined){h.cameraPath=null}}else{if(((typeof I==="number")||I===null)&&((r!=null&&r instanceof HomeTexture)||r===null)&&((typeof s==="number")||s===null)&&((typeof c==="number")||c===null)&&((typeof p==="number")||p===null)&&E===undefined&&J===undefined){var O=arguments;var M=O[0];var l=O[1];var G=O[2];var B=O[3];var f=O[4];var x=arguments;var o=null;var w=arguments;var Q=HomeObject.createId("environment");h=a.call(this,Q)||this;if(h.observerCameraElevationAdjusted===undefined){h.observerCameraElevationAdjusted=false}if(h.groundColor===undefined){h.groundColor=0}if(h.groundTexture===undefined){h.groundTexture=null}if(h.backgroundImageVisibleOnGround3D===undefined){h.backgroundImageVisibleOnGround3D=false}if(h.skyColor===undefined){h.skyColor=0}if(h.skyTexture===undefined){h.skyTexture=null}if(h.lightColor===undefined){h.lightColor=0}if(h.ceilingLightColor===undefined){h.ceilingLightColor=0}if(h.wallsAlpha===undefined){h.wallsAlpha=0}if(h.drawingMode===undefined){h.drawingMode=null}if(h.subpartSizeUnderLight===undefined){h.subpartSizeUnderLight=0}if(h.allLevelsVisible===undefined){h.allLevelsVisible=false}if(h.photoWidth===undefined){h.photoWidth=0}if(h.photoHeight===undefined){h.photoHeight=0}if(h.photoAspectRatio===undefined){h.photoAspectRatio=null}if(h.photoAspectRatioName===undefined){h.photoAspectRatioName=null}if(h.photoQuality===undefined){h.photoQuality=0}if(h.videoWidth===undefined){h.videoWidth=0}if(h.videoAspectRatio===undefined){h.videoAspectRatio=null}if(h.videoAspectRatioName===undefined){h.videoAspectRatioName=null}if(h.videoQuality===undefined){h.videoQuality=0}if(h.videoSpeed===undefined){h.videoSpeed=0}if(h.videoFrameRate===undefined){h.videoFrameRate=0}if(h.cameraPath===undefined){h.cameraPath=null}h.observerCameraElevationAdjusted=true;h.groundColor=M;h.groundTexture=l;h.skyColor=G;h.skyTexture=o;h.lightColor=B;h.ceilingLightColor=13684944;h.wallsAlpha=f;h.drawingMode=b.DrawingMode.FILL;h.photoWidth=400;h.photoHeight=300;h.photoAspectRatio=AspectRatio.VIEW_3D_RATIO;h.videoWidth=320;h.videoAspectRatio=AspectRatio.RATIO_4_3;h.videoSpeed=2400/3600;h.videoFrameRate=25;h.cameraPath=[];if(h.observerCameraElevationAdjusted===undefined){h.observerCameraElevationAdjusted=false}if(h.groundColor===undefined){h.groundColor=0}if(h.groundTexture===undefined){h.groundTexture=null}if(h.backgroundImageVisibleOnGround3D===undefined){h.backgroundImageVisibleOnGround3D=false}if(h.skyColor===undefined){h.skyColor=0}if(h.skyTexture===undefined){h.skyTexture=null}if(h.lightColor===undefined){h.lightColor=0}if(h.ceilingLightColor===undefined){h.ceilingLightColor=0}if(h.wallsAlpha===undefined){h.wallsAlpha=0}if(h.drawingMode===undefined){h.drawingMode=null}if(h.subpartSizeUnderLight===undefined){h.subpartSizeUnderLight=0}if(h.allLevelsVisible===undefined){h.allLevelsVisible=false}if(h.photoWidth===undefined){h.photoWidth=0}if(h.photoHeight===undefined){h.photoHeight=0}if(h.photoAspectRatio===undefined){h.photoAspectRatio=null}if(h.photoAspectRatioName===undefined){h.photoAspectRatioName=null}if(h.photoQuality===undefined){h.photoQuality=0}if(h.videoWidth===undefined){h.videoWidth=0}if(h.videoAspectRatio===undefined){h.videoAspectRatio=null}if(h.videoAspectRatioName===undefined){h.videoAspectRatioName=null}if(h.videoQuality===undefined){h.videoQuality=0}if(h.videoSpeed===undefined){h.videoSpeed=0}if(h.videoFrameRate===undefined){h.videoFrameRate=0}if(h.cameraPath===undefined){h.cameraPath=null}if(h.observerCameraElevationAdjusted===undefined){h.observerCameraElevationAdjusted=false}if(h.groundColor===undefined){h.groundColor=0}if(h.groundTexture===undefined){h.groundTexture=null}if(h.backgroundImageVisibleOnGround3D===undefined){h.backgroundImageVisibleOnGround3D=false}if(h.skyColor===undefined){h.skyColor=0}if(h.skyTexture===undefined){h.skyTexture=null}if(h.lightColor===undefined){h.lightColor=0}if(h.ceilingLightColor===undefined){h.ceilingLightColor=0}if(h.wallsAlpha===undefined){h.wallsAlpha=0}if(h.drawingMode===undefined){h.drawingMode=null}if(h.subpartSizeUnderLight===undefined){h.subpartSizeUnderLight=0}if(h.allLevelsVisible===undefined){h.allLevelsVisible=false}if(h.photoWidth===undefined){h.photoWidth=0}if(h.photoHeight===undefined){h.photoHeight=0}if(h.photoAspectRatio===undefined){h.photoAspectRatio=null}if(h.photoAspectRatioName===undefined){h.photoAspectRatioName=null}if(h.photoQuality===undefined){h.photoQuality=0}if(h.videoWidth===undefined){h.videoWidth=0}if(h.videoAspectRatio===undefined){h.videoAspectRatio=null}if(h.videoAspectRatioName===undefined){h.videoAspectRatioName=null}if(h.videoQuality===undefined){h.videoQuality=0}if(h.videoSpeed===undefined){h.videoSpeed=0}if(h.videoFrameRate===undefined){h.videoFrameRate=0}if(h.cameraPath===undefined){h.cameraPath=null}}else{if(((typeof I==="string")||I===null)&&r===undefined&&s===undefined&&c===undefined&&p===undefined&&E===undefined&&J===undefined){var O=arguments;var v=arguments;var L=11053224;var k=null;var F=13427964;var m=null;var A=13684944;var e=0;h=a.call(this,I)||this;if(h.observerCameraElevationAdjusted===undefined){h.observerCameraElevationAdjusted=false}if(h.groundColor===undefined){h.groundColor=0}if(h.groundTexture===undefined){h.groundTexture=null}if(h.backgroundImageVisibleOnGround3D===undefined){h.backgroundImageVisibleOnGround3D=false}if(h.skyColor===undefined){h.skyColor=0}if(h.skyTexture===undefined){h.skyTexture=null}if(h.lightColor===undefined){h.lightColor=0}if(h.ceilingLightColor===undefined){h.ceilingLightColor=0}if(h.wallsAlpha===undefined){h.wallsAlpha=0}if(h.drawingMode===undefined){h.drawingMode=null}if(h.subpartSizeUnderLight===undefined){h.subpartSizeUnderLight=0}if(h.allLevelsVisible===undefined){h.allLevelsVisible=false}if(h.photoWidth===undefined){h.photoWidth=0}if(h.photoHeight===undefined){h.photoHeight=0}if(h.photoAspectRatio===undefined){h.photoAspectRatio=null}if(h.photoAspectRatioName===undefined){h.photoAspectRatioName=null}if(h.photoQuality===undefined){h.photoQuality=0}if(h.videoWidth===undefined){h.videoWidth=0}if(h.videoAspectRatio===undefined){h.videoAspectRatio=null}if(h.videoAspectRatioName===undefined){h.videoAspectRatioName=null}if(h.videoQuality===undefined){h.videoQuality=0}if(h.videoSpeed===undefined){h.videoSpeed=0}if(h.videoFrameRate===undefined){h.videoFrameRate=0}if(h.cameraPath===undefined){h.cameraPath=null}h.observerCameraElevationAdjusted=true;h.groundColor=L;h.groundTexture=k;h.skyColor=F;h.skyTexture=m;h.lightColor=A;h.ceilingLightColor=13684944;h.wallsAlpha=e;h.drawingMode=b.DrawingMode.FILL;h.photoWidth=400;h.photoHeight=300;h.photoAspectRatio=AspectRatio.VIEW_3D_RATIO;h.videoWidth=320;h.videoAspectRatio=AspectRatio.RATIO_4_3;h.videoSpeed=2400/3600;h.videoFrameRate=25;h.cameraPath=[];if(h.observerCameraElevationAdjusted===undefined){h.observerCameraElevationAdjusted=false}if(h.groundColor===undefined){h.groundColor=0}if(h.groundTexture===undefined){h.groundTexture=null}if(h.backgroundImageVisibleOnGround3D===undefined){h.backgroundImageVisibleOnGround3D=false}if(h.skyColor===undefined){h.skyColor=0}if(h.skyTexture===undefined){h.skyTexture=null}if(h.lightColor===undefined){h.lightColor=0}if(h.ceilingLightColor===undefined){h.ceilingLightColor=0}if(h.wallsAlpha===undefined){h.wallsAlpha=0}if(h.drawingMode===undefined){h.drawingMode=null}if(h.subpartSizeUnderLight===undefined){h.subpartSizeUnderLight=0}if(h.allLevelsVisible===undefined){h.allLevelsVisible=false}if(h.photoWidth===undefined){h.photoWidth=0}if(h.photoHeight===undefined){h.photoHeight=0}if(h.photoAspectRatio===undefined){h.photoAspectRatio=null}if(h.photoAspectRatioName===undefined){h.photoAspectRatioName=null}if(h.photoQuality===undefined){h.photoQuality=0}if(h.videoWidth===undefined){h.videoWidth=0}if(h.videoAspectRatio===undefined){h.videoAspectRatio=null}if(h.videoAspectRatioName===undefined){h.videoAspectRatioName=null}if(h.videoQuality===undefined){h.videoQuality=0}if(h.videoSpeed===undefined){h.videoSpeed=0}if(h.videoFrameRate===undefined){h.videoFrameRate=0}if(h.cameraPath===undefined){h.cameraPath=null}}else{if(I===undefined&&r===undefined&&s===undefined&&c===undefined&&p===undefined&&E===undefined&&J===undefined){var O=arguments;var u=arguments;var P=HomeObject.createId("environment");var t=arguments;var K=11053224;var i=null;var D=13427964;var j=null;var z=13684944;var d=0;h=a.call(this,P)||this;if(h.observerCameraElevationAdjusted===undefined){h.observerCameraElevationAdjusted=false}if(h.groundColor===undefined){h.groundColor=0}if(h.groundTexture===undefined){h.groundTexture=null}if(h.backgroundImageVisibleOnGround3D===undefined){h.backgroundImageVisibleOnGround3D=false}if(h.skyColor===undefined){h.skyColor=0}if(h.skyTexture===undefined){h.skyTexture=null}if(h.lightColor===undefined){h.lightColor=0}if(h.ceilingLightColor===undefined){h.ceilingLightColor=0}if(h.wallsAlpha===undefined){h.wallsAlpha=0}if(h.drawingMode===undefined){h.drawingMode=null}if(h.subpartSizeUnderLight===undefined){h.subpartSizeUnderLight=0}if(h.allLevelsVisible===undefined){h.allLevelsVisible=false}if(h.photoWidth===undefined){h.photoWidth=0}if(h.photoHeight===undefined){h.photoHeight=0}if(h.photoAspectRatio===undefined){h.photoAspectRatio=null}if(h.photoAspectRatioName===undefined){h.photoAspectRatioName=null}if(h.photoQuality===undefined){h.photoQuality=0}if(h.videoWidth===undefined){h.videoWidth=0}if(h.videoAspectRatio===undefined){h.videoAspectRatio=null}if(h.videoAspectRatioName===undefined){h.videoAspectRatioName=null}if(h.videoQuality===undefined){h.videoQuality=0}if(h.videoSpeed===undefined){h.videoSpeed=0}if(h.videoFrameRate===undefined){h.videoFrameRate=0}if(h.cameraPath===undefined){h.cameraPath=null}h.observerCameraElevationAdjusted=true;h.groundColor=K;h.groundTexture=i;h.skyColor=D;h.skyTexture=j;h.lightColor=z;h.ceilingLightColor=13684944;h.wallsAlpha=d;h.drawingMode=b.DrawingMode.FILL;h.photoWidth=400;h.photoHeight=300;h.photoAspectRatio=AspectRatio.VIEW_3D_RATIO;h.videoWidth=320;h.videoAspectRatio=AspectRatio.RATIO_4_3;h.videoSpeed=2400/3600;h.videoFrameRate=25;h.cameraPath=[];if(h.observerCameraElevationAdjusted===undefined){h.observerCameraElevationAdjusted=false}if(h.groundColor===undefined){h.groundColor=0}if(h.groundTexture===undefined){h.groundTexture=null}if(h.backgroundImageVisibleOnGround3D===undefined){h.backgroundImageVisibleOnGround3D=false}if(h.skyColor===undefined){h.skyColor=0}if(h.skyTexture===undefined){h.skyTexture=null}if(h.lightColor===undefined){h.lightColor=0}if(h.ceilingLightColor===undefined){h.ceilingLightColor=0}if(h.wallsAlpha===undefined){h.wallsAlpha=0}if(h.drawingMode===undefined){h.drawingMode=null}if(h.subpartSizeUnderLight===undefined){h.subpartSizeUnderLight=0}if(h.allLevelsVisible===undefined){h.allLevelsVisible=false}if(h.photoWidth===undefined){h.photoWidth=0}if(h.photoHeight===undefined){h.photoHeight=0}if(h.photoAspectRatio===undefined){h.photoAspectRatio=null}if(h.photoAspectRatioName===undefined){h.photoAspectRatioName=null}if(h.photoQuality===undefined){h.photoQuality=0}if(h.videoWidth===undefined){h.videoWidth=0}if(h.videoAspectRatio===undefined){h.videoAspectRatio=null}if(h.videoAspectRatioName===undefined){h.videoAspectRatioName=null}if(h.videoQuality===undefined){h.videoQuality=0}if(h.videoSpeed===undefined){h.videoSpeed=0}if(h.videoFrameRate===undefined){h.videoFrameRate=0}if(h.cameraPath===undefined){h.cameraPath=null}if(h.observerCameraElevationAdjusted===undefined){h.observerCameraElevationAdjusted=false}if(h.groundColor===undefined){h.groundColor=0}if(h.groundTexture===undefined){h.groundTexture=null}if(h.backgroundImageVisibleOnGround3D===undefined){h.backgroundImageVisibleOnGround3D=false}if(h.skyColor===undefined){h.skyColor=0}if(h.skyTexture===undefined){h.skyTexture=null}if(h.lightColor===undefined){h.lightColor=0}if(h.ceilingLightColor===undefined){h.ceilingLightColor=0}if(h.wallsAlpha===undefined){h.wallsAlpha=0}if(h.drawingMode===undefined){h.drawingMode=null}if(h.subpartSizeUnderLight===undefined){h.subpartSizeUnderLight=0}if(h.allLevelsVisible===undefined){h.allLevelsVisible=false}if(h.photoWidth===undefined){h.photoWidth=0}if(h.photoHeight===undefined){h.photoHeight=0}if(h.photoAspectRatio===undefined){h.photoAspectRatio=null}if(h.photoAspectRatioName===undefined){h.photoAspectRatioName=null}if(h.photoQuality===undefined){h.photoQuality=0}if(h.videoWidth===undefined){h.videoWidth=0}if(h.videoAspectRatio===undefined){h.videoAspectRatio=null}if(h.videoAspectRatioName===undefined){h.videoAspectRatioName=null}if(h.videoQuality===undefined){h.videoQuality=0}if(h.videoSpeed===undefined){h.videoSpeed=0}if(h.videoFrameRate===undefined){h.videoFrameRate=0}if(h.cameraPath===undefined){h.cameraPath=null}}else{throw new Error("invalid overload")}}}}}return h}b.prototype.isObserverCameraElevationAdjusted=function(){return this.observerCameraElevationAdjusted};b.prototype.setObserverCameraElevationAdjusted=function(c){if(this.observerCameraElevationAdjusted!==c){this.observerCameraElevationAdjusted=c;this.firePropertyChange("OBSERVER_CAMERA_ELEVATION_ADJUSTED",!c,c)}};b.prototype.getGroundColor=function(){return this.groundColor};b.prototype.setGroundColor=function(c){if(c!==this.groundColor){var d=this.groundColor;this.groundColor=c;this.firePropertyChange("GROUND_COLOR",d,c)}};b.prototype.getGroundTexture=function(){return this.groundTexture};b.prototype.setGroundTexture=function(d){if(d!==this.groundTexture){var c=this.groundTexture;this.groundTexture=d;this.firePropertyChange("GROUND_TEXTURE",c,d)}};b.prototype.isBackgroundImageVisibleOnGround3D=function(){return this.backgroundImageVisibleOnGround3D};b.prototype.setBackgroundImageVisibleOnGround3D=function(c){if(this.backgroundImageVisibleOnGround3D!==c){this.backgroundImageVisibleOnGround3D=c;this.firePropertyChange("BACKGROUND_IMAGE_VISIBLE_ON_GROUND_3D",!c,c)}};b.prototype.getSkyColor=function(){return this.skyColor};b.prototype.setSkyColor=function(d){if(d!==this.skyColor){var c=this.skyColor;this.skyColor=d;this.firePropertyChange("SKY_COLOR",c,d)}};b.prototype.getSkyTexture=function(){return this.skyTexture};b.prototype.setSkyTexture=function(c){if(c!==this.skyTexture){var d=this.skyTexture;this.skyTexture=c;this.firePropertyChange("SKY_TEXTURE",d,c)}};b.prototype.getLightColor=function(){return this.lightColor};b.prototype.setLightColor=function(c){if(c!==this.lightColor){var d=this.lightColor;this.lightColor=c;this.firePropertyChange("LIGHT_COLOR",d,c)}};b.prototype.getCeillingLightColor=function(){return this.ceilingLightColor};b.prototype.setCeillingLightColor=function(c){if(c!==this.ceilingLightColor){var d=this.ceilingLightColor;this.ceilingLightColor=c;this.firePropertyChange("CEILING_LIGHT_COLOR",d,c)}};b.prototype.getWallsAlpha=function(){return this.wallsAlpha};b.prototype.setWallsAlpha=function(d){if(d!==this.wallsAlpha){var c=this.wallsAlpha;this.wallsAlpha=d;this.firePropertyChange("WALLS_ALPHA",c,d)}};b.prototype.getDrawingMode=function(){return this.drawingMode};b.prototype.setDrawingMode=function(c){if(c!==this.drawingMode){var d=this.drawingMode;this.drawingMode=c;this.firePropertyChange("DRAWING_MODE",d,c)}};b.prototype.getSubpartSizeUnderLight=function(){return this.subpartSizeUnderLight};b.prototype.setSubpartSizeUnderLight=function(c){if(c!==this.subpartSizeUnderLight){var d=this.subpartSizeUnderLight;this.subpartSizeUnderLight=c;this.firePropertyChange("SUBPART_SIZE_UNDER_LIGHT",d,c)}};b.prototype.isAllLevelsVisible=function(){return this.allLevelsVisible};b.prototype.setAllLevelsVisible=function(c){if(c!==this.allLevelsVisible){this.allLevelsVisible=c;this.firePropertyChange("ALL_LEVELS_VISIBLE",!c,c)}};b.prototype.getPhotoWidth=function(){return this.photoWidth};b.prototype.setPhotoWidth=function(d){if(this.photoWidth!==d){var c=this.photoWidth;this.photoWidth=d;this.firePropertyChange("PHOTO_WIDTH",c,d)}};b.prototype.getPhotoHeight=function(){return this.photoHeight};b.prototype.setPhotoHeight=function(c){if(this.photoHeight!==c){var d=this.photoHeight;this.photoHeight=c;this.firePropertyChange("PHOTO_HEIGHT",d,c)}};b.prototype.getPhotoAspectRatio=function(){return this.photoAspectRatio};b.prototype.setPhotoAspectRatio=function(c){if(this.photoAspectRatio!==c){var d=this.photoAspectRatio;this.photoAspectRatio=c;this.photoAspectRatioName=AspectRatio[this.photoAspectRatio];this.firePropertyChange("PHOTO_ASPECT_RATIO",d,c)}};b.prototype.getPhotoQuality=function(){return this.photoQuality};b.prototype.setPhotoQuality=function(c){if(this.photoQuality!==c){var d=this.photoQuality;this.photoQuality=c;this.firePropertyChange("PHOTO_QUALITY",d,c)}};b.prototype.getVideoWidth=function(){return this.videoWidth};b.prototype.setVideoWidth=function(d){if(this.videoWidth!==d){var c=this.videoWidth;this.videoWidth=d;this.firePropertyChange("VIDEO_WIDTH",c,d)}};b.prototype.getVideoHeight=function(){return Math.round(this.getVideoWidth()/{FREE_RATIO:null,VIEW_3D_RATIO:null,RATIO_4_3:4/3,RATIO_3_2:1.5,RATIO_16_9:16/9,RATIO_2_1:2/1,SQUARE_RATIO:1}[this.getVideoAspectRatio()])};b.prototype.getVideoAspectRatio=function(){return this.videoAspectRatio};b.prototype.setVideoAspectRatio=function(d){if(this.videoAspectRatio!==d){if({FREE_RATIO:null,VIEW_3D_RATIO:null,RATIO_4_3:4/3,RATIO_3_2:1.5,RATIO_16_9:16/9,RATIO_2_1:2/1,SQUARE_RATIO:1}[d]==null){throw new IllegalArgumentException("Unsupported aspect ratio "+d)}var c=this.videoAspectRatio;this.videoAspectRatio=d;this.videoAspectRatioName=AspectRatio[this.videoAspectRatio];this.firePropertyChange("VIDEO_ASPECT_RATIO",c,d)}};b.prototype.getVideoQuality=function(){return this.videoQuality};b.prototype.setVideoQuality=function(c){if(this.videoQuality!==c){var d=this.videoQuality;this.videoQuality=c;this.firePropertyChange("VIDEO_QUALITY",d,c)}};b.prototype.getVideoSpeed=function(){return this.videoSpeed};b.prototype.setVideoSpeed=function(c){if(this.videoSpeed!==c){var d=this.videoSpeed;this.videoSpeed=c;this.firePropertyChange("VIDEO_SPEED",d,c)}};b.prototype.getVideoFrameRate=function(){return this.videoFrameRate};b.prototype.setVideoFrameRate=function(d){if(this.videoFrameRate!==d){var c=this.videoFrameRate;this.videoFrameRate=d;this.firePropertyChange("VIDEO_FRAME_RATE",c,d)}};b.prototype.getVideoCameraPath=function(){return this.cameraPath.slice(0)};b.prototype.setVideoCameraPath=function(c){if(this.cameraPath!==c){var d=this.cameraPath;if(c!=null){this.cameraPath=(c.slice(0))}else{this.cameraPath=[]}this.firePropertyChange("VIDEO_CAMERA_PATH",d,c)}};b.prototype.clone=function(){var f=this;var e=(function(i){if(a.prototype.clone!=undefined){return a.prototype.clone.call(f)}else{var g=Object.create(i);for(var h in i){if(i.hasOwnProperty(h)){g[h]=i[h]}}return g}})(this);e.cameraPath=([]);for(var c=0;c<this.cameraPath.length;c++){var d=this.cameraPath[c];(e.cameraPath.push((function(i){if(i.clone!=undefined){return i.clone()}else{var g=Object.create(i);for(var h in i){if(i.hasOwnProperty(h)){g[h]=i[h]}}return g}})(d))>0)}return e};return b}(HomeObject));HomeEnvironment.__class="com.eteks.sweethome3d.model.HomeEnvironment";HomeEnvironment.__interfaces=["java.lang.Cloneable","java.io.Serializable"];(function(a){var b;(function(c){c[c.FILL=0]="FILL";c[c.OUTLINE=1]="OUTLINE";c[c.FILL_AND_OUTLINE=2]="FILL_AND_OUTLINE"})(b=a.DrawingMode||(a.DrawingMode={}))})(HomeEnvironment||(HomeEnvironment={}));HomeEnvironment.__transients=["photoAspectRatio","videoAspectRatio","propertyChangeSupport"];var HomePieceOfFurniture=(function(b){__extends(a,b);function a(j,e){var i=this;if(((typeof j==="string")||j===null)&&((e!=null&&(e.constructor!=null&&e.constructor.__interfaces!=null&&e.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.PieceOfFurniture")>=0))||e===null)){var g=arguments;i=b.call(this,j)||this;if(i.catalogId===undefined){i.catalogId=null}if(i.name===undefined){i.name=null}if(i.nameVisible===undefined){i.nameVisible=false}if(i.nameXOffset===undefined){i.nameXOffset=0}if(i.nameYOffset===undefined){i.nameYOffset=0}if(i.nameStyle===undefined){i.nameStyle=null}if(i.nameAngle===undefined){i.nameAngle=0}if(i.description===undefined){i.description=null}if(i.information===undefined){i.information=null}if(i.icon===undefined){i.icon=null}if(i.planIcon===undefined){i.planIcon=null}if(i.model===undefined){i.model=null}if(i.modelSize===undefined){i.modelSize=null}if(i.width===undefined){i.width=0}if(i.widthInPlan===undefined){i.widthInPlan=0}if(i.depth===undefined){i.depth=0}if(i.depthInPlan===undefined){i.depthInPlan=0}if(i.height===undefined){i.height=0}if(i.heightInPlan===undefined){i.heightInPlan=0}if(i.elevation===undefined){i.elevation=0}if(i.dropOnTopElevation===undefined){i.dropOnTopElevation=0}if(i.movable===undefined){i.movable=false}if(i.doorOrWindow===undefined){i.doorOrWindow=false}if(i.modelMaterials===undefined){i.modelMaterials=null}if(i.color===undefined){i.color=null}if(i.texture===undefined){i.texture=null}if(i.shininess===undefined){i.shininess=null}if(i.modelRotation===undefined){i.modelRotation=null}if(i.modelCenteredAtOrigin===undefined){i.modelCenteredAtOrigin=false}if(i.modelTransformations===undefined){i.modelTransformations=null}if(i.staircaseCutOutShape===undefined){i.staircaseCutOutShape=null}if(i.creator===undefined){i.creator=null}if(i.backFaceShown===undefined){i.backFaceShown=false}if(i.resizable===undefined){i.resizable=false}if(i.deformable===undefined){i.deformable=false}if(i.texturable===undefined){i.texturable=false}if(i.horizontallyRotatable===undefined){i.horizontallyRotatable=false}if(i.price===undefined){i.price=null}if(i.valueAddedTaxPercentage===undefined){i.valueAddedTaxPercentage=null}if(i.currency===undefined){i.currency=null}if(i.visible===undefined){i.visible=false}if(i.x===undefined){i.x=0}if(i.y===undefined){i.y=0}if(i.angle===undefined){i.angle=0}if(i.pitch===undefined){i.pitch=0}if(i.roll===undefined){i.roll=0}if(i.modelMirrored===undefined){i.modelMirrored=false}if(i.level===undefined){i.level=null}if(i.shapeCache===undefined){i.shapeCache=null}i.name=e.getName();i.description=e.getDescription();i.information=e.getInformation();i.icon=e.getIcon();i.planIcon=e.getPlanIcon();i.model=e.getModel();i.modelSize=e.getModelSize();i.width=e.getWidth();i.depth=e.getDepth();i.height=e.getHeight();i.elevation=e.getElevation();i.dropOnTopElevation=e.getDropOnTopElevation();i.movable=e.isMovable();i.doorOrWindow=e.isDoorOrWindow();i.color=e.getColor();i.modelRotation=e.getModelRotation();i.staircaseCutOutShape=e.getStaircaseCutOutShape();i.creator=e.getCreator();i.backFaceShown=e.isBackFaceShown();i.resizable=e.isResizable();i.deformable=e.isDeformable();i.texturable=e.isTexturable();i.horizontallyRotatable=e.isHorizontallyRotatable();i.price=e.getPrice();i.valueAddedTaxPercentage=e.getValueAddedTaxPercentage();i.currency=e.getCurrency();if(e!=null&&e instanceof a){var f=e;i.catalogId=f.getCatalogId();i.nameVisible=f.isNameVisible();i.nameXOffset=f.getNameXOffset();i.nameYOffset=f.getNameYOffset();i.nameAngle=f.getNameAngle();i.nameStyle=f.getNameStyle();i.visible=f.isVisible();i.widthInPlan=f.getWidthInPlan();i.depthInPlan=f.getDepthInPlan();i.heightInPlan=f.getHeightInPlan();i.modelCenteredAtOrigin=f.isModelCenteredAtOrigin();i.modelTransformations=f.getModelTransformations();i.angle=f.getAngle();i.pitch=f.getPitch();i.roll=f.getRoll();i.x=f.getX();i.y=f.getY();i.modelMirrored=f.isModelMirrored();i.texture=f.getTexture();i.shininess=f.getShininess();i.modelMaterials=f.getModelMaterials()}else{if(e!=null&&e instanceof CatalogPieceOfFurniture){i.catalogId=e.getId()}i.visible=true;i.widthInPlan=i.width;i.depthInPlan=i.depth;i.heightInPlan=i.height;i.modelCenteredAtOrigin=true;i.x=i.width/2;i.y=i.depth/2}}else{if(((j!=null&&(j.constructor!=null&&j.constructor.__interfaces!=null&&j.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.PieceOfFurniture")>=0))||j===null)&&e===undefined){var g=arguments;var d=g[0];var c=arguments;var h=HomeObject.createId("pieceOfFurniture");i=b.call(this,h)||this;if(i.catalogId===undefined){i.catalogId=null}if(i.name===undefined){i.name=null}if(i.nameVisible===undefined){i.nameVisible=false}if(i.nameXOffset===undefined){i.nameXOffset=0}if(i.nameYOffset===undefined){i.nameYOffset=0}if(i.nameStyle===undefined){i.nameStyle=null}if(i.nameAngle===undefined){i.nameAngle=0}if(i.description===undefined){i.description=null}if(i.information===undefined){i.information=null}if(i.icon===undefined){i.icon=null}if(i.planIcon===undefined){i.planIcon=null}if(i.model===undefined){i.model=null}if(i.modelSize===undefined){i.modelSize=null}if(i.width===undefined){i.width=0}if(i.widthInPlan===undefined){i.widthInPlan=0}if(i.depth===undefined){i.depth=0}if(i.depthInPlan===undefined){i.depthInPlan=0}if(i.height===undefined){i.height=0}if(i.heightInPlan===undefined){i.heightInPlan=0}if(i.elevation===undefined){i.elevation=0}if(i.dropOnTopElevation===undefined){i.dropOnTopElevation=0}if(i.movable===undefined){i.movable=false}if(i.doorOrWindow===undefined){i.doorOrWindow=false}if(i.modelMaterials===undefined){i.modelMaterials=null}if(i.color===undefined){i.color=null}if(i.texture===undefined){i.texture=null}if(i.shininess===undefined){i.shininess=null}if(i.modelRotation===undefined){i.modelRotation=null}if(i.modelCenteredAtOrigin===undefined){i.modelCenteredAtOrigin=false}if(i.modelTransformations===undefined){i.modelTransformations=null}if(i.staircaseCutOutShape===undefined){i.staircaseCutOutShape=null}if(i.creator===undefined){i.creator=null}if(i.backFaceShown===undefined){i.backFaceShown=false}if(i.resizable===undefined){i.resizable=false}if(i.deformable===undefined){i.deformable=false}if(i.texturable===undefined){i.texturable=false}if(i.horizontallyRotatable===undefined){i.horizontallyRotatable=false}if(i.price===undefined){i.price=null}if(i.valueAddedTaxPercentage===undefined){i.valueAddedTaxPercentage=null}if(i.currency===undefined){i.currency=null}if(i.visible===undefined){i.visible=false}if(i.x===undefined){i.x=0}if(i.y===undefined){i.y=0}if(i.angle===undefined){i.angle=0}if(i.pitch===undefined){i.pitch=0}if(i.roll===undefined){i.roll=0}if(i.modelMirrored===undefined){i.modelMirrored=false}if(i.level===undefined){i.level=null}if(i.shapeCache===undefined){i.shapeCache=null}i.name=d.getName();i.description=d.getDescription();i.information=d.getInformation();i.icon=d.getIcon();i.planIcon=d.getPlanIcon();i.model=d.getModel();i.modelSize=d.getModelSize();i.width=d.getWidth();i.depth=d.getDepth();i.height=d.getHeight();i.elevation=d.getElevation();i.dropOnTopElevation=d.getDropOnTopElevation();i.movable=d.isMovable();i.doorOrWindow=d.isDoorOrWindow();i.color=d.getColor();i.modelRotation=d.getModelRotation();i.staircaseCutOutShape=d.getStaircaseCutOutShape();i.creator=d.getCreator();i.backFaceShown=d.isBackFaceShown();i.resizable=d.isResizable();i.deformable=d.isDeformable();i.texturable=d.isTexturable();i.horizontallyRotatable=d.isHorizontallyRotatable();i.price=d.getPrice();i.valueAddedTaxPercentage=d.getValueAddedTaxPercentage();i.currency=d.getCurrency();if(d!=null&&d instanceof a){var f=d;i.catalogId=f.getCatalogId();i.nameVisible=f.isNameVisible();i.nameXOffset=f.getNameXOffset();i.nameYOffset=f.getNameYOffset();i.nameAngle=f.getNameAngle();i.nameStyle=f.getNameStyle();i.visible=f.isVisible();i.widthInPlan=f.getWidthInPlan();i.depthInPlan=f.getDepthInPlan();i.heightInPlan=f.getHeightInPlan();i.modelCenteredAtOrigin=f.isModelCenteredAtOrigin();i.modelTransformations=f.getModelTransformations();i.angle=f.getAngle();i.pitch=f.getPitch();i.roll=f.getRoll();i.x=f.getX();i.y=f.getY();i.modelMirrored=f.isModelMirrored();i.texture=f.getTexture();i.shininess=f.getShininess();i.modelMaterials=f.getModelMaterials()}else{if(d!=null&&d instanceof CatalogPieceOfFurniture){i.catalogId=d.getId()}i.visible=true;i.widthInPlan=i.width;i.depthInPlan=i.depth;i.heightInPlan=i.height;i.modelCenteredAtOrigin=true;i.x=i.width/2;i.y=i.depth/2}if(i.catalogId===undefined){i.catalogId=null}if(i.name===undefined){i.name=null}if(i.nameVisible===undefined){i.nameVisible=false}if(i.nameXOffset===undefined){i.nameXOffset=0}if(i.nameYOffset===undefined){i.nameYOffset=0}if(i.nameStyle===undefined){i.nameStyle=null}if(i.nameAngle===undefined){i.nameAngle=0}if(i.description===undefined){i.description=null}if(i.information===undefined){i.information=null}if(i.icon===undefined){i.icon=null}if(i.planIcon===undefined){i.planIcon=null}if(i.model===undefined){i.model=null}if(i.modelSize===undefined){i.modelSize=null}if(i.width===undefined){i.width=0}if(i.widthInPlan===undefined){i.widthInPlan=0}if(i.depth===undefined){i.depth=0}if(i.depthInPlan===undefined){i.depthInPlan=0}if(i.height===undefined){i.height=0}if(i.heightInPlan===undefined){i.heightInPlan=0}if(i.elevation===undefined){i.elevation=0}if(i.dropOnTopElevation===undefined){i.dropOnTopElevation=0}if(i.movable===undefined){i.movable=false}if(i.doorOrWindow===undefined){i.doorOrWindow=false}if(i.modelMaterials===undefined){i.modelMaterials=null}if(i.color===undefined){i.color=null}if(i.texture===undefined){i.texture=null}if(i.shininess===undefined){i.shininess=null}if(i.modelRotation===undefined){i.modelRotation=null}if(i.modelCenteredAtOrigin===undefined){i.modelCenteredAtOrigin=false}if(i.modelTransformations===undefined){i.modelTransformations=null}if(i.staircaseCutOutShape===undefined){i.staircaseCutOutShape=null}if(i.creator===undefined){i.creator=null}if(i.backFaceShown===undefined){i.backFaceShown=false}if(i.resizable===undefined){i.resizable=false}if(i.deformable===undefined){i.deformable=false}if(i.texturable===undefined){i.texturable=false}if(i.horizontallyRotatable===undefined){i.horizontallyRotatable=false}if(i.price===undefined){i.price=null}if(i.valueAddedTaxPercentage===undefined){i.valueAddedTaxPercentage=null}if(i.currency===undefined){i.currency=null}if(i.visible===undefined){i.visible=false}if(i.x===undefined){i.x=0}if(i.y===undefined){i.y=0}if(i.angle===undefined){i.angle=0}if(i.pitch===undefined){i.pitch=0}if(i.roll===undefined){i.roll=0}if(i.modelMirrored===undefined){i.modelMirrored=false}if(i.level===undefined){i.level=null}if(i.shapeCache===undefined){i.shapeCache=null}}else{throw new Error("invalid overload")}}return i}a.__static_initialize=function(){if(!a.__static_initialized){a.__static_initialized=true;a.__static_initializer_0()}};a.TWICE_PI_$LI$=function(){a.__static_initialize();if(a.TWICE_PI==null){a.TWICE_PI=2*Math.PI}return a.TWICE_PI};a.STRAIGHT_WALL_ANGLE_MARGIN_$LI$=function(){a.__static_initialize();if(a.STRAIGHT_WALL_ANGLE_MARGIN==null){a.STRAIGHT_WALL_ANGLE_MARGIN=(function(c){return c*Math.PI/180})(1)}return a.STRAIGHT_WALL_ANGLE_MARGIN};a.ROUND_WALL_ANGLE_MARGIN_$LI$=function(){a.__static_initialize();if(a.ROUND_WALL_ANGLE_MARGIN==null){a.ROUND_WALL_ANGLE_MARGIN=(function(c){return c*Math.PI/180})(10)}return a.ROUND_WALL_ANGLE_MARGIN};a.SORTABLE_PROPERTY_COMPARATORS_$LI$=function(){a.__static_initialize();return a.SORTABLE_PROPERTY_COMPARATORS};a.IDENTITY_$LI$=function(){a.__static_initialize();if(a.IDENTITY==null){a.IDENTITY=[[1,0,0],[0,1,0],[0,0,1]]}return a.IDENTITY};a.__static_initializer_0=function(){var c={compare:function(e,d){return e.toString().localeCompare(d.toString())},equals:function(e,d){return e.toString().localeCompare(d.toString())===0}};a.SORTABLE_PROPERTY_COMPARATORS=({});(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"CATALOG_ID",new a.HomePieceOfFurniture$0(c));(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"NAME",new a.HomePieceOfFurniture$1(c));(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"WIDTH",new a.HomePieceOfFurniture$2());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"HEIGHT",new a.HomePieceOfFurniture$3());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"DEPTH",new a.HomePieceOfFurniture$4());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"MOVABLE",new a.HomePieceOfFurniture$5());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"DOOR_OR_WINDOW",new a.HomePieceOfFurniture$6());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"COLOR",new a.HomePieceOfFurniture$7());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"TEXTURE",new a.HomePieceOfFurniture$8(c));(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"VISIBLE",new a.HomePieceOfFurniture$9());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"X",new a.HomePieceOfFurniture$10());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"Y",new a.HomePieceOfFurniture$11());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"ELEVATION",new a.HomePieceOfFurniture$12());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"ANGLE",new a.HomePieceOfFurniture$13());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"MODEL_SIZE",new a.HomePieceOfFurniture$14());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"CREATOR",new a.HomePieceOfFurniture$15(c));(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"LEVEL",new a.HomePieceOfFurniture$16());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"PRICE",new a.HomePieceOfFurniture$17());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"VALUE_ADDED_TAX_PERCENTAGE",new a.HomePieceOfFurniture$18());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"VALUE_ADDED_TAX",new a.HomePieceOfFurniture$19());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key==null&&f==null||d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"PRICE_VALUE_ADDED_TAX_INCLUDED",new a.HomePieceOfFurniture$20())};a.compare$float$float=function(d,c){return(d-c)};a.compare$boolean$boolean=function(d,c){return d===c?0:(d?-1:1)};a.compare$java_math_BigDecimal$java_math_BigDecimal=function(d,c){if(d===c){return 0}else{if(d==null){return -1}else{if(c==null){return 1}else{return d.cmp(c)}}}};a.compare=function(d,c){if(((d!=null&&d instanceof Big)||d===null)&&((c!=null&&c instanceof Big)||c===null)){return a.compare$java_math_BigDecimal$java_math_BigDecimal(d,c)}else{if(((d!=null&&d instanceof Level)||d===null)&&((c!=null&&c instanceof Level)||c===null)){return a.compare$com_eteks_sweethome3d_model_Level$com_eteks_sweethome3d_model_Level(d,c)}else{if(((typeof d==="number")||d===null)&&((typeof c==="number")||c===null)){return a.compare$float$float(d,c)}else{if(((typeof d==="boolean")||d===null)&&((typeof c==="boolean")||c===null)){return a.compare$boolean$boolean(d,c)}else{throw new Error("invalid overload")}}}}};a.compare$com_eteks_sweethome3d_model_Level$com_eteks_sweethome3d_model_Level=function(d,c){if(d===c){return 0}else{if(d==null){return -1}else{if(c==null){return 1}else{return(d.getElevation()-c.getElevation())}}}};a.getComparableModelSize=function(g){if(g!=null&&g instanceof HomeFurnitureGroup){var f=null;var h=g.getFurniture();for(var e=0;e<h.length;e++){var c=h[e];var d=a.getComparableModelSize(c);if(d!=null&&(f==null||f<d)){f=d}}return f}else{return g.modelSize}};a.prototype.getCatalogId=function(){return this.catalogId};a.prototype.getName=function(){return this.name};a.prototype.setName=function(c){if(c!==this.name&&(c==null||!(c===this.name))){var d=this.name;this.name=c;this.firePropertyChange("NAME",d,c)}};a.prototype.isNameVisible=function(){return this.nameVisible};a.prototype.setNameVisible=function(c){if(c!==this.nameVisible){this.nameVisible=c;this.firePropertyChange("NAME_VISIBLE",!c,c)}};a.prototype.getNameXOffset=function(){return this.nameXOffset};a.prototype.setNameXOffset=function(c){if(c!==this.nameXOffset){var d=this.nameXOffset;this.nameXOffset=c;this.firePropertyChange("NAME_X_OFFSET",d,c)}};a.prototype.getNameYOffset=function(){return this.nameYOffset};a.prototype.setNameYOffset=function(c){if(c!==this.nameYOffset){var d=this.nameYOffset;this.nameYOffset=c;this.firePropertyChange("NAME_Y_OFFSET",d,c)}};a.prototype.getNameStyle=function(){return this.nameStyle};a.prototype.setNameStyle=function(d){if(d!==this.nameStyle){var c=this.nameStyle;this.nameStyle=d;this.firePropertyChange("NAME_STYLE",c,d)}};a.prototype.getNameAngle=function(){return this.nameAngle};a.prototype.setNameAngle=function(c){c=((c%a.TWICE_PI_$LI$()+a.TWICE_PI_$LI$())%a.TWICE_PI_$LI$());if(c!==this.nameAngle){var d=this.nameAngle;this.nameAngle=c;this.firePropertyChange("NAME_ANGLE",d,c)}};a.prototype.getDescription=function(){return this.description};a.prototype.setDescription=function(c){if(c!==this.description&&(c==null||!(c===this.description))){var d=this.description;this.description=c;this.firePropertyChange("DESCRIPTION",d,c)}};a.prototype.getInformation=function(){return this.information};a.prototype.getDepth=function(){return this.depth};a.prototype.setDepth=function(d){if(this.isResizable()){if(d!==this.depth){var c=this.depth;this.depth=d;this.shapeCache=null;this.firePropertyChange("DEPTH",c,d)}}else{throw new IllegalStateException("Piece isn't resizable")}};a.prototype.getDepthInPlan=function(){return this.depthInPlan};a.prototype.setDepthInPlan=function(c){if(c!==this.depthInPlan){var d=this.depthInPlan;this.depthInPlan=c;this.shapeCache=null;this.firePropertyChange("DEPTH_IN_PLAN",d,c)}};a.prototype.getHeight=function(){return this.height};a.prototype.setHeight=function(c){if(this.isResizable()){if(c!==this.height){var d=this.height;this.height=c;this.firePropertyChange("HEIGHT",d,c)}}else{throw new IllegalStateException("Piece isn't resizable")}};a.prototype.getHeightInPlan=function(){return this.heightInPlan};a.prototype.setHeightInPlan=function(c){if(c!==this.heightInPlan){var d=this.heightInPlan;this.heightInPlan=c;this.firePropertyChange("HEIGHT_IN_PLAN",d,c)}};a.prototype.getWidth=function(){return this.width};a.prototype.setWidth=function(d){if(this.isResizable()){if(d!==this.width){var c=this.width;this.width=d;this.shapeCache=null;this.firePropertyChange("WIDTH",c,d)}}else{throw new IllegalStateException("Piece isn't resizable")}};a.prototype.getWidthInPlan=function(){return this.widthInPlan};a.prototype.setWidthInPlan=function(d){if(d!==this.widthInPlan){var c=this.widthInPlan;this.widthInPlan=d;this.shapeCache=null;this.firePropertyChange("WIDTH_IN_PLAN",c,d)}};a.prototype.scale=function(c){this.setWidth(this.getWidth()*c);this.setDepth(this.getDepth()*c);this.setHeight(this.getHeight()*c)};a.prototype.getElevation=function(){return this.elevation};a.prototype.getDropOnTopElevation=function(){return this.dropOnTopElevation};a.prototype.getGroundElevation=function(){if(this.level!=null){return this.elevation+this.level.getElevation()}else{return this.elevation}};a.prototype.setElevation=function(d){if(d!==this.elevation){var c=this.elevation;this.elevation=d;this.firePropertyChange("ELEVATION",c,d)}};a.prototype.isMovable=function(){return this.movable};a.prototype.setMovable=function(c){if(c!==this.movable){this.movable=c;this.firePropertyChange("MOVABLE",!c,c)}};a.prototype.isDoorOrWindow=function(){return this.doorOrWindow};a.prototype.getIcon=function(){return this.icon};a.prototype.getPlanIcon=function(){return this.planIcon};a.prototype.getModel=function(){return this.model};a.prototype.setModelSize=function(c){this.modelSize=c};a.prototype.getModelSize=function(){return this.modelSize};a.prototype.setModelMaterials=function(d){if(this.isTexturable()){if(!(function(f,e){if(f==null&&e==null){return true}if(f==null||e==null){return false}if(f.length!=e.length){return false}for(var g=0;g<f.length;g++){if(f[g]!=e[g]){return false}}return true})(d,this.modelMaterials)){var c=this.modelMaterials;this.modelMaterials=d!=null?d.slice(0):null;this.firePropertyChange("MODEL_MATERIALS",c,d)}}else{throw new IllegalStateException("Piece isn't texturable")}};a.prototype.getModelMaterials=function(){if(this.modelMaterials!=null){return this.modelMaterials.slice(0)}else{return null}};a.prototype.getColor=function(){return this.color};a.prototype.setColor=function(c){if(this.isTexturable()){if(c!==this.color&&(c==null||!(c===this.color))){var d=this.color;this.color=c;this.firePropertyChange("COLOR",d,c)}}else{throw new IllegalStateException("Piece isn't texturable")}};a.prototype.getTexture=function(){return this.texture};a.prototype.setTexture=function(d){if(this.isTexturable()){if(d!==this.texture&&(d==null||!d.equals(this.texture))){var c=this.texture;this.texture=d;this.firePropertyChange("TEXTURE",c,d)}}else{throw new IllegalStateException("Piece isn't texturable")}};a.prototype.getShininess=function(){return this.shininess};a.prototype.setShininess=function(d){if(this.isTexturable()){if(d!==this.shininess&&(d==null||!(d===this.shininess))){var c=this.shininess;this.shininess=d;this.firePropertyChange("SHININESS",c,d)}}else{throw new IllegalStateException("Piece isn't texturable")}};a.prototype.isResizable=function(){return this.resizable};a.prototype.isDeformable=function(){return this.deformable};a.prototype.isWidthDepthDeformable=function(){return this.isDeformable()};a.prototype.isTexturable=function(){return this.texturable};a.prototype.isHorizontallyRotatable=function(){return this.horizontallyRotatable};a.prototype.getPrice=function(){return this.price};a.prototype.setPrice=function(d){if(d!==this.price&&(d==null||!((this.price)!=null?d.eq(this.price):(d===(this.price))))){var c=this.price;this.price=d;this.firePropertyChange("PRICE",c,d)}};a.prototype.getValueAddedTaxPercentage=function(){return this.valueAddedTaxPercentage};a.prototype.setValueAddedTaxPercentage=function(d){if(d!==this.valueAddedTaxPercentage&&(d==null||!((this.valueAddedTaxPercentage)!=null?d.eq(this.valueAddedTaxPercentage):(d===(this.valueAddedTaxPercentage))))){var c=this.valueAddedTaxPercentage;this.valueAddedTaxPercentage=d;this.firePropertyChange("VALUE_ADDED_TAX_PERCENTAGE",c,d)}};a.prototype.getValueAddedTax=function(){if(this.price!=null&&this.valueAddedTaxPercentage!=null){return this.price.times(this.valueAddedTaxPercentage).round(2)}else{return null}};a.prototype.getPriceValueAddedTaxIncluded=function(){if(this.price!=null&&this.valueAddedTaxPercentage!=null){return this.price.plus(this.getValueAddedTax())}else{return this.price}};a.prototype.getCurrency=function(){return this.currency};a.prototype.setCurrency=function(c){if(c!==this.currency&&(c==null||!(c===this.currency))){var d=this.currency;this.currency=c;this.firePropertyChange("CURRENCY",d,c)}};a.prototype.isVisible=function(){return this.visible};a.prototype.setVisible=function(c){if(c!==this.visible){this.visible=c;this.firePropertyChange("VISIBLE",!c,c)}};a.prototype.getX=function(){return this.x};a.prototype.setX=function(c){if(c!==this.x){var d=this.x;this.x=c;this.shapeCache=null;this.firePropertyChange("X",d,c)}};a.prototype.getY=function(){return this.y};a.prototype.setY=function(d){if(d!==this.y){var c=this.y;this.y=d;this.shapeCache=null;this.firePropertyChange("Y",c,d)}};a.prototype.getAngle=function(){return this.angle};a.prototype.setAngle=function(d){d=((d%a.TWICE_PI_$LI$()+a.TWICE_PI_$LI$())%a.TWICE_PI_$LI$());if(d!==this.angle){var c=this.angle;this.angle=d;this.shapeCache=null;this.firePropertyChange("ANGLE",c,d)}};a.prototype.getPitch=function(){return this.pitch};a.prototype.setPitch=function(d){if(this.isHorizontallyRotatable()){d=((d%a.TWICE_PI_$LI$()+a.TWICE_PI_$LI$())%a.TWICE_PI_$LI$());if(d!==this.pitch){var c=this.pitch;this.pitch=d;this.shapeCache=null;this.firePropertyChange("PITCH",c,d)}}else{throw new IllegalStateException("Piece can't be rotated around an horizontal axis")}};a.prototype.getRoll=function(){return this.roll};a.prototype.setRoll=function(c){if(this.isHorizontallyRotatable()){c=((c%a.TWICE_PI_$LI$()+a.TWICE_PI_$LI$())%a.TWICE_PI_$LI$());if(c!==this.roll){var d=this.roll;this.roll=c;this.shapeCache=null;this.firePropertyChange("ROLL",d,c)}}else{throw new IllegalStateException("Piece can't be rotated around an horizontal axis")}};a.prototype.isHorizontallyRotated=function(){return this.roll!==0||this.pitch!==0};a.prototype.isModelMirrored=function(){return this.modelMirrored};a.prototype.setModelMirrored=function(c){if(this.isResizable()){if(c!==this.modelMirrored){this.modelMirrored=c;this.firePropertyChange("MODEL_MIRRORED",!c,c)}}else{throw new IllegalStateException("Piece isn't resizable")}};a.prototype.getModelRotation=function(){return[[this.modelRotation[0][0],this.modelRotation[0][1],this.modelRotation[0][2]],[this.modelRotation[1][0],this.modelRotation[1][1],this.modelRotation[1][2]],[this.modelRotation[2][0],this.modelRotation[2][1],this.modelRotation[2][2]]]};a.prototype.setModelCenteredAtOrigin=function(c){this.modelCenteredAtOrigin=c};a.prototype.isModelCenteredAtOrigin=function(){return this.modelCenteredAtOrigin};a.prototype.setModelTransformations=function(d){if(!(function(f,e){if(f==null&&e==null){return true}if(f==null||e==null){return false}if(f.length!=e.length){return false}for(var g=0;g<f.length;g++){if(f[g]!=e[g]){return false}}return true})(d,this.modelTransformations)){var c=this.modelTransformations;this.modelTransformations=d!=null&&d.length>0?d.slice(0):null;this.firePropertyChange("MODEL_MATERIALS",c,d)}};a.prototype.getModelTransformations=function(){if(this.modelTransformations!=null){return this.modelTransformations.slice(0)}else{return null}};a.prototype.getStaircaseCutOutShape=function(){return this.staircaseCutOutShape};a.prototype.getCreator=function(){return this.creator};a.prototype.isBackFaceShown=function(){return this.backFaceShown};a.prototype.getLevel=function(){return this.level};a.prototype.setLevel=function(d){if(d!==this.level){var c=this.level;this.level=d;this.firePropertyChange("LEVEL",c,d)}};a.prototype.isAtLevel=function(e){if(this.level===e){return true}else{if(this.level!=null&&e!=null){var c=this.level.getElevation();var d=e.getElevation();return c===d&&this.level.getElevationIndex()<e.getElevationIndex()||c<d&&this.isTopAtLevel(e)}else{return false}}};a.prototype.isTopAtLevel=function(d){var c=this.level.getElevation()+this.elevation+this.heightInPlan;if(this.staircaseCutOutShape!=null){return c>=d.getElevation()}else{return c>d.getElevation()}};a.prototype.getPoints=function(){var c=(function(g){var f=function(j){if(j.length===0){return 0}else{var k=[];for(var h=0;h<j[0];h++){k.push(f(j.slice(1)))}return k}};return f(g)})([4,2]);var e=this.getShape().getPathIterator(null);for(var d=0;d<c.length;d++){e.currentSegment(c[d]);e.next()}return c};a.prototype.intersectsRectangle=function(e,g,c,f){var d=new java.awt.geom.Rectangle2D.Float(e,g,0,0);d.add(c,f);return this.getShape().intersects(d)};a.prototype.containsPoint=function(c,e,d){if(d===0){return this.getShape().contains(c,e)}else{return this.getShape().intersects(c-d,e-d,2*d,2*d)}};a.prototype.isPointAt=function(e,h,g){var f=this.getPoints();for(var d=0;d<f.length;d++){var c=f[d];if(Math.abs(e-c[0])<=g&&Math.abs(h-c[1])<=g){return true}}return false};a.prototype.isTopLeftPointAt=function(d,g,f){var e=this.getPoints();var c=java.awt.geom.Point2D.distanceSq(d,g,e[0][0],e[0][1]);return c<=f*f&&c<java.awt.geom.Point2D.distanceSq(d,g,e[1][0],e[1][1])&&c<java.awt.geom.Point2D.distanceSq(d,g,e[3][0],e[3][1])};a.prototype.isTopRightPointAt=function(c,g,f){var d=this.getPoints();var e=java.awt.geom.Point2D.distanceSq(c,g,d[1][0],d[1][1]);return e<=f*f&&e<java.awt.geom.Point2D.distanceSq(c,g,d[0][0],d[0][1])&&e<java.awt.geom.Point2D.distanceSq(c,g,d[2][0],d[2][1])};a.prototype.isBottomLeftPointAt=function(c,g,f){var e=this.getPoints();var d=java.awt.geom.Point2D.distanceSq(c,g,e[3][0],e[3][1]);return d<=f*f&&d<java.awt.geom.Point2D.distanceSq(c,g,e[0][0],e[0][1])&&d<java.awt.geom.Point2D.distanceSq(c,g,e[2][0],e[2][1])};a.prototype.isBottomRightPointAt=function(c,g,f){var d=this.getPoints();var e=java.awt.geom.Point2D.distanceSq(c,g,d[2][0],d[2][1]);return e<=f*f&&e<java.awt.geom.Point2D.distanceSq(c,g,d[1][0],d[1][1])&&e<java.awt.geom.Point2D.distanceSq(c,g,d[3][0],d[3][1])};a.prototype.isNameCenterPointAt=function(c,e,d){return Math.abs(c-this.getX()-this.getNameXOffset())<=d&&Math.abs(e-this.getY()-this.getNameYOffset())<=d};a.prototype.isParallelToWall=function(d){if(d.getArcExtent()==null){var c=d.getYEnd()-d.getYStart();var e=d.getXEnd()-d.getXStart();if(e===0&&c===0){return false}else{var h=Math.atan2(c,e);var f=Math.abs(h-this.getAngle())%Math.PI;return f<=a.STRAIGHT_WALL_ANGLE_MARGIN_$LI$()||(Math.PI-f)<=a.STRAIGHT_WALL_ANGLE_MARGIN_$LI$()}}else{var g=Math.PI/2+Math.atan2(d.getYArcCircleCenter()-this.getY(),d.getXArcCircleCenter()-this.getX());var f=Math.abs(g-this.getAngle())%Math.PI;return f<=a.ROUND_WALL_ANGLE_MARGIN_$LI$()||(Math.PI-f)<=a.ROUND_WALL_ANGLE_MARGIN_$LI$()}};a.prototype.getShape=function(){if(this.shapeCache==null){var c=new java.awt.geom.Rectangle2D.Float(this.getX()-this.getWidthInPlan()/2,this.getY()-this.getDepthInPlan()/2,this.getWidthInPlan(),this.getDepthInPlan());var d=java.awt.geom.AffineTransform.getRotateInstance(this.getAngle(),this.getX(),this.getY());var f=c.getPathIterator(d);var e=new java.awt.geom.GeneralPath();e.append(f,false);this.shapeCache=e}return this.shapeCache};a.prototype.move=function(d,c){this.setX(this.getX()+d);this.setY(this.getY()+c)};a.prototype.clone=function(){var d=this;var c=(function(g){if(b.prototype.clone!=undefined){return b.prototype.clone.call(d)}else{var e=Object.create(g);for(var f in g){if(g.hasOwnProperty(f)){e[f]=g[f]}}return e}})(this);c.level=null;return c};a.getFurnitureComparator=function(c){return((function(d,e){if(d.entries==null){d.entries=[]}for(var f=0;f<d.entries.length;f++){if(d.entries[f].key==null&&e==null||d.entries[f].key.equals!=null&&d.entries[f].key.equals(e)||d.entries[f].key===e){return d.entries[f].value}}return null})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),c))};a.__static_initialized=false;return a}(HomeObject));HomePieceOfFurniture.__class="com.eteks.sweethome3d.model.HomePieceOfFurniture";HomePieceOfFurniture.__interfaces=["java.lang.Cloneable","com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.PieceOfFurniture","com.eteks.sweethome3d.model.Elevatable","java.io.Serializable"];(function(m){var l=(function(){function w(x){this.collator=x}w.prototype.compare=function(y,x){if(y.catalogId===x.catalogId){return 0}else{if(y.catalogId==null){return -1}else{if(x.catalogId==null){return 1}else{return this.collator.compare(y.catalogId,x.catalogId)}}}};return w}());m.HomePieceOfFurniture$0=l;l.__interfaces=["java.util.Comparator"];var k=(function(){function w(x){this.collator=x}w.prototype.compare=function(y,x){if(y.name===x.name){return 0}else{if(y.name==null){return -1}else{if(x.name==null){return 1}else{return this.collator.compare(y.name,x.name)}}}};return w}());m.HomePieceOfFurniture$1=k;k.__interfaces=["java.util.Comparator"];var j=(function(){function w(){}w.prototype.compare=function(y,x){return m.compare$float$float(y.width,x.width)};return w}());m.HomePieceOfFurniture$2=j;j.__interfaces=["java.util.Comparator"];var i=(function(){function w(){}w.prototype.compare=function(y,x){return m.compare$float$float(y.height,x.height)};return w}());m.HomePieceOfFurniture$3=i;i.__interfaces=["java.util.Comparator"];var h=(function(){function w(){}w.prototype.compare=function(y,x){return m.compare$float$float(y.depth,x.depth)};return w}());m.HomePieceOfFurniture$4=h;h.__interfaces=["java.util.Comparator"];var g=(function(){function w(){}w.prototype.compare=function(y,x){return m.compare$boolean$boolean(y.movable,x.movable)};return w}());m.HomePieceOfFurniture$5=g;g.__interfaces=["java.util.Comparator"];var f=(function(){function w(){}w.prototype.compare=function(y,x){return m.compare$boolean$boolean(y.doorOrWindow,x.doorOrWindow)};return w}());m.HomePieceOfFurniture$6=f;f.__interfaces=["java.util.Comparator"];var e=(function(){function w(){}w.prototype.compare=function(y,x){if(y.color===x.color){return 0}else{if(y.color==null){return -1}else{if(x.color==null){return 1}else{return y.color-x.color}}}};return w}());m.HomePieceOfFurniture$7=e;e.__interfaces=["java.util.Comparator"];var c=(function(){function w(x){this.collator=x}w.prototype.compare=function(y,x){if(y.texture===x.texture){return 0}else{if(y.texture==null){return -1}else{if(x.texture==null){return 1}else{return this.collator.compare(y.texture.getName(),x.texture.getName())}}}};return w}());m.HomePieceOfFurniture$8=c;c.__interfaces=["java.util.Comparator"];var a=(function(){function w(){}w.prototype.compare=function(y,x){return m.compare$boolean$boolean(y.visible,x.visible)};return w}());m.HomePieceOfFurniture$9=a;a.__interfaces=["java.util.Comparator"];var d=(function(){function w(){}w.prototype.compare=function(y,x){return m.compare$float$float(y.x,x.x)};return w}());m.HomePieceOfFurniture$10=d;d.__interfaces=["java.util.Comparator"];var b=(function(){function w(){}w.prototype.compare=function(y,x){return m.compare$float$float(y.y,x.y)};return w}());m.HomePieceOfFurniture$11=b;b.__interfaces=["java.util.Comparator"];var v=(function(){function w(){}w.prototype.compare=function(y,x){return m.compare$float$float(y.elevation,x.elevation)};return w}());m.HomePieceOfFurniture$12=v;v.__interfaces=["java.util.Comparator"];var u=(function(){function w(){}w.prototype.compare=function(y,x){return m.compare$float$float(y.angle,x.angle)};return w}());m.HomePieceOfFurniture$13=u;u.__interfaces=["java.util.Comparator"];var t=(function(){function w(){}w.prototype.compare=function(A,z){var y=m.getComparableModelSize(A);var x=m.getComparableModelSize(z);if(y===x){return 0}else{if(y==null){return -1}else{if(x==null){return 1}else{return y<x?-1:(y===x?0:1)}}}};return w}());m.HomePieceOfFurniture$14=t;t.__interfaces=["java.util.Comparator"];var s=(function(){function w(x){this.collator=x}w.prototype.compare=function(y,x){if(y.creator===x.creator){return 0}else{if(y.creator==null){return -1}else{if(x.creator==null){return 1}else{return this.collator.compare(y.creator,x.creator)}}}};return w}());m.HomePieceOfFurniture$15=s;s.__interfaces=["java.util.Comparator"];var r=(function(){function w(){}w.prototype.compare=function(y,x){return m.compare$com_eteks_sweethome3d_model_Level$com_eteks_sweethome3d_model_Level(y.getLevel(),x.getLevel())};return w}());m.HomePieceOfFurniture$16=r;r.__interfaces=["java.util.Comparator"];var q=(function(){function w(){}w.prototype.compare=function(y,x){return m.compare$java_math_BigDecimal$java_math_BigDecimal(y.price,x.price)};return w}());m.HomePieceOfFurniture$17=q;q.__interfaces=["java.util.Comparator"];var p=(function(){function w(){}w.prototype.compare=function(y,x){return m.compare$java_math_BigDecimal$java_math_BigDecimal(y.valueAddedTaxPercentage,x.valueAddedTaxPercentage)};return w}());m.HomePieceOfFurniture$18=p;p.__interfaces=["java.util.Comparator"];var o=(function(){function w(){}w.prototype.compare=function(y,x){return m.compare$java_math_BigDecimal$java_math_BigDecimal(y.getValueAddedTax(),x.getValueAddedTax())};return w}());m.HomePieceOfFurniture$19=o;o.__interfaces=["java.util.Comparator"];var n=(function(){function w(){}w.prototype.compare=function(y,x){return m.compare$java_math_BigDecimal$java_math_BigDecimal(y.getPriceValueAddedTaxIncluded(),x.getPriceValueAddedTaxIncluded())};return w}());m.HomePieceOfFurniture$20=n;n.__interfaces=["java.util.Comparator"]})(HomePieceOfFurniture||(HomePieceOfFurniture={}));HomePieceOfFurniture.__transients=["shapeCache","propertyChangeSupport"];var Compass=(function(b){__extends(a,b);function a(d,k,j,m){var g=this;if(((typeof d==="string")||d===null)&&((typeof k==="number")||k===null)&&((typeof j==="number")||j===null)&&((typeof m==="number")||m===null)){var h=arguments;g=b.call(this,d)||this;if(g.x===undefined){g.x=0}if(g.y===undefined){g.y=0}if(g.diameter===undefined){g.diameter=0}if(g.visible===undefined){g.visible=false}if(g.northDirection===undefined){g.northDirection=0}if(g.latitude===undefined){g.latitude=0}if(g.longitude===undefined){g.longitude=0}if(g.timeZone===undefined){g.timeZone=null}if(g.pointsCache===undefined){g.pointsCache=null}if(g.dateCache===undefined){g.dateCache=null}if(g.sunElevationCache===undefined){g.sunElevationCache=0}if(g.sunAzimuthCache===undefined){g.sunAzimuthCache=0}g.x=k;g.y=j;g.diameter=m;g.visible=true;g.timeZone="UTC";g.initGeographicPoint()}else{if(((typeof d==="number")||d===null)&&((typeof k==="number")||k===null)&&((typeof j==="number")||j===null)&&m===undefined){var h=arguments;var l=h[0];var c=h[1];var f=h[2];var i=arguments;var e=HomeObject.createId("compass");g=b.call(this,e)||this;if(g.x===undefined){g.x=0}if(g.y===undefined){g.y=0}if(g.diameter===undefined){g.diameter=0}if(g.visible===undefined){g.visible=false}if(g.northDirection===undefined){g.northDirection=0}if(g.latitude===undefined){g.latitude=0}if(g.longitude===undefined){g.longitude=0}if(g.timeZone===undefined){g.timeZone=null}if(g.pointsCache===undefined){g.pointsCache=null}if(g.dateCache===undefined){g.dateCache=null}if(g.sunElevationCache===undefined){g.sunElevationCache=0}if(g.sunAzimuthCache===undefined){g.sunAzimuthCache=0}g.x=l;g.y=c;g.diameter=f;g.visible=true;g.timeZone="UTC";g.initGeographicPoint();if(g.x===undefined){g.x=0}if(g.y===undefined){g.y=0}if(g.diameter===undefined){g.diameter=0}if(g.visible===undefined){g.visible=false}if(g.northDirection===undefined){g.northDirection=0}if(g.latitude===undefined){g.latitude=0}if(g.longitude===undefined){g.longitude=0}if(g.timeZone===undefined){g.timeZone=null}if(g.pointsCache===undefined){g.pointsCache=null}if(g.dateCache===undefined){g.dateCache=null}if(g.sunElevationCache===undefined){g.sunElevationCache=0}if(g.sunAzimuthCache===undefined){g.sunAzimuthCache=0}}else{throw new Error("invalid overload")}}return g}a.prototype.getX=function(){return this.x};a.prototype.setX=function(c){if(c!==this.x){var d=this.x;this.x=c;this.pointsCache=null;this.firePropertyChange("X",d,c)}};a.prototype.getY=function(){return this.y};a.prototype.setY=function(d){if(d!==this.y){var c=this.y;this.y=d;this.pointsCache=null;this.firePropertyChange("Y",c,d)}};a.prototype.getDiameter=function(){return this.diameter};a.prototype.setDiameter=function(c){if(c!==this.diameter){var d=this.diameter;this.diameter=c;this.pointsCache=null;this.firePropertyChange("DIAMETER",d,c)}};a.prototype.isVisible=function(){return this.visible};a.prototype.setVisible=function(c){if(c!==this.visible){this.visible=c;this.firePropertyChange("VISIBLE",!c,c)}};a.prototype.getNorthDirection=function(){return this.northDirection};a.prototype.setNorthDirection=function(d){if(d!==this.northDirection){var c=this.northDirection;this.northDirection=d;this.pointsCache=null;this.firePropertyChange("NORTH_DIRECTION",c,d)}};a.prototype.getLatitude=function(){return this.latitude};a.prototype.setLatitude=function(d){if(d!==this.latitude){var c=this.latitude;this.latitude=d;this.dateCache=null;this.firePropertyChange("LATITUDE",c,d)}};a.prototype.getLongitude=function(){return this.longitude};a.prototype.setLongitude=function(d){if(d!==this.longitude){var c=this.longitude;this.longitude=d;this.dateCache=null;this.firePropertyChange("LONGITUDE",c,d)}};a.prototype.getTimeZone=function(){return this.timeZone};a.prototype.setTimeZone=function(c){if(!(this.timeZone===c)){if(c==null){throw new IllegalArgumentException("Time zone ID can't be null")}var d=this.timeZone;this.timeZone=c;this.dateCache=null;this.firePropertyChange("TIME_ZONE",d,c)}};a.prototype.getPoints=function(){if(this.pointsCache==null){var c=new java.awt.geom.Rectangle2D.Float(this.getX()-this.getDiameter()/2,this.getY()-this.getDiameter()/2,this.getDiameter(),this.getDiameter());var e=java.awt.geom.AffineTransform.getRotateInstance(this.getNorthDirection(),this.getX(),this.getY());this.pointsCache=(function(h){var g=function(k){if(k.length===0){return 0}else{var l=[];for(var j=0;j<k[0];j++){l.push(g(k.slice(1)))}return l}};return g(h)})([4,2]);var f=c.getPathIterator(e);for(var d=0;d<this.pointsCache.length;d++){f.currentSegment(this.pointsCache[d]);f.next()}}return[this.pointsCache[0].slice(0),this.pointsCache[1].slice(0),this.pointsCache[2].slice(0),this.pointsCache[3].slice(0)]};a.prototype.intersectsRectangle=function(e,g,c,f){var d=new java.awt.geom.Rectangle2D.Float(e,g,0,0);d.add(c,f);return new java.awt.geom.Ellipse2D.Float(this.getX()-this.getDiameter()/2,this.getY()-this.getDiameter()/2,this.getDiameter(),this.getDiameter()).intersects(d)};a.prototype.containsPoint=function(c,f,e){var d=new java.awt.geom.Ellipse2D.Float(this.getX()-this.getDiameter()/2,this.getY()-this.getDiameter()/2,this.getDiameter(),this.getDiameter());if(e===0){return d.contains(c,f)}else{return d.intersects(c-e,f-e,2*e,2*e)}};a.prototype.move=function(d,c){this.setX(this.getX()+d);this.setY(this.getY()+c)};a.prototype.clone=function(){var c=this;return(function(e){if(b.prototype.clone!=undefined){return b.prototype.clone.call(c)}else{var f=Object.create(e);for(var d in e){if(e.hasOwnProperty(d)){f[d]=e[d]}}return f}})(this)};a.prototype.computeJulianDay=function(i,h,k,f,e,c,m,g){var n=k+f/24+e/1440+c/86400;if(h===1||h===2){i-=1;h+=12}var l=(i/100|0);var j=2-l+(l/4|0);var d=((365.25*(i+4716))|0)+(((30.6001*(h+1)))|0)+n+j-1524.5;d-=(m+g)/24;d-=2451545;return d};a.prototype.toSiderealTime=function(c){var d=c/36525;var e=(24110.54841+(8640184.812866*d)+(0.093104*Math.pow(d,2))-(0.0000062*Math.pow(d,3)))/3600;return((e/24)-((e/24)|0))*24};a.prototype.initGeographicPoint=function(){var y;if(a.timeZoneGeographicPointsReference==null||a.timeZoneGeographicPointsReference==null){y=({});var g=new a.GeographicPoint(-13.833333,-171.73334);(y["Etc/GMT+11"]=g);(y["Pacific/Apia"]=g);(y["Pacific/Midway"]=new a.GeographicPoint(28.2,-177.35));(y["Pacific/Niue"]=new a.GeographicPoint(-19.055,-169.92));(y["Pacific/Pago_Pago"]=new a.GeographicPoint(-14.278055,-170.7025));(y["Pacific/Samoa"]=g);(y["US/Samoa"]=g);(y["America/Adak"]=new a.GeographicPoint(51.88,-176.65805));(y["America/Atka"]=new a.GeographicPoint(52.19611,-174.20056));var A=new a.GeographicPoint(21.306944,-157.85834);(y["Etc/GMT+10"]=A);(y["Pacific/Fakaofo"]=new a.GeographicPoint(-9.3653,-171.215));(y["Pacific/Honolulu"]=A);(y["Pacific/Johnston"]=new a.GeographicPoint(16.75,-169.517));(y["Pacific/Rarotonga"]=new a.GeographicPoint(-21.233,-159.783));(y["Pacific/Tahiti"]=new a.GeographicPoint(-17.533333,-149.56667));(y["SystemV/HST10"]=A);(y["US/Aleutian"]=new a.GeographicPoint(54.817,164.033));(y["US/Hawaii"]=A);(y["Pacific/Marquesas"]=new a.GeographicPoint(-9.45,-139.38));var r=new a.GeographicPoint(61.218056,-149.90028);(y["America/Anchorage"]=r);(y["America/Juneau"]=new a.GeographicPoint(58.301945,-134.41972));(y["America/Nome"]=new a.GeographicPoint(64.501114,-165.40639));(y["America/Yakutat"]=new a.GeographicPoint(59.546944,-139.72722));(y["Etc/GMT+9"]=r);(y["Pacific/Gambier"]=new a.GeographicPoint(-23.1178,-134.97));(y["SystemV/YST9"]=r);(y["SystemV/YST9YDT"]=r);(y["US/Alaska"]=r);(y["America/Dawson"]=new a.GeographicPoint(64.066666,-139.41667));(y["America/Ensenada"]=new a.GeographicPoint(31.866667,-116.61667));var f=new a.GeographicPoint(34.052223,-118.242775);(y["America/Los_Angeles"]=f);(y["America/Santa_Isabel"]=new a.GeographicPoint(28.383333,-113.35));(y["America/Tijuana"]=new a.GeographicPoint(32.533333,-117.01667));(y["America/Vancouver"]=new a.GeographicPoint(49.25,-123.13333));(y["America/Whitehorse"]=new a.GeographicPoint(60.716667,-135.05));(y["Canada/Pacific"]=new a.GeographicPoint(49.25,-123.13333));(y["Canada/Yukon"]=new a.GeographicPoint(60.716667,-135.05));(y["Etc/GMT+8"]=f);(y["Mexico/BajaNorte"]=new a.GeographicPoint(32.533333,-117.01667));(y["Pacific/Pitcairn"]=new a.GeographicPoint(-25.0667,-130.1));(y["SystemV/PST8"]=f);(y["SystemV/PST8PDT"]=f);(y["US/Pacific"]=f);(y["US/Pacific-New"]=f);(y["America/Boise"]=new a.GeographicPoint(43.61361,-116.2025));(y["America/Cambridge_Bay"]=new a.GeographicPoint(69.11667,-105.03333));(y["America/Chihuahua"]=new a.GeographicPoint(28.633333,-106.083336));(y["America/Dawson_Creek"]=new a.GeographicPoint(55.766666,-120.23333));var k=new a.GeographicPoint(39.739166,-104.98417);(y["America/Denver"]=k);(y["America/Edmonton"]=new a.GeographicPoint(53.55,-113.5));(y["America/Hermosillo"]=new a.GeographicPoint(29.066668,-110.96667));(y["America/Inuvik"]=new a.GeographicPoint(68.35,-133.7));(y["America/Mazatlan"]=new a.GeographicPoint(23.216667,-106.416664));(y["America/Ojinaga"]=new a.GeographicPoint(29.566668,-104.416664));(y["America/Phoenix"]=new a.GeographicPoint(33.448334,-112.07333));(y["America/Shiprock"]=new a.GeographicPoint(36.785557,-108.686386));(y["America/Yellowknife"]=new a.GeographicPoint(62.45,-114.35));(y["Canada/Mountain"]=new a.GeographicPoint(53.55,-113.5));(y["Etc/GMT+7"]=k);(y["Mexico/BajaSur"]=new a.GeographicPoint(32.567,-116.633));(y["SystemV/MST7"]=k);(y["SystemV/MST7MDT"]=k);(y["US/Arizona"]=new a.GeographicPoint(33.448334,-112.07333));(y["US/Mountain"]=k);(y["America/Belize"]=new a.GeographicPoint(17.483334,-88.183334));(y["America/Cancun"]=new a.GeographicPoint(21.166668,-86.833336));var w=new a.GeographicPoint(41.85,-87.65);(y["America/Chicago"]=w);(y["America/Costa_Rica"]=new a.GeographicPoint(9.933333,-84.083336));(y["America/El_Salvador"]=new a.GeographicPoint(13.7086115,-89.20306));(y["America/Guatemala"]=new a.GeographicPoint(14.621111,-90.52695));(y["America/Knox_IN"]=new a.GeographicPoint(41.295834,-86.625));(y["America/Managua"]=new a.GeographicPoint(12.150833,-86.26833));(y["America/Matamoros"]=new a.GeographicPoint(25.883333,-97.5));(y["America/Menominee"]=new a.GeographicPoint(45.107777,-87.61417));(y["America/Merida"]=new a.GeographicPoint(20.966667,-89.61667));(y["America/Mexico_City"]=new a.GeographicPoint(19.434168,-99.13861));(y["America/Monterrey"]=new a.GeographicPoint(25.666668,-100.316666));(y["America/Rainy_River"]=new a.GeographicPoint(48.716667,-94.566666));(y["America/Rankin_Inlet"]=new a.GeographicPoint(62.816666,-92.083336));(y["America/Regina"]=new a.GeographicPoint(50.45,-104.61667));(y["America/Swift_Current"]=new a.GeographicPoint(50.283333,-107.76667));(y["America/Tegucigalpa"]=new a.GeographicPoint(14.1,-87.21667));(y["America/Winnipeg"]=new a.GeographicPoint(49.88333,-97.166664));(y["Canada/Central"]=new a.GeographicPoint(50.45,-104.61667));(y["Canada/East-Saskatchewan"]=new a.GeographicPoint(51.216667,-102.46667));(y["Canada/Saskatchewan"]=new a.GeographicPoint(50.45,-104.61667));(y["Chile/EasterIsland"]=new a.GeographicPoint(-27.15,-109.425));(y["Etc/GMT+6"]=w);(y["Mexico/General"]=new a.GeographicPoint(19.434168,-99.13861));(y["Pacific/Easter"]=new a.GeographicPoint(-27.15,-109.425));(y["Pacific/Galapagos"]=new a.GeographicPoint(-0.667,-90.55));(y["SystemV/CST6"]=w);(y["SystemV/CST6CDT"]=w);(y["US/Central"]=w);(y["US/Indiana-Starke"]=new a.GeographicPoint(41.295834,-86.625));(y["America/Atikokan"]=new a.GeographicPoint(48.75,-91.61667));(y["America/Bogota"]=new a.GeographicPoint(4.6,-74.083336));(y["America/Cayman"]=new a.GeographicPoint(19.3,-81.38333));(y["America/Coral_Harbour"]=new a.GeographicPoint(64.13333,-83.166664));(y["America/Detroit"]=new a.GeographicPoint(42.33139,-83.04583));(y["America/Fort_Wayne"]=new a.GeographicPoint(41.130554,-85.12889));(y["America/Grand_Turk"]=new a.GeographicPoint(21.466667,-71.13333));(y["America/Guayaquil"]=new a.GeographicPoint(-2.1666667,-79.9));(y["America/Havana"]=new a.GeographicPoint(23.131945,-82.36417));(y["America/Indianapolis"]=new a.GeographicPoint(39.768333,-86.15806));(y["America/Iqaluit"]=new a.GeographicPoint(63.733334,-68.5));(y["America/Jamaica"]=new a.GeographicPoint(18,-76.8));(y["America/Lima"]=new a.GeographicPoint(-12.05,-77.05));(y["America/Louisville"]=new a.GeographicPoint(38.254166,-85.759445));(y["America/Montreal"]=new a.GeographicPoint(45.5,-73.583336));(y["America/Nassau"]=new a.GeographicPoint(25.083334,-77.35));var o=new a.GeographicPoint(40.71417,-74.006386);(y["America/New_York"]=o);(y["America/Nipigon"]=new a.GeographicPoint(49.016666,-88.25));(y["America/Panama"]=new a.GeographicPoint(8.966667,-79.53333));(y["America/Pangnirtung"]=new a.GeographicPoint(66.13333,-65.75));(y["America/Port-au-Prince"]=new a.GeographicPoint(18.539167,-72.335));(y["America/Resolute"]=new a.GeographicPoint(74.683334,-94.9));(y["America/Thunder_Bay"]=new a.GeographicPoint(48.4,-89.23333));(y["America/Toronto"]=new a.GeographicPoint(43.666668,-79.416664));(y["Canada/Eastern"]=new a.GeographicPoint(43.666668,-79.416664));(y["Etc/GMT+5"]=o);(y["SystemV/EST5"]=o);(y["SystemV/EST5EDT"]=o);(y["US/East-Indiana"]=new a.GeographicPoint(36.8381,-84.85));(y["US/Eastern"]=o);(y["US/Michigan"]=new a.GeographicPoint(42.33139,-83.04583));(y["America/Caracas"]=new a.GeographicPoint(10.5,-66.916664));(y["America/Anguilla"]=new a.GeographicPoint(18.216667,-63.05));(y["America/Antigua"]=new a.GeographicPoint(17.116667,-61.85));(y["America/Aruba"]=new a.GeographicPoint(10.541111,-72.9175));(y["America/Asuncion"]=new a.GeographicPoint(-25.266666,-57.666668));(y["America/Barbados"]=new a.GeographicPoint(13.1,-59.616665));(y["America/Blanc-Sablon"]=new a.GeographicPoint(51.433334,-57.11667));(y["America/Boa_Vista"]=new a.GeographicPoint(2.8166666,-60.666668));(y["America/Campo_Grande"]=new a.GeographicPoint(-20.45,-54.616665));(y["America/Cuiaba"]=new a.GeographicPoint(-15.583333,-56.083332));(y["America/Curacao"]=new a.GeographicPoint(12.1167,-68.933));(y["America/Dominica"]=new a.GeographicPoint(15.3,-61.4));(y["America/Eirunepe"]=new a.GeographicPoint(-6.6666665,-69.86667));(y["America/Glace_Bay"]=new a.GeographicPoint(46.2,-59.966667));(y["America/Goose_Bay"]=new a.GeographicPoint(53.333332,-60.416668));(y["America/Grenada"]=new a.GeographicPoint(12.05,-61.75));(y["America/Guadeloupe"]=new a.GeographicPoint(16.233334,-61.516666));(y["America/Guyana"]=new a.GeographicPoint(6.8,-58.166668));(y["America/Halifax"]=new a.GeographicPoint(44.65,-63.6));(y["America/La_Paz"]=new a.GeographicPoint(-16.5,-68.15));(y["America/Manaus"]=new a.GeographicPoint(-3.1133332,-60.025276));(y["America/Marigot"]=new a.GeographicPoint(18.073,63.0844));(y["America/Martinique"]=new a.GeographicPoint(14.6,-61.083332));(y["America/Moncton"]=new a.GeographicPoint(46.083332,-64.76667));(y["America/Montserrat"]=new a.GeographicPoint(16.7,-62.216667));(y["America/Port_of_Spain"]=new a.GeographicPoint(10.65,-61.516666));(y["America/Porto_Acre"]=new a.GeographicPoint(-9.587778,-67.53555));(y["America/Porto_Velho"]=new a.GeographicPoint(-8.766666,-63.9));(y["America/Puerto_Rico"]=new a.GeographicPoint(18.467,66.117));(y["America/Rio_Branco"]=new a.GeographicPoint(-9.966667,-67.8));var l=new a.GeographicPoint(-33.45,-70.666664);(y["America/Santiago"]=l);(y["America/Santo_Domingo"]=new a.GeographicPoint(18.466667,-69.9));(y["America/St_Barthelemy"]=new a.GeographicPoint(17.8978,-62.851));(y["America/St_Kitts"]=new a.GeographicPoint(17.3,-62.733));(y["America/St_Lucia"]=new a.GeographicPoint(14.0167,-60.9833));(y["America/St_Thomas"]=new a.GeographicPoint(18.3333,-64.9167));(y["America/St_Vincent"]=new a.GeographicPoint(13.1667,-61.2333));(y["America/Thule"]=new a.GeographicPoint(-54.27667,-36.511665));(y["America/Tortola"]=new a.GeographicPoint(18.416666,-64.61667));(y["America/Virgin"]=new a.GeographicPoint(18.34389,-64.931114));(y["Antarctica/Palmer"]=new a.GeographicPoint(-64.25,-62.833));(y["Atlantic/Bermuda"]=new a.GeographicPoint(32.294167,-64.78389));(y["Atlantic/Stanley"]=new a.GeographicPoint(-51.7,-57.85));(y["Brazil/Acre"]=new a.GeographicPoint(-10.883333,-45.083332));(y["Brazil/West"]=new a.GeographicPoint(-10.883333,-45.083332));(y["Canada/Atlantic"]=new a.GeographicPoint(44.65,-63.6));(y["Chile/Continental"]=l);(y["Etc/GMT+4"]=l);(y["SystemV/AST4"]=new a.GeographicPoint(44.65,-63.6));(y["SystemV/AST4ADT"]=new a.GeographicPoint(44.65,-63.6));(y["America/St_Johns"]=new a.GeographicPoint(47.5675,-52.7072));(y["Canada/Newfoundland"]=new a.GeographicPoint(47.5675,-52.7072));(y["America/Araguaina"]=new a.GeographicPoint(-7.16,-48.0575));(y["America/Bahia"]=new a.GeographicPoint(-12.983334,-38.516666));(y["America/Belem"]=new a.GeographicPoint(-1.45,-48.483334));(y["America/Buenos_Aires"]=new a.GeographicPoint(-34.5875,-58.6725));(y["America/Catamarca"]=new a.GeographicPoint(-28.466667,-65.78333));(y["America/Cayenne"]=new a.GeographicPoint(4.9333334,-52.333332));(y["America/Cordoba"]=new a.GeographicPoint(-31.4,-64.183334));(y["America/Fortaleza"]=new a.GeographicPoint(-3.7166667,-38.5));(y["America/Godthab"]=new a.GeographicPoint(64.183334,-51.75));(y["America/Jujuy"]=new a.GeographicPoint(-24.183332,-65.3));(y["America/Maceio"]=new a.GeographicPoint(-9.666667,-35.716667));(y["America/Mendoza"]=new a.GeographicPoint(-32.883335,-68.816666));(y["America/Miquelon"]=new a.GeographicPoint(47.0975,-56.38139));(y["America/Montevideo"]=new a.GeographicPoint(-34.858055,-56.170834));(y["America/Paramaribo"]=new a.GeographicPoint(5.8333335,-55.166668));(y["America/Recife"]=new a.GeographicPoint(-8.05,-34.9));(y["America/Rosario"]=new a.GeographicPoint(-32.95111,-60.66639));(y["America/Santarem"]=new a.GeographicPoint(-2.4333334,-54.7));var x=new a.GeographicPoint(-23.533333,-46.616665);(y["America/Sao_Paulo"]=x);(y["Antarctica/Rothera"]=new a.GeographicPoint(67.567,68.133));(y["Brazil/East"]=x);(y["Etc/GMT+3"]=x);(y["America/Noronha"]=new a.GeographicPoint(3.85,25.417));var C=new a.GeographicPoint(54.25,36.75);(y["Atlantic/South_Georgia"]=C);(y["Brazil/DeNoronha"]=new a.GeographicPoint(3.85,25.417));(y["Etc/GMT+2"]=C);(y["America/Scoresbysund"]=new a.GeographicPoint(70.48333,-21.966667));var u=new a.GeographicPoint(37.483334,-2.5666666);(y["Atlantic/Azores"]=u);(y["Atlantic/Cape_Verde"]=new a.GeographicPoint(14.916667,-23.516666));(y["Etc/GMT+1"]=u);(y["Africa/Abidjan"]=new a.GeographicPoint(5.341111,-4.028056));(y["Africa/Accra"]=new a.GeographicPoint(5.55,-0.2166667));(y["Africa/Bamako"]=new a.GeographicPoint(12.65,-8));(y["Africa/Banjul"]=new a.GeographicPoint(13.453055,-16.5775));(y["Africa/Bissau"]=new a.GeographicPoint(11.85,-15.583333));(y["Africa/Casablanca"]=new a.GeographicPoint(33.593056,-7.616389));(y["Africa/Conakry"]=new a.GeographicPoint(9.509167,-13.712222));(y["Africa/Dakar"]=new a.GeographicPoint(14.670834,-17.438055));(y["Africa/El_Aaiun"]=new a.GeographicPoint(27.15361,-13.203333));(y["Africa/Freetown"]=new a.GeographicPoint(8.49,-13.234167));(y["Africa/Lome"]=new a.GeographicPoint(6.131944,1.2227778));(y["Africa/Monrovia"]=new a.GeographicPoint(6.3105555,-10.804722));(y["Africa/Nouakchott"]=new a.GeographicPoint(18.08639,-15.975278));(y["Africa/Ouagadougou"]=new a.GeographicPoint(12.370277,-1.5247222));(y["Africa/Sao_Tome"]=new a.GeographicPoint(0.3333333,6.733333));(y["Africa/Timbuktu"]=new a.GeographicPoint(16.766666,-3.0166667));(y["America/Danmarkshavn"]=new a.GeographicPoint(76.767,18.667));(y["Atlantic/Canary"]=new a.GeographicPoint(28.45,-16.233334));(y["Atlantic/Faeroe"]=new a.GeographicPoint(62.016666,-6.766667));(y["Atlantic/Faroe"]=new a.GeographicPoint(62.016666,-6.766667));(y["Atlantic/Madeira"]=new a.GeographicPoint(32.633335,-16.9));(y["Atlantic/Reykjavik"]=new a.GeographicPoint(64.15,-21.95));(y["Atlantic/St_Helena"]=new a.GeographicPoint(-15.933333,-5.7166667));var q=new a.GeographicPoint(51.466667,0);(y["Etc/GMT"]=q);(y["Etc/GMT+0"]=q);(y["Etc/GMT-0"]=q);(y["Etc/GMT0"]=q);(y["Etc/Greenwich"]=q);(y["Etc/UCT"]=q);(y["Etc/UTC"]=q);(y["Etc/Universal"]=q);(y["Etc/Zulu"]=q);(y["Europe/Belfast"]=new a.GeographicPoint(54.583332,-5.933333));(y["Europe/Dublin"]=new a.GeographicPoint(53.333057,-6.248889));(y["Europe/Guernsey"]=new a.GeographicPoint(49.45,-2.533));(y["Europe/Isle_of_Man"]=new a.GeographicPoint(54.14521,-4.48172));(y["Europe/Jersey"]=new a.GeographicPoint(49.2,-2.117));(y["Europe/Lisbon"]=new a.GeographicPoint(38.716667,-9.133333));(y["Europe/London"]=new a.GeographicPoint(51.5,-0.116667));(y["Africa/Algiers"]=new a.GeographicPoint(36.763054,3.0505557));(y["Africa/Bangui"]=new a.GeographicPoint(4.366667,18.583334));(y["Africa/Brazzaville"]=new a.GeographicPoint(-4.2591667,15.284722));(y["Africa/Ceuta"]=new a.GeographicPoint(35.890278,-5.3075));(y["Africa/Douala"]=new a.GeographicPoint(4.0502777,9.7));(y["Africa/Kinshasa"]=new a.GeographicPoint(-4.3,15.3));(y["Africa/Lagos"]=new a.GeographicPoint(6.4530554,3.3958333));(y["Africa/Libreville"]=new a.GeographicPoint(0.3833333,9.45));(y["Africa/Luanda"]=new a.GeographicPoint(-8.838333,13.234445));(y["Africa/Malabo"]=new a.GeographicPoint(3.75,8.783333));(y["Africa/Ndjamena"]=new a.GeographicPoint(12.113055,15.049167));(y["Africa/Niamey"]=new a.GeographicPoint(13.516666,2.1166668));(y["Africa/Porto-Novo"]=new a.GeographicPoint(6.483333,2.6166668));(y["Africa/Tunis"]=new a.GeographicPoint(36.802776,10.179722));(y["Africa/Windhoek"]=new a.GeographicPoint(-22.57,17.08361));(y["Arctic/Longyearbyen"]=new a.GeographicPoint(78.21667,15.633333));(y["Atlantic/Jan_Mayen"]=new a.GeographicPoint(71,-8.333));var B=new a.GeographicPoint(48.86667,2.333333);(y["Etc/GMT-1"]=B);(y["Europe/Amsterdam"]=new a.GeographicPoint(52.35,4.9166665));(y["Europe/Andorra"]=new a.GeographicPoint(42.5,1.5166667));(y["Europe/Belgrade"]=new a.GeographicPoint(44.81861,20.468056));(y["Europe/Berlin"]=new a.GeographicPoint(52.516666,13.4));(y["Europe/Bratislava"]=new a.GeographicPoint(48.15,17.116667));(y["Europe/Brussels"]=new a.GeographicPoint(50.833332,4.333333));(y["Europe/Budapest"]=new a.GeographicPoint(47.5,19.083334));(y["Europe/Copenhagen"]=new a.GeographicPoint(55.666668,12.583333));(y["Europe/Gibraltar"]=new a.GeographicPoint(36.133335,-5.35));(y["Europe/Ljubljana"]=new a.GeographicPoint(46.05528,14.514444));(y["Europe/Luxembourg"]=new a.GeographicPoint(49.611668,6.13));(y["Europe/Madrid"]=new a.GeographicPoint(40.4,-3.6833334));(y["Europe/Malta"]=new a.GeographicPoint(35.899723,14.514722));(y["Europe/Monaco"]=new a.GeographicPoint(43.733334,7.4166665));(y["Europe/Oslo"]=new a.GeographicPoint(59.916668,10.75));(y["Europe/Paris"]=B);(y["Europe/Podgorica"]=new a.GeographicPoint(42.441113,19.26361));(y["Europe/Prague"]=new a.GeographicPoint(50.083332,14.466667));(y["Europe/Rome"]=new a.GeographicPoint(41.9,12.483334));(y["Europe/San_Marino"]=new a.GeographicPoint(43.933334,12.45));(y["Europe/Sarajevo"]=new a.GeographicPoint(43.85,18.383333));(y["Europe/Skopje"]=new a.GeographicPoint(42,21.433332));(y["Europe/Stockholm"]=new a.GeographicPoint(59.333332,18.05));(y["Europe/Tirane"]=new a.GeographicPoint(41.3275,19.81889));(y["Europe/Vaduz"]=new a.GeographicPoint(47.133335,9.516666));(y["Europe/Vatican"]=new a.GeographicPoint(41.9,12.45));(y["Europe/Vienna"]=new a.GeographicPoint(48.2,16.366667));(y["Europe/Warsaw"]=new a.GeographicPoint(52.25,21));(y["Europe/Zagreb"]=new a.GeographicPoint(45.8,16));(y["Europe/Zurich"]=new a.GeographicPoint(47.366665,8.55));(y["Africa/Blantyre"]=new a.GeographicPoint(-15.783333,35));(y["Africa/Bujumbura"]=new a.GeographicPoint(-3.376111,29.36));(y["Africa/Cairo"]=new a.GeographicPoint(30.05,31.25));(y["Africa/Gaborone"]=new a.GeographicPoint(-24.646389,25.911945));(y["Africa/Harare"]=new a.GeographicPoint(-17.817778,31.044722));(y["Africa/Johannesburg"]=new a.GeographicPoint(-26.2,28.083334));(y["Africa/Kigali"]=new a.GeographicPoint(-1.9536111,30.060556));(y["Africa/Lubumbashi"]=new a.GeographicPoint(-11.666667,27.466667));(y["Africa/Lusaka"]=new a.GeographicPoint(-15.416667,28.283333));(y["Africa/Maputo"]=new a.GeographicPoint(-25.965279,32.58917));(y["Africa/Maseru"]=new a.GeographicPoint(-29.316668,27.483334));(y["Africa/Mbabane"]=new a.GeographicPoint(-26.316668,31.133333));(y["Africa/Tripoli"]=new a.GeographicPoint(32.8925,13.18));(y["Asia/Amman"]=new a.GeographicPoint(31.95,35.933334));(y["Asia/Beirut"]=new a.GeographicPoint(33.871944,35.509724));(y["Asia/Damascus"]=new a.GeographicPoint(33.5,36.3));(y["Asia/Gaza"]=new a.GeographicPoint(31.5,34.466667));(y["Asia/Istanbul"]=new a.GeographicPoint(41.018612,28.964722));(y["Asia/Jerusalem"]=new a.GeographicPoint(31.78,35.23));(y["Asia/Nicosia"]=new a.GeographicPoint(35.166668,33.366665));(y["Asia/Tel_Aviv"]=new a.GeographicPoint(32.066666,34.766666));var z=new a.GeographicPoint(37.983334,23.733334);(y["Etc/GMT-2"]=z);(y["Europe/Athens"]=new a.GeographicPoint(37.983334,23.733334));(y["Europe/Bucharest"]=new a.GeographicPoint(44.433334,26.1));(y["Europe/Chisinau"]=new a.GeographicPoint(47.005554,28.8575));(y["Europe/Helsinki"]=new a.GeographicPoint(60.175556,24.934166));(y["Europe/Istanbul"]=new a.GeographicPoint(41.018612,28.964722));(y["Europe/Kaliningrad"]=new a.GeographicPoint(54.71,20.5));(y["Europe/Kiev"]=new a.GeographicPoint(50.433334,30.516666));(y["Europe/Mariehamn"]=new a.GeographicPoint(60.1,19.95));(y["Europe/Minsk"]=new a.GeographicPoint(53.9,27.566668));(y["Europe/Nicosia"]=new a.GeographicPoint(35.166668,33.366665));(y["Europe/Riga"]=new a.GeographicPoint(56.95,24.1));(y["Europe/Simferopol"]=new a.GeographicPoint(44.95,34.1));(y["Europe/Sofia"]=new a.GeographicPoint(42.683334,23.316668));(y["Europe/Tallinn"]=new a.GeographicPoint(59.433887,24.728056));(y["Europe/Tiraspol"]=new a.GeographicPoint(46.84028,29.643333));(y["Europe/Uzhgorod"]=new a.GeographicPoint(48.616665,22.3));(y["Europe/Vilnius"]=new a.GeographicPoint(54.683334,25.316668));(y["Europe/Zaporozhye"]=new a.GeographicPoint(47.833,35.1667));(y["Africa/Addis_Ababa"]=new a.GeographicPoint(9.033333,38.7));(y["Africa/Asmara"]=new a.GeographicPoint(15.333333,38.933334));(y["Africa/Asmera"]=new a.GeographicPoint(15.333333,38.933334));(y["Africa/Dar_es_Salaam"]=new a.GeographicPoint(-6.8,39.283333));(y["Africa/Djibouti"]=new a.GeographicPoint(11.595,43.148056));(y["Africa/Kampala"]=new a.GeographicPoint(0.3155556,32.565556));(y["Africa/Khartoum"]=new a.GeographicPoint(15.588056,32.53417));(y["Africa/Mogadishu"]=new a.GeographicPoint(2.0666666,45.366665));(y["Africa/Nairobi"]=new a.GeographicPoint(-1.2833333,36.816666));(y["Antarctica/Syowa"]=new a.GeographicPoint(-69,39.5833));(y["Asia/Aden"]=new a.GeographicPoint(12.779445,45.036667));(y["Asia/Baghdad"]=new a.GeographicPoint(33.33861,44.39389));(y["Asia/Bahrain"]=new a.GeographicPoint(26.23611,50.583057));(y["Asia/Kuwait"]=new a.GeographicPoint(29.369722,47.978333));(y["Asia/Qatar"]=new a.GeographicPoint(25.286667,51.533333));(y["Asia/Riyadh"]=new a.GeographicPoint(24.640833,46.772778));var D=new a.GeographicPoint(55.752224,37.615555);(y["Etc/GMT-3"]=D);(y["Europe/Moscow"]=D);(y["Europe/Volgograd"]=new a.GeographicPoint(48.80472,44.585835));(y["Indian/Antananarivo"]=new a.GeographicPoint(-18.916666,47.516666));(y["Indian/Comoro"]=new a.GeographicPoint(-11.704166,43.240276));(y["Indian/Mayotte"]=new a.GeographicPoint(-12.779445,45.227222));(y["Asia/Riyadh87"]=new a.GeographicPoint(24.640833,46.772778));(y["Asia/Riyadh88"]=new a.GeographicPoint(24.640833,46.772778));(y["Asia/Riyadh89"]=new a.GeographicPoint(24.640833,46.772778));(y["Mideast/Riyadh87"]=new a.GeographicPoint(24.640833,46.772778));(y["Mideast/Riyadh88"]=new a.GeographicPoint(24.640833,46.772778));(y["Mideast/Riyadh89"]=new a.GeographicPoint(24.640833,46.772778));(y["Asia/Tehran"]=new a.GeographicPoint(35.671944,51.424446));(y["Asia/Baku"]=new a.GeographicPoint(40.39528,49.88222));var j=new a.GeographicPoint(25.252222,55.28);(y["Asia/Dubai"]=j);(y["Asia/Muscat"]=new a.GeographicPoint(23.613333,58.593334));(y["Asia/Tbilisi"]=new a.GeographicPoint(41.725,44.790833));(y["Asia/Yerevan"]=new a.GeographicPoint(40.18111,44.51361));(y["Etc/GMT-4"]=j);(y["Europe/Samara"]=new a.GeographicPoint(53.2,50.15));(y["Indian/Mahe"]=new a.GeographicPoint(-4.616667,55.45));(y["Indian/Mauritius"]=new a.GeographicPoint(-20.161945,57.49889));(y["Indian/Reunion"]=new a.GeographicPoint(-20.866667,55.466667));(y["Asia/Kabul"]=new a.GeographicPoint(34.516666,69.183334));(y["Antarctica/Davis"]=new a.GeographicPoint(-68.5764,77.9689));(y["Antarctica/Mawson"]=new a.GeographicPoint(-53.104,73.514));(y["Asia/Aqtau"]=new a.GeographicPoint(43.65,51.2));(y["Asia/Aqtobe"]=new a.GeographicPoint(50.298054,57.18139));(y["Asia/Ashgabat"]=new a.GeographicPoint(37.95,58.383335));(y["Asia/Ashkhabad"]=new a.GeographicPoint(37.95,58.383335));(y["Asia/Dushanbe"]=new a.GeographicPoint(38.56,68.77389));(y["Asia/Karachi"]=new a.GeographicPoint(24.866667,67.05));(y["Asia/Oral"]=new a.GeographicPoint(51.233334,51.366665));(y["Asia/Samarkand"]=new a.GeographicPoint(39.654167,66.959724));(y["Asia/Tashkent"]=new a.GeographicPoint(41.316666,69.25));(y["Asia/Yekaterinburg"]=new a.GeographicPoint(56.85,60.6));var d=new a.GeographicPoint(22.569721,88.36972);(y["Etc/GMT-5"]=d);(y["Indian/Kerguelen"]=new a.GeographicPoint(-49.25,69.583));(y["Indian/Maldives"]=new a.GeographicPoint(4.1666665,73.5));(y["Asia/Calcutta"]=d);(y["Asia/Colombo"]=new a.GeographicPoint(6.9319444,79.84778));(y["Asia/Kolkata"]=d);(y["Asia/Kathmandu"]=new a.GeographicPoint(27.716667,85.316666));(y["Asia/Katmandu"]=new a.GeographicPoint(27.716667,85.316666));(y["Antarctica/Vostok"]=new a.GeographicPoint(-78.4644,106.8372));(y["Asia/Almaty"]=new a.GeographicPoint(43.25,76.95));(y["Asia/Bishkek"]=new a.GeographicPoint(42.873055,74.60028));var s=new a.GeographicPoint(23.723055,90.40861);(y["Asia/Dacca"]=s);(y["Asia/Dhaka"]=s);(y["Asia/Novokuznetsk"]=new a.GeographicPoint(53.75,87.1));(y["Asia/Novosibirsk"]=new a.GeographicPoint(55.04111,82.93444));(y["Asia/Omsk"]=new a.GeographicPoint(55,73.4));(y["Asia/Qyzylorda"]=new a.GeographicPoint(44.85278,65.50916));(y["Asia/Thimbu"]=new a.GeographicPoint(27.483334,89.6));(y["Asia/Thimphu"]=new a.GeographicPoint(27.483334,89.6));(y["Etc/GMT-6"]=s);(y["Indian/Chagos"]=new a.GeographicPoint(-6,71.5));(y["Asia/Rangoon"]=new a.GeographicPoint(16.783333,96.166664));(y["Indian/Cocos"]=new a.GeographicPoint(-12.1167,96.9));var p=new a.GeographicPoint(13.75,100.51667);(y["Asia/Bangkok"]=p);(y["Asia/Ho_Chi_Minh"]=new a.GeographicPoint(10.75,106.666664));(y["Asia/Hovd"]=new a.GeographicPoint(48.016666,91.63333));(y["Asia/Jakarta"]=new a.GeographicPoint(-6.174444,106.829445));(y["Asia/Krasnoyarsk"]=new a.GeographicPoint(56.009724,92.791664));(y["Asia/Phnom_Penh"]=new a.GeographicPoint(11.55,104.916664));(y["Asia/Pontianak"]=new a.GeographicPoint(-0.0333333,109.333336));(y["Asia/Saigon"]=new a.GeographicPoint(10.75,106.666664));(y["Asia/Vientiane"]=new a.GeographicPoint(17.966667,102.6));(y["Etc/GMT-7"]=p);(y["Indian/Christmas"]=new a.GeographicPoint(-10.416667,105.71667));(y["Asia/Brunei"]=new a.GeographicPoint(4.883333,114.933334));(y["Asia/Choibalsan"]=new a.GeographicPoint(48.066666,114.5));(y["Asia/Chongqing"]=new a.GeographicPoint(29.562778,106.55278));(y["Asia/Chungking"]=new a.GeographicPoint(29.562778,106.55278));(y["Asia/Harbin"]=new a.GeographicPoint(45.75,126.65));(y["Asia/Hong_Kong"]=new a.GeographicPoint(22.283333,114.15));(y["Asia/Irkutsk"]=new a.GeographicPoint(52.266666,104.333336));(y["Asia/Kashgar"]=new a.GeographicPoint(39.391388,76.04));(y["Asia/Kuala_Lumpur"]=new a.GeographicPoint(3.1666667,101.7));(y["Asia/Kuching"]=new a.GeographicPoint(1.55,110.333336));(y["Asia/Macao"]=new a.GeographicPoint(22.2,113.55));(y["Asia/Macau"]=new a.GeographicPoint(22.2,113.55));(y["Asia/Makassar"]=new a.GeographicPoint(2.45,99.78333));(y["Asia/Manila"]=new a.GeographicPoint(14.604167,120.98222));var t=new a.GeographicPoint(31.005,121.40861);(y["Asia/Shanghai"]=t);(y["Asia/Singapore"]=new a.GeographicPoint(1.2930557,103.855835));(y["Asia/Taipei"]=new a.GeographicPoint(25.039167,121.525));(y["Asia/Ujung_Pandang"]=new a.GeographicPoint(-5.1305556,119.406944));(y["Asia/Ulaanbaatar"]=new a.GeographicPoint(47.916668,106.916664));(y["Asia/Ulan_Bator"]=new a.GeographicPoint(47.916668,106.916664));(y["Asia/Urumqi"]=new a.GeographicPoint(43.8,87.583336));(y["Australia/Perth"]=new a.GeographicPoint(-31.933332,115.833336));(y["Australia/West"]=new a.GeographicPoint(-31.933332,115.833336));(y["Etc/GMT-8"]=t);(y["Australia/Eucla"]=new a.GeographicPoint(-31.716667,128.86667));(y["Asia/Dili"]=new a.GeographicPoint(-8.55,125.5833));(y["Asia/Jayapura"]=new a.GeographicPoint(-2.5333333,140.7));(y["Asia/Pyongyang"]=new a.GeographicPoint(39.019444,125.75472));(y["Asia/Seoul"]=new a.GeographicPoint(37.566387,126.999725));var i=new a.GeographicPoint(35.685,139.75139);(y["Asia/Tokyo"]=i);(y["Asia/Yakutsk"]=new a.GeographicPoint(62.03389,129.73306));(y["Etc/GMT-9"]=i);(y["Pacific/Palau"]=new a.GeographicPoint(7.5,134.6241));(y["Australia/Adelaide"]=new a.GeographicPoint(-34.933334,138.6));(y["Australia/Broken_Hill"]=new a.GeographicPoint(-31.95,141.43333));(y["Australia/Darwin"]=new a.GeographicPoint(-12.466667,130.83333));(y["Australia/North"]=new a.GeographicPoint(-12.466667,130.83333));(y["Australia/South"]=new a.GeographicPoint(-34.933334,138.6));(y["Australia/Yancowinna"]=new a.GeographicPoint(-31.7581,141.7178));(y["Antarctica/DumontDUrville"]=new a.GeographicPoint(-66.66277,140.0014));(y["Asia/Sakhalin"]=new a.GeographicPoint(51,143));(y["Asia/Vladivostok"]=new a.GeographicPoint(43.133335,131.9));(y["Australia/ACT"]=new a.GeographicPoint(-35.283333,149.21666));(y["Australia/Brisbane"]=new a.GeographicPoint(-27.5,153.01666));(y["Australia/Canberra"]=new a.GeographicPoint(-35.283333,149.21666));(y["Australia/Currie"]=new a.GeographicPoint(-39.933334,143.86667));(y["Australia/Hobart"]=new a.GeographicPoint(-42.916668,147.33333));(y["Australia/Lindeman"]=new a.GeographicPoint(-20.45,149.0333));(y["Australia/Melbourne"]=new a.GeographicPoint(-37.816666,144.96666));var n=new a.GeographicPoint(-33.88333,151.21666);(y["Australia/NSW"]=n);(y["Australia/Queensland"]=new a.GeographicPoint(-27.5,153.01666));(y["Australia/Sydney"]=n);(y["Australia/Tasmania"]=new a.GeographicPoint(-42.916668,147.33333));(y["Australia/Victoria"]=new a.GeographicPoint(-37.816666,144.96666));(y["Etc/GMT-10"]=n);(y["Pacific/Guam"]=new a.GeographicPoint(13.467,144.75));(y["Pacific/Port_Moresby"]=new a.GeographicPoint(-9.464723,147.1925));(y["Pacific/Saipan"]=new a.GeographicPoint(15.1833,145.75));(y["Pacific/Truk"]=new a.GeographicPoint(7.4167,151.7833));(y["Pacific/Yap"]=new a.GeographicPoint(9.514444,138.12917));(y["Australia/LHI"]=new a.GeographicPoint(-31.55,159.083));(y["Australia/Lord_Howe"]=new a.GeographicPoint(-31.55,159.083));(y["Antarctica/Casey"]=new a.GeographicPoint(-66.2833,110.5333));(y["Asia/Magadan"]=new a.GeographicPoint(59.566666,150.8));var c=new a.GeographicPoint(-22.266666,166.45);(y["Etc/GMT-11"]=c);(y["Pacific/Efate"]=new a.GeographicPoint(-17.667,168.417));(y["Pacific/Guadalcanal"]=new a.GeographicPoint(-9.617,160.183));(y["Pacific/Kosrae"]=new a.GeographicPoint(5.317,162.983));(y["Pacific/Noumea"]=c);(y["Pacific/Ponape"]=new a.GeographicPoint(6.963889,158.20833));(y["Pacific/Norfolk"]=new a.GeographicPoint(-29.05,167.95));(y["Antarctica/McMurdo"]=new a.GeographicPoint(-77.85,166.667));(y["Antarctica/South_Pole"]=new a.GeographicPoint(-90,0));(y["Asia/Anadyr"]=new a.GeographicPoint(64.75,177.48334));(y["Asia/Kamchatka"]=new a.GeographicPoint(57,160));var e=new a.GeographicPoint(-36.86667,174.76666);(y["Etc/GMT-12"]=e);(y["Pacific/Auckland"]=e);(y["Pacific/Fiji"]=new a.GeographicPoint(-18.133333,178.41667));(y["Pacific/Funafuti"]=new a.GeographicPoint(-8.516666,179.21666));(y["Pacific/Kwajalein"]=new a.GeographicPoint(9.1939,167.4597));(y["Pacific/Majuro"]=new a.GeographicPoint(7.1,171.38333));(y["Pacific/Nauru"]=new a.GeographicPoint(-0.5322,166.9328));(y["Pacific/Tarawa"]=new a.GeographicPoint(1.4167,173.0333));(y["Pacific/Wake"]=new a.GeographicPoint(19.2833,166.6));(y["Pacific/Wallis"]=new a.GeographicPoint(-13.273,-176.205));(y["Pacific/Chatham"]=new a.GeographicPoint(-43.883,-176.517));var m=new a.GeographicPoint(-3.133,-171.0833);(y["Etc/GMT-13"]=m);(y["Pacific/Enderbury"]=m);(y["Pacific/Tongatapu"]=new a.GeographicPoint(-21.2114,-175.153));var h=new a.GeographicPoint(1.883,-157.4);(y["Etc/GMT-14"]=h);(y["Pacific/Kiritimati"]=h);(y.MIT=g);(y.HST=A);(y.PST=f);(y.PST8PDT=f);(y.MST=k);(y.MST7MDT=k);(y.Navajo=new a.GeographicPoint(35.6728,-109.0622));(y.PNT=new a.GeographicPoint(33.448334,-112.07333));(y["America/Indiana/Knox"]=new a.GeographicPoint(41.295834,-86.625));(y["America/Indiana/Tell_City"]=new a.GeographicPoint(37.953,-86.7614));(y["America/North_Dakota/Center"]=new a.GeographicPoint(47.115,-101.3003));(y["America/North_Dakota/New_Salem"]=new a.GeographicPoint(46.843,101.4119));(y.CST=w);(y.CST6CDT=w);(y["America/Indiana/Indianapolis"]=new a.GeographicPoint(39.768333,-86.15806));(y["America/Indiana/Marengo"]=new a.GeographicPoint(36.3706,-86.3433));(y["America/Indiana/Petersburg"]=new a.GeographicPoint(38.4917,-87.2803));(y["America/Indiana/Vevay"]=new a.GeographicPoint(38.7458,-85.0711));(y["America/Indiana/Vincennes"]=new a.GeographicPoint(38.6783,-87.5164));(y["America/Indiana/Winamac"]=new a.GeographicPoint(41.0525,-86.6044));(y["America/Kentucky/Louisville"]=new a.GeographicPoint(38.2542,-85.7603));(y["America/Kentucky/Monticello"]=new a.GeographicPoint(36.8381,-84.85));(y.Cuba=new a.GeographicPoint(23.131945,-82.36417));(y.EST=o);(y.EST5EDT=o);(y.IET=o);(y.AST=new a.GeographicPoint(44.65,-63.6));(y.Jamaica=new a.GeographicPoint(18,-76.8));(y["America/Argentina/San_Luis"]=new a.GeographicPoint(-33.3,-66.333));(y.PRT=new a.GeographicPoint(18.467,66.117));(y.CNT=new a.GeographicPoint(47.5675,-52.7072));(y.AGT=new a.GeographicPoint(-34.5875,-58.6725));(y["America/Argentina/Buenos_Aires"]=new a.GeographicPoint(-34.5875,-58.6725));(y["America/Argentina/Catamarca"]=new a.GeographicPoint(-28.466667,-65.78333));(y["America/Argentina/ComodRivadavia"]=new a.GeographicPoint(-42.7578,-65.0297));(y["America/Argentina/Cordoba"]=new a.GeographicPoint(-31.4,-64.183334));(y["America/Argentina/Jujuy"]=new a.GeographicPoint(-24.183332,-65.3));(y["America/Argentina/La_Rioja"]=new a.GeographicPoint(-29.4144,-66.8552));(y["America/Argentina/Mendoza"]=new a.GeographicPoint(-32.883335,-68.816666));(y["America/Argentina/Rio_Gallegos"]=new a.GeographicPoint(-51.625,-69.2286));(y["America/Argentina/Salta"]=new a.GeographicPoint(-24.783333,-65.416664));(y["America/Argentina/San_Juan"]=new a.GeographicPoint(-31.5333,-68.5167));(y["America/Argentina/Tucuman"]=new a.GeographicPoint(-26.8167,65.2167));(y["America/Argentina/Ushuaia"]=new a.GeographicPoint(-54.6,-68.3));(y.BET=x);(y.Eire=new a.GeographicPoint(53.333057,-6.248889));(y.GB=q);(y["GB-Eire"]=new a.GeographicPoint(53.333057,-6.248889));(y.GMT=q);(y.GMT0=q);(y.Greenwich=q);(y.Iceland=new a.GeographicPoint(64.1333,-21.9333));(y.Portugal=new a.GeographicPoint(38.716667,-9.133333));(y.UCT=q);(y.UTC=q);(y.Universal=q);(y.WET=q);(y.Zulu=q);(y.CET=B);(y.ECT=B);(y.MET=new a.GeographicPoint(35.671944,51.424446));(y.Poland=new a.GeographicPoint(52.25,21));(y.ART=new a.GeographicPoint(-34.5875,-58.6725));(y.CAT=new a.GeographicPoint(-1.9536111,30.060556));(y.EET=new a.GeographicPoint(37.983334,23.733334));(y.Egypt=new a.GeographicPoint(30.05,31.25));(y.Israel=new a.GeographicPoint(32.066666,34.766666));(y.Libya=new a.GeographicPoint(32.8925,13.18));(y.Turkey=new a.GeographicPoint(41.018612,28.964722));(y.EAT=new a.GeographicPoint(-1.2833333,36.816666));(y["W-SU"]=D);(y.Iran=new a.GeographicPoint(35.671944,51.424446));(y.NET=new a.GeographicPoint(40.18111,44.51361));(y.PLT=new a.GeographicPoint(24.866667,67.05));(y.IST=d);(y.BST=s);(y.VST=p);(y.CTT=t);(y.Hongkong=new a.GeographicPoint(22.283333,114.15));(y.PRC=t);(y.Singapore=new a.GeographicPoint(1.2930557,103.855835));(y.JST=i);(y.Japan=i);(y.ROK=new a.GeographicPoint(37.566387,126.999725));(y.ACT=new a.GeographicPoint(-35.283333,149.21666));(y.AET=n);(y.SST=new a.GeographicPoint(-28.4667,159.8167));(y.Kwajalein=new a.GeographicPoint(9.1939,167.4597));(y.NST=e);(y.NZ=e);(y["NZ-CHAT"]=new a.GeographicPoint(-43.883,-176.517));a.timeZoneGeographicPointsReference=(y)}else{y=a.timeZoneGeographicPointsReference}var v=(function(E,F){return E[F]===undefined?null:E[F]})(y,"UTC");if(v==null){v=(function(E,F){return E[F]===undefined?null:E[F]})(y,"Etc/GMT")}this.latitude=(function(E){return E*Math.PI/180})(v.getLatitudeInDegrees());this.longitude=(function(E){return E*Math.PI/180})(v.getLongitudeInDegrees())};a.timeZoneGeographicPointsReference=null;return a}(HomeObject));Compass.__class="com.eteks.sweethome3d.model.Compass";Compass.__interfaces=["java.lang.Cloneable","com.eteks.sweethome3d.model.Selectable","java.io.Serializable"];(function(a){var b=(function(){function c(d,e){if(this.latitudeInDegrees===undefined){this.latitudeInDegrees=0}if(this.longitudeInDegrees===undefined){this.longitudeInDegrees=0}this.latitudeInDegrees=d;this.longitudeInDegrees=e}c.prototype.getLatitudeInDegrees=function(){return this.latitudeInDegrees};c.prototype.getLongitudeInDegrees=function(){return this.longitudeInDegrees};return c}());a.GeographicPoint=b;b.__class="com.eteks.sweethome3d.model.Compass.GeographicPoint"})(Compass||(Compass={}));Compass.__transients=["pointsCache","dateCache","sunElevationCache","sunAzimuthCache","propertyChangeSupport"];var Wall=(function(a){__extends(b,a);function b(y,i,n,m,q,d,u,D){var C=this;if(((typeof y==="string")||y===null)&&((typeof i==="number")||i===null)&&((typeof n==="number")||n===null)&&((typeof m==="number")||m===null)&&((typeof q==="number")||q===null)&&((typeof d==="number")||d===null)&&((typeof u==="number")||u===null)&&((D!=null&&(D.constructor!=null&&D.constructor.__interfaces!=null&&D.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0))||D===null)){var k=arguments;C=a.call(this,y)||this;if(C.xStart===undefined){C.xStart=0}if(C.yStart===undefined){C.yStart=0}if(C.xEnd===undefined){C.xEnd=0}if(C.yEnd===undefined){C.yEnd=0}if(C.arcExtent===undefined){C.arcExtent=null}if(C.wallAtStart===undefined){C.wallAtStart=null}if(C.wallAtEnd===undefined){C.wallAtEnd=null}if(C.thickness===undefined){C.thickness=0}if(C.height===undefined){C.height=null}if(C.heightAtEnd===undefined){C.heightAtEnd=null}if(C.leftSideColor===undefined){C.leftSideColor=null}if(C.leftSideTexture===undefined){C.leftSideTexture=null}if(C.leftSideShininess===undefined){C.leftSideShininess=0}if(C.leftSideBaseboard===undefined){C.leftSideBaseboard=null}if(C.rightSideColor===undefined){C.rightSideColor=null}if(C.rightSideTexture===undefined){C.rightSideTexture=null}if(C.rightSideShininess===undefined){C.rightSideShininess=0}if(C.rightSideBaseboard===undefined){C.rightSideBaseboard=null}if(C.pattern===undefined){C.pattern=null}if(C.topColor===undefined){C.topColor=null}if(C.level===undefined){C.level=null}if(C.shapeCache===undefined){C.shapeCache=null}if(C.arcCircleCenterCache===undefined){C.arcCircleCenterCache=null}if(C.pointsCache===undefined){C.pointsCache=null}if(C.pointsIncludingBaseboardsCache===undefined){C.pointsIncludingBaseboardsCache=null}C.symmetric=true;C.xStart=i;C.yStart=n;C.xEnd=m;C.yEnd=q;C.thickness=d;C.height=u;C.pattern=D}else{if(((typeof y==="string")||y===null)&&((typeof i==="number")||i===null)&&((typeof n==="number")||n===null)&&((typeof m==="number")||m===null)&&((typeof q==="number")||q===null)&&((typeof d==="number")||d===null)&&((typeof u==="number")||u===null)&&D===undefined){var k=arguments;var h=arguments;var e=null;C=a.call(this,y)||this;if(C.xStart===undefined){C.xStart=0}if(C.yStart===undefined){C.yStart=0}if(C.xEnd===undefined){C.xEnd=0}if(C.yEnd===undefined){C.yEnd=0}if(C.arcExtent===undefined){C.arcExtent=null}if(C.wallAtStart===undefined){C.wallAtStart=null}if(C.wallAtEnd===undefined){C.wallAtEnd=null}if(C.thickness===undefined){C.thickness=0}if(C.height===undefined){C.height=null}if(C.heightAtEnd===undefined){C.heightAtEnd=null}if(C.leftSideColor===undefined){C.leftSideColor=null}if(C.leftSideTexture===undefined){C.leftSideTexture=null}if(C.leftSideShininess===undefined){C.leftSideShininess=0}if(C.leftSideBaseboard===undefined){C.leftSideBaseboard=null}if(C.rightSideColor===undefined){C.rightSideColor=null}if(C.rightSideTexture===undefined){C.rightSideTexture=null}if(C.rightSideShininess===undefined){C.rightSideShininess=0}if(C.rightSideBaseboard===undefined){C.rightSideBaseboard=null}if(C.pattern===undefined){C.pattern=null}if(C.topColor===undefined){C.topColor=null}if(C.level===undefined){C.level=null}if(C.shapeCache===undefined){C.shapeCache=null}if(C.arcCircleCenterCache===undefined){C.arcCircleCenterCache=null}if(C.pointsCache===undefined){C.pointsCache=null}if(C.pointsIncludingBaseboardsCache===undefined){C.pointsIncludingBaseboardsCache=null}C.symmetric=true;C.xStart=i;C.yStart=n;C.xEnd=m;C.yEnd=q;C.thickness=d;C.height=u;C.pattern=e;if(C.xStart===undefined){C.xStart=0}if(C.yStart===undefined){C.yStart=0}if(C.xEnd===undefined){C.xEnd=0}if(C.yEnd===undefined){C.yEnd=0}if(C.arcExtent===undefined){C.arcExtent=null}if(C.wallAtStart===undefined){C.wallAtStart=null}if(C.wallAtEnd===undefined){C.wallAtEnd=null}if(C.thickness===undefined){C.thickness=0}if(C.height===undefined){C.height=null}if(C.heightAtEnd===undefined){C.heightAtEnd=null}if(C.leftSideColor===undefined){C.leftSideColor=null}if(C.leftSideTexture===undefined){C.leftSideTexture=null}if(C.leftSideShininess===undefined){C.leftSideShininess=0}if(C.leftSideBaseboard===undefined){C.leftSideBaseboard=null}if(C.rightSideColor===undefined){C.rightSideColor=null}if(C.rightSideTexture===undefined){C.rightSideTexture=null}if(C.rightSideShininess===undefined){C.rightSideShininess=0}if(C.rightSideBaseboard===undefined){C.rightSideBaseboard=null}if(C.pattern===undefined){C.pattern=null}if(C.topColor===undefined){C.topColor=null}if(C.level===undefined){C.level=null}if(C.shapeCache===undefined){C.shapeCache=null}if(C.arcCircleCenterCache===undefined){C.arcCircleCenterCache=null}if(C.pointsCache===undefined){C.pointsCache=null}if(C.pointsIncludingBaseboardsCache===undefined){C.pointsIncludingBaseboardsCache=null}C.symmetric=true}else{if(((typeof y==="number")||y===null)&&((typeof i==="number")||i===null)&&((typeof n==="number")||n===null)&&((typeof m==="number")||m===null)&&((typeof q==="number")||q===null)&&((typeof d==="number")||d===null)&&((u!=null&&(u.constructor!=null&&u.constructor.__interfaces!=null&&u.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0))||u===null)&&D===undefined){var k=arguments;var g=k[0];var w=k[1];var l=k[2];var p=k[3];var v=k[4];var B=k[5];var c=k[6];var z=arguments;var F=HomeObject.createId("wall");C=a.call(this,F)||this;if(C.xStart===undefined){C.xStart=0}if(C.yStart===undefined){C.yStart=0}if(C.xEnd===undefined){C.xEnd=0}if(C.yEnd===undefined){C.yEnd=0}if(C.arcExtent===undefined){C.arcExtent=null}if(C.wallAtStart===undefined){C.wallAtStart=null}if(C.wallAtEnd===undefined){C.wallAtEnd=null}if(C.thickness===undefined){C.thickness=0}if(C.height===undefined){C.height=null}if(C.heightAtEnd===undefined){C.heightAtEnd=null}if(C.leftSideColor===undefined){C.leftSideColor=null}if(C.leftSideTexture===undefined){C.leftSideTexture=null}if(C.leftSideShininess===undefined){C.leftSideShininess=0}if(C.leftSideBaseboard===undefined){C.leftSideBaseboard=null}if(C.rightSideColor===undefined){C.rightSideColor=null}if(C.rightSideTexture===undefined){C.rightSideTexture=null}if(C.rightSideShininess===undefined){C.rightSideShininess=0}if(C.rightSideBaseboard===undefined){C.rightSideBaseboard=null}if(C.pattern===undefined){C.pattern=null}if(C.topColor===undefined){C.topColor=null}if(C.level===undefined){C.level=null}if(C.shapeCache===undefined){C.shapeCache=null}if(C.arcCircleCenterCache===undefined){C.arcCircleCenterCache=null}if(C.pointsCache===undefined){C.pointsCache=null}if(C.pointsIncludingBaseboardsCache===undefined){C.pointsIncludingBaseboardsCache=null}C.symmetric=true;C.xStart=g;C.yStart=w;C.xEnd=l;C.yEnd=p;C.thickness=v;C.height=B;C.pattern=c;if(C.xStart===undefined){C.xStart=0}if(C.yStart===undefined){C.yStart=0}if(C.xEnd===undefined){C.xEnd=0}if(C.yEnd===undefined){C.yEnd=0}if(C.arcExtent===undefined){C.arcExtent=null}if(C.wallAtStart===undefined){C.wallAtStart=null}if(C.wallAtEnd===undefined){C.wallAtEnd=null}if(C.thickness===undefined){C.thickness=0}if(C.height===undefined){C.height=null}if(C.heightAtEnd===undefined){C.heightAtEnd=null}if(C.leftSideColor===undefined){C.leftSideColor=null}if(C.leftSideTexture===undefined){C.leftSideTexture=null}if(C.leftSideShininess===undefined){C.leftSideShininess=0}if(C.leftSideBaseboard===undefined){C.leftSideBaseboard=null}if(C.rightSideColor===undefined){C.rightSideColor=null}if(C.rightSideTexture===undefined){C.rightSideTexture=null}if(C.rightSideShininess===undefined){C.rightSideShininess=0}if(C.rightSideBaseboard===undefined){C.rightSideBaseboard=null}if(C.pattern===undefined){C.pattern=null}if(C.topColor===undefined){C.topColor=null}if(C.level===undefined){C.level=null}if(C.shapeCache===undefined){C.shapeCache=null}if(C.arcCircleCenterCache===undefined){C.arcCircleCenterCache=null}if(C.pointsCache===undefined){C.pointsCache=null}if(C.pointsIncludingBaseboardsCache===undefined){C.pointsIncludingBaseboardsCache=null}C.symmetric=true}else{if(((typeof y==="number")||y===null)&&((typeof i==="number")||i===null)&&((typeof n==="number")||n===null)&&((typeof m==="number")||m===null)&&((typeof q==="number")||q===null)&&((typeof d==="number")||d===null)&&u===undefined&&D===undefined){var k=arguments;var f=k[0];var s=k[1];var j=k[2];var o=k[3];var r=k[4];var A=k[5];var x=arguments;var G=null;var t=arguments;var E=HomeObject.createId("wall");C=a.call(this,E)||this;if(C.xStart===undefined){C.xStart=0}if(C.yStart===undefined){C.yStart=0}if(C.xEnd===undefined){C.xEnd=0}if(C.yEnd===undefined){C.yEnd=0}if(C.arcExtent===undefined){C.arcExtent=null}if(C.wallAtStart===undefined){C.wallAtStart=null}if(C.wallAtEnd===undefined){C.wallAtEnd=null}if(C.thickness===undefined){C.thickness=0}if(C.height===undefined){C.height=null}if(C.heightAtEnd===undefined){C.heightAtEnd=null}if(C.leftSideColor===undefined){C.leftSideColor=null}if(C.leftSideTexture===undefined){C.leftSideTexture=null}if(C.leftSideShininess===undefined){C.leftSideShininess=0}if(C.leftSideBaseboard===undefined){C.leftSideBaseboard=null}if(C.rightSideColor===undefined){C.rightSideColor=null}if(C.rightSideTexture===undefined){C.rightSideTexture=null}if(C.rightSideShininess===undefined){C.rightSideShininess=0}if(C.rightSideBaseboard===undefined){C.rightSideBaseboard=null}if(C.pattern===undefined){C.pattern=null}if(C.topColor===undefined){C.topColor=null}if(C.level===undefined){C.level=null}if(C.shapeCache===undefined){C.shapeCache=null}if(C.arcCircleCenterCache===undefined){C.arcCircleCenterCache=null}if(C.pointsCache===undefined){C.pointsCache=null}if(C.pointsIncludingBaseboardsCache===undefined){C.pointsIncludingBaseboardsCache=null}C.symmetric=true;C.xStart=f;C.yStart=s;C.xEnd=j;C.yEnd=o;C.thickness=r;C.height=A;C.pattern=G;if(C.xStart===undefined){C.xStart=0}if(C.yStart===undefined){C.yStart=0}if(C.xEnd===undefined){C.xEnd=0}if(C.yEnd===undefined){C.yEnd=0}if(C.arcExtent===undefined){C.arcExtent=null}if(C.wallAtStart===undefined){C.wallAtStart=null}if(C.wallAtEnd===undefined){C.wallAtEnd=null}if(C.thickness===undefined){C.thickness=0}if(C.height===undefined){C.height=null}if(C.heightAtEnd===undefined){C.heightAtEnd=null}if(C.leftSideColor===undefined){C.leftSideColor=null}if(C.leftSideTexture===undefined){C.leftSideTexture=null}if(C.leftSideShininess===undefined){C.leftSideShininess=0}if(C.leftSideBaseboard===undefined){C.leftSideBaseboard=null}if(C.rightSideColor===undefined){C.rightSideColor=null}if(C.rightSideTexture===undefined){C.rightSideTexture=null}if(C.rightSideShininess===undefined){C.rightSideShininess=0}if(C.rightSideBaseboard===undefined){C.rightSideBaseboard=null}if(C.pattern===undefined){C.pattern=null}if(C.topColor===undefined){C.topColor=null}if(C.level===undefined){C.level=null}if(C.shapeCache===undefined){C.shapeCache=null}if(C.arcCircleCenterCache===undefined){C.arcCircleCenterCache=null}if(C.pointsCache===undefined){C.pointsCache=null}if(C.pointsIncludingBaseboardsCache===undefined){C.pointsIncludingBaseboardsCache=null}C.symmetric=true;if(C.xStart===undefined){C.xStart=0}if(C.yStart===undefined){C.yStart=0}if(C.xEnd===undefined){C.xEnd=0}if(C.yEnd===undefined){C.yEnd=0}if(C.arcExtent===undefined){C.arcExtent=null}if(C.wallAtStart===undefined){C.wallAtStart=null}if(C.wallAtEnd===undefined){C.wallAtEnd=null}if(C.thickness===undefined){C.thickness=0}if(C.height===undefined){C.height=null}if(C.heightAtEnd===undefined){C.heightAtEnd=null}if(C.leftSideColor===undefined){C.leftSideColor=null}if(C.leftSideTexture===undefined){C.leftSideTexture=null}if(C.leftSideShininess===undefined){C.leftSideShininess=0}if(C.leftSideBaseboard===undefined){C.leftSideBaseboard=null}if(C.rightSideColor===undefined){C.rightSideColor=null}if(C.rightSideTexture===undefined){C.rightSideTexture=null}if(C.rightSideShininess===undefined){C.rightSideShininess=0}if(C.rightSideBaseboard===undefined){C.rightSideBaseboard=null}if(C.pattern===undefined){C.pattern=null}if(C.topColor===undefined){C.topColor=null}if(C.level===undefined){C.level=null}if(C.shapeCache===undefined){C.shapeCache=null}if(C.arcCircleCenterCache===undefined){C.arcCircleCenterCache=null}if(C.pointsCache===undefined){C.pointsCache=null}if(C.pointsIncludingBaseboardsCache===undefined){C.pointsIncludingBaseboardsCache=null}C.symmetric=true}else{throw new Error("invalid overload")}}}}return C}b.prototype.getXStart=function(){return this.xStart};b.prototype.setXStart=function(d){if(d!==this.xStart){var c=this.xStart;this.xStart=d;this.clearPointsCache();this.arcCircleCenterCache=null;this.firePropertyChange("X_START",c,d)}};b.prototype.getYStart=function(){return this.yStart};b.prototype.setYStart=function(d){if(d!==this.yStart){var c=this.yStart;this.yStart=d;this.clearPointsCache();this.arcCircleCenterCache=null;this.firePropertyChange("Y_START",c,d)}};b.prototype.getXEnd=function(){return this.xEnd};b.prototype.setXEnd=function(c){if(c!==this.xEnd){var d=this.xEnd;this.xEnd=c;this.clearPointsCache();this.arcCircleCenterCache=null;this.firePropertyChange("X_END",d,c)}};b.prototype.getYEnd=function(){return this.yEnd};b.prototype.setYEnd=function(c){if(c!==this.yEnd){var d=this.yEnd;this.yEnd=c;this.clearPointsCache();this.arcCircleCenterCache=null;this.firePropertyChange("Y_END",d,c)}};b.prototype.getLength=function(){if(this.arcExtent==null||this.arcExtent===0){return java.awt.geom.Point2D.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)}else{var d=this.getArcCircleCenter();var c=java.awt.geom.Point2D.distance(this.xStart,this.yStart,d[0],d[1]);return Math.abs(this.arcExtent)*c}};b.prototype.getStartPointToEndPointDistance=function(){return java.awt.geom.Point2D.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)};b.prototype.setArcExtent=function(d){if(d!==this.arcExtent&&(d==null||!(d===this.arcExtent))){var c=this.arcExtent;this.arcExtent=d;this.clearPointsCache();this.arcCircleCenterCache=null;this.firePropertyChange("ARC_EXTENT",c,d)}};b.prototype.getArcExtent=function(){return this.arcExtent};b.prototype.getXArcCircleCenter=function(){if(this.arcExtent==null){return(this.xStart+this.xEnd)/2}else{return this.getArcCircleCenter()[0]}};b.prototype.getYArcCircleCenter=function(){if(this.arcExtent==null){return(this.yStart+this.yEnd)/2}else{return this.getArcCircleCenter()[1]}};b.prototype.getArcCircleCenter=function(){if(this.arcCircleCenterCache==null){var f=java.awt.geom.Point2D.distance(this.xStart,this.yStart,this.xEnd,this.yEnd);var e=Math.abs(this.arcExtent)>Math.PI?-(Math.PI+this.arcExtent)/2:(Math.PI-this.arcExtent)/2;var d=-(Math.tan(e)*f/2);var g=(this.xStart+this.xEnd)/2;var c=(this.yStart+this.yEnd)/2;var h=Math.atan2(this.xStart-this.xEnd,this.yEnd-this.yStart);this.arcCircleCenterCache=[(g+d*Math.cos(h)),(c+d*Math.sin(h))]}return this.arcCircleCenterCache};b.prototype.getWallAtStart=function(){return this.wallAtStart};b.prototype.setWallAtStart=function(d,c){if(c===void 0){c=true}if(d!==this.wallAtStart){var e=this.wallAtStart;this.wallAtStart=d;this.clearPointsCache();this.firePropertyChange("WALL_AT_START",e,d);if(c){this.detachJoinedWall(e)}}};b.prototype.getWallAtEnd=function(){return this.wallAtEnd};b.prototype.setWallAtEnd=function(e,d){if(d===void 0){d=true}if(e!==this.wallAtEnd){var c=this.wallAtEnd;this.wallAtEnd=e;this.clearPointsCache();this.firePropertyChange("WALL_AT_END",c,e);if(d){this.detachJoinedWall(c)}}};b.prototype.detachJoinedWall=function(c){if(c!=null){if(c.getWallAtStart()===this){c.setWallAtStart(null,false)}else{if(c.getWallAtEnd()===this){c.setWallAtEnd(null,false)}}}};b.prototype.getThickness=function(){return this.thickness};b.prototype.setThickness=function(d){if(d!==this.thickness){var c=this.thickness;this.thickness=d;this.clearPointsCache();this.firePropertyChange("THICKNESS",c,d)}};b.prototype.getHeight=function(){return this.height};b.prototype.setHeight=function(c){if(c!==this.height&&(c==null||!(c===this.height))){var d=this.height;this.height=c;this.firePropertyChange("HEIGHT",d,c)}};b.prototype.getHeightAtEnd=function(){return this.heightAtEnd};b.prototype.setHeightAtEnd=function(c){if(c!==this.heightAtEnd&&(c==null||!(c===this.heightAtEnd))){var d=this.heightAtEnd;this.heightAtEnd=c;this.firePropertyChange("HEIGHT_AT_END",d,c)}};b.prototype.isTrapezoidal=function(){return this.height!=null&&this.heightAtEnd!=null&&!(this.height===this.heightAtEnd)};b.prototype.getLeftSideColor=function(){return this.leftSideColor};b.prototype.setLeftSideColor=function(c){if(c!==this.leftSideColor&&(c==null||!(c===this.leftSideColor))){var d=this.leftSideColor;this.leftSideColor=c;this.firePropertyChange("LEFT_SIDE_COLOR",d,c)}};b.prototype.getRightSideColor=function(){return this.rightSideColor};b.prototype.setRightSideColor=function(c){if(c!==this.rightSideColor&&(c==null||!(c===this.rightSideColor))){var d=this.rightSideColor;this.rightSideColor=c;this.firePropertyChange("RIGHT_SIDE_COLOR",d,c)}};b.prototype.getLeftSideTexture=function(){return this.leftSideTexture};b.prototype.setLeftSideTexture=function(d){if(d!==this.leftSideTexture&&(d==null||!d.equals(this.leftSideTexture))){var c=this.leftSideTexture;this.leftSideTexture=d;this.firePropertyChange("LEFT_SIDE_TEXTURE",c,d)}};b.prototype.getRightSideTexture=function(){return this.rightSideTexture};b.prototype.setRightSideTexture=function(c){if(c!==this.rightSideTexture&&(c==null||!c.equals(this.rightSideTexture))){var d=this.rightSideTexture;this.rightSideTexture=c;this.firePropertyChange("RIGHT_SIDE_TEXTURE",d,c)}};b.prototype.getLeftSideShininess=function(){return this.leftSideShininess};b.prototype.setLeftSideShininess=function(c){if(c!==this.leftSideShininess){var d=this.leftSideShininess;this.leftSideShininess=c;this.firePropertyChange("LEFT_SIDE_SHININESS",d,c)}};b.prototype.getRightSideShininess=function(){return this.rightSideShininess};b.prototype.setRightSideShininess=function(d){if(d!==this.rightSideShininess){var c=this.rightSideShininess;this.rightSideShininess=d;this.firePropertyChange("RIGHT_SIDE_SHININESS",c,d)}};b.prototype.getLeftSideBaseboard=function(){return this.leftSideBaseboard};b.prototype.setLeftSideBaseboard=function(d){if(d!==this.leftSideBaseboard&&(d==null||!d.equals(this.leftSideBaseboard))){var c=this.leftSideBaseboard;this.leftSideBaseboard=d;this.clearPointsCache();this.firePropertyChange("LEFT_SIDE_BASEBOARD",c,d)}};b.prototype.getRightSideBaseboard=function(){return this.rightSideBaseboard};b.prototype.setRightSideBaseboard=function(c){if(c!==this.rightSideBaseboard&&(c==null||!c.equals(this.rightSideBaseboard))){var d=this.rightSideBaseboard;this.rightSideBaseboard=c;this.clearPointsCache();this.firePropertyChange("RIGHT_SIDE_BASEBOARD",d,c)}};b.prototype.getPattern=function(){return this.pattern};b.prototype.setPattern=function(d){if(this.pattern!==d){var c=this.pattern;this.pattern=d;this.firePropertyChange("PATTERN",c,d)}};b.prototype.getTopColor=function(){return this.topColor};b.prototype.setTopColor=function(c){if(this.topColor!==c&&(c==null||!(c===this.topColor))){var d=this.topColor;this.topColor=c;this.firePropertyChange("TOP_COLOR",d,c)}};b.prototype.getLevel=function(){return this.level};b.prototype.setLevel=function(d){if(d!==this.level){var c=this.level;this.level=d;this.firePropertyChange("LEVEL",c,d)}};b.prototype.isAtLevel=function(e){if(this.level===e){return true}else{if(this.level!=null&&e!=null){var c=this.level.getElevation();var d=e.getElevation();return c===d&&this.level.getElevationIndex()<e.getElevationIndex()||c<d&&c+this.getWallMaximumHeight()>d}else{return false}}};b.prototype.getWallMaximumHeight=function(){if(this.height==null){return 0}else{if(this.isTrapezoidal()){return Math.max(this.height,this.heightAtEnd)}else{return this.height}}};b.prototype.clearPointsCache=function(){this.shapeCache=null;this.pointsCache=null;this.pointsIncludingBaseboardsCache=null;if(this.wallAtStart!=null){this.wallAtStart.pointsCache=null;this.wallAtStart.pointsIncludingBaseboardsCache=null}if(this.wallAtEnd!=null){this.wallAtEnd.pointsCache=null;this.wallAtEnd.pointsIncludingBaseboardsCache=null}};b.prototype.getPoints$=function(){return this.getPoints$boolean(false)};b.prototype.getPoints$boolean=function(c){if(c&&(this.leftSideBaseboard!=null||this.rightSideBaseboard!=null)){if(this.pointsIncludingBaseboardsCache==null){this.pointsIncludingBaseboardsCache=this.getShapePoints(true)}return this.clonePoints(this.pointsIncludingBaseboardsCache)}else{if(this.pointsCache==null){this.pointsCache=this.getShapePoints(false)}return this.clonePoints(this.pointsCache)}};b.prototype.getPoints=function(c){if(((typeof c==="boolean")||c===null)){return this.getPoints$boolean(c)}else{if(c===undefined){return this.getPoints$()}else{throw new Error("invalid overload")}}};b.prototype.clonePoints=function(d){var e=(function(g){var f=[];while(g-->0){f.push(null)}return f})(d.length);for(var c=0;c<d.length;c++){e[c]=d[c].slice(0)}return e};b.prototype.getShapePoints=function(m){var z=0.01;var c=this.getUnjoinedShapePoints(m);var w=0;var i=c.length-1;var t=(c.length/2|0)-1;var o=(c.length/2|0);var u=2*this.thickness;if(this.wallAtStart!=null){var y=this.wallAtStart.getUnjoinedShapePoints(m);var v=0;var s=y.length-1;var g=(y.length/2|0)-1;var h=(y.length/2|0);var n=this.wallAtStart.getWallAtEnd()===this&&(this.wallAtStart.getWallAtStart()!==this||(this.wallAtStart.xEnd===this.xStart&&this.wallAtStart.yEnd===this.yStart));var x=this.wallAtStart.getWallAtStart()===this&&(this.wallAtStart.getWallAtEnd()!==this||(this.wallAtStart.xStart===this.xStart&&this.wallAtStart.yStart===this.yStart));var k=m?this.wallAtStart.pointsIncludingBaseboardsCache:this.wallAtStart.pointsCache;if(n){this.computeIntersection(c[w],c[w+1],y[g],y[g-1],u);this.computeIntersection(c[i],c[i-1],y[h],y[h+1],u);if(k!=null){if(Math.abs(c[w][0]-k[g][0])<z&&Math.abs(c[w][1]-k[g][1])<z){c[w]=k[g]}if(Math.abs(c[i][0]-k[h][0])<z&&Math.abs(c[i][1]-k[h][1])<z){c[i]=k[h]}}}else{if(x){this.computeIntersection(c[w],c[w+1],y[s],y[s-1],u);this.computeIntersection(c[i],c[i-1],y[v],y[v+1],u);if(k!=null){if(Math.abs(c[w][0]-k[s][0])<z&&Math.abs(c[w][1]-k[s][1])<z){c[w]=k[s]}if(k!=null&&Math.abs(c[i][0]-k[v][0])<z&&Math.abs(c[i][1]-k[v][1])<z){c[i]=k[v]}}}}}if(this.wallAtEnd!=null){var d=this.wallAtEnd.getUnjoinedShapePoints(m);var l=0;var q=d.length-1;var r=(d.length/2|0)-1;var j=(d.length/2|0);var p=this.wallAtEnd.getWallAtStart()===this&&(this.wallAtEnd.getWallAtEnd()!==this||(this.wallAtEnd.xStart===this.xEnd&&this.wallAtEnd.yStart===this.yEnd));var f=this.wallAtEnd.getWallAtEnd()===this&&(this.wallAtEnd.getWallAtStart()!==this||(this.wallAtEnd.xEnd===this.xEnd&&this.wallAtEnd.yEnd===this.yEnd));var e=m?this.wallAtEnd.pointsIncludingBaseboardsCache:this.wallAtEnd.pointsCache;if(p){this.computeIntersection(c[t],c[t-1],d[l],d[l+1],u);this.computeIntersection(c[o],c[o+1],d[q],d[q-1],u);if(e!=null){if(Math.abs(c[t][0]-e[l][0])<z&&Math.abs(c[t][1]-e[l][1])<z){c[t]=e[l]}if(Math.abs(c[o][0]-e[q][0])<z&&Math.abs(c[o][1]-e[q][1])<z){c[o]=e[q]}}}else{if(f){this.computeIntersection(c[t],c[t-1],d[j],d[j+1],u);this.computeIntersection(c[o],c[o+1],d[r],d[r-1],u);if(e!=null){if(Math.abs(c[t][0]-e[j][0])<z&&Math.abs(c[t][1]-e[j][1])<z){c[t]=e[j]}if(Math.abs(c[o][0]-e[r][0])<z&&Math.abs(c[o][1]-e[r][1])<z){c[o]=e[r]}}}}}return c};b.prototype.getUnjoinedShapePoints=function(k){if(this.arcExtent!=null&&this.arcExtent!==0&&java.awt.geom.Point2D.distanceSq(this.xStart,this.yStart,this.xEnd,this.yEnd)>1e-10){var h=this.getArcCircleCenter();var u=Math.atan2(h[1]-this.yStart,h[0]-this.xStart);u+=2*Math.atan2(this.yStart-this.yEnd,this.xEnd-this.xStart);var t=java.awt.geom.Point2D.distance(h[0],h[1],this.xStart,this.yStart);var e=t+this.thickness/2;var p=Math.max(0,t-this.thickness/2);var s=e*Math.abs(this.arcExtent);var q=this.arcExtent/Math.sqrt(s);var g=((this.arcExtent/q)|0);if(k){if(q>0){if(this.leftSideBaseboard!=null){e+=this.leftSideBaseboard.getThickness()}if(this.rightSideBaseboard!=null){p-=this.rightSideBaseboard.getThickness()}}else{if(this.leftSideBaseboard!=null){p-=this.leftSideBaseboard.getThickness()}if(this.rightSideBaseboard!=null){e+=this.rightSideBaseboard.getThickness()}}}var c=([]);if(this.symmetric){if(Math.abs(this.arcExtent-g*q)>0.000001){q=this.arcExtent/++g}for(var v=0;v<=g;v++){this.computeRoundWallShapePoint(c,u+this.arcExtent-v*q,v,q,h,e,p)}}else{var v=0;for(var w=this.arcExtent;q>0?w>=q*0.1:w<=-q*0.1;w-=q,v++){this.computeRoundWallShapePoint(c,u+w,v,q,h,e,p)}this.computeRoundWallShapePoint(c,u,v,q,h,e,p)}return c.slice(0)}else{var w=Math.atan2(this.yEnd-this.yStart,this.xEnd-this.xStart);var d=Math.sin(w);var f=Math.cos(w);var n=this.thickness/2;if(k&&this.leftSideBaseboard!=null){n+=this.leftSideBaseboard.getThickness()}var l=d*n;var j=f*n;var r=this.thickness/2;if(k&&this.rightSideBaseboard!=null){r+=this.rightSideBaseboard.getThickness()}var o=d*r;var m=f*r;return[[this.xStart+l,this.yStart-j],[this.xEnd+l,this.yEnd-j],[this.xEnd-o,this.yEnd+m],[this.xStart-o,this.yStart+m]]}};b.prototype.computeRoundWallShapePoint=function(m,e,g,d,k,c,h){var l=Math.cos(e);var j=Math.sin(e);var f=[(k[0]+h*l),(k[1]-h*j)];var i=[(k[0]+c*l),(k[1]-c*j)];if(d>0){m.splice(g,0,f);m.splice(m.length-1-g,0,i)}else{m.splice(g,0,i);m.splice(m.length-1-g,0,f)}};b.prototype.computeIntersection=function(k,i,h,g,c){var n=(i[1]-k[1])/(i[0]-k[0]);var m=(g[1]-h[1])/(g[0]-h[0]);if(n!==m){var l=k[0];var j=k[1];if(Math.abs(n)>4000){if(Math.abs(m)<4000){l=k[0];var e=g[1]-m*g[0];j=m*l+e}}else{if(Math.abs(m)>4000){if(Math.abs(n)<4000){l=h[0];var f=i[1]-n*i[0];j=n*l+f}}else{var d=(function(o){if(o>0){return 1}else{if(o<0){return -1}else{return 0}}})(n)===(function(o){if(o>0){return 1}else{if(o<0){return -1}else{return 0}}})(m);if(Math.abs(n-m)>0.00001&&(!d||(Math.abs(n)>Math.abs(m)?n/m:m/n)>1.004)){var f=i[1]-n*i[0];var e=g[1]-m*g[0];l=(e-f)/(n-m);j=n*l+f}}}if(java.awt.geom.Point2D.distanceSq(l,j,k[0],k[1])<c*c){k[0]=l;k[1]=j}}};b.prototype.intersectsRectangle=function(e,g,c,f){var d=new java.awt.geom.Rectangle2D.Float(e,g,0,0);d.add(c,f);return this.getShape(false).intersects(d)};b.prototype.containsPoint$float$float$float=function(c,e,d){return this.containsPoint$float$float$boolean$float(c,e,false,d)};b.prototype.containsPoint$float$float$boolean$float=function(c,f,e,d){return this.containsShapeAtWithMargin(this.getShape(e),c,f,d)};b.prototype.containsPoint=function(c,f,e,d){if(((typeof c==="number")||c===null)&&((typeof f==="number")||f===null)&&((typeof e==="boolean")||e===null)&&((typeof d==="number")||d===null)){return this.containsPoint$float$float$boolean$float(c,f,e,d)}else{if(((typeof c==="number")||c===null)&&((typeof f==="number")||f===null)&&((typeof e==="number")||e===null)&&d===undefined){return this.containsPoint$float$float$float(c,f,e)}else{throw new Error("invalid overload")}}};b.prototype.isMiddlePointAt=function(c,i,h){var g=this.getPoints$();var f=(g.length/4|0);var e=g.length-1-f;var d=g.length%4===0?new java.awt.geom.Line2D.Float((g[f-1][0]+g[f][0])/2,(g[f-1][1]+g[f][1])/2,(g[e][0]+g[e+1][0])/2,(g[e][1]+g[e+1][1])/2):new java.awt.geom.Line2D.Float(g[f][0],g[f][1],g[e][0],g[e][1]);return this.containsShapeAtWithMargin(d,c,i,h)};b.prototype.containsWallStartAt=function(c,g,e){var d=this.getPoints$();var f=new java.awt.geom.Line2D.Float(d[0][0],d[0][1],d[d.length-1][0],d[d.length-1][1]);return this.containsShapeAtWithMargin(f,c,g,e)};b.prototype.containsWallEndAt=function(c,g,f){var d=this.getPoints$();var e=new java.awt.geom.Line2D.Float(d[(d.length/2|0)-1][0],d[(d.length/2|0)-1][1],d[(d.length/2|0)][0],d[(d.length/2|0)][1]);return this.containsShapeAtWithMargin(e,c,g,f)};b.prototype.containsShapeAtWithMargin=function(d,c,f,e){if(e===0){return d.contains(c,f)}else{return d.intersects(c-e,f-e,2*e,2*e)}};b.prototype.getShape=function(f){if(this.shapeCache==null){var c=this.getPoints$boolean(f);var e=new java.awt.geom.GeneralPath();e.moveTo(c[0][0],c[0][1]);for(var d=1;d<c.length;d++){e.lineTo(c[d][0],c[d][1])}e.closePath();this.shapeCache=e}return this.shapeCache};b.prototype.move=function(d,c){this.setXStart(this.getXStart()+d);this.setYStart(this.getYStart()+c);this.setXEnd(this.getXEnd()+d);this.setYEnd(this.getYEnd()+c)};b.duplicate=function(d){var e=([]);for(var f=0;f<d.length;f++){var c=d[f];(e.push(c.duplicate())>0)}b.updateBoundWalls(e,d);return e};b.clone=function(d){var f=([]);for(var e=0;e<d.length;e++){var c=d[e];(f.push((function(h){if(h.clone!=undefined){return h.clone()}else{var i=Object.create(h);for(var g in h){if(h.hasOwnProperty(g)){i[g]=h[g]}}return i}})(c))>0)}b.updateBoundWalls(f,d);return f};b.updateBoundWalls=function(g,d){for(var e=0;e<d.length;e++){var c=d[e];var f=d.indexOf(c.getWallAtStart());if(f!==-1){g[e].setWallAtStart(g[f])}var h=d.indexOf(c.getWallAtEnd());if(h!==-1){g[e].setWallAtEnd(g[h])}}};b.prototype.clone=function(){var d=this;var c=(function(f){if(a.prototype.clone!=undefined){return a.prototype.clone.call(d)}else{var g=Object.create(f);for(var e in f){if(f.hasOwnProperty(e)){g[e]=f[e]}}return g}})(this);c.wallAtStart=null;c.wallAtEnd=null;c.level=null;c.shapeCache=null;c.pointsCache=null;c.pointsIncludingBaseboardsCache=null;return c};return b}(HomeObject));Wall.__class="com.eteks.sweethome3d.model.Wall";Wall.__interfaces=["java.lang.Cloneable","com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.Elevatable","java.io.Serializable"];Wall.__transients=["shapeCache","arcCircleCenterCache","pointsCache","pointsIncludingBaseboardsCache","propertyChangeSupport"];var DimensionLine=(function(b){__extends(a,b);function a(e,l,q,c,n,g){var i=this;if(((typeof e==="string")||e===null)&&((typeof l==="number")||l===null)&&((typeof q==="number")||q===null)&&((typeof c==="number")||c===null)&&((typeof n==="number")||n===null)&&((typeof g==="number")||g===null)){var j=arguments;i=b.call(this,e)||this;if(i.xStart===undefined){i.xStart=0}if(i.yStart===undefined){i.yStart=0}if(i.xEnd===undefined){i.xEnd=0}if(i.yEnd===undefined){i.yEnd=0}if(i.offset===undefined){i.offset=0}if(i.lengthStyle===undefined){i.lengthStyle=null}if(i.level===undefined){i.level=null}if(i.shapeCache===undefined){i.shapeCache=null}i.xStart=l;i.yStart=q;i.xEnd=c;i.yEnd=n;i.offset=g}else{if(((typeof e==="number")||e===null)&&((typeof l==="number")||l===null)&&((typeof q==="number")||q===null)&&((typeof c==="number")||c===null)&&((typeof n==="number")||n===null)&&g===undefined){var j=arguments;var p=j[0];var m=j[1];var h=j[2];var o=j[3];var f=j[4];var k=arguments;var d=HomeObject.createId("dimensionLine");i=b.call(this,d)||this;if(i.xStart===undefined){i.xStart=0}if(i.yStart===undefined){i.yStart=0}if(i.xEnd===undefined){i.xEnd=0}if(i.yEnd===undefined){i.yEnd=0}if(i.offset===undefined){i.offset=0}if(i.lengthStyle===undefined){i.lengthStyle=null}if(i.level===undefined){i.level=null}if(i.shapeCache===undefined){i.shapeCache=null}i.xStart=p;i.yStart=m;i.xEnd=h;i.yEnd=o;i.offset=f;if(i.xStart===undefined){i.xStart=0}if(i.yStart===undefined){i.yStart=0}if(i.xEnd===undefined){i.xEnd=0}if(i.yEnd===undefined){i.yEnd=0}if(i.offset===undefined){i.offset=0}if(i.lengthStyle===undefined){i.lengthStyle=null}if(i.level===undefined){i.level=null}if(i.shapeCache===undefined){i.shapeCache=null}}else{throw new Error("invalid overload")}}return i}a.prototype.getXStart=function(){return this.xStart};a.prototype.setXStart=function(d){if(d!==this.xStart){var c=this.xStart;this.xStart=d;this.shapeCache=null;this.firePropertyChange("X_START",c,d)}};a.prototype.getYStart=function(){return this.yStart};a.prototype.setYStart=function(d){if(d!==this.yStart){var c=this.yStart;this.yStart=d;this.shapeCache=null;this.firePropertyChange("Y_START",c,d)}};a.prototype.getXEnd=function(){return this.xEnd};a.prototype.setXEnd=function(c){if(c!==this.xEnd){var d=this.xEnd;this.xEnd=c;this.shapeCache=null;this.firePropertyChange("X_END",d,c)}};a.prototype.getYEnd=function(){return this.yEnd};a.prototype.setYEnd=function(c){if(c!==this.yEnd){var d=this.yEnd;this.yEnd=c;this.shapeCache=null;this.firePropertyChange("Y_END",d,c)}};a.prototype.getOffset=function(){return this.offset};a.prototype.setOffset=function(d){if(d!==this.offset){var c=this.offset;this.offset=d;this.shapeCache=null;this.firePropertyChange("OFFSET",c,d)}};a.prototype.getLength=function(){return java.awt.geom.Point2D.distance(this.getXStart(),this.getYStart(),this.getXEnd(),this.getYEnd())};a.prototype.getLengthStyle=function(){return this.lengthStyle};a.prototype.setLengthStyle=function(c){if(c!==this.lengthStyle){var d=this.lengthStyle;this.lengthStyle=c;this.firePropertyChange("LENGTH_STYLE",d,c)}};a.prototype.getLevel=function(){return this.level};a.prototype.setLevel=function(d){if(d!==this.level){var c=this.level;this.level=d;this.firePropertyChange("LEVEL",c,d)}};a.prototype.isAtLevel=function(c){return this.level===c||this.level!=null&&c!=null&&this.level.getElevation()===c.getElevation()&&this.level.getElevationIndex()<c.getElevationIndex()};a.prototype.getPoints=function(){var e=Math.atan2(this.yEnd-this.yStart,this.xEnd-this.xStart);var d=-Math.sin(e)*this.offset;var c=Math.cos(e)*this.offset;return[[this.xStart,this.yStart],[this.xStart+d,this.yStart+c],[this.xEnd+d,this.yEnd+c],[this.xEnd,this.yEnd]]};a.prototype.intersectsRectangle=function(e,g,c,f){var d=new java.awt.geom.Rectangle2D.Float(e,g,0,0);d.add(c,f);return this.getShape().intersects(d)};a.prototype.containsPoint=function(c,e,d){return this.containsShapeAtWithMargin(this.getShape(),c,e,d)};a.prototype.isMiddlePointAt=function(c,j,g){var h=Math.atan2(this.yEnd-this.yStart,this.xEnd-this.xStart);var e=-Math.sin(h)*this.offset;var d=Math.cos(h)*this.offset;var i=(this.xStart+this.xEnd)/2+e;var f=(this.yStart+this.yEnd)/2+d;return Math.abs(c-i)<=g&&Math.abs(j-f)<=g};a.prototype.containsStartExtensionLinetAt=function(c,g,e){var f=Math.atan2(this.yEnd-this.yStart,this.xEnd-this.xStart);var d=new java.awt.geom.Line2D.Float(this.xStart,this.yStart,this.xStart+-Math.sin(f)*this.offset,this.yStart+Math.cos(f)*this.offset);return this.containsShapeAtWithMargin(d,c,g,e)};a.prototype.containsEndExtensionLineAt=function(d,g,e){var f=Math.atan2(this.yEnd-this.yStart,this.xEnd-this.xStart);var c=new java.awt.geom.Line2D.Float(this.xEnd,this.yEnd,this.xEnd+-Math.sin(f)*this.offset,this.yEnd+Math.cos(f)*this.offset);return this.containsShapeAtWithMargin(c,d,g,e)};a.prototype.containsShapeAtWithMargin=function(d,c,f,e){if(e===0){return d.contains(c,f)}else{return d.intersects(c-e,f-e,2*e,2*e)}};a.prototype.getShape=function(){if(this.shapeCache==null){var f=Math.atan2(this.yEnd-this.yStart,this.xEnd-this.xStart);var d=-Math.sin(f)*this.offset;var c=Math.cos(f)*this.offset;var e=new java.awt.geom.GeneralPath();e.append(new java.awt.geom.Line2D.Float(this.xStart+d,this.yStart+c,this.xEnd+d,this.yEnd+c),false);e.append(new java.awt.geom.Line2D.Float(this.xStart,this.yStart,this.xStart+d,this.yStart+c),false);e.append(new java.awt.geom.Line2D.Float(this.xEnd,this.yEnd,this.xEnd+d,this.yEnd+c),false);this.shapeCache=e}return this.shapeCache};a.prototype.move=function(d,c){this.setXStart(this.getXStart()+d);this.setYStart(this.getYStart()+c);this.setXEnd(this.getXEnd()+d);this.setYEnd(this.getYEnd()+c)};a.prototype.clone=function(){var d=this;var c=(function(g){if(b.prototype.clone!=undefined){return b.prototype.clone.call(d)}else{var f=Object.create(g);for(var e in g){if(g.hasOwnProperty(e)){f[e]=g[e]}}return f}})(this);c.level=null;return c};return a}(HomeObject));DimensionLine.__class="com.eteks.sweethome3d.model.DimensionLine";DimensionLine.__interfaces=["java.lang.Cloneable","com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.Elevatable","java.io.Serializable"];DimensionLine.__transients=["shapeCache","propertyChangeSupport"];var Camera=(function(b){__extends(a,b);function a(w,p,m,j,n,k,M,h,N){var C=this;if(((typeof w==="string")||w===null)&&((typeof p==="number")||p===null)&&((typeof m==="number")||m===null)&&((typeof j==="number")||j===null)&&((typeof n==="number")||n===null)&&((typeof k==="number")||k===null)&&((typeof M==="number")||M===null)&&((typeof h==="number")||h===null)&&((typeof N==="number")||N===null)){var g=arguments;C=b.call(this,w)||this;if(C.name===undefined){C.name=null}if(C.x===undefined){C.x=0}if(C.y===undefined){C.y=0}if(C.z===undefined){C.z=0}if(C.yaw===undefined){C.yaw=0}if(C.pitch===undefined){C.pitch=0}if(C.fieldOfView===undefined){C.fieldOfView=0}if(C.time===undefined){C.time=0}if(C.lens===undefined){C.lens=null}if(C.lensName===undefined){C.lensName=null}C.x=p;C.y=m;C.z=j;C.yaw=n;C.pitch=k;C.fieldOfView=M;C.time=h;C.lens=N}else{if(((typeof w==="number")||w===null)&&((typeof p==="number")||p===null)&&((typeof m==="number")||m===null)&&((typeof j==="number")||j===null)&&((typeof n==="number")||n===null)&&((typeof k==="number")||k===null)&&((typeof M==="number")||M===null)&&((typeof h==="number")||h===null)&&N===undefined){var g=arguments;var A=g[0];var d=g[1];var I=g[2];var f=g[3];var H=g[4];var B=g[5];var o=g[6];var L=g[7];var t=arguments;var G=HomeObject.createId("camera");C=b.call(this,G)||this;if(C.name===undefined){C.name=null}if(C.x===undefined){C.x=0}if(C.y===undefined){C.y=0}if(C.z===undefined){C.z=0}if(C.yaw===undefined){C.yaw=0}if(C.pitch===undefined){C.pitch=0}if(C.fieldOfView===undefined){C.fieldOfView=0}if(C.time===undefined){C.time=0}if(C.lens===undefined){C.lens=null}if(C.lensName===undefined){C.lensName=null}C.x=A;C.y=d;C.z=I;C.yaw=f;C.pitch=H;C.fieldOfView=B;C.time=o;C.lens=L;if(C.name===undefined){C.name=null}if(C.x===undefined){C.x=0}if(C.y===undefined){C.y=0}if(C.z===undefined){C.z=0}if(C.yaw===undefined){C.yaw=0}if(C.pitch===undefined){C.pitch=0}if(C.fieldOfView===undefined){C.fieldOfView=0}if(C.time===undefined){C.time=0}if(C.lens===undefined){C.lens=null}if(C.lensName===undefined){C.lensName=null}}else{if(((typeof w==="string")||w===null)&&((typeof p==="number")||p===null)&&((typeof m==="number")||m===null)&&((typeof j==="number")||j===null)&&((typeof n==="number")||n===null)&&((typeof k==="number")||k===null)&&((typeof M==="number")||M===null)&&h===undefined&&N===undefined){var g=arguments;var s=arguments;var l=a.midday();var K=a.Lens.PINHOLE;C=b.call(this,w)||this;if(C.name===undefined){C.name=null}if(C.x===undefined){C.x=0}if(C.y===undefined){C.y=0}if(C.z===undefined){C.z=0}if(C.yaw===undefined){C.yaw=0}if(C.pitch===undefined){C.pitch=0}if(C.fieldOfView===undefined){C.fieldOfView=0}if(C.time===undefined){C.time=0}if(C.lens===undefined){C.lens=null}if(C.lensName===undefined){C.lensName=null}C.x=p;C.y=m;C.z=j;C.yaw=n;C.pitch=k;C.fieldOfView=M;C.time=l;C.lens=K;if(C.name===undefined){C.name=null}if(C.x===undefined){C.x=0}if(C.y===undefined){C.y=0}if(C.z===undefined){C.z=0}if(C.yaw===undefined){C.yaw=0}if(C.pitch===undefined){C.pitch=0}if(C.fieldOfView===undefined){C.fieldOfView=0}if(C.time===undefined){C.time=0}if(C.lens===undefined){C.lens=null}if(C.lensName===undefined){C.lensName=null}}else{if(((typeof w==="number")||w===null)&&((typeof p==="number")||p===null)&&((typeof m==="number")||m===null)&&((typeof j==="number")||j===null)&&((typeof n==="number")||n===null)&&((typeof k==="number")||k===null)&&M===undefined&&h===undefined&&N===undefined){var g=arguments;var v=g[0];var c=g[1];var F=g[2];var e=g[3];var E=g[4];var u=g[5];var r=arguments;var i=a.midday();var J=a.Lens.PINHOLE;var q=arguments;var D=HomeObject.createId("camera");C=b.call(this,D)||this;if(C.name===undefined){C.name=null}if(C.x===undefined){C.x=0}if(C.y===undefined){C.y=0}if(C.z===undefined){C.z=0}if(C.yaw===undefined){C.yaw=0}if(C.pitch===undefined){C.pitch=0}if(C.fieldOfView===undefined){C.fieldOfView=0}if(C.time===undefined){C.time=0}if(C.lens===undefined){C.lens=null}if(C.lensName===undefined){C.lensName=null}C.x=v;C.y=c;C.z=F;C.yaw=e;C.pitch=E;C.fieldOfView=u;C.time=i;C.lens=J;if(C.name===undefined){C.name=null}if(C.x===undefined){C.x=0}if(C.y===undefined){C.y=0}if(C.z===undefined){C.z=0}if(C.yaw===undefined){C.yaw=0}if(C.pitch===undefined){C.pitch=0}if(C.fieldOfView===undefined){C.fieldOfView=0}if(C.time===undefined){C.time=0}if(C.lens===undefined){C.lens=null}if(C.lensName===undefined){C.lensName=null}if(C.name===undefined){C.name=null}if(C.x===undefined){C.x=0}if(C.y===undefined){C.y=0}if(C.z===undefined){C.z=0}if(C.yaw===undefined){C.yaw=0}if(C.pitch===undefined){C.pitch=0}if(C.fieldOfView===undefined){C.fieldOfView=0}if(C.time===undefined){C.time=0}if(C.lens===undefined){C.lens=null}if(C.lensName===undefined){C.lensName=null}}else{throw new Error("invalid overload")}}}}return C}a.midday=function(){var c=new Date();(function(f,e){return f.UTC?f.setUTCHours(e):f.setHours(e)})(c,12);(function(f,e){return f.UTC?f.setUTCMinutes(e):f.setMinutes(e)})(c,0);(function(f,e){return f.UTC?f.setUTCSeconds(e):f.setSeconds(e)})(c,0);(function(f,e){return f.UTC?f.setUTCMilliseconds(e):f.setMilliseconds(e)})(c,0);return c.getTime()};a.prototype.getName=function(){return this.name};a.prototype.setName=function(c){if(c!==this.name&&(c==null||!(c===this.name))){var d=this.name;this.name=c;this.firePropertyChange("NAME",d,c)}};a.prototype.getYaw=function(){return this.yaw};a.prototype.setYaw=function(d){if(d!==this.yaw){var c=this.yaw;this.yaw=d;this.firePropertyChange("YAW",c,d)}};a.prototype.getPitch=function(){return this.pitch};a.prototype.setPitch=function(d){if(d!==this.pitch){var c=this.pitch;this.pitch=d;this.firePropertyChange("PITCH",c,d)}};a.prototype.getFieldOfView=function(){return this.fieldOfView};a.prototype.setFieldOfView=function(c){if(c!==this.fieldOfView){var d=this.fieldOfView;this.fieldOfView=c;this.firePropertyChange("FIELD_OF_VIEW",d,c)}};a.prototype.getX=function(){return this.x};a.prototype.setX=function(c){if(c!==this.x){var d=this.x;this.x=c;this.firePropertyChange("X",d,c)}};a.prototype.getY=function(){return this.y};a.prototype.setY=function(d){if(d!==this.y){var c=this.y;this.y=d;this.firePropertyChange("Y",c,d)}};a.prototype.getZ=function(){return this.z};a.prototype.setZ=function(d){if(d!==this.z){var c=this.z;this.z=d;this.firePropertyChange("Z",c,d)}};a.prototype.getTime=function(){return this.time};a.prototype.setTime=function(c){if(this.time!==c){var d=this.time;this.time=c;this.firePropertyChange("TIME",d,c)}};a.convertTimeToTimeZone=function(d,e){var f=new Date();f.setTime(d);var c=new Date();(function(h,g){return h.UTC?h.setUTCFullYear(g):h.setFullYear(g)})(c,(function(g){return g.UTC?g.getUTCFullYear():g.getFullYear()})(f));(function(h,g){return h.UTC?h.setUTCMonth(g):h.setMonth(g)})(c,(function(g){return g.UTC?g.getUTCMonth():g.getMonth()})(f));(function(h,g){return h.UTC?h.setUTCDate(g):h.setDate(g)})(c,(function(g){return g.UTC?g.getUTCDate():g.getDate()})(f));(function(h,g){return h.UTC?h.setUTCHours(g):h.setHours(g)})(c,(function(g){return g.UTC?g.getUTCHours():g.getHours()})(f));(function(h,g){return h.UTC?h.setUTCMinutes(g):h.setMinutes(g)})(c,(function(g){return g.UTC?g.getUTCMinutes():g.getMinutes()})(f));(function(h,g){return h.UTC?h.setUTCSeconds(g):h.setSeconds(g)})(c,(function(g){return g.UTC?g.getUTCSeconds():g.getSeconds()})(f));(function(h,g){return h.UTC?h.setUTCMilliseconds(g):h.setMilliseconds(g)})(c,(function(g){return g.UTC?g.getUTCMilliseconds():g.getMilliseconds()})(f));return c.getTime()};a.prototype.getLens=function(){return this.lens};a.prototype.setLens=function(c){if(c!==this.lens){var d=this.lens;this.lens=c;this.lensName=a.Lens[this.lens];this.firePropertyChange("LENS",d,c)}};a.prototype.setCamera=function(c){this.setX(c.getX());this.setY(c.getY());this.setZ(c.getZ());this.setYaw(c.getYaw());this.setPitch(c.getPitch());this.setFieldOfView(c.getFieldOfView())};a.prototype.clone=function(){var c=this;return(function(e){if(b.prototype.clone!=undefined){return b.prototype.clone.call(c)}else{var f=Object.create(e);for(var d in e){if(e.hasOwnProperty(d)){f[d]=e[d]}}return f}})(this)};return a}(HomeObject));Camera.__class="com.eteks.sweethome3d.model.Camera";Camera.__interfaces=["java.lang.Cloneable","java.io.Serializable"];(function(b){var a;(function(c){c[c.PINHOLE=0]="PINHOLE";c[c.NORMAL=1]="NORMAL";c[c.FISHEYE=2]="FISHEYE";c[c.SPHERICAL=3]="SPHERICAL"})(a=b.Lens||(b.Lens={}))})(Camera||(Camera={}));Camera.__transients=["lens","propertyChangeSupport"];var Level=(function(b){__extends(a,b);function a(d,c,k,g,l){var i=this;if(((typeof d==="string")||d===null)&&((typeof c==="string")||c===null)&&((typeof k==="number")||k===null)&&((typeof g==="number")||g===null)&&((typeof l==="number")||l===null)){var j=arguments;i=b.call(this,d)||this;if(i.name===undefined){i.name=null}if(i.elevation===undefined){i.elevation=0}if(i.floorThickness===undefined){i.floorThickness=0}if(i.height===undefined){i.height=0}if(i.backgroundImage===undefined){i.backgroundImage=null}if(i.visible===undefined){i.visible=false}if(i.viewable===undefined){i.viewable=false}if(i.elevationIndex===undefined){i.elevationIndex=0}i.name=c;i.elevation=k;i.floorThickness=g;i.height=l;i.visible=true;i.viewable=true;i.elevationIndex=-1}else{if(((typeof d==="string")||d===null)&&((typeof c==="number")||c===null)&&((typeof k==="number")||k===null)&&((typeof g==="number")||g===null)&&l===undefined){var j=arguments;var h=j[0];var e=j[1];var o=j[2];var m=j[3];var f=arguments;var n=HomeObject.createId("level");i=b.call(this,n)||this;if(i.name===undefined){i.name=null}if(i.elevation===undefined){i.elevation=0}if(i.floorThickness===undefined){i.floorThickness=0}if(i.height===undefined){i.height=0}if(i.backgroundImage===undefined){i.backgroundImage=null}if(i.visible===undefined){i.visible=false}if(i.viewable===undefined){i.viewable=false}if(i.elevationIndex===undefined){i.elevationIndex=0}i.name=h;i.elevation=e;i.floorThickness=o;i.height=m;i.visible=true;i.viewable=true;i.elevationIndex=-1;if(i.name===undefined){i.name=null}if(i.elevation===undefined){i.elevation=0}if(i.floorThickness===undefined){i.floorThickness=0}if(i.height===undefined){i.height=0}if(i.backgroundImage===undefined){i.backgroundImage=null}if(i.visible===undefined){i.visible=false}if(i.viewable===undefined){i.viewable=false}if(i.elevationIndex===undefined){i.elevationIndex=0}}else{throw new Error("invalid overload")}}return i}a.prototype.getName=function(){return this.name};a.prototype.setName=function(c){if(c!==this.name&&(c==null||!(c===this.name))){var d=this.name;this.name=c;this.firePropertyChange("NAME",d,c)}};a.prototype.getElevation=function(){return this.elevation};a.prototype.setElevation=function(d){if(d!==this.elevation){var c=this.elevation;this.elevation=d;this.firePropertyChange("ELEVATION",c,d)}};a.prototype.getFloorThickness=function(){return this.floorThickness};a.prototype.setFloorThickness=function(d){if(d!==this.floorThickness){var c=this.floorThickness;this.floorThickness=d;this.firePropertyChange("FLOOR_THICKNESS",c,d)}};a.prototype.getHeight=function(){return this.height};a.prototype.setHeight=function(c){if(c!==this.height){var d=this.height;this.height=c;this.firePropertyChange("HEIGHT",d,c)}};a.prototype.getBackgroundImage=function(){return this.backgroundImage};a.prototype.setBackgroundImage=function(d){if(d!==this.backgroundImage){var c=this.backgroundImage;this.backgroundImage=d;this.firePropertyChange("BACKGROUND_IMAGE",c,d)}};a.prototype.isVisible=function(){return this.visible};a.prototype.setVisible=function(c){if(c!==this.visible){this.visible=c;this.firePropertyChange("VISIBLE",!c,c)}};a.prototype.isViewable=function(){return this.viewable};a.prototype.setViewable=function(c){if(c!==this.viewable){this.viewable=c;this.firePropertyChange("VIEWABLE",!c,c)}};a.prototype.isViewableAndVisible=function(){return this.viewable&&this.visible};a.prototype.getElevationIndex=function(){return this.elevationIndex};a.prototype.setElevationIndex=function(c){if(c!==this.elevationIndex){var d=this.elevationIndex;this.elevationIndex=c;this.firePropertyChange("ELEVATION_INDEX",d,c)}};a.prototype.clone=function(){var c=this;return(function(e){if(b.prototype.clone!=undefined){return b.prototype.clone.call(c)}else{var f=Object.create(e);for(var d in e){if(e.hasOwnProperty(d)){f[d]=e[d]}}return f}})(this)};return a}(HomeObject));Level.__class="com.eteks.sweethome3d.model.Level";Level.__interfaces=["java.lang.Cloneable","java.io.Serializable"];Level.__transients=["propertyChangeSupport"];var Polyline=(function(b){__extends(a,b);function a(I,N,q,r,t,U,H,p,c,aj,G){var j=this;if(((typeof I==="string")||I===null)&&((N!=null&&N instanceof Array&&(N.length==0||N[0]==null||N[0] instanceof Array))||N===null)&&((typeof q==="number")||q===null)&&((typeof r==="number")||r===null)&&((typeof t==="number")||t===null)&&((typeof U==="number")||U===null)&&((typeof H==="number")||H===null)&&((typeof p==="number")||p===null)&&((typeof c==="number")||c===null)&&((typeof aj==="boolean")||aj===null)&&((typeof G==="number")||G===null)){var ab=arguments;j=b.call(this,I)||this;if(j.points===undefined){j.points=null}if(j.thickness===undefined){j.thickness=0}if(j.capStyle===undefined){j.capStyle=null}if(j.capStyleName===undefined){j.capStyleName=null}if(j.joinStyle===undefined){j.joinStyle=null}if(j.joinStyleName===undefined){j.joinStyleName=null}if(j.dashStyle===undefined){j.dashStyle=null}if(j.dashStyleName===undefined){j.dashStyleName=null}if(j.dashPattern===undefined){j.dashPattern=null}if(j.dashOffset===undefined){j.dashOffset=0}if(j.startArrowStyle===undefined){j.startArrowStyle=null}if(j.startArrowStyleName===undefined){j.startArrowStyleName=null}if(j.endArrowStyle===undefined){j.endArrowStyle=null}if(j.endArrowStyleName===undefined){j.endArrowStyleName=null}if(j.closedPath===undefined){j.closedPath=false}if(j.color===undefined){j.color=0}if(j.elevation===undefined){j.elevation=null}if(j.level===undefined){j.level=null}if(j.polylinePathCache===undefined){j.polylinePathCache=null}if(j.shapeCache===undefined){j.shapeCache=null}j.points=j.deepCopy(N);j.thickness=q;j.capStyle=r;j.joinStyle=t;j.dashStyle=U;j.dashOffset=H;j.startArrowStyle=p;j.endArrowStyle=c;j.closedPath=aj;j.color=G}else{if(((I!=null&&I instanceof Array&&(I.length==0||I[0]==null||I[0] instanceof Array))||I===null)&&((typeof N==="number")||N===null)&&((typeof q==="number")||q===null)&&((typeof r==="number")||r===null)&&((typeof t==="number")||t===null)&&((typeof U==="number")||U===null)&&((typeof H==="number")||H===null)&&((typeof p==="number")||p===null)&&((typeof c==="boolean")||c===null)&&((typeof aj==="number")||aj===null)&&G===undefined){var ab=arguments;var ai=ab[0];var z=ab[1];var S=ab[2];var W=ab[3];var e=ab[4];var F=ab[5];var i=ab[6];var o=ab[7];var C=ab[8];var Y=ab[9];var k=arguments;var Q=HomeObject.createId("polyline");j=b.call(this,Q)||this;if(j.points===undefined){j.points=null}if(j.thickness===undefined){j.thickness=0}if(j.capStyle===undefined){j.capStyle=null}if(j.capStyleName===undefined){j.capStyleName=null}if(j.joinStyle===undefined){j.joinStyle=null}if(j.joinStyleName===undefined){j.joinStyleName=null}if(j.dashStyle===undefined){j.dashStyle=null}if(j.dashStyleName===undefined){j.dashStyleName=null}if(j.dashPattern===undefined){j.dashPattern=null}if(j.dashOffset===undefined){j.dashOffset=0}if(j.startArrowStyle===undefined){j.startArrowStyle=null}if(j.startArrowStyleName===undefined){j.startArrowStyleName=null}if(j.endArrowStyle===undefined){j.endArrowStyle=null}if(j.endArrowStyleName===undefined){j.endArrowStyleName=null}if(j.closedPath===undefined){j.closedPath=false}if(j.color===undefined){j.color=0}if(j.elevation===undefined){j.elevation=null}if(j.level===undefined){j.level=null}if(j.polylinePathCache===undefined){j.polylinePathCache=null}if(j.shapeCache===undefined){j.shapeCache=null}j.points=j.deepCopy(ai);j.thickness=z;j.capStyle=S;j.joinStyle=W;j.dashStyle=e;j.dashOffset=F;j.startArrowStyle=i;j.endArrowStyle=o;j.closedPath=C;j.color=Y;if(j.points===undefined){j.points=null}if(j.thickness===undefined){j.thickness=0}if(j.capStyle===undefined){j.capStyle=null}if(j.capStyleName===undefined){j.capStyleName=null}if(j.joinStyle===undefined){j.joinStyle=null}if(j.joinStyleName===undefined){j.joinStyleName=null}if(j.dashStyle===undefined){j.dashStyle=null}if(j.dashStyleName===undefined){j.dashStyleName=null}if(j.dashPattern===undefined){j.dashPattern=null}if(j.dashOffset===undefined){j.dashOffset=0}if(j.startArrowStyle===undefined){j.startArrowStyle=null}if(j.startArrowStyleName===undefined){j.startArrowStyleName=null}if(j.endArrowStyle===undefined){j.endArrowStyle=null}if(j.endArrowStyleName===undefined){j.endArrowStyleName=null}if(j.closedPath===undefined){j.closedPath=false}if(j.color===undefined){j.color=0}if(j.elevation===undefined){j.elevation=null}if(j.level===undefined){j.level=null}if(j.polylinePathCache===undefined){j.polylinePathCache=null}if(j.shapeCache===undefined){j.shapeCache=null}}else{if(((I!=null&&I instanceof Array&&(I.length==0||I[0]==null||I[0] instanceof Array))||I===null)&&((typeof N==="number")||N===null)&&((typeof q==="number")||q===null)&&((typeof r==="number")||r===null)&&((typeof t==="number")||t===null)&&((typeof U==="number")||U===null)&&((typeof H==="number")||H===null)&&((typeof p==="boolean")||p===null)&&((typeof c==="number")||c===null)&&aj===undefined&&G===undefined){var ab=arguments;var ah=ab[0];var w=ab[1];var P=ab[2];var T=ab[3];var d=ab[4];var h=ab[5];var n=ab[6];var A=ab[7];var X=ab[8];var af=arguments;var E=0;var ae=arguments;var M=HomeObject.createId("polyline");j=b.call(this,M)||this;if(j.points===undefined){j.points=null}if(j.thickness===undefined){j.thickness=0}if(j.capStyle===undefined){j.capStyle=null}if(j.capStyleName===undefined){j.capStyleName=null}if(j.joinStyle===undefined){j.joinStyle=null}if(j.joinStyleName===undefined){j.joinStyleName=null}if(j.dashStyle===undefined){j.dashStyle=null}if(j.dashStyleName===undefined){j.dashStyleName=null}if(j.dashPattern===undefined){j.dashPattern=null}if(j.dashOffset===undefined){j.dashOffset=0}if(j.startArrowStyle===undefined){j.startArrowStyle=null}if(j.startArrowStyleName===undefined){j.startArrowStyleName=null}if(j.endArrowStyle===undefined){j.endArrowStyle=null}if(j.endArrowStyleName===undefined){j.endArrowStyleName=null}if(j.closedPath===undefined){j.closedPath=false}if(j.color===undefined){j.color=0}if(j.elevation===undefined){j.elevation=null}if(j.level===undefined){j.level=null}if(j.polylinePathCache===undefined){j.polylinePathCache=null}if(j.shapeCache===undefined){j.shapeCache=null}j.points=j.deepCopy(ah);j.thickness=w;j.capStyle=P;j.joinStyle=T;j.dashStyle=d;j.dashOffset=E;j.startArrowStyle=h;j.endArrowStyle=n;j.closedPath=A;j.color=X;if(j.points===undefined){j.points=null}if(j.thickness===undefined){j.thickness=0}if(j.capStyle===undefined){j.capStyle=null}if(j.capStyleName===undefined){j.capStyleName=null}if(j.joinStyle===undefined){j.joinStyle=null}if(j.joinStyleName===undefined){j.joinStyleName=null}if(j.dashStyle===undefined){j.dashStyle=null}if(j.dashStyleName===undefined){j.dashStyleName=null}if(j.dashPattern===undefined){j.dashPattern=null}if(j.dashOffset===undefined){j.dashOffset=0}if(j.startArrowStyle===undefined){j.startArrowStyle=null}if(j.startArrowStyleName===undefined){j.startArrowStyleName=null}if(j.endArrowStyle===undefined){j.endArrowStyle=null}if(j.endArrowStyleName===undefined){j.endArrowStyleName=null}if(j.closedPath===undefined){j.closedPath=false}if(j.color===undefined){j.color=0}if(j.elevation===undefined){j.elevation=null}if(j.level===undefined){j.level=null}if(j.polylinePathCache===undefined){j.polylinePathCache=null}if(j.shapeCache===undefined){j.shapeCache=null}if(j.points===undefined){j.points=null}if(j.thickness===undefined){j.thickness=0}if(j.capStyle===undefined){j.capStyle=null}if(j.capStyleName===undefined){j.capStyleName=null}if(j.joinStyle===undefined){j.joinStyle=null}if(j.joinStyleName===undefined){j.joinStyleName=null}if(j.dashStyle===undefined){j.dashStyle=null}if(j.dashStyleName===undefined){j.dashStyleName=null}if(j.dashPattern===undefined){j.dashPattern=null}if(j.dashOffset===undefined){j.dashOffset=0}if(j.startArrowStyle===undefined){j.startArrowStyle=null}if(j.startArrowStyleName===undefined){j.startArrowStyleName=null}if(j.endArrowStyle===undefined){j.endArrowStyle=null}if(j.endArrowStyleName===undefined){j.endArrowStyleName=null}if(j.closedPath===undefined){j.closedPath=false}if(j.color===undefined){j.color=0}if(j.elevation===undefined){j.elevation=null}if(j.level===undefined){j.level=null}if(j.polylinePathCache===undefined){j.polylinePathCache=null}if(j.shapeCache===undefined){j.shapeCache=null}}else{if(((typeof I==="string")||I===null)&&((N!=null&&N instanceof Array&&(N.length==0||N[0]==null||N[0] instanceof Array))||N===null)&&q===undefined&&r===undefined&&t===undefined&&U===undefined&&H===undefined&&p===undefined&&c===undefined&&aj===undefined&&G===undefined){var ab=arguments;var ad=arguments;var u=1;var L=a.CapStyle.BUTT;var O=a.JoinStyle.MITER;var al=a.DashStyle.SOLID;var D=0;var g=a.ArrowStyle.NONE;var m=a.ArrowStyle.NONE;var y=false;var V=-16777216;j=b.call(this,I)||this;if(j.points===undefined){j.points=null}if(j.thickness===undefined){j.thickness=0}if(j.capStyle===undefined){j.capStyle=null}if(j.capStyleName===undefined){j.capStyleName=null}if(j.joinStyle===undefined){j.joinStyle=null}if(j.joinStyleName===undefined){j.joinStyleName=null}if(j.dashStyle===undefined){j.dashStyle=null}if(j.dashStyleName===undefined){j.dashStyleName=null}if(j.dashPattern===undefined){j.dashPattern=null}if(j.dashOffset===undefined){j.dashOffset=0}if(j.startArrowStyle===undefined){j.startArrowStyle=null}if(j.startArrowStyleName===undefined){j.startArrowStyleName=null}if(j.endArrowStyle===undefined){j.endArrowStyle=null}if(j.endArrowStyleName===undefined){j.endArrowStyleName=null}if(j.closedPath===undefined){j.closedPath=false}if(j.color===undefined){j.color=0}if(j.elevation===undefined){j.elevation=null}if(j.level===undefined){j.level=null}if(j.polylinePathCache===undefined){j.polylinePathCache=null}if(j.shapeCache===undefined){j.shapeCache=null}j.points=j.deepCopy(N);j.thickness=u;j.capStyle=L;j.joinStyle=O;j.dashStyle=al;j.dashOffset=D;j.startArrowStyle=g;j.endArrowStyle=m;j.closedPath=y;j.color=V;if(j.points===undefined){j.points=null}if(j.thickness===undefined){j.thickness=0}if(j.capStyle===undefined){j.capStyle=null}if(j.capStyleName===undefined){j.capStyleName=null}if(j.joinStyle===undefined){j.joinStyle=null}if(j.joinStyleName===undefined){j.joinStyleName=null}if(j.dashStyle===undefined){j.dashStyle=null}if(j.dashStyleName===undefined){j.dashStyleName=null}if(j.dashPattern===undefined){j.dashPattern=null}if(j.dashOffset===undefined){j.dashOffset=0}if(j.startArrowStyle===undefined){j.startArrowStyle=null}if(j.startArrowStyleName===undefined){j.startArrowStyleName=null}if(j.endArrowStyle===undefined){j.endArrowStyle=null}if(j.endArrowStyleName===undefined){j.endArrowStyleName=null}if(j.closedPath===undefined){j.closedPath=false}if(j.color===undefined){j.color=0}if(j.elevation===undefined){j.elevation=null}if(j.level===undefined){j.level=null}if(j.polylinePathCache===undefined){j.polylinePathCache=null}if(j.shapeCache===undefined){j.shapeCache=null}}else{if(((I!=null&&I instanceof Array&&(I.length==0||I[0]==null||I[0] instanceof Array))||I===null)&&N===undefined&&q===undefined&&r===undefined&&t===undefined&&U===undefined&&H===undefined&&p===undefined&&c===undefined&&aj===undefined&&G===undefined){var ab=arguments;var ag=ab[0];var ac=arguments;var s=1;var J=a.CapStyle.BUTT;var K=a.JoinStyle.MITER;var ak=a.DashStyle.SOLID;var f=a.ArrowStyle.NONE;var l=a.ArrowStyle.NONE;var v=false;var R=-16777216;var aa=arguments;var B=0;var Z=arguments;var x=HomeObject.createId("polyline");j=b.call(this,x)||this;if(j.points===undefined){j.points=null}if(j.thickness===undefined){j.thickness=0}if(j.capStyle===undefined){j.capStyle=null}if(j.capStyleName===undefined){j.capStyleName=null}if(j.joinStyle===undefined){j.joinStyle=null}if(j.joinStyleName===undefined){j.joinStyleName=null}if(j.dashStyle===undefined){j.dashStyle=null}if(j.dashStyleName===undefined){j.dashStyleName=null}if(j.dashPattern===undefined){j.dashPattern=null}if(j.dashOffset===undefined){j.dashOffset=0}if(j.startArrowStyle===undefined){j.startArrowStyle=null}if(j.startArrowStyleName===undefined){j.startArrowStyleName=null}if(j.endArrowStyle===undefined){j.endArrowStyle=null}if(j.endArrowStyleName===undefined){j.endArrowStyleName=null}if(j.closedPath===undefined){j.closedPath=false}if(j.color===undefined){j.color=0}if(j.elevation===undefined){j.elevation=null}if(j.level===undefined){j.level=null}if(j.polylinePathCache===undefined){j.polylinePathCache=null}if(j.shapeCache===undefined){j.shapeCache=null}j.points=j.deepCopy(ag);j.thickness=s;j.capStyle=J;j.joinStyle=K;j.dashStyle=ak;j.dashOffset=B;j.startArrowStyle=f;j.endArrowStyle=l;j.closedPath=v;j.color=R;if(j.points===undefined){j.points=null}if(j.thickness===undefined){j.thickness=0}if(j.capStyle===undefined){j.capStyle=null}if(j.capStyleName===undefined){j.capStyleName=null}if(j.joinStyle===undefined){j.joinStyle=null}if(j.joinStyleName===undefined){j.joinStyleName=null}if(j.dashStyle===undefined){j.dashStyle=null}if(j.dashStyleName===undefined){j.dashStyleName=null}if(j.dashPattern===undefined){j.dashPattern=null}if(j.dashOffset===undefined){j.dashOffset=0}if(j.startArrowStyle===undefined){j.startArrowStyle=null}if(j.startArrowStyleName===undefined){j.startArrowStyleName=null}if(j.endArrowStyle===undefined){j.endArrowStyle=null}if(j.endArrowStyleName===undefined){j.endArrowStyleName=null}if(j.closedPath===undefined){j.closedPath=false}if(j.color===undefined){j.color=0}if(j.elevation===undefined){j.elevation=null}if(j.level===undefined){j.level=null}if(j.polylinePathCache===undefined){j.polylinePathCache=null}if(j.shapeCache===undefined){j.shapeCache=null}if(j.points===undefined){j.points=null}if(j.thickness===undefined){j.thickness=0}if(j.capStyle===undefined){j.capStyle=null}if(j.capStyleName===undefined){j.capStyleName=null}if(j.joinStyle===undefined){j.joinStyle=null}if(j.joinStyleName===undefined){j.joinStyleName=null}if(j.dashStyle===undefined){j.dashStyle=null}if(j.dashStyleName===undefined){j.dashStyleName=null}if(j.dashPattern===undefined){j.dashPattern=null}if(j.dashOffset===undefined){j.dashOffset=0}if(j.startArrowStyle===undefined){j.startArrowStyle=null}if(j.startArrowStyleName===undefined){j.startArrowStyleName=null}if(j.endArrowStyle===undefined){j.endArrowStyle=null}if(j.endArrowStyleName===undefined){j.endArrowStyleName=null}if(j.closedPath===undefined){j.closedPath=false}if(j.color===undefined){j.color=0}if(j.elevation===undefined){j.elevation=null}if(j.level===undefined){j.level=null}if(j.polylinePathCache===undefined){j.polylinePathCache=null}if(j.shapeCache===undefined){j.shapeCache=null}if(j.points===undefined){j.points=null}if(j.thickness===undefined){j.thickness=0}if(j.capStyle===undefined){j.capStyle=null}if(j.capStyleName===undefined){j.capStyleName=null}if(j.joinStyle===undefined){j.joinStyle=null}if(j.joinStyleName===undefined){j.joinStyleName=null}if(j.dashStyle===undefined){j.dashStyle=null}if(j.dashStyleName===undefined){j.dashStyleName=null}if(j.dashPattern===undefined){j.dashPattern=null}if(j.dashOffset===undefined){j.dashOffset=0}if(j.startArrowStyle===undefined){j.startArrowStyle=null}if(j.startArrowStyleName===undefined){j.startArrowStyleName=null}if(j.endArrowStyle===undefined){j.endArrowStyle=null}if(j.endArrowStyleName===undefined){j.endArrowStyleName=null}if(j.closedPath===undefined){j.closedPath=false}if(j.color===undefined){j.color=0}if(j.elevation===undefined){j.elevation=null}if(j.level===undefined){j.level=null}if(j.polylinePathCache===undefined){j.polylinePathCache=null}if(j.shapeCache===undefined){j.shapeCache=null}}else{throw new Error("invalid overload")}}}}}return j}a.prototype.getPoints=function(){return this.deepCopy(this.points)};a.prototype.getPointCount=function(){return this.points.length};a.prototype.deepCopy=function(e){var c=(function(g){var f=[];while(g-->0){f.push(null)}return f})(e.length);for(var d=0;d<e.length;d++){c[d]=e[d].slice(0)}return c};a.prototype.setPoints=function(c){if(!(JSON.stringify(this.points)===JSON.stringify(c))){this.updatePoints(c)}};a.prototype.updatePoints=function(d){var c=this.points;this.points=this.deepCopy(d);this.polylinePathCache=null;this.shapeCache=null;this.firePropertyChange("POINTS",c,d)};a.prototype.addPoint$float$float=function(c,d){this.addPoint$float$float$int(c,d,this.points.length)};a.prototype.addPoint$float$float$int=function(c,g,d){if(d<0||d>this.points.length){throw Object.defineProperty(new Error("Invalid index "+d),"__classes",{configurable:true,value:["java.lang.Throwable","java.lang.IndexOutOfBoundsException","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]})}var f=(function(i){var h=[];while(i-->0){h.push(null)}return h})(this.points.length+1);(function(m,l,o,n,k){if(m!==o||n>=l+k){while(--k>=0){o[n++]=m[l++]}}else{var j=m.slice(l,l+k);for(var h=0;h<k;h++){o[n++]=j[h]}}})(this.points,0,f,0,d);f[d]=[c,g];(function(m,l,o,n,k){if(m!==o||n>=l+k){while(--k>=0){o[n++]=m[l++]}}else{var j=m.slice(l,l+k);for(var h=0;h<k;h++){o[n++]=j[h]}}})(this.points,d,f,d+1,this.points.length-d);var e=this.points;this.points=f;this.polylinePathCache=null;this.shapeCache=null;this.firePropertyChange("POINTS",e,this.deepCopy(this.points))};a.prototype.addPoint=function(c,e,d){if(((typeof c==="number")||c===null)&&((typeof e==="number")||e===null)&&((typeof d==="number")||d===null)){return this.addPoint$float$float$int(c,e,d)}else{if(((typeof c==="number")||c===null)&&((typeof e==="number")||e===null)&&d===undefined){return this.addPoint$float$float(c,e)}else{throw new Error("invalid overload")}}};a.prototype.setPoint=function(c,f,d){if(d<0||d>=this.points.length){throw Object.defineProperty(new Error("Invalid index "+d),"__classes",{configurable:true,value:["java.lang.Throwable","java.lang.IndexOutOfBoundsException","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]})}if(this.points[d][0]!==c||this.points[d][1]!==f){var e=this.points;this.points=this.deepCopy(this.points);this.points[d][0]=c;this.points[d][1]=f;this.polylinePathCache=null;this.shapeCache=null;this.firePropertyChange("POINTS",e,this.deepCopy(this.points))}};a.prototype.removePoint=function(c){if(c<0||c>=this.points.length){throw Object.defineProperty(new Error("Invalid index "+c),"__classes",{configurable:true,value:["java.lang.Throwable","java.lang.IndexOutOfBoundsException","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]})}var e=(function(g){var f=[];while(g-->0){f.push(null)}return f})(this.points.length-1);(function(k,j,m,l,h){if(k!==m||l>=j+h){while(--h>=0){m[l++]=k[j++]}}else{var g=k.slice(j,j+h);for(var f=0;f<h;f++){m[l++]=g[f]}}})(this.points,0,e,0,c);(function(k,j,m,l,h){if(k!==m||l>=j+h){while(--h>=0){m[l++]=k[j++]}}else{var g=k.slice(j,j+h);for(var f=0;f<h;f++){m[l++]=g[f]}}})(this.points,c+1,e,c,this.points.length-c-1);var d=this.points;this.points=e;this.polylinePathCache=null;this.shapeCache=null;this.firePropertyChange("POINTS",d,this.deepCopy(this.points))};a.prototype.getThickness=function(){return this.thickness};a.prototype.setThickness=function(d){if(d!==this.thickness){var c=this.thickness;this.thickness=d;this.firePropertyChange("THICKNESS",c,d)}};a.prototype.getCapStyle=function(){return this.capStyle};a.prototype.setCapStyle=function(d){if(d!==this.capStyle){var c=this.capStyle;this.capStyle=d;this.capStyleName=a.CapStyle[this.capStyle];this.firePropertyChange("CAP_STYLE",c,d)}};a.prototype.getJoinStyle=function(){return this.joinStyle};a.prototype.setJoinStyle=function(d){if(d!==this.joinStyle){var c=this.joinStyle;this.joinStyle=d;this.joinStyleName=a.JoinStyle[this.joinStyle];this.polylinePathCache=null;this.shapeCache=null;this.firePropertyChange("JOIN_STYLE",c,d)}};a.prototype.getDashStyle=function(){return this.dashStyle};a.prototype.setDashStyle=function(e){if(e!==this.dashStyle){var c=this.getDashPattern();var d=this.dashStyle;this.dashStyle=e;this.dashStyleName=a.DashStyle[this.dashStyle];if(e!==a.DashStyle.CUSTOMIZED){this.dashPattern=null}this.firePropertyChange("DASH_PATTERN",c,this.getDashPattern());this.firePropertyChange("DASH_STYLE",d,e)}};a.prototype.getDashPattern=function(){var c=null;if(this.dashStyle!==a.DashStyle.CUSTOMIZED){return a.DashStyle["_$wrappers"][this.dashStyle].getDashPattern()}else{if(this.dashPattern!=null){c=this.dashPattern.slice(0)}}return c};a.prototype.setDashPattern=function(d){var c=function(){var i=[];for(var j in a.DashStyle){if(!isNaN(j)){i.push(parseInt(j,10))}}return i}();for(var g=0;g<c.length;g++){var h=c[g];if(this.dashStyle!==a.DashStyle.CUSTOMIZED){if((function(k,j){if(k==null&&j==null){return true}if(k==null||j==null){return false}if(k.length!=j.length){return false}for(var l=0;l<k.length;l++){if(k[l]!=j[l]){return false}}return true})(d,a.DashStyle["_$wrappers"][h].getDashPattern())){this.setDashStyle(h);return}}}if(!(function(k,j){if(k==null&&j==null){return true}if(k==null||j==null){return false}if(k.length!=j.length){return false}for(var l=0;l<k.length;l++){if(k[l]!=j[l]){return false}}return true})(d,this.dashPattern)){var e=this.getDashPattern();this.dashPattern=d.slice(0);this.firePropertyChange("DASH_PATTERN",e,d);var f=this.dashStyle;this.dashStyle=a.DashStyle.CUSTOMIZED;this.dashStyleName=a.DashStyle[this.dashStyle];this.firePropertyChange("DASH_STYLE",f,a.DashStyle.CUSTOMIZED)}};a.prototype.getDashOffset=function(){return this.dashOffset};a.prototype.setDashOffset=function(d){if(d!==this.dashOffset){var c=this.dashOffset;this.dashOffset=d;this.firePropertyChange("DASH_OFFSET",c,d)}};a.prototype.getStartArrowStyle=function(){return this.startArrowStyle};a.prototype.setStartArrowStyle=function(d){if(d!==this.startArrowStyle){var c=this.startArrowStyle;this.startArrowStyle=d;this.startArrowStyleName=a.ArrowStyle[this.startArrowStyle];this.firePropertyChange("START_ARROW_STYLE",c,d)}};a.prototype.getEndArrowStyle=function(){return this.endArrowStyle};a.prototype.setEndArrowStyle=function(c){if(c!==this.endArrowStyle){var d=this.endArrowStyle;this.endArrowStyle=c;this.endArrowStyleName=a.ArrowStyle[this.endArrowStyle];this.firePropertyChange("END_ARROW_STYLE",d,c)}};a.prototype.isClosedPath=function(){return this.closedPath};a.prototype.setClosedPath=function(c){if(c!==this.closedPath){this.closedPath=c;this.firePropertyChange("CLOSED_PATH",!c,c)}};a.prototype.getColor=function(){return this.color};a.prototype.setColor=function(c){if(c!==this.color){var d=this.color;this.color=c;this.firePropertyChange("COLOR",d,c)}};a.prototype.getGroundElevation=function(){var c=this.getElevation();if(this.level!=null){return c+this.level.getElevation()}else{return c}};a.prototype.getElevation=function(){return this.elevation!=null?this.elevation:0};a.prototype.setElevation=function(d){if(this.elevation!=null&&d!==this.elevation){var c=this.elevation;this.elevation=d;this.firePropertyChange("ELEVATION",c,d)}};a.prototype.isVisibleIn3D=function(){return this.elevation!=null};a.prototype.setVisibleIn3D=function(c){if((c)!==((this.elevation!=null))){this.elevation=c?0:null;this.firePropertyChange("VISIBLE_IN_3D",!c,c)}};a.prototype.getLevel=function(){return this.level};a.prototype.setLevel=function(d){if(d!==this.level){var c=this.level;this.level=d;this.firePropertyChange("LEVEL",c,d)}};a.prototype.isAtLevel=function(c){return this.level===c||this.level!=null&&c!=null&&this.level.getElevation()===c.getElevation()&&this.level.getElevationIndex()<c.getElevationIndex()};a.prototype.getLength=function(){var g=[0,0];var e=[0,0];var c=[0,0];var f=0;for(var d=this.getPolylinePath().getPathIterator(null,0.1);!d.isDone();d.next()){switch((d.currentSegment(c))){case java.awt.geom.PathIterator.SEG_CLOSE:f+=java.awt.geom.Point2D.distance(g[0],g[1],e[0],e[1]);break;case java.awt.geom.PathIterator.SEG_MOVETO:(function(m,l,o,n,k){if(m!==o||n>=l+k){while(--k>=0){o[n++]=m[l++]}}else{var j=m.slice(l,l+k);for(var h=0;h<k;h++){o[n++]=j[h]}}})(c,0,g,0,2);(function(m,l,o,n,k){if(m!==o||n>=l+k){while(--k>=0){o[n++]=m[l++]}}else{var j=m.slice(l,l+k);for(var h=0;h<k;h++){o[n++]=j[h]}}})(c,0,e,0,2);break;case java.awt.geom.PathIterator.SEG_LINETO:f+=java.awt.geom.Point2D.distance(e[0],e[1],c[0],c[1]);(function(m,l,o,n,k){if(m!==o||n>=l+k){while(--k>=0){o[n++]=m[l++]}}else{var j=m.slice(l,l+k);for(var h=0;h<k;h++){o[n++]=j[h]}}})(c,0,e,0,2);break}}return f};a.prototype.intersectsRectangle=function(e,g,c,f){var d=new java.awt.geom.Rectangle2D.Float(e,g,0,0);d.add(c,f);return this.getShape().intersects(d)};a.prototype.containsPoint=function(c,e,d){return this.containsShapeAtWithMargin(this.getShape(),c,e,d)};a.prototype.getPointIndexAt=function(c,f,e){for(var d=0;d<this.points.length;d++){if(Math.abs(c-this.points[d][0])<=e&&Math.abs(f-this.points[d][1])<=e){return d}}return -1};a.prototype.containsShapeAtWithMargin=function(d,c,f,e){if(e===0){return d.contains(c,f)}else{return d.intersects(c-e,f-e,2*e,2*e)}};a.prototype.getPolylinePath=function(){if(this.polylinePathCache==null){var j=new java.awt.geom.GeneralPath();if(this.joinStyle===a.JoinStyle.CURVED){for(var g=0,c=this.closedPath?this.points.length:this.points.length-1;g<c;g++){var h=new java.awt.geom.CubicCurve2D.Float();var e=this.points[g===0?this.points.length-1:g-1];var m=this.points[g];var k=this.points[g===this.points.length-1?0:g+1];var l=[k[0]-e[0],k[1]-e[1]];var d=this.points[(g+2)%this.points.length];var f=[m[0]-d[0],m[1]-d[1]];h.setCurve(m[0],m[1],m[0]+(g!==0||this.closedPath?l[0]/3.625:0),m[1]+(g!==0||this.closedPath?l[1]/3.625:0),k[0]+(g!==this.points.length-2||this.closedPath?f[0]/3.625:0),k[1]+(g!==this.points.length-2||this.closedPath?f[1]/3.625:0),k[0],k[1]);j.append(h,true)}}else{j.moveTo(this.points[0][0],this.points[0][1]);for(var g=1;g<this.points.length;g++){j.lineTo(this.points[g][0],this.points[g][1])}if(this.closedPath){j.closePath()}}this.polylinePathCache=j}return this.polylinePathCache};a.prototype.getShape=function(){if(this.shapeCache==null){this.shapeCache=new java.awt["BasicStroke"](this.thickness).createStrokedShape(this.getPolylinePath())}return this.shapeCache};a.prototype.move=function(d,c){if(d!==0||c!==0){var f=this.getPoints();for(var e=0;e<f.length;e++){f[e][0]+=d;f[e][1]+=c}this.updatePoints(f)}};a.prototype.clone=function(){var d=this;var c=(function(g){if(b.prototype.clone!=undefined){return b.prototype.clone.call(d)}else{var f=Object.create(g);for(var e in g){if(g.hasOwnProperty(e)){f[e]=g[e]}}return f}})(this);c.level=null;return c};return a}(HomeObject));Polyline.__class="com.eteks.sweethome3d.model.Polyline";Polyline.__interfaces=["java.lang.Cloneable","com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.Elevatable","java.io.Serializable"];(function(b){var c;(function(g){g[g.BUTT=0]="BUTT";g[g.SQUARE=1]="SQUARE";g[g.ROUND=2]="ROUND"})(c=b.CapStyle||(b.CapStyle={}));var e;(function(g){g[g.BEVEL=0]="BEVEL";g[g.MITER=1]="MITER";g[g.ROUND=2]="ROUND";g[g.CURVED=3]="CURVED"})(e=b.JoinStyle||(b.JoinStyle={}));var f;(function(g){g[g.NONE=0]="NONE";g[g.DELTA=1]="DELTA";g[g.OPEN=2]="OPEN";g[g.DISC=3]="DISC"})(f=b.ArrowStyle||(b.ArrowStyle={}));var d;(function(g){g[g.SOLID=0]="SOLID";g[g.DOT=1]="DOT";g[g.DASH=2]="DASH";g[g.DASH_DOT=3]="DASH_DOT";g[g.DASH_DOT_DOT=4]="DASH_DOT_DOT";g[g.CUSTOMIZED=5]="CUSTOMIZED"})(d=b.DashStyle||(b.DashStyle={}));var a=(function(){function g(i,h){this._$ordinal=i;this._$name=h}g.prototype.getDashPattern=function(){switch((this._$ordinal)){case b.DashStyle.SOLID:return[1,0];case b.DashStyle.DOT:return[1,1];case b.DashStyle.DASH:return[4,2];case b.DashStyle.DASH_DOT:return[8,2,2,2];case b.DashStyle.DASH_DOT_DOT:return[8,2,2,2,2,2];default:return null}};g.prototype.name=function(){return this._$name};g.prototype.ordinal=function(){return this._$ordinal};g.prototype.compareTo=function(h){return this._$ordinal-(isNaN(h)?h._$ordinal:h)};return g}());b.DashStyle_$WRAPPER=a;d.__class="com.eteks.sweethome3d.model.Polyline.DashStyle";d.__interfaces=["java.lang.Comparable","java.io.Serializable"];d["_$wrappers"]=[new a(0,"SOLID"),new a(1,"DOT"),new a(2,"DASH"),new a(3,"DASH_DOT"),new a(4,"DASH_DOT_DOT"),new a(5,"CUSTOMIZED")]})(Polyline||(Polyline={}));Polyline.__transients=["capStyle","joinStyle","dashStyle","startArrowStyle","endArrowStyle","polylinePathCache","shapeCache","propertyChangeSupport"];var CatalogDoorOrWindow=(function(b){__extends(a,b);function a(U,u,w,an,M,W,V,t,l,h,c,q,g,p,i,G,F,at,ak,D,ag,ai,ap,x,au,E,Y,s,o,R,k,am,d){var j=this;if(((typeof U==="string")||U===null)&&((typeof u==="string")||u===null)&&((typeof w==="string")||w===null)&&((typeof an==="string")||an===null)&&((M!=null&&M instanceof Array&&(M.length==0||M[0]==null||(typeof M[0]==="string")))||M===null)&&((typeof W==="number")||W===null)&&((typeof V==="number")||V===null)&&((t!=null&&(t.constructor!=null&&t.constructor.__interfaces!=null&&t.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||t===null)&&((l!=null&&(l.constructor!=null&&l.constructor.__interfaces!=null&&l.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||l===null)&&((h!=null&&(h.constructor!=null&&h.constructor.__interfaces!=null&&h.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||h===null)&&((typeof c==="number")||c===null)&&((typeof q==="number")||q===null)&&((typeof g==="number")||g===null)&&((typeof p==="number")||p===null)&&((typeof i==="number")||i===null)&&((typeof G==="boolean")||G===null)&&((typeof F==="string")||F===null)&&((typeof at==="number")||at===null)&&((typeof ak==="number")||ak===null)&&((typeof D==="boolean")||D===null)&&((typeof ag==="boolean")||ag===null)&&((ai!=null&&ai instanceof Array&&(ai.length==0||ai[0]==null||(ai[0]!=null&&ai[0] instanceof Sash)))||ai===null)&&((ap!=null&&ap instanceof Array&&(ap.length==0||ap[0]==null||ap[0] instanceof Array))||ap===null)&&((typeof x==="boolean")||x===null)&&((typeof au==="number")||au===null)&&((typeof E==="string")||E===null)&&((typeof Y==="boolean")||Y===null)&&((typeof s==="boolean")||s===null)&&((typeof o==="boolean")||o===null)&&((R!=null&&R instanceof Big)||R===null)&&((k!=null&&k instanceof Big)||k===null)&&((typeof am==="string")||am===null)&&((d!=null&&(d instanceof Object))||d===null)){var al=arguments;j=b.call(this,U,u,w,an,M,W,V,t,l,h,c,q,g,p,i,G,null,ap,x,au,E,Y,s,o,false,R,k,am,d)||this;if(j.wallThickness===undefined){j.wallThickness=0}if(j.wallDistance===undefined){j.wallDistance=0}if(j.wallCutOutOnBothSides===undefined){j.wallCutOutOnBothSides=false}if(j.widthDepthDeformable===undefined){j.widthDepthDeformable=false}if(j.sashes===undefined){j.sashes=null}if(j.cutOutShape===undefined){j.cutOutShape=null}j.cutOutShape=F;j.wallThickness=at;j.wallDistance=ak;j.wallCutOutOnBothSides=D;j.widthDepthDeformable=ag;j.sashes=ai}else{if(((typeof U==="string")||U===null)&&((typeof u==="string")||u===null)&&((typeof w==="string")||w===null)&&((typeof an==="string")||an===null)&&((M!=null&&M instanceof Array&&(M.length==0||M[0]==null||(typeof M[0]==="string")))||M===null)&&((typeof W==="number")||W===null)&&((typeof V==="number")||V===null)&&((t!=null&&(t.constructor!=null&&t.constructor.__interfaces!=null&&t.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||t===null)&&((l!=null&&(l.constructor!=null&&l.constructor.__interfaces!=null&&l.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||l===null)&&((h!=null&&(h.constructor!=null&&h.constructor.__interfaces!=null&&h.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||h===null)&&((typeof c==="number")||c===null)&&((typeof q==="number")||q===null)&&((typeof g==="number")||g===null)&&((typeof p==="number")||p===null)&&((typeof i==="number")||i===null)&&((typeof G==="boolean")||G===null)&&((typeof F==="string")||F===null)&&((typeof at==="number")||at===null)&&((typeof ak==="number")||ak===null)&&((typeof D==="boolean")||D===null)&&((typeof ag==="boolean")||ag===null)&&((ai!=null&&ai instanceof Array&&(ai.length==0||ai[0]==null||(ai[0]!=null&&ai[0] instanceof Sash)))||ai===null)&&((ap!=null&&ap instanceof Array&&(ap.length==0||ap[0]==null||ap[0] instanceof Array))||ap===null)&&((typeof x==="boolean")||x===null)&&((typeof au==="number")||au===null)&&((typeof E==="string")||E===null)&&((typeof Y==="boolean")||Y===null)&&((typeof s==="boolean")||s===null)&&((typeof o==="boolean")||o===null)&&((R!=null&&R instanceof Big)||R===null)&&((k!=null&&k instanceof Big)||k===null)&&((typeof am==="string")||am===null)&&d===undefined){var al=arguments;var aj=arguments;var ah=null;j=b.call(this,U,u,w,an,M,W,V,t,l,h,c,q,g,p,i,G,null,ap,x,au,E,Y,s,o,false,R,k,am,ah)||this;if(j.wallThickness===undefined){j.wallThickness=0}if(j.wallDistance===undefined){j.wallDistance=0}if(j.wallCutOutOnBothSides===undefined){j.wallCutOutOnBothSides=false}if(j.widthDepthDeformable===undefined){j.widthDepthDeformable=false}if(j.sashes===undefined){j.sashes=null}if(j.cutOutShape===undefined){j.cutOutShape=null}j.cutOutShape=F;j.wallThickness=at;j.wallDistance=ak;j.wallCutOutOnBothSides=D;j.widthDepthDeformable=ag;j.sashes=ai;if(j.wallThickness===undefined){j.wallThickness=0}if(j.wallDistance===undefined){j.wallDistance=0}if(j.wallCutOutOnBothSides===undefined){j.wallCutOutOnBothSides=false}if(j.widthDepthDeformable===undefined){j.widthDepthDeformable=false}if(j.sashes===undefined){j.sashes=null}if(j.cutOutShape===undefined){j.cutOutShape=null}}else{if(((typeof U==="string")||U===null)&&((u!=null&&(u.constructor!=null&&u.constructor.__interfaces!=null&&u.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||u===null)&&((w!=null&&(w.constructor!=null&&w.constructor.__interfaces!=null&&w.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||w===null)&&((typeof an==="number")||an===null)&&((typeof M==="number")||M===null)&&((typeof W==="number")||W===null)&&((typeof V==="number")||V===null)&&((typeof t==="boolean")||t===null)&&((typeof l==="number")||l===null)&&((typeof h==="number")||h===null)&&((c!=null&&c instanceof Array&&(c.length==0||c[0]==null||(c[0]!=null&&c[0] instanceof Sash)))||c===null)&&((typeof q==="number")||q===null)&&((g!=null&&g instanceof Array&&(g.length==0||g[0]==null||g[0] instanceof Array))||g===null)&&((typeof p==="boolean")||p===null)&&((typeof i==="number")||i===null)&&((typeof G==="string")||G===null)&&((typeof F==="number")||F===null)&&((typeof at==="boolean")||at===null)&&ak===undefined&&D===undefined&&ag===undefined&&ai===undefined&&ap===undefined&&x===undefined&&au===undefined&&E===undefined&&Y===undefined&&s===undefined&&o===undefined&&R===undefined&&k===undefined&&am===undefined&&d===undefined){var al=arguments;var X=al[0];var C=al[1];var Q=al[2];var n=al[3];var ae=al[4];var f=al[5];var K=al[6];var af=al[7];var ar=al[8];var T=al[9];var ac=al[10];var L=al[11];var z=al[12];var N=al[13];var A=al[14];var I=al[15];var ao=al[16];var e=al[17];j=b.call(this,X,C,Q,n,ae,f,K,af,null,L,z,N,A,I,ao,e)||this;if(j.wallThickness===undefined){j.wallThickness=0}if(j.wallDistance===undefined){j.wallDistance=0}if(j.wallCutOutOnBothSides===undefined){j.wallCutOutOnBothSides=false}if(j.widthDepthDeformable===undefined){j.widthDepthDeformable=false}if(j.sashes===undefined){j.sashes=null}if(j.cutOutShape===undefined){j.cutOutShape=null}j.wallThickness=ar;j.wallDistance=T;j.wallCutOutOnBothSides=true;j.widthDepthDeformable=true;j.sashes=ac.length>0?ac.slice(0):ac;j.cutOutShape=null}else{if(((typeof U==="string")||U===null)&&((typeof u==="string")||u===null)&&((typeof w==="string")||w===null)&&((an!=null&&(an.constructor!=null&&an.constructor.__interfaces!=null&&an.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||an===null)&&((M!=null&&(M.constructor!=null&&M.constructor.__interfaces!=null&&M.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||M===null)&&((typeof W==="number")||W===null)&&((typeof V==="number")||V===null)&&((typeof t==="number")||t===null)&&((typeof l==="number")||l===null)&&((typeof h==="boolean")||h===null)&&((typeof c==="number")||c===null)&&((typeof q==="number")||q===null)&&((g!=null&&g instanceof Array&&(g.length==0||g[0]==null||(g[0]!=null&&g[0] instanceof Sash)))||g===null)&&((p!=null&&p instanceof Array&&(p.length==0||p[0]==null||p[0] instanceof Array))||p===null)&&((typeof i==="string")||i===null)&&((typeof G==="boolean")||G===null)&&((F!=null&&F instanceof Big)||F===null)&&((at!=null&&at instanceof Big)||at===null)&&ak===undefined&&D===undefined&&ag===undefined&&ai===undefined&&ap===undefined&&x===undefined&&au===undefined&&E===undefined&&Y===undefined&&s===undefined&&o===undefined&&R===undefined&&k===undefined&&am===undefined&&d===undefined){var al=arguments;var B=al[3];var P=al[4];var m=al[5];var ab=al[6];var v=al[7];var J=al[8];var ad=al[9];var aq=al[10];var S=al[11];var Z=al[12];var y=al[13];var H=al[14];var O=al[15];var aa=al[16];var r=al[17];if(j.wallThickness===undefined){j.wallThickness=0}if(j.wallDistance===undefined){j.wallDistance=0}if(j.wallCutOutOnBothSides===undefined){j.wallCutOutOnBothSides=false}if(j.widthDepthDeformable===undefined){j.widthDepthDeformable=false}if(j.sashes===undefined){j.sashes=null}if(j.cutOutShape===undefined){j.cutOutShape=null}}else{throw new Error("invalid overload")}}}}return j}a.prototype.getWallThickness=function(){return this.wallThickness};a.prototype.getWallDistance=function(){return this.wallDistance};a.prototype.isWallCutOutOnBothSides=function(){return this.wallCutOutOnBothSides};a.prototype.isWidthDepthDeformable=function(){return this.widthDepthDeformable};a.prototype.getSashes=function(){if(this.sashes.length===0){return this.sashes}else{return this.sashes.slice(0)}};a.prototype.getCutOutShape=function(){return this.cutOutShape};a.prototype.isDoorOrWindow=function(){return true};a.prototype.isHorizontallyRotatable=function(){return false};return a}(CatalogPieceOfFurniture));CatalogDoorOrWindow.__class="com.eteks.sweethome3d.model.CatalogDoorOrWindow";CatalogDoorOrWindow.__interfaces=["com.eteks.sweethome3d.model.CatalogItem","java.lang.Cloneable","com.eteks.sweethome3d.model.DoorOrWindow","com.eteks.sweethome3d.model.PieceOfFurniture","java.lang.Comparable"];var CatalogLight=(function(b){__extends(a,b);function a(t,J,y,F,r,d,c,E,k,h,u,I,s,v,z,f,H,q,e,D,g,o,j,A,G,B,x,p,i,n){var w=this;if(((typeof t==="string")||t===null)&&((typeof J==="string")||J===null)&&((typeof y==="string")||y===null)&&((typeof F==="string")||F===null)&&((r!=null&&r instanceof Array&&(r.length==0||r[0]==null||(typeof r[0]==="string")))||r===null)&&((typeof d==="number")||d===null)&&((typeof c==="number")||c===null)&&((E!=null&&(E.constructor!=null&&E.constructor.__interfaces!=null&&E.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||E===null)&&((k!=null&&(k.constructor!=null&&k.constructor.__interfaces!=null&&k.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||k===null)&&((h!=null&&(h.constructor!=null&&h.constructor.__interfaces!=null&&h.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||h===null)&&((typeof u==="number")||u===null)&&((typeof I==="number")||I===null)&&((typeof s==="number")||s===null)&&((typeof v==="number")||v===null)&&((typeof z==="number")||z===null)&&((typeof f==="boolean")||f===null)&&((H!=null&&H instanceof Array&&(H.length==0||H[0]==null||(H[0]!=null&&H[0] instanceof LightSource)))||H===null)&&((typeof q==="string")||q===null)&&((e!=null&&e instanceof Array&&(e.length==0||e[0]==null||e[0] instanceof Array))||e===null)&&((typeof D==="boolean")||D===null)&&((typeof g==="number")||g===null)&&((typeof o==="string")||o===null)&&((typeof j==="boolean")||j===null)&&((typeof A==="boolean")||A===null)&&((typeof G==="boolean")||G===null)&&((typeof B==="boolean")||B===null)&&((x!=null&&x instanceof Big)||x===null)&&((p!=null&&p instanceof Big)||p===null)&&((typeof i==="string")||i===null)&&((n!=null&&(n instanceof Object))||n===null)){var m=arguments;w=b.call(this,t,J,y,F,r,d,c,E,k,h,u,I,s,v,z,f,q,e,D,g,o,j,A,G,B,x,p,i,n)||this;if(w.lightSources===undefined){w.lightSources=null}w.lightSources=H.length>0?H.slice(0):H}else{if(((typeof t==="string")||t===null)&&((typeof J==="string")||J===null)&&((typeof y==="string")||y===null)&&((typeof F==="string")||F===null)&&((r!=null&&r instanceof Array&&(r.length==0||r[0]==null||(typeof r[0]==="string")))||r===null)&&((typeof d==="number")||d===null)&&((typeof c==="number")||c===null)&&((E!=null&&(E.constructor!=null&&E.constructor.__interfaces!=null&&E.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||E===null)&&((k!=null&&(k.constructor!=null&&k.constructor.__interfaces!=null&&k.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||k===null)&&((h!=null&&(h.constructor!=null&&h.constructor.__interfaces!=null&&h.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||h===null)&&((typeof u==="number")||u===null)&&((typeof I==="number")||I===null)&&((typeof s==="number")||s===null)&&((typeof v==="number")||v===null)&&((typeof z==="number")||z===null)&&((typeof f==="boolean")||f===null)&&((H!=null&&H instanceof Array&&(H.length==0||H[0]==null||(H[0]!=null&&H[0] instanceof LightSource)))||H===null)&&((typeof q==="string")||q===null)&&((e!=null&&e instanceof Array&&(e.length==0||e[0]==null||e[0] instanceof Array))||e===null)&&((typeof D==="boolean")||D===null)&&((typeof g==="number")||g===null)&&((typeof o==="string")||o===null)&&((typeof j==="boolean")||j===null)&&((typeof A==="boolean")||A===null)&&((typeof G==="boolean")||G===null)&&((typeof B==="boolean")||B===null)&&((x!=null&&x instanceof Big)||x===null)&&((p!=null&&p instanceof Big)||p===null)&&((typeof i==="string")||i===null)&&n===undefined){var m=arguments;var C=arguments;var l=null;w=b.call(this,t,J,y,F,r,d,c,E,k,h,u,I,s,v,z,f,q,e,D,g,o,j,A,G,B,x,p,i,l)||this;if(w.lightSources===undefined){w.lightSources=null}w.lightSources=H.length>0?H.slice(0):H;if(w.lightSources===undefined){w.lightSources=null}}else{throw new Error("invalid overload")}}return w}a.prototype.getLightSources=function(){if(this.lightSources.length===0){return this.lightSources}else{return this.lightSources.slice(0)}};return a}(CatalogPieceOfFurniture));CatalogLight.__class="com.eteks.sweethome3d.model.CatalogLight";CatalogLight.__interfaces=["com.eteks.sweethome3d.model.CatalogItem","java.lang.Cloneable","com.eteks.sweethome3d.model.PieceOfFurniture","java.lang.Comparable","com.eteks.sweethome3d.model.Light"];var HomeLight=(function(b){__extends(a,b);function a(i,d){var h=this;if(((typeof i==="string")||i===null)&&((d!=null&&(d.constructor!=null&&d.constructor.__interfaces!=null&&d.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Light")>=0))||d===null)){var f=arguments;h=b.call(this,i,d)||this;if(h.lightSources===undefined){h.lightSources=null}if(h.power===undefined){h.power=0}h.lightSources=d.getLightSources();h.power=0.5}else{if(((i!=null&&(i.constructor!=null&&i.constructor.__interfaces!=null&&i.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Light")>=0))||i===null)&&d===undefined){var f=arguments;var g=f[0];var e=arguments;var c=HomeObject.createId("light");h=b.call(this,c,g)||this;if(h.lightSources===undefined){h.lightSources=null}if(h.power===undefined){h.power=0}h.lightSources=g.getLightSources();h.power=0.5;if(h.lightSources===undefined){h.lightSources=null}if(h.power===undefined){h.power=0}}else{throw new Error("invalid overload")}}return h}a.prototype.getLightSources=function(){if(this.lightSources.length===0){return this.lightSources}else{return this.lightSources.slice(0)}};a.prototype.getPower=function(){return this.power};a.prototype.setPower=function(d){if(d!==this.power){var c=this.power;this.power=d;this.firePropertyChange("POWER",c,d)}};a.prototype.clone=function(){var c=this;return(function(e){if(b.prototype.clone!=undefined){return b.prototype.clone.call(c)}else{var f=Object.create(e);for(var d in e){if(e.hasOwnProperty(d)){f[d]=e[d]}}return f}})(this)};return a}(HomePieceOfFurniture));HomeLight.__class="com.eteks.sweethome3d.model.HomeLight";HomeLight.__interfaces=["java.lang.Cloneable","com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.PieceOfFurniture","com.eteks.sweethome3d.model.Elevatable","com.eteks.sweethome3d.model.Light","java.io.Serializable"];HomeLight.__transients=["shapeCache","propertyChangeSupport"];var HomeDoorOrWindow=(function(b){__extends(a,b);function a(i,c){var h=this;if(((typeof i==="string")||i===null)&&((c!=null&&(c.constructor!=null&&c.constructor.__interfaces!=null&&c.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.DoorOrWindow")>=0))||c===null)){var e=arguments;h=b.call(this,i,c)||this;if(h.wallThickness===undefined){h.wallThickness=0}if(h.wallDistance===undefined){h.wallDistance=0}if(h.wallWidth===undefined){h.wallWidth=0}if(h.wallLeft===undefined){h.wallLeft=0}if(h.wallHeight===undefined){h.wallHeight=0}if(h.wallTop===undefined){h.wallTop=0}if(h.wallCutOutOnBothSides===undefined){h.wallCutOutOnBothSides=false}if(h.widthDepthDeformable===undefined){h.widthDepthDeformable=false}if(h.sashes===undefined){h.sashes=null}if(h.cutOutShape===undefined){h.cutOutShape=null}if(h.boundToWall===undefined){h.boundToWall=false}h.wallThickness=c.getWallThickness();h.wallDistance=c.getWallDistance();h.wallWidth=1;h.wallLeft=0;h.wallHeight=1;h.wallTop=0;h.wallCutOutOnBothSides=c.isWallCutOutOnBothSides();h.widthDepthDeformable=c.isWidthDepthDeformable();h.sashes=c.getSashes();h.cutOutShape=c.getCutOutShape()}else{if(((i!=null&&(i.constructor!=null&&i.constructor.__interfaces!=null&&i.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.DoorOrWindow")>=0))||i===null)&&c===undefined){var e=arguments;var g=e[0];var d=arguments;var f=HomeObject.createId("doorOrWindow");h=b.call(this,f,g)||this;if(h.wallThickness===undefined){h.wallThickness=0}if(h.wallDistance===undefined){h.wallDistance=0}if(h.wallWidth===undefined){h.wallWidth=0}if(h.wallLeft===undefined){h.wallLeft=0}if(h.wallHeight===undefined){h.wallHeight=0}if(h.wallTop===undefined){h.wallTop=0}if(h.wallCutOutOnBothSides===undefined){h.wallCutOutOnBothSides=false}if(h.widthDepthDeformable===undefined){h.widthDepthDeformable=false}if(h.sashes===undefined){h.sashes=null}if(h.cutOutShape===undefined){h.cutOutShape=null}if(h.boundToWall===undefined){h.boundToWall=false}h.wallThickness=g.getWallThickness();h.wallDistance=g.getWallDistance();h.wallWidth=1;h.wallLeft=0;h.wallHeight=1;h.wallTop=0;h.wallCutOutOnBothSides=g.isWallCutOutOnBothSides();h.widthDepthDeformable=g.isWidthDepthDeformable();h.sashes=g.getSashes();h.cutOutShape=g.getCutOutShape();if(h.wallThickness===undefined){h.wallThickness=0}if(h.wallDistance===undefined){h.wallDistance=0}if(h.wallWidth===undefined){h.wallWidth=0}if(h.wallLeft===undefined){h.wallLeft=0}if(h.wallHeight===undefined){h.wallHeight=0}if(h.wallTop===undefined){h.wallTop=0}if(h.wallCutOutOnBothSides===undefined){h.wallCutOutOnBothSides=false}if(h.widthDepthDeformable===undefined){h.widthDepthDeformable=false}if(h.sashes===undefined){h.sashes=null}if(h.cutOutShape===undefined){h.cutOutShape=null}if(h.boundToWall===undefined){h.boundToWall=false}}else{throw new Error("invalid overload")}}return h}a.prototype.getWallThickness=function(){return this.wallThickness};a.prototype.setWallThickness=function(c){this.wallThickness=c};a.prototype.getWallDistance=function(){return this.wallDistance};a.prototype.setWallDistance=function(c){this.wallDistance=c};a.prototype.getWallWidth=function(){return this.wallWidth};a.prototype.setWallWidth=function(c){this.wallWidth=c};a.prototype.getWallLeft=function(){return this.wallLeft};a.prototype.setWallLeft=function(c){this.wallLeft=c};a.prototype.getWallHeight=function(){return this.wallHeight};a.prototype.setWallHeight=function(c){this.wallHeight=c};a.prototype.getWallTop=function(){return this.wallTop};a.prototype.setWallTop=function(c){this.wallTop=c};a.prototype.getSashes=function(){if(this.sashes.length===0){return this.sashes}else{return this.sashes.slice(0)}};a.prototype.setSashes=function(c){this.sashes=c.length===0?c:c.slice(0)};a.prototype.getCutOutShape=function(){return this.cutOutShape};a.prototype.isWallCutOutOnBothSides=function(){return this.wallCutOutOnBothSides};a.prototype.isWidthDepthDeformable=function(){return this.widthDepthDeformable};a.prototype.isBoundToWall=function(){return this.boundToWall};a.prototype.setBoundToWall=function(c){this.boundToWall=c};a.prototype.setX=function(c){if(this.getX()!==c){this.boundToWall=false}b.prototype.setX.call(this,c)};a.prototype.setY=function(c){if(this.getY()!==c){this.boundToWall=false}b.prototype.setY.call(this,c)};a.prototype.setAngle=function(c){if(this.getAngle()!==c){this.boundToWall=false}b.prototype.setAngle.call(this,c)};a.prototype.setDepth=function(c){if(this.getDepth()!==c){this.boundToWall=false}b.prototype.setDepth.call(this,c)};a.prototype.isDoorOrWindow=function(){return true};a.prototype.duplicate=function(){var c=b.prototype.duplicate.call(this);c.boundToWall=false;return c};return a}(HomePieceOfFurniture));HomeDoorOrWindow.__class="com.eteks.sweethome3d.model.HomeDoorOrWindow";HomeDoorOrWindow.__interfaces=["java.lang.Cloneable","com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.DoorOrWindow","com.eteks.sweethome3d.model.PieceOfFurniture","com.eteks.sweethome3d.model.Elevatable","java.io.Serializable"];HomeDoorOrWindow.__transients=["shapeCache","propertyChangeSupport"];var HomeFurnitureGroup=(function(b){__extends(a,b);function a(s,C,f,d,e){var c=this;if(((typeof s==="string")||s===null)&&((C!=null&&(C instanceof Array))||C===null)&&((typeof f==="number")||f===null)&&((typeof d==="boolean")||d===null)&&((typeof e==="string")||e===null)){var G=arguments;c=b.call(this,s,C[0])||this;if(c.furniture===undefined){c.furniture=null}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=false}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=false}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=false}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=false}if(c.fixedWidth===undefined){c.fixedWidth=0}if(c.fixedDepth===undefined){c.fixedDepth=0}if(c.fixedHeight===undefined){c.fixedHeight=0}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null}if(c.furnitureListener===undefined){c.furnitureListener=null}c.furniture=C.slice(0);c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=true;c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=true;c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=true;var h=true;var l=false;for(var I=0;I<C.length;I++){var g=C[I];h=g.isMovable()&&h;l=g.isVisible()||l}c.setName(e);c.setDescription(null);c.setNameVisible(false);c.setNameXOffset(0);c.setNameYOffset(0);c.setNameAngle(0);c.setNameStyle(null);b.prototype.setMovable.call(c,h);b.prototype.setAngle.call(c,f);b.prototype.setModelMirrored.call(c,d);c.setVisible(l);c.updateLocationAndSize(C,f,true);c.addFurnitureListener()}else{if(((s!=null&&(s instanceof Array))||s===null)&&((typeof C==="number")||C===null)&&((typeof f==="boolean")||f===null)&&((typeof d==="string")||d===null)&&e===undefined){var G=arguments;var B=G[0];var L=G[1];var z=G[2];var x=G[3];var r=arguments;var k=HomeObject.createId("furnitureGroup");c=b.call(this,k,B[0])||this;if(c.furniture===undefined){c.furniture=null}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=false}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=false}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=false}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=false}if(c.fixedWidth===undefined){c.fixedWidth=0}if(c.fixedDepth===undefined){c.fixedDepth=0}if(c.fixedHeight===undefined){c.fixedHeight=0}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null}if(c.furnitureListener===undefined){c.furnitureListener=null}c.furniture=B.slice(0);c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=true;c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=true;c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=true;var h=true;var l=false;for(var F=0;F<B.length;F++){var g=B[F];h=g.isMovable()&&h;l=g.isVisible()||l}c.setName(x);c.setDescription(null);c.setNameVisible(false);c.setNameXOffset(0);c.setNameYOffset(0);c.setNameAngle(0);c.setNameStyle(null);b.prototype.setMovable.call(c,h);b.prototype.setAngle.call(c,L);b.prototype.setModelMirrored.call(c,z);c.setVisible(l);c.updateLocationAndSize(B,L,true);c.addFurnitureListener();if(c.furniture===undefined){c.furniture=null}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=false}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=false}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=false}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=false}if(c.fixedWidth===undefined){c.fixedWidth=0}if(c.fixedDepth===undefined){c.fixedDepth=0}if(c.fixedHeight===undefined){c.fixedHeight=0}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null}if(c.furnitureListener===undefined){c.furnitureListener=null}}else{if(((s!=null&&(s instanceof Array))||s===null)&&((C!=null&&C instanceof HomePieceOfFurniture)||C===null)&&((typeof f==="string")||f===null)&&d===undefined&&e===undefined){var G=arguments;var A=G[0];var H=G[1];var v=G[2];var q=arguments;var K=H.getAngle();var w=false;var p=arguments;var j=HomeObject.createId("furnitureGroup");c=b.call(this,j,A[0])||this;if(c.furniture===undefined){c.furniture=null}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=false}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=false}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=false}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=false}if(c.fixedWidth===undefined){c.fixedWidth=0}if(c.fixedDepth===undefined){c.fixedDepth=0}if(c.fixedHeight===undefined){c.fixedHeight=0}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null}if(c.furnitureListener===undefined){c.furnitureListener=null}c.furniture=A.slice(0);c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=true;c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=true;c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=true;var h=true;var l=false;for(var E=0;E<A.length;E++){var g=A[E];h=g.isMovable()&&h;l=g.isVisible()||l}c.setName(v);c.setDescription(null);c.setNameVisible(false);c.setNameXOffset(0);c.setNameYOffset(0);c.setNameAngle(0);c.setNameStyle(null);b.prototype.setMovable.call(c,h);b.prototype.setAngle.call(c,K);b.prototype.setModelMirrored.call(c,w);c.setVisible(l);c.updateLocationAndSize(A,K,true);c.addFurnitureListener();if(c.furniture===undefined){c.furniture=null}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=false}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=false}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=false}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=false}if(c.fixedWidth===undefined){c.fixedWidth=0}if(c.fixedDepth===undefined){c.fixedDepth=0}if(c.fixedHeight===undefined){c.fixedHeight=0}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null}if(c.furnitureListener===undefined){c.furnitureListener=null}if(c.furniture===undefined){c.furniture=null}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=false}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=false}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=false}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=false}if(c.fixedWidth===undefined){c.fixedWidth=0}if(c.fixedDepth===undefined){c.fixedDepth=0}if(c.fixedHeight===undefined){c.fixedHeight=0}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null}if(c.furnitureListener===undefined){c.furnitureListener=null}}else{if(((s!=null&&(s instanceof Array))||s===null)&&((typeof C==="string")||C===null)&&f===undefined&&d===undefined&&e===undefined){var G=arguments;var y=G[0];var t=G[1];var o=arguments;var H=o[0][0];var n=arguments;var J=H.getAngle();var u=false;var m=arguments;var i=HomeObject.createId("furnitureGroup");c=b.call(this,i,y[0])||this;if(c.furniture===undefined){c.furniture=null}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=false}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=false}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=false}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=false}if(c.fixedWidth===undefined){c.fixedWidth=0}if(c.fixedDepth===undefined){c.fixedDepth=0}if(c.fixedHeight===undefined){c.fixedHeight=0}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null}if(c.furnitureListener===undefined){c.furnitureListener=null}c.furniture=y.slice(0);c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=true;c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=true;c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=true;var h=true;var l=false;for(var D=0;D<y.length;D++){var g=y[D];h=g.isMovable()&&h;l=g.isVisible()||l}c.setName(t);c.setDescription(null);c.setNameVisible(false);c.setNameXOffset(0);c.setNameYOffset(0);c.setNameAngle(0);c.setNameStyle(null);b.prototype.setMovable.call(c,h);b.prototype.setAngle.call(c,J);b.prototype.setModelMirrored.call(c,u);c.setVisible(l);c.updateLocationAndSize(y,J,true);c.addFurnitureListener();if(c.furniture===undefined){c.furniture=null}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=false}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=false}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=false}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=false}if(c.fixedWidth===undefined){c.fixedWidth=0}if(c.fixedDepth===undefined){c.fixedDepth=0}if(c.fixedHeight===undefined){c.fixedHeight=0}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null}if(c.furnitureListener===undefined){c.furnitureListener=null}if(c.furniture===undefined){c.furniture=null}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=false}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=false}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=false}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=false}if(c.fixedWidth===undefined){c.fixedWidth=0}if(c.fixedDepth===undefined){c.fixedDepth=0}if(c.fixedHeight===undefined){c.fixedHeight=0}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null}if(c.furnitureListener===undefined){c.furnitureListener=null}if(c.furniture===undefined){c.furniture=null}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=false}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=false}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=false}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=false}if(c.fixedWidth===undefined){c.fixedWidth=0}if(c.fixedDepth===undefined){c.fixedDepth=0}if(c.fixedHeight===undefined){c.fixedHeight=0}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0}if(c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency===undefined){c.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null}if(c.furnitureListener===undefined){c.furnitureListener=null}}else{throw new Error("invalid overload")}}}}return c}a.__com_eteks_sweethome3d_model_HomeFurnitureGroup_IDENTITY_$LI$=function(){if(a.__com_eteks_sweethome3d_model_HomeFurnitureGroup_IDENTITY==null){a.__com_eteks_sweethome3d_model_HomeFurnitureGroup_IDENTITY=[[1,0,0],[0,1,0],[0,0,1]]}return a.__com_eteks_sweethome3d_model_HomeFurnitureGroup_IDENTITY};a.prototype.updateLocationAndSize=function(k,x,w){this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=true;this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=true;this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=true;this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=true;this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=k[0].getCurrency();for(var p=0;p<k.length;p++){var e=k[p];this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=e.isResizable()&&this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable;this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=e.isDeformable()&&this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable;this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=e.isTexturable()&&this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable;this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=e.isDoorOrWindow()&&this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow;if(this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency!=null){if(e.getCurrency()==null||!(e.getCurrency()===this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency)){this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null}}}var r=3.4028235e+38;if(w){var z=null;for(var o=0;o<k.length;o++){var e=k[o];var c=e.getLevel();if(c!=null&&(z==null||c.getElevation()<z.getElevation())){z=c}}for(var n=0;n<k.length;n++){var e=k[n];if(e.getLevel()!=null){r=Math.min(r,e.getGroundElevation()-z.getElevation());e.setElevation(e.getGroundElevation()-z.getElevation());e.setLevel(null)}else{r=Math.min(r,e.getElevation())}}}else{for(var l=0;l<k.length;l++){var e=k[l];r=Math.min(r,e.getElevation())}}var m=0;var t=-1;for(var j=0;j<k.length;j++){var e=k[j];m=Math.max(m,e.getElevation()+e.getHeightInPlan());if(e.getDropOnTopElevation()>=0){t=Math.max(t,e.getElevation()+e.getHeightInPlan()*e.getDropOnTopElevation())}}m-=r;t-=r;var s=java.awt.geom.AffineTransform.getRotateInstance(-x);var g=null;var f=this.getFurnitureWithoutGroups(k);for(var h=0;h<f.length;h++){var e=f[h];var d=new java.awt.geom.GeneralPath();var v=e.getPoints();d.moveTo(v[0][0],v[0][1]);for(var u=1;u<v.length;u++){d.lineTo(v[u][0],v[u][1])}d.closePath();if(g==null){g=d.createTransformedShape(s).getBounds2D()}else{g.add(d.createTransformedShape(s).getBounds2D())}}var y=new java.awt.geom.Point2D.Float(g.getCenterX(),g.getCenterY());s.setToRotation(x);s.transform(y,y);if(this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable){var q=g.getWidth();b.prototype.setWidth.call(this,q);b.prototype.setWidthInPlan.call(this,q);var A=g.getHeight();b.prototype.setDepth.call(this,A);b.prototype.setDepthInPlan.call(this,A);b.prototype.setHeight.call(this,m);b.prototype.setHeightInPlan.call(this,m)}else{this.fixedWidth=g.getWidth();this.fixedDepth=g.getHeight();this.fixedHeight=m}this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=t/m;b.prototype.setX.call(this,y.getX());b.prototype.setY.call(this,y.getY());b.prototype.setElevation.call(this,r)};a.prototype.addFurnitureListener=function(){this.furnitureListener=new a.LocationAndSizeChangeListener(this);for(var d=0;d<this.furniture.length;d++){var c=this.furniture[d];c.addPropertyChangeListener(this.furnitureListener)}};a.prototype.getFurnitureWithoutGroups=function(f){var e=([]);for(var c=0;c<f.length;c++){var d=f[c];if(d!=null&&d instanceof a){(function(h,g){return h.push.apply(h,g)})(e,this.getFurnitureWithoutGroups(d.getFurniture()))}else{(e.push(d)>0)}}return e};a.prototype.getAllFurniture=function(){var e=(this.furniture.slice(0));var f=this.getFurniture();for(var c=0;c<f.length;c++){var d=f[c];if(d!=null&&d instanceof a){(function(h,g){return h.push.apply(h,g)})(e,d.getAllFurniture())}}return e};a.prototype.getFurniture=function(){return this.furniture.slice(0)};a.prototype.addPieceOfFurniture=function(d,c){this.furniture=(this.furniture.slice(0));d.setLevel(this.getLevel());this.furniture.splice(c,0,d);d.addPropertyChangeListener(this.furnitureListener);this.updateLocationAndSize(this.furniture,this.getAngle(),false)};a.prototype.deletePieceOfFurniture=function(d){var c=this.furniture.indexOf(d);if(c!==-1){if(this.furniture.length>1){d.setLevel(null);d.removePropertyChangeListener(this.furnitureListener);this.furniture=(this.furniture.slice(0));this.furniture.splice(c,1)[0];this.updateLocationAndSize(this.furniture,this.getAngle(),false)}else{throw new IllegalStateException("Group can't be empty")}}};a.prototype.getCatalogId=function(){return null};a.prototype.getInformation=function(){return null};a.prototype.isMovable=function(){return b.prototype.isMovable.call(this)};a.prototype.setMovable=function(c){b.prototype.setMovable.call(this,c)};a.prototype.isDoorOrWindow=function(){return this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow};a.prototype.isResizable=function(){return this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable};a.prototype.isDeformable=function(){return this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable};a.prototype.isTexturable=function(){return this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable};a.prototype.isHorizontallyRotatable=function(){return false};a.prototype.getWidth=function(){if(!this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable){return this.fixedWidth}else{return b.prototype.getWidth.call(this)}};a.prototype.getWidthInPlan=function(){return this.getWidth()};a.prototype.getDepth=function(){if(!this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable){return this.fixedDepth}else{return b.prototype.getDepth.call(this)}};a.prototype.getDepthInPlan=function(){return this.getDepth()};a.prototype.getHeight=function(){if(!this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable){return this.fixedHeight}else{return b.prototype.getHeight.call(this)}};a.prototype.getHeightInPlan=function(){return this.getHeight()};a.prototype.isHorizontallyRotated=function(){if(b.prototype.isHorizontallyRotated.call(this)){return true}else{var e=this.getFurniture();for(var d=0;d<e.length;d++){var c=e[d];if(c.isHorizontallyRotated()){return true}}return false}};a.prototype.getDropOnTopElevation=function(){return this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation};a.prototype.getIcon=function(){return null};a.prototype.getPlanIcon=function(){return null};a.prototype.getModel=function(){return null};a.prototype.setModelSize=function(c){throw new IllegalStateException("Can't set model size of a group")};a.prototype.getModelSize=function(){return null};a.prototype.getModelRotation=function(){return a.__com_eteks_sweethome3d_model_HomeFurnitureGroup_IDENTITY_$LI$()};a.prototype.isModelCenteredAtOrigin=function(){return true};a.prototype.getModelTransformations=function(){return null};a.prototype.setModelTransformations=function(d){if(this.isDeformable()){for(var e=0;e<this.furniture.length;e++){var c=this.furniture[e];c.setModelTransformations(d)}}};a.prototype.getPitch=function(){return 0};a.prototype.getRoll=function(){return 0};a.prototype.getStaircaseCutOutShape=function(){return null};a.prototype.getCreator=function(){return null};a.prototype.getPrice=function(){var d=null;for(var e=0;e<this.furniture.length;e++){var c=this.furniture[e];if(c.getPrice()!=null){if(d==null){d=c.getPrice()}else{d=d.plus(c.getPrice())}}}if(d==null){return b.prototype.getPrice.call(this)}else{return d}};a.prototype.setPrice=function(d){for(var e=0;e<this.furniture.length;e++){var c=this.furniture[e];if(c.getPrice()!=null){throw new UnsupportedOperationException("Can't change the price of a group containing pieces with a price")}}b.prototype.setPrice.call(this,d)};a.prototype.getValueAddedTaxPercentage=function(){var d=this.furniture[0].getValueAddedTaxPercentage();if(d!=null){for(var f=0;f<this.furniture.length;f++){var e=this.furniture[f];var c=e.getValueAddedTaxPercentage();if(c==null||!((d)!=null?c.eq(d):(c===(d)))){return null}}}return d};a.prototype.getCurrency=function(){return this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency};a.prototype.getValueAddedTax=function(){var c=null;for(var f=0;f<this.furniture.length;f++){var d=this.furniture[f];var e=d.getValueAddedTax();if(e!=null){if(c==null){c=e}else{c=c.plus(e)}}}return c};a.prototype.getPriceValueAddedTaxIncluded=function(){var c=null;for(var e=0;e<this.furniture.length;e++){var d=this.furniture[e];if(d.getPrice()!=null){if(c==null){c=d.getPriceValueAddedTaxIncluded()}else{c=c.plus(d.getPriceValueAddedTaxIncluded())}}}return c};a.prototype.isBackFaceShown=function(){return false};a.prototype.getColor=function(){return null};a.prototype.setColor=function(c){if(this.isTexturable()){for(var e=0;e<this.furniture.length;e++){var d=this.furniture[e];d.setColor(c)}}};a.prototype.getTexture=function(){return null};a.prototype.setTexture=function(e){if(this.isTexturable()){for(var c=0;c<this.furniture.length;c++){var d=this.furniture[c];d.setTexture(e)}}};a.prototype.getModelMaterials=function(){return null};a.prototype.setModelMaterials=function(d){if(this.isTexturable()){for(var c=0;c<this.furniture.length;c++){var e=this.furniture[c];e.setModelMaterials(d)}}};a.prototype.getShininess=function(){return null};a.prototype.setShininess=function(d){if(this.isTexturable()){for(var c=0;c<this.furniture.length;c++){var e=this.furniture[c];e.setShininess(d)}}};a.prototype.setAngle=function(j){if(j!==this.getAngle()){var d=j-this.getAngle();var f=Math.cos(d);var g=Math.sin(d);for(var c=0;c<this.furniture.length;c++){var e=this.furniture[c];e.removePropertyChangeListener(this.furnitureListener);e.setAngle(e.getAngle()+d);var i=this.getX()+((e.getX()-this.getX())*f-(e.getY()-this.getY())*g);var h=this.getY()+((e.getX()-this.getX())*g+(e.getY()-this.getY())*f);e.setX(i);e.setY(h);e.addPropertyChangeListener(this.furnitureListener)}b.prototype.setAngle.call(this,j)}};a.prototype.setX=function(d){if(d!==this.getX()){var e=d-this.getX();for(var c=0;c<this.furniture.length;c++){var f=this.furniture[c];f.removePropertyChangeListener(this.furnitureListener);f.setX(f.getX()+e);f.addPropertyChangeListener(this.furnitureListener)}b.prototype.setX.call(this,d)}};a.prototype.setY=function(f){if(f!==this.getY()){var c=f-this.getY();for(var e=0;e<this.furniture.length;e++){var d=this.furniture[e];d.removePropertyChangeListener(this.furnitureListener);d.setY(d.getY()+c);d.addPropertyChangeListener(this.furnitureListener)}b.prototype.setY.call(this,f)}};a.prototype.setWidth=function(d){if(d!==this.getWidth()){var j=d/this.getWidth();var h=this.getAngle();for(var i=0;i<this.furniture.length;i++){var n=this.furniture[i];n.removePropertyChangeListener(this.furnitureListener);var g=n.getAngle()-h;var l=n.getWidth();var e=n.getDepth();n.setWidth(l+l*(j-1)*Math.abs(Math.cos(g)));n.setDepth(e+e*(j-1)*Math.abs(Math.sin(g)));var k=Math.cos(h);var f=Math.sin(h);var c=this.getX()+((n.getX()-this.getX())*k+(n.getY()-this.getY())*f);var m=this.getY()+((n.getX()-this.getX())*-f+(n.getY()-this.getY())*k);c=this.getX()+(c-this.getX())*j;n.setX(this.getX()+((c-this.getX())*k-(m-this.getY())*f));n.setY(this.getY()+((c-this.getX())*f+(m-this.getY())*k));n.addPropertyChangeListener(this.furnitureListener)}b.prototype.setWidth.call(this,d)}};a.prototype.setDepth=function(i){if(i!==this.getDepth()){var d=i/this.getDepth();var h=this.getAngle();for(var j=0;j<this.furniture.length;j++){var n=this.furniture[j];n.removePropertyChangeListener(this.furnitureListener);var g=n.getAngle()-h;var l=n.getWidth();var e=n.getDepth();n.setWidth(l+l*(d-1)*Math.abs(Math.sin(g)));n.setDepth(e+e*(d-1)*Math.abs(Math.cos(g)));var k=Math.cos(h);var f=Math.sin(h);var c=this.getX()+((n.getX()-this.getX())*k+(n.getY()-this.getY())*f);var m=this.getY()+((n.getX()-this.getX())*-f+(n.getY()-this.getY())*k);m=this.getY()+(m-this.getY())*d;n.setX(this.getX()+((c-this.getX())*k-(m-this.getY())*f));n.setY(this.getY()+((c-this.getX())*f+(m-this.getY())*k));n.addPropertyChangeListener(this.furnitureListener)}b.prototype.setDepth.call(this,i)}};a.prototype.setHeight=function(c){if(c!==this.getHeight()){var d=c/this.getHeight();for(var f=0;f<this.furniture.length;f++){var e=this.furniture[f];e.removePropertyChangeListener(this.furnitureListener);e.setHeight(e.getHeight()*d);e.setElevation(this.getElevation()+(e.getElevation()-this.getElevation())*d);e.addPropertyChangeListener(this.furnitureListener)}b.prototype.setHeight.call(this,c)}};a.prototype.scale=function(j){var i=this.getAngle();for(var f=0;f<this.furniture.length;f++){var d=this.furniture[f];d.removePropertyChangeListener(this.furnitureListener);d.setWidth(d.getWidth()*j);d.setDepth(d.getDepth()*j);d.setHeight(d.getHeight()*j);var c=Math.cos(i);var e=Math.sin(i);var h=this.getX()+((d.getX()-this.getX())*c+(d.getY()-this.getY())*e);var g=this.getY()+((d.getX()-this.getX())*-e+(d.getY()-this.getY())*c);h=this.getX()+(h-this.getX())*j;g=this.getY()+(g-this.getY())*j;d.setX(this.getX()+((h-this.getX())*c-(g-this.getY())*e));d.setY(this.getY()+((h-this.getX())*e+(g-this.getY())*c));d.setElevation(this.getElevation()+(d.getElevation()-this.getElevation())*j);d.addPropertyChangeListener(this.furnitureListener)}b.prototype.setWidth.call(this,this.getWidth()*j);b.prototype.setDepth.call(this,this.getDepth()*j);b.prototype.setHeight.call(this,this.getHeight()*j)};a.prototype.setElevation=function(e){if(e!==this.getElevation()){var f=e-this.getElevation();for(var d=0;d<this.furniture.length;d++){var c=this.furniture[d];c.removePropertyChangeListener(this.furnitureListener);c.setElevation(c.getElevation()+f);c.addPropertyChangeListener(this.furnitureListener)}b.prototype.setElevation.call(this,e)}};a.prototype.setModelMirrored=function(c){if(c!==this.isModelMirrored()){var j=this.getAngle();for(var f=0;f<this.furniture.length;f++){var e=this.furniture[f];e.removePropertyChangeListener(this.furnitureListener);e.setModelMirrored(!e.isModelMirrored());var d=Math.cos(j);var g=Math.sin(j);var i=this.getX()+((e.getX()-this.getX())*d+(e.getY()-this.getY())*g);var h=this.getY()+((e.getX()-this.getX())*-g+(e.getY()-this.getY())*d);i=this.getX()-(i-this.getX());e.setX(this.getX()+((i-this.getX())*d-(h-this.getY())*g));e.setY(this.getY()+((i-this.getX())*g+(h-this.getY())*d));e.addPropertyChangeListener(this.furnitureListener)}b.prototype.setModelMirrored.call(this,c)}};a.prototype.setVisible=function(e){for(var c=0;c<this.furniture.length;c++){var d=this.furniture[c];d.setVisible(e)}b.prototype.setVisible.call(this,e)};a.prototype.setLevel=function(e){for(var c=0;c<this.furniture.length;c++){var d=this.furniture[c];d.setLevel(e)}b.prototype.setLevel.call(this,e)};a.prototype.intersectsRectangle=function(e,h,d,g){for(var c=0;c<this.furniture.length;c++){var f=this.furniture[c];if(f.intersectsRectangle(e,h,d,g)){return true}}return false};a.prototype.containsPoint=function(c,g,f){for(var d=0;d<this.furniture.length;d++){var e=this.furniture[d];if(e.containsPoint(c,g,f)){return true}}return false};a.prototype.duplicate=function(){var g=b.prototype.duplicate.call(this);var d=([]);for(var c=0;c<g.furniture.length;c++){var f=g.furniture[c];f.removePropertyChangeListener(g.furnitureListener);var e=f.duplicate();(d.push(e)>0);e.addPropertyChangeListener(g.furnitureListener)}g.furniture=d.slice(0);return g};a.prototype.clone=function(){var f=this;var e=(function(i){if(b.prototype.clone!=undefined){return b.prototype.clone.call(f)}else{var g=Object.create(i);for(var h in i){if(i.hasOwnProperty(h)){g[h]=i[h]}}return g}})(this);e.furniture=([]);for(var c=0;c<this.furniture.length;c++){var d=this.furniture[c];(e.furniture.push((function(i){if(i.clone!=undefined){return i.clone()}else{var h=Object.create(i);for(var g in i){if(i.hasOwnProperty(g)){h[g]=i[g]}}return h}})(d))>0)}e.furniture=e.furniture.slice(0);e.addFurnitureListener();return e};return a}(HomePieceOfFurniture));HomeFurnitureGroup.__class="com.eteks.sweethome3d.model.HomeFurnitureGroup";HomeFurnitureGroup.__interfaces=["java.lang.Cloneable","com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.PieceOfFurniture","com.eteks.sweethome3d.model.Elevatable","java.io.Serializable"];(function(a){var b=(function(){function c(d){if(this.group===undefined){this.group=null}this.group=(d)}c.prototype.propertyChange=function(d){var e=this.group;if(e==null){d.getSource().removePropertyChangeListener(this)}else{if(("X"===d.getPropertyName())||("Y"===d.getPropertyName())||("ELEVATION"===d.getPropertyName())||("ANGLE"===d.getPropertyName())||("WIDTH_IN_PLAN"===d.getPropertyName())||("DEPTH_IN_PLAN"===d.getPropertyName())||("HEIGHT_IN_PLAN"===d.getPropertyName())){e.updateLocationAndSize(e.getFurniture(),e.getAngle(),false)}}};return c}());a.LocationAndSizeChangeListener=b;b.__class="com.eteks.sweethome3d.model.HomeFurnitureGroup.LocationAndSizeChangeListener";b.__interfaces=["java.util.EventListener","java.beans.PropertyChangeListener"]})(HomeFurnitureGroup||(HomeFurnitureGroup={}));HomeFurnitureGroup.__transients=["furnitureListener","shapeCache","propertyChangeSupport"];var ObserverCamera=(function(b){__extends(a,b);function a(c,q,n,l,g,d,h){var j=this;if(((typeof c==="string")||c===null)&&((typeof q==="number")||q===null)&&((typeof n==="number")||n===null)&&((typeof l==="number")||l===null)&&((typeof g==="number")||g===null)&&((typeof d==="number")||d===null)&&((typeof h==="number")||h===null)){var i=arguments;j=b.call(this,c,q,n,l,g,d,h)||this;if(j.fixedSize===undefined){j.fixedSize=false}if(j.shapeCache===undefined){j.shapeCache=null}if(j.rectangleShapeCache===undefined){j.rectangleShapeCache=null}}else{if(((typeof c==="number")||c===null)&&((typeof q==="number")||q===null)&&((typeof n==="number")||n===null)&&((typeof l==="number")||l===null)&&((typeof g==="number")||g===null)&&((typeof d==="number")||d===null)&&h===undefined){var i=arguments;var m=i[0];var r=i[1];var e=i[2];var p=i[3];var f=i[4];var s=i[5];var o=arguments;var k=HomeObject.createId("observerCamera");j=b.call(this,k,m,r,e,p,f,s)||this;if(j.fixedSize===undefined){j.fixedSize=false}if(j.shapeCache===undefined){j.shapeCache=null}if(j.rectangleShapeCache===undefined){j.rectangleShapeCache=null}if(j.fixedSize===undefined){j.fixedSize=false}if(j.shapeCache===undefined){j.shapeCache=null}if(j.rectangleShapeCache===undefined){j.rectangleShapeCache=null}}else{throw new Error("invalid overload")}}return j}a.prototype.setFixedSize=function(e){if(this.fixedSize!==e){var c=this.getWidth();var d=this.getDepth();var f=this.getHeight();this.fixedSize=e;this.shapeCache=null;this.rectangleShapeCache=null;this.firePropertyChange("WIDTH",c,this.getWidth());this.firePropertyChange("DEPTH",d,this.getDepth());this.firePropertyChange("HEIGHT",f,this.getHeight())}};a.prototype.isFixedSize=function(){return this.fixedSize};a.prototype.setYaw=function(c){b.prototype.setYaw.call(this,c);this.shapeCache=null;this.rectangleShapeCache=null};a.prototype.setX=function(c){b.prototype.setX.call(this,c);this.shapeCache=null;this.rectangleShapeCache=null};a.prototype.setY=function(c){b.prototype.setY.call(this,c);this.shapeCache=null;this.rectangleShapeCache=null};a.prototype.setZ=function(e){var c=this.getWidth();var d=this.getDepth();var f=this.getHeight();b.prototype.setZ.call(this,e);this.shapeCache=null;this.rectangleShapeCache=null;this.firePropertyChange("WIDTH",c,this.getWidth());this.firePropertyChange("DEPTH",d,this.getDepth());this.firePropertyChange("HEIGHT",f,this.getHeight())};a.prototype.getWidth=function(){if(this.fixedSize){return 46.6}else{var c=this.getZ()*4/14;return Math.min(Math.max(c,20),62.5)}};a.prototype.getDepth=function(){if(this.fixedSize){return 18.6}else{var c=this.getZ()*8/70;return Math.min(Math.max(c,8),25)}};a.prototype.getHeight=function(){if(this.fixedSize){return 175}else{return this.getZ()*15/14}};a.prototype.getPoints=function(){var e=(function(g){var f=function(j){if(j.length===0){return 0}else{var k=[];for(var h=0;h<j[0];h++){k.push(f(j.slice(1)))}return k}};return f(g)})([4,2]);var d=this.getRectangleShape().getPathIterator(null);for(var c=0;c<e.length;c++){d.currentSegment(e[c]);d.next()}return e};a.prototype.intersectsRectangle=function(e,g,c,f){var d=new java.awt.geom.Rectangle2D.Float(e,g,0,0);d.add(c,f);return this.getShape().intersects(d)};a.prototype.containsPoint=function(c,e,d){if(d===0){return this.getShape().contains(c,e)}else{return this.getShape().intersects(c-d,e-d,2*d,2*d)}};a.prototype.getShape=function(){if(this.shapeCache==null){var c=new java.awt.geom.Ellipse2D.Float(this.getX()-this.getWidth()/2,this.getY()-this.getDepth()/2,this.getWidth(),this.getDepth());var d=java.awt.geom.AffineTransform.getRotateInstance(this.getYaw(),this.getX(),this.getY());var f=c.getPathIterator(d);var e=new java.awt.geom.GeneralPath();e.append(f,false);this.shapeCache=e}return this.shapeCache};a.prototype.getRectangleShape=function(){if(this.rectangleShapeCache==null){var c=new java.awt.geom.Rectangle2D.Float(this.getX()-this.getWidth()/2,this.getY()-this.getDepth()/2,this.getWidth(),this.getDepth());var d=java.awt.geom.AffineTransform.getRotateInstance(this.getYaw(),this.getX(),this.getY());var e=c.getPathIterator(d);var f=new java.awt.geom.GeneralPath();f.append(e,false);this.rectangleShapeCache=f}return this.rectangleShapeCache};a.prototype.move=function(d,c){this.setX(this.getX()+d);this.setY(this.getY()+c)};a.prototype.clone=function(){var c=this;return(function(e){if(b.prototype.clone!=undefined){return b.prototype.clone.call(c)}else{var f=Object.create(e);for(var d in e){if(e.hasOwnProperty(d)){f[d]=e[d]}}return f}})(this)};return a}(Camera));ObserverCamera.__class="com.eteks.sweethome3d.model.ObserverCamera";ObserverCamera.__interfaces=["java.lang.Cloneable","com.eteks.sweethome3d.model.Selectable","java.io.Serializable"];ObserverCamera.__transients=["shapeCache","rectangleShapeCache","lens","propertyChangeSupport"];var Home=(function(){function a(g,b){if(((g!=null&&(g instanceof Array))||g===null)&&((typeof b==="number")||b===null)){var e=arguments;if(this.furniture===undefined){this.furniture=null}if(this.furnitureChangeSupport===undefined){this.furnitureChangeSupport=null}if(this.selectedItems===undefined){this.selectedItems=null}if(this.selectionListeners===undefined){this.selectionListeners=null}if(this.allLevelsSelection===undefined){this.allLevelsSelection=false}if(this.levels===undefined){this.levels=null}if(this.selectedLevel===undefined){this.selectedLevel=null}if(this.levelsChangeSupport===undefined){this.levelsChangeSupport=null}if(this.walls===undefined){this.walls=null}if(this.wallsChangeSupport===undefined){this.wallsChangeSupport=null}if(this.rooms===undefined){this.rooms=null}if(this.roomsChangeSupport===undefined){this.roomsChangeSupport=null}if(this.polylines===undefined){this.polylines=null}if(this.polylinesChangeSupport===undefined){this.polylinesChangeSupport=null}if(this.dimensionLines===undefined){this.dimensionLines=null}if(this.dimensionLinesChangeSupport===undefined){this.dimensionLinesChangeSupport=null}if(this.labels===undefined){this.labels=null}if(this.labelsChangeSupport===undefined){this.labelsChangeSupport=null}if(this.camera===undefined){this.camera=null}if(this.name===undefined){this.name=null}if(this.wallHeight===undefined){this.wallHeight=0}if(this.modified===undefined){this.modified=false}if(this.recovered===undefined){this.recovered=false}if(this.repaired===undefined){this.repaired=false}if(this.backgroundImage===undefined){this.backgroundImage=null}if(this.observerCamera===undefined){this.observerCamera=null}if(this.topCamera===undefined){this.topCamera=null}if(this.storedCameras===undefined){this.storedCameras=null}if(this.environment===undefined){this.environment=null}if(this.print===undefined){this.print=null}if(this.furnitureSortedPropertyName===undefined){this.furnitureSortedPropertyName=null}if(this.furnitureVisiblePropertyNames===undefined){this.furnitureVisiblePropertyNames=null}if(this.furnitureDescendingSorted===undefined){this.furnitureDescendingSorted=false}if(this.visualProperties===undefined){this.visualProperties=null}if(this.properties===undefined){this.properties=null}if(this.propertyChangeSupport===undefined){this.propertyChangeSupport=null}if(this.version===undefined){this.version=0}if(this.basePlanLocked===undefined){this.basePlanLocked=false}if(this.compass===undefined){this.compass=null}if(this.skyColor===undefined){this.skyColor=0}if(this.groundColor===undefined){this.groundColor=0}if(this.groundTexture===undefined){this.groundTexture=null}if(this.lightColor===undefined){this.lightColor=0}if(this.wallsAlpha===undefined){this.wallsAlpha=0}if(this.furnitureSortedProperty===undefined){this.furnitureSortedProperty=null}if(this.furnitureVisibleProperties===undefined){this.furnitureVisibleProperties=null}if(this.furnitureWithDoorsAndWindows===undefined){this.furnitureWithDoorsAndWindows=null}if(this.furnitureWithGroups===undefined){this.furnitureWithGroups=null}this.furniture=(g.slice(0));this.walls=([]);this.wallHeight=b;this.furnitureVisibleProperties=["NAME","WIDTH","DEPTH","HEIGHT","VISIBLE"].slice(0);this.init(true);this.addModelListeners()}else{if(((g!=null&&(g instanceof Array))||g===null)&&b===undefined){var e=arguments;var k=arguments;var n=250;if(this.furniture===undefined){this.furniture=null}if(this.furnitureChangeSupport===undefined){this.furnitureChangeSupport=null}if(this.selectedItems===undefined){this.selectedItems=null}if(this.selectionListeners===undefined){this.selectionListeners=null}if(this.allLevelsSelection===undefined){this.allLevelsSelection=false}if(this.levels===undefined){this.levels=null}if(this.selectedLevel===undefined){this.selectedLevel=null}if(this.levelsChangeSupport===undefined){this.levelsChangeSupport=null}if(this.walls===undefined){this.walls=null}if(this.wallsChangeSupport===undefined){this.wallsChangeSupport=null}if(this.rooms===undefined){this.rooms=null}if(this.roomsChangeSupport===undefined){this.roomsChangeSupport=null}if(this.polylines===undefined){this.polylines=null}if(this.polylinesChangeSupport===undefined){this.polylinesChangeSupport=null}if(this.dimensionLines===undefined){this.dimensionLines=null}if(this.dimensionLinesChangeSupport===undefined){this.dimensionLinesChangeSupport=null}if(this.labels===undefined){this.labels=null}if(this.labelsChangeSupport===undefined){this.labelsChangeSupport=null}if(this.camera===undefined){this.camera=null}if(this.name===undefined){this.name=null}if(this.wallHeight===undefined){this.wallHeight=0}if(this.modified===undefined){this.modified=false}if(this.recovered===undefined){this.recovered=false}if(this.repaired===undefined){this.repaired=false}if(this.backgroundImage===undefined){this.backgroundImage=null}if(this.observerCamera===undefined){this.observerCamera=null}if(this.topCamera===undefined){this.topCamera=null}if(this.storedCameras===undefined){this.storedCameras=null}if(this.environment===undefined){this.environment=null}if(this.print===undefined){this.print=null}if(this.furnitureSortedPropertyName===undefined){this.furnitureSortedPropertyName=null}if(this.furnitureVisiblePropertyNames===undefined){this.furnitureVisiblePropertyNames=null}if(this.furnitureDescendingSorted===undefined){this.furnitureDescendingSorted=false}if(this.visualProperties===undefined){this.visualProperties=null}if(this.properties===undefined){this.properties=null}if(this.propertyChangeSupport===undefined){this.propertyChangeSupport=null}if(this.version===undefined){this.version=0}if(this.basePlanLocked===undefined){this.basePlanLocked=false}if(this.compass===undefined){this.compass=null}if(this.skyColor===undefined){this.skyColor=0}if(this.groundColor===undefined){this.groundColor=0}if(this.groundTexture===undefined){this.groundTexture=null}if(this.lightColor===undefined){this.lightColor=0}if(this.wallsAlpha===undefined){this.wallsAlpha=0}if(this.furnitureSortedProperty===undefined){this.furnitureSortedProperty=null}if(this.furnitureVisibleProperties===undefined){this.furnitureVisibleProperties=null}if(this.furnitureWithDoorsAndWindows===undefined){this.furnitureWithDoorsAndWindows=null}if(this.furnitureWithGroups===undefined){this.furnitureWithGroups=null}this.furniture=(g.slice(0));this.walls=([]);this.wallHeight=n;this.furnitureVisibleProperties=["NAME","WIDTH","DEPTH","HEIGHT","VISIBLE"].slice(0);this.init(true);this.addModelListeners();if(this.furniture===undefined){this.furniture=null}if(this.furnitureChangeSupport===undefined){this.furnitureChangeSupport=null}if(this.selectedItems===undefined){this.selectedItems=null}if(this.selectionListeners===undefined){this.selectionListeners=null}if(this.allLevelsSelection===undefined){this.allLevelsSelection=false}if(this.levels===undefined){this.levels=null}if(this.selectedLevel===undefined){this.selectedLevel=null}if(this.levelsChangeSupport===undefined){this.levelsChangeSupport=null}if(this.walls===undefined){this.walls=null}if(this.wallsChangeSupport===undefined){this.wallsChangeSupport=null}if(this.rooms===undefined){this.rooms=null}if(this.roomsChangeSupport===undefined){this.roomsChangeSupport=null}if(this.polylines===undefined){this.polylines=null}if(this.polylinesChangeSupport===undefined){this.polylinesChangeSupport=null}if(this.dimensionLines===undefined){this.dimensionLines=null}if(this.dimensionLinesChangeSupport===undefined){this.dimensionLinesChangeSupport=null}if(this.labels===undefined){this.labels=null}if(this.labelsChangeSupport===undefined){this.labelsChangeSupport=null}if(this.camera===undefined){this.camera=null}if(this.name===undefined){this.name=null}if(this.wallHeight===undefined){this.wallHeight=0}if(this.modified===undefined){this.modified=false}if(this.recovered===undefined){this.recovered=false}if(this.repaired===undefined){this.repaired=false}if(this.backgroundImage===undefined){this.backgroundImage=null}if(this.observerCamera===undefined){this.observerCamera=null}if(this.topCamera===undefined){this.topCamera=null}if(this.storedCameras===undefined){this.storedCameras=null}if(this.environment===undefined){this.environment=null}if(this.print===undefined){this.print=null}if(this.furnitureSortedPropertyName===undefined){this.furnitureSortedPropertyName=null}if(this.furnitureVisiblePropertyNames===undefined){this.furnitureVisiblePropertyNames=null}if(this.furnitureDescendingSorted===undefined){this.furnitureDescendingSorted=false}if(this.visualProperties===undefined){this.visualProperties=null}if(this.properties===undefined){this.properties=null}if(this.propertyChangeSupport===undefined){this.propertyChangeSupport=null}if(this.version===undefined){this.version=0}if(this.basePlanLocked===undefined){this.basePlanLocked=false}if(this.compass===undefined){this.compass=null}if(this.skyColor===undefined){this.skyColor=0}if(this.groundColor===undefined){this.groundColor=0}if(this.groundTexture===undefined){this.groundTexture=null}if(this.lightColor===undefined){this.lightColor=0}if(this.wallsAlpha===undefined){this.wallsAlpha=0}if(this.furnitureSortedProperty===undefined){this.furnitureSortedProperty=null}if(this.furnitureVisibleProperties===undefined){this.furnitureVisibleProperties=null}if(this.furnitureWithDoorsAndWindows===undefined){this.furnitureWithDoorsAndWindows=null}if(this.furnitureWithGroups===undefined){this.furnitureWithGroups=null}}else{if(((g!=null&&g instanceof a)||g===null)&&b===undefined){var e=arguments;var i=e[0];if(this.furniture===undefined){this.furniture=null}if(this.furnitureChangeSupport===undefined){this.furnitureChangeSupport=null}if(this.selectedItems===undefined){this.selectedItems=null}if(this.selectionListeners===undefined){this.selectionListeners=null}if(this.allLevelsSelection===undefined){this.allLevelsSelection=false}if(this.levels===undefined){this.levels=null}if(this.selectedLevel===undefined){this.selectedLevel=null}if(this.levelsChangeSupport===undefined){this.levelsChangeSupport=null}if(this.walls===undefined){this.walls=null}if(this.wallsChangeSupport===undefined){this.wallsChangeSupport=null}if(this.rooms===undefined){this.rooms=null}if(this.roomsChangeSupport===undefined){this.roomsChangeSupport=null}if(this.polylines===undefined){this.polylines=null}if(this.polylinesChangeSupport===undefined){this.polylinesChangeSupport=null}if(this.dimensionLines===undefined){this.dimensionLines=null}if(this.dimensionLinesChangeSupport===undefined){this.dimensionLinesChangeSupport=null}if(this.labels===undefined){this.labels=null}if(this.labelsChangeSupport===undefined){this.labelsChangeSupport=null}if(this.camera===undefined){this.camera=null}if(this.name===undefined){this.name=null}if(this.wallHeight===undefined){this.wallHeight=0}if(this.modified===undefined){this.modified=false}if(this.recovered===undefined){this.recovered=false}if(this.repaired===undefined){this.repaired=false}if(this.backgroundImage===undefined){this.backgroundImage=null}if(this.observerCamera===undefined){this.observerCamera=null}if(this.topCamera===undefined){this.topCamera=null}if(this.storedCameras===undefined){this.storedCameras=null}if(this.environment===undefined){this.environment=null}if(this.print===undefined){this.print=null}if(this.furnitureSortedPropertyName===undefined){this.furnitureSortedPropertyName=null}if(this.furnitureVisiblePropertyNames===undefined){this.furnitureVisiblePropertyNames=null}if(this.furnitureDescendingSorted===undefined){this.furnitureDescendingSorted=false}if(this.visualProperties===undefined){this.visualProperties=null}if(this.properties===undefined){this.properties=null}if(this.propertyChangeSupport===undefined){this.propertyChangeSupport=null}if(this.version===undefined){this.version=0}if(this.basePlanLocked===undefined){this.basePlanLocked=false}if(this.compass===undefined){this.compass=null}if(this.skyColor===undefined){this.skyColor=0}if(this.groundColor===undefined){this.groundColor=0}if(this.groundTexture===undefined){this.groundTexture=null}if(this.lightColor===undefined){this.lightColor=0}if(this.wallsAlpha===undefined){this.wallsAlpha=0}if(this.furnitureSortedProperty===undefined){this.furnitureSortedProperty=null}if(this.furnitureVisibleProperties===undefined){this.furnitureVisibleProperties=null}if(this.furnitureWithDoorsAndWindows===undefined){this.furnitureWithDoorsAndWindows=null}if(this.furnitureWithGroups===undefined){this.furnitureWithGroups=null}this.wallHeight=i.getWallHeight();a.copyHomeData(i,this);a.initListenersSupport(this);this.addModelListeners()}else{if(((typeof g==="number")||g===null)&&b===undefined){var e=arguments;var m=e[0];var j=arguments;var d=[];if(this.furniture===undefined){this.furniture=null}if(this.furnitureChangeSupport===undefined){this.furnitureChangeSupport=null}if(this.selectedItems===undefined){this.selectedItems=null}if(this.selectionListeners===undefined){this.selectionListeners=null}if(this.allLevelsSelection===undefined){this.allLevelsSelection=false}if(this.levels===undefined){this.levels=null}if(this.selectedLevel===undefined){this.selectedLevel=null}if(this.levelsChangeSupport===undefined){this.levelsChangeSupport=null}if(this.walls===undefined){this.walls=null}if(this.wallsChangeSupport===undefined){this.wallsChangeSupport=null}if(this.rooms===undefined){this.rooms=null}if(this.roomsChangeSupport===undefined){this.roomsChangeSupport=null}if(this.polylines===undefined){this.polylines=null}if(this.polylinesChangeSupport===undefined){this.polylinesChangeSupport=null}if(this.dimensionLines===undefined){this.dimensionLines=null}if(this.dimensionLinesChangeSupport===undefined){this.dimensionLinesChangeSupport=null}if(this.labels===undefined){this.labels=null}if(this.labelsChangeSupport===undefined){this.labelsChangeSupport=null}if(this.camera===undefined){this.camera=null}if(this.name===undefined){this.name=null}if(this.wallHeight===undefined){this.wallHeight=0}if(this.modified===undefined){this.modified=false}if(this.recovered===undefined){this.recovered=false}if(this.repaired===undefined){this.repaired=false}if(this.backgroundImage===undefined){this.backgroundImage=null}if(this.observerCamera===undefined){this.observerCamera=null}if(this.topCamera===undefined){this.topCamera=null}if(this.storedCameras===undefined){this.storedCameras=null}if(this.environment===undefined){this.environment=null}if(this.print===undefined){this.print=null}if(this.furnitureSortedPropertyName===undefined){this.furnitureSortedPropertyName=null}if(this.furnitureVisiblePropertyNames===undefined){this.furnitureVisiblePropertyNames=null}if(this.furnitureDescendingSorted===undefined){this.furnitureDescendingSorted=false}if(this.visualProperties===undefined){this.visualProperties=null}if(this.properties===undefined){this.properties=null}if(this.propertyChangeSupport===undefined){this.propertyChangeSupport=null}if(this.version===undefined){this.version=0}if(this.basePlanLocked===undefined){this.basePlanLocked=false}if(this.compass===undefined){this.compass=null}if(this.skyColor===undefined){this.skyColor=0}if(this.groundColor===undefined){this.groundColor=0}if(this.groundTexture===undefined){this.groundTexture=null}if(this.lightColor===undefined){this.lightColor=0}if(this.wallsAlpha===undefined){this.wallsAlpha=0}if(this.furnitureSortedProperty===undefined){this.furnitureSortedProperty=null}if(this.furnitureVisibleProperties===undefined){this.furnitureVisibleProperties=null}if(this.furnitureWithDoorsAndWindows===undefined){this.furnitureWithDoorsAndWindows=null}if(this.furnitureWithGroups===undefined){this.furnitureWithGroups=null}this.furniture=(d.slice(0));this.walls=([]);this.wallHeight=m;this.furnitureVisibleProperties=["NAME","WIDTH","DEPTH","HEIGHT","VISIBLE"].slice(0);this.init(true);this.addModelListeners();if(this.furniture===undefined){this.furniture=null}if(this.furnitureChangeSupport===undefined){this.furnitureChangeSupport=null}if(this.selectedItems===undefined){this.selectedItems=null}if(this.selectionListeners===undefined){this.selectionListeners=null}if(this.allLevelsSelection===undefined){this.allLevelsSelection=false}if(this.levels===undefined){this.levels=null}if(this.selectedLevel===undefined){this.selectedLevel=null}if(this.levelsChangeSupport===undefined){this.levelsChangeSupport=null}if(this.walls===undefined){this.walls=null}if(this.wallsChangeSupport===undefined){this.wallsChangeSupport=null}if(this.rooms===undefined){this.rooms=null}if(this.roomsChangeSupport===undefined){this.roomsChangeSupport=null}if(this.polylines===undefined){this.polylines=null}if(this.polylinesChangeSupport===undefined){this.polylinesChangeSupport=null}if(this.dimensionLines===undefined){this.dimensionLines=null}if(this.dimensionLinesChangeSupport===undefined){this.dimensionLinesChangeSupport=null}if(this.labels===undefined){this.labels=null}if(this.labelsChangeSupport===undefined){this.labelsChangeSupport=null}if(this.camera===undefined){this.camera=null}if(this.name===undefined){this.name=null}if(this.wallHeight===undefined){this.wallHeight=0}if(this.modified===undefined){this.modified=false}if(this.recovered===undefined){this.recovered=false}if(this.repaired===undefined){this.repaired=false}if(this.backgroundImage===undefined){this.backgroundImage=null}if(this.observerCamera===undefined){this.observerCamera=null}if(this.topCamera===undefined){this.topCamera=null}if(this.storedCameras===undefined){this.storedCameras=null}if(this.environment===undefined){this.environment=null}if(this.print===undefined){this.print=null}if(this.furnitureSortedPropertyName===undefined){this.furnitureSortedPropertyName=null}if(this.furnitureVisiblePropertyNames===undefined){this.furnitureVisiblePropertyNames=null}if(this.furnitureDescendingSorted===undefined){this.furnitureDescendingSorted=false}if(this.visualProperties===undefined){this.visualProperties=null}if(this.properties===undefined){this.properties=null}if(this.propertyChangeSupport===undefined){this.propertyChangeSupport=null}if(this.version===undefined){this.version=0}if(this.basePlanLocked===undefined){this.basePlanLocked=false}if(this.compass===undefined){this.compass=null}if(this.skyColor===undefined){this.skyColor=0}if(this.groundColor===undefined){this.groundColor=0}if(this.groundTexture===undefined){this.groundTexture=null}if(this.lightColor===undefined){this.lightColor=0}if(this.wallsAlpha===undefined){this.wallsAlpha=0}if(this.furnitureSortedProperty===undefined){this.furnitureSortedProperty=null}if(this.furnitureVisibleProperties===undefined){this.furnitureVisibleProperties=null}if(this.furnitureWithDoorsAndWindows===undefined){this.furnitureWithDoorsAndWindows=null}if(this.furnitureWithGroups===undefined){this.furnitureWithGroups=null}}else{if(g===undefined&&b===undefined){var e=arguments;var f=arguments;var l=250;var h=arguments;var c=[];if(this.furniture===undefined){this.furniture=null}if(this.furnitureChangeSupport===undefined){this.furnitureChangeSupport=null}if(this.selectedItems===undefined){this.selectedItems=null}if(this.selectionListeners===undefined){this.selectionListeners=null}if(this.allLevelsSelection===undefined){this.allLevelsSelection=false}if(this.levels===undefined){this.levels=null}if(this.selectedLevel===undefined){this.selectedLevel=null}if(this.levelsChangeSupport===undefined){this.levelsChangeSupport=null}if(this.walls===undefined){this.walls=null}if(this.wallsChangeSupport===undefined){this.wallsChangeSupport=null}if(this.rooms===undefined){this.rooms=null}if(this.roomsChangeSupport===undefined){this.roomsChangeSupport=null}if(this.polylines===undefined){this.polylines=null}if(this.polylinesChangeSupport===undefined){this.polylinesChangeSupport=null}if(this.dimensionLines===undefined){this.dimensionLines=null}if(this.dimensionLinesChangeSupport===undefined){this.dimensionLinesChangeSupport=null}if(this.labels===undefined){this.labels=null}if(this.labelsChangeSupport===undefined){this.labelsChangeSupport=null}if(this.camera===undefined){this.camera=null}if(this.name===undefined){this.name=null}if(this.wallHeight===undefined){this.wallHeight=0}if(this.modified===undefined){this.modified=false}if(this.recovered===undefined){this.recovered=false}if(this.repaired===undefined){this.repaired=false}if(this.backgroundImage===undefined){this.backgroundImage=null}if(this.observerCamera===undefined){this.observerCamera=null}if(this.topCamera===undefined){this.topCamera=null}if(this.storedCameras===undefined){this.storedCameras=null}if(this.environment===undefined){this.environment=null}if(this.print===undefined){this.print=null}if(this.furnitureSortedPropertyName===undefined){this.furnitureSortedPropertyName=null}if(this.furnitureVisiblePropertyNames===undefined){this.furnitureVisiblePropertyNames=null}if(this.furnitureDescendingSorted===undefined){this.furnitureDescendingSorted=false}if(this.visualProperties===undefined){this.visualProperties=null}if(this.properties===undefined){this.properties=null}if(this.propertyChangeSupport===undefined){this.propertyChangeSupport=null}if(this.version===undefined){this.version=0}if(this.basePlanLocked===undefined){this.basePlanLocked=false}if(this.compass===undefined){this.compass=null}if(this.skyColor===undefined){this.skyColor=0}if(this.groundColor===undefined){this.groundColor=0}if(this.groundTexture===undefined){this.groundTexture=null}if(this.lightColor===undefined){this.lightColor=0}if(this.wallsAlpha===undefined){this.wallsAlpha=0}if(this.furnitureSortedProperty===undefined){this.furnitureSortedProperty=null}if(this.furnitureVisibleProperties===undefined){this.furnitureVisibleProperties=null}if(this.furnitureWithDoorsAndWindows===undefined){this.furnitureWithDoorsAndWindows=null}if(this.furnitureWithGroups===undefined){this.furnitureWithGroups=null}this.furniture=(c.slice(0));this.walls=([]);this.wallHeight=l;this.furnitureVisibleProperties=["NAME","WIDTH","DEPTH","HEIGHT","VISIBLE"].slice(0);this.init(true);this.addModelListeners();if(this.furniture===undefined){this.furniture=null}if(this.furnitureChangeSupport===undefined){this.furnitureChangeSupport=null}if(this.selectedItems===undefined){this.selectedItems=null}if(this.selectionListeners===undefined){this.selectionListeners=null}if(this.allLevelsSelection===undefined){this.allLevelsSelection=false}if(this.levels===undefined){this.levels=null}if(this.selectedLevel===undefined){this.selectedLevel=null}if(this.levelsChangeSupport===undefined){this.levelsChangeSupport=null}if(this.walls===undefined){this.walls=null}if(this.wallsChangeSupport===undefined){this.wallsChangeSupport=null}if(this.rooms===undefined){this.rooms=null}if(this.roomsChangeSupport===undefined){this.roomsChangeSupport=null}if(this.polylines===undefined){this.polylines=null}if(this.polylinesChangeSupport===undefined){this.polylinesChangeSupport=null}if(this.dimensionLines===undefined){this.dimensionLines=null}if(this.dimensionLinesChangeSupport===undefined){this.dimensionLinesChangeSupport=null}if(this.labels===undefined){this.labels=null}if(this.labelsChangeSupport===undefined){this.labelsChangeSupport=null}if(this.camera===undefined){this.camera=null}if(this.name===undefined){this.name=null}if(this.wallHeight===undefined){this.wallHeight=0}if(this.modified===undefined){this.modified=false}if(this.recovered===undefined){this.recovered=false}if(this.repaired===undefined){this.repaired=false}if(this.backgroundImage===undefined){this.backgroundImage=null}if(this.observerCamera===undefined){this.observerCamera=null}if(this.topCamera===undefined){this.topCamera=null}if(this.storedCameras===undefined){this.storedCameras=null}if(this.environment===undefined){this.environment=null}if(this.print===undefined){this.print=null}if(this.furnitureSortedPropertyName===undefined){this.furnitureSortedPropertyName=null}if(this.furnitureVisiblePropertyNames===undefined){this.furnitureVisiblePropertyNames=null}if(this.furnitureDescendingSorted===undefined){this.furnitureDescendingSorted=false}if(this.visualProperties===undefined){this.visualProperties=null}if(this.properties===undefined){this.properties=null}if(this.propertyChangeSupport===undefined){this.propertyChangeSupport=null}if(this.version===undefined){this.version=0}if(this.basePlanLocked===undefined){this.basePlanLocked=false}if(this.compass===undefined){this.compass=null}if(this.skyColor===undefined){this.skyColor=0}if(this.groundColor===undefined){this.groundColor=0}if(this.groundTexture===undefined){this.groundTexture=null}if(this.lightColor===undefined){this.lightColor=0}if(this.wallsAlpha===undefined){this.wallsAlpha=0}if(this.furnitureSortedProperty===undefined){this.furnitureSortedProperty=null}if(this.furnitureVisibleProperties===undefined){this.furnitureVisibleProperties=null}if(this.furnitureWithDoorsAndWindows===undefined){this.furnitureWithDoorsAndWindows=null}if(this.furnitureWithGroups===undefined){this.furnitureWithGroups=null}if(this.furniture===undefined){this.furniture=null}if(this.furnitureChangeSupport===undefined){this.furnitureChangeSupport=null}if(this.selectedItems===undefined){this.selectedItems=null}if(this.selectionListeners===undefined){this.selectionListeners=null}if(this.allLevelsSelection===undefined){this.allLevelsSelection=false}if(this.levels===undefined){this.levels=null}if(this.selectedLevel===undefined){this.selectedLevel=null}if(this.levelsChangeSupport===undefined){this.levelsChangeSupport=null}if(this.walls===undefined){this.walls=null}if(this.wallsChangeSupport===undefined){this.wallsChangeSupport=null}if(this.rooms===undefined){this.rooms=null}if(this.roomsChangeSupport===undefined){this.roomsChangeSupport=null}if(this.polylines===undefined){this.polylines=null}if(this.polylinesChangeSupport===undefined){this.polylinesChangeSupport=null}if(this.dimensionLines===undefined){this.dimensionLines=null}if(this.dimensionLinesChangeSupport===undefined){this.dimensionLinesChangeSupport=null}if(this.labels===undefined){this.labels=null}if(this.labelsChangeSupport===undefined){this.labelsChangeSupport=null}if(this.camera===undefined){this.camera=null}if(this.name===undefined){this.name=null}if(this.wallHeight===undefined){this.wallHeight=0}if(this.modified===undefined){this.modified=false}if(this.recovered===undefined){this.recovered=false}if(this.repaired===undefined){this.repaired=false}if(this.backgroundImage===undefined){this.backgroundImage=null}if(this.observerCamera===undefined){this.observerCamera=null}if(this.topCamera===undefined){this.topCamera=null}if(this.storedCameras===undefined){this.storedCameras=null}if(this.environment===undefined){this.environment=null}if(this.print===undefined){this.print=null}if(this.furnitureSortedPropertyName===undefined){this.furnitureSortedPropertyName=null}if(this.furnitureVisiblePropertyNames===undefined){this.furnitureVisiblePropertyNames=null}if(this.furnitureDescendingSorted===undefined){this.furnitureDescendingSorted=false}if(this.visualProperties===undefined){this.visualProperties=null}if(this.properties===undefined){this.properties=null}if(this.propertyChangeSupport===undefined){this.propertyChangeSupport=null}if(this.version===undefined){this.version=0}if(this.basePlanLocked===undefined){this.basePlanLocked=false}if(this.compass===undefined){this.compass=null}if(this.skyColor===undefined){this.skyColor=0}if(this.groundColor===undefined){this.groundColor=0}if(this.groundTexture===undefined){this.groundTexture=null}if(this.lightColor===undefined){this.lightColor=0}if(this.wallsAlpha===undefined){this.wallsAlpha=0}if(this.furnitureSortedProperty===undefined){this.furnitureSortedProperty=null}if(this.furnitureVisibleProperties===undefined){this.furnitureVisibleProperties=null}if(this.furnitureWithDoorsAndWindows===undefined){this.furnitureWithDoorsAndWindows=null}if(this.furnitureWithGroups===undefined){this.furnitureWithGroups=null}}else{throw new Error("invalid overload")}}}}}}a.LEVEL_ELEVATION_COMPARATOR_$LI$=function(){if(a.LEVEL_ELEVATION_COMPARATOR==null){a.LEVEL_ELEVATION_COMPARATOR=function(d,c){var b=(d.getElevation()-c.getElevation());if(b!==0){return b}else{return d.getElevationIndex()-c.getElevationIndex()}}}return a.LEVEL_ELEVATION_COMPARATOR};a.prototype.moveVisualProperty=function(b){var d=this;if(this.visualProperties.hasOwnProperty(b)){var c=(function(e,f){return e[f]===undefined?null:e[f]})(this.visualProperties,b);(this.properties[b]=c!=null?new String(c).toString():null);(function(f){var e=d.visualProperties[b];delete d.visualProperties[b];return e})(this.visualProperties)}};a.prototype.init=function(b){this.selectedItems=([]);a.initListenersSupport(this);if(this.furnitureVisibleProperties==null){this.furnitureVisibleProperties=["NAME","WIDTH","DEPTH","HEIGHT","COLOR","MOVABLE","DOOR_OR_WINDOW","VISIBLE"].slice(0)}this.topCamera=new Camera(a.HOME_TOP_CAMERA_ID,50,1050,1010,Math.PI,Math.PI/4,Math.PI*63/180);this.observerCamera=new ObserverCamera(a.HOME_OBSERVER_CAMERA_ID,50,50,170,7*Math.PI/4,Math.PI/16,Math.PI*63/180);this.storedCameras=[];this.environment=new HomeEnvironment(a.HOME_ENVIRONMENT_ID);this.rooms=([]);this.polylines=([]);this.dimensionLines=([]);this.labels=([]);this.compass=new Compass(a.HOME_COMPASS_ID,-100,50,100);this.levels=([]);this.compass.setVisible(b);this.visualProperties=({});this.properties=({});this.version=a.CURRENT_VERSION};a.initListenersSupport=function(b){b.furnitureChangeSupport=(new CollectionChangeSupport(b));b.selectionListeners=([]);b.levelsChangeSupport=(new CollectionChangeSupport(b));b.wallsChangeSupport=(new CollectionChangeSupport(b));b.roomsChangeSupport=(new CollectionChangeSupport(b));b.polylinesChangeSupport=(new CollectionChangeSupport(b));b.dimensionLinesChangeSupport=(new CollectionChangeSupport(b));b.labelsChangeSupport=(new CollectionChangeSupport(b));b.propertyChangeSupport=new PropertyChangeSupport(b)};a.prototype.addModelListeners=function(){var b=new a.Home$0(this);for(var d=0;d<this.levels.length;d++){var c=this.levels[d];c.addPropertyChangeListener(b)}this.addLevelsListener(function(e){switch((e.getType())){case CollectionEvent.Type.ADD:e.getItem().addPropertyChangeListener(b);break;case CollectionEvent.Type.DELETE:e.getItem().removePropertyChangeListener(b);break}})};a.prototype.isFurnitureSortedPropertyBackwardCompatible=function(b){switch((b)){case"NAME":case"WIDTH":case"DEPTH":case"HEIGHT":case"MOVABLE":case"DOOR_OR_WINDOW":case"COLOR":case"VISIBLE":case"X":case"Y":case"ELEVATION":case"ANGLE":return true;default:return false}};a.prototype.getGroupFurniture=function(d){var c=([]);var b=d.getFurniture();for(var f=0;f<b.length;f++){var e=b[f];if(e!=null&&e instanceof HomeFurnitureGroup){(function(h,g){return h.push.apply(h,g)})(c,this.getGroupFurniture(e))}else{(c.push(e)>0)}}return c};a.prototype.addLevelsListener=function(b){this.levelsChangeSupport.addCollectionListener((b))};a.prototype.removeLevelsListener=function(b){this.levelsChangeSupport.removeCollectionListener((b))};a.prototype.getLevels=function(){return this.levels.slice(0)};a.prototype.addLevel=function(g){if(g.getElevationIndex()<0){var c=0;for(var e=0;e<this.levels.length;e++){var b=this.levels[e];if(b.getElevation()===g.getElevation()){c=b.getElevationIndex()+1}else{if(b.getElevation()>g.getElevation()){break}}}g.setElevationIndex(c)}this.levels=(this.levels.slice(0));var d=(function(h,q,m){var k=m;if(typeof m!="function"){k=function(r,l){return m.compare(r,l)}}var n=0;var i=h.length-1;while(n<=i){var p=(n+i)>>>1;var j=h[p];var o=k(j,q);if(o<0){n=p+1}else{if(o>0){i=p-1}else{return p}}}return -(n+1)})(this.levels,g,a.LEVEL_ELEVATION_COMPARATOR_$LI$());var f;if(d>=0){f=d}else{f=-(d+1)}this.levels.splice(f,0,g);this.levelsChangeSupport.fireCollectionChanged(g,f,CollectionEvent.Type.ADD)};a.prototype.deleteLevel=function(c){var d=this.levels.indexOf(c);if(d!==-1){for(var n=0;n<this.furniture.length;n++){var o=this.furniture[n];if(o.getLevel()===c){this.deletePieceOfFurniture(o)}}for(var m=0;m<this.rooms.length;m++){var b=this.rooms[m];if(b.getLevel()===c){this.deleteRoom(b)}}for(var l=0;l<this.walls.length;l++){var g=this.walls[l];if(g.getLevel()===c){this.deleteWall(g)}}for(var k=0;k<this.polylines.length;k++){var f=this.polylines[k];if(f.getLevel()===c){this.deletePolyline(f)}}for(var i=0;i<this.dimensionLines.length;i++){var h=this.dimensionLines[i];if(h.getLevel()===c){this.deleteDimensionLine(h)}}for(var j=0;j<this.labels.length;j++){var e=this.labels[j];if(e.getLevel()===c){this.deleteLabel(e)}}if(this.selectedLevel===c){if(this.levels.length===1){this.setSelectedLevel(null);this.setAllLevelsSelection(false)}else{this.setSelectedLevel(this.levels[d>=1?d-1:d+1])}}this.levels=(this.levels.slice(0));this.levels.splice(d,1)[0];this.levelsChangeSupport.fireCollectionChanged(c,d,CollectionEvent.Type.DELETE)}};a.prototype.getSelectedLevel=function(){return this.selectedLevel};a.prototype.setSelectedLevel=function(c){if(c!==this.selectedLevel){var b=this.selectedLevel;this.selectedLevel=c;this.propertyChangeSupport.firePropertyChange("SELECTED_LEVEL",b,c)}};a.prototype.isAllLevelsSelection=function(){return this.allLevelsSelection};a.prototype.setAllLevelsSelection=function(b){if(b!==this.allLevelsSelection){this.allLevelsSelection=b;this.propertyChangeSupport.firePropertyChange("ALL_LEVELS_SELECTION",!b,b)}};a.prototype.addFurnitureListener=function(b){this.furnitureChangeSupport.addCollectionListener((b))};a.prototype.removeFurnitureListener=function(b){this.furnitureChangeSupport.removeCollectionListener((b))};a.prototype.getFurniture=function(){return this.furniture.slice(0)};a.prototype.addPieceOfFurniture$com_eteks_sweethome3d_model_HomePieceOfFurniture=function(b){this.addPieceOfFurniture$com_eteks_sweethome3d_model_HomePieceOfFurniture$int(b,this.furniture.length)};a.prototype.addPieceOfFurniture$com_eteks_sweethome3d_model_HomePieceOfFurniture$int=function(c,b){this.furniture=(this.furniture.slice(0));c.setLevel(this.selectedLevel);this.furniture.splice(b,0,c);this.furnitureChangeSupport.fireCollectionChanged(c,b,CollectionEvent.Type.ADD)};a.prototype.addPieceOfFurniture=function(c,b){if(((c!=null&&c instanceof HomePieceOfFurniture)||c===null)&&((typeof b==="number")||b===null)){return this.addPieceOfFurniture$com_eteks_sweethome3d_model_HomePieceOfFurniture$int(c,b)}else{if(((c!=null&&c instanceof HomePieceOfFurniture)||c===null)&&b===undefined){return this.addPieceOfFurniture$com_eteks_sweethome3d_model_HomePieceOfFurniture(c)}else{throw new Error("invalid overload")}}};a.prototype.addPieceOfFurnitureToGroup=function(c,d,b){c.setLevel(this.selectedLevel);d.addPieceOfFurniture(c,b);this.furnitureChangeSupport.fireCollectionChanged(c,CollectionEvent.Type.ADD)};a.prototype.deletePieceOfFurniture=function(c){this.deselectItem(c);var b=this.furniture.indexOf(c);var d=b===-1?this.getPieceOfFurnitureGroup(c,null,this.furniture):null;if(b!==-1||d!=null){c.setLevel(null);this.furniture=(this.furniture.slice(0));if(d!=null){d.deletePieceOfFurniture(c);this.furnitureChangeSupport.fireCollectionChanged(c,CollectionEvent.Type.DELETE)}else{this.furniture.splice(b,1)[0];this.furnitureChangeSupport.fireCollectionChanged(c,b,CollectionEvent.Type.DELETE)}}};a.prototype.getPieceOfFurnitureGroup=function(d,c,f){for(var b=0;b<f.length;b++){var e=f[b];if((function(i,h){if(i&&i.equals){return i.equals(h)}else{return i===h}})(e,d)){return c}else{if(e!=null&&e instanceof HomeFurnitureGroup){var g=this.getPieceOfFurnitureGroup(d,e,e.getFurniture());if(g!=null){return g}}}}return null};a.prototype.addSelectionListener=function(b){(this.selectionListeners.push(b)>0)};a.prototype.removeSelectionListener=function(b){(function(c){var d=c.indexOf(b);if(d>=0){c.splice(d,1);return true}else{return false}})(this.selectionListeners)};a.prototype.getSelectedItems=function(){return this.selectedItems.slice(0)};a.prototype.setSelectedItems=function(f){this.selectedItems=(f.slice(0));if(!(this.selectionListeners.length==0)){var c=new SelectionEvent(this,this.getSelectedItems());var d=this.selectionListeners.slice(0);for(var b=0;b<d.length;b++){var e=d[b];e.selectionChanged(c)}}};a.prototype.deselectItem=function(c){var b=this.selectedItems.indexOf(c);if(b!==-1){var d=(this.getSelectedItems().slice(0));d.splice(b,1)[0];this.setSelectedItems(d)}};a.prototype.addRoomsListener=function(b){this.roomsChangeSupport.addCollectionListener((b))};a.prototype.removeRoomsListener=function(b){this.roomsChangeSupport.removeCollectionListener((b))};a.prototype.getRooms=function(){return this.rooms.slice(0)};a.prototype.addRoom$com_eteks_sweethome3d_model_Room=function(b){this.addRoom$com_eteks_sweethome3d_model_Room$int(b,this.rooms.length)};a.prototype.addRoom$com_eteks_sweethome3d_model_Room$int=function(c,b){this.rooms=(this.rooms.slice(0));this.rooms.splice(b,0,c);c.setLevel(this.selectedLevel);this.roomsChangeSupport.fireCollectionChanged(c,b,CollectionEvent.Type.ADD)};a.prototype.addRoom=function(c,b){if(((c!=null&&c instanceof Room)||c===null)&&((typeof b==="number")||b===null)){return this.addRoom$com_eteks_sweethome3d_model_Room$int(c,b)}else{if(((c!=null&&c instanceof Room)||c===null)&&b===undefined){return this.addRoom$com_eteks_sweethome3d_model_Room(c)}else{throw new Error("invalid overload")}}};a.prototype.deleteRoom=function(c){this.deselectItem(c);var b=this.rooms.indexOf(c);if(b!==-1){c.setLevel(null);this.rooms=(this.rooms.slice(0));this.rooms.splice(b,1)[0];this.roomsChangeSupport.fireCollectionChanged(c,b,CollectionEvent.Type.DELETE)}};a.prototype.addWallsListener=function(b){this.wallsChangeSupport.addCollectionListener((b))};a.prototype.removeWallsListener=function(b){this.wallsChangeSupport.removeCollectionListener((b))};a.prototype.getWalls=function(){return this.walls.slice(0)};a.prototype.addWall=function(b){this.walls=(this.walls.slice(0));(this.walls.push(b)>0);b.setLevel(this.selectedLevel);this.wallsChangeSupport.fireCollectionChanged(b,CollectionEvent.Type.ADD)};a.prototype.deleteWall=function(b){this.deselectItem(b);var d=this.getWalls();for(var f=0;f<d.length;f++){var e=d[f];if((function(h,g){if(h&&h.equals){return h.equals(g)}else{return h===g}})(b,e.getWallAtStart())){e.setWallAtStart(null)}else{if((function(h,g){if(h&&h.equals){return h.equals(g)}else{return h===g}})(b,e.getWallAtEnd())){e.setWallAtEnd(null)}}}var c=this.walls.indexOf(b);if(c!==-1){b.setLevel(null);this.walls=(this.walls.slice(0));this.walls.splice(c,1)[0];this.wallsChangeSupport.fireCollectionChanged(b,CollectionEvent.Type.DELETE)}};a.prototype.addPolylinesListener=function(b){this.polylinesChangeSupport.addCollectionListener((b))};a.prototype.removePolylinesListener=function(b){this.polylinesChangeSupport.removeCollectionListener((b))};a.prototype.getPolylines=function(){return this.polylines.slice(0)};a.prototype.addPolyline$com_eteks_sweethome3d_model_Polyline=function(b){this.addPolyline$com_eteks_sweethome3d_model_Polyline$int(b,this.polylines.length)};a.prototype.addPolyline$com_eteks_sweethome3d_model_Polyline$int=function(b,c){this.polylines=(this.polylines.slice(0));this.polylines.splice(c,0,b);b.setLevel(this.selectedLevel);this.polylinesChangeSupport.fireCollectionChanged(b,CollectionEvent.Type.ADD)};a.prototype.addPolyline=function(b,c){if(((b!=null&&b instanceof Polyline)||b===null)&&((typeof c==="number")||c===null)){return this.addPolyline$com_eteks_sweethome3d_model_Polyline$int(b,c)}else{if(((b!=null&&b instanceof Polyline)||b===null)&&c===undefined){return this.addPolyline$com_eteks_sweethome3d_model_Polyline(b)}else{throw new Error("invalid overload")}}};a.prototype.deletePolyline=function(b){this.deselectItem(b);var c=this.polylines.indexOf(b);if(c!==-1){b.setLevel(null);this.polylines=(this.polylines.slice(0));this.polylines.splice(c,1)[0];this.polylinesChangeSupport.fireCollectionChanged(b,CollectionEvent.Type.DELETE)}};a.prototype.addDimensionLinesListener=function(b){this.dimensionLinesChangeSupport.addCollectionListener((b))};a.prototype.removeDimensionLinesListener=function(b){this.dimensionLinesChangeSupport.removeCollectionListener((b))};a.prototype.getDimensionLines=function(){return this.dimensionLines.slice(0)};a.prototype.addDimensionLine=function(b){this.dimensionLines=(this.dimensionLines.slice(0));(this.dimensionLines.push(b)>0);b.setLevel(this.selectedLevel);this.dimensionLinesChangeSupport.fireCollectionChanged(b,CollectionEvent.Type.ADD)};a.prototype.deleteDimensionLine=function(b){this.deselectItem(b);var c=this.dimensionLines.indexOf(b);if(c!==-1){b.setLevel(null);this.dimensionLines=(this.dimensionLines.slice(0));this.dimensionLines.splice(c,1)[0];this.dimensionLinesChangeSupport.fireCollectionChanged(b,CollectionEvent.Type.DELETE)}};a.prototype.addLabelsListener=function(b){this.labelsChangeSupport.addCollectionListener((b))};a.prototype.removeLabelsListener=function(b){this.labelsChangeSupport.removeCollectionListener((b))};a.prototype.getLabels=function(){return this.labels.slice(0)};a.prototype.addLabel=function(b){this.labels=(this.labels.slice(0));(this.labels.push(b)>0);b.setLevel(this.selectedLevel);this.labelsChangeSupport.fireCollectionChanged(b,CollectionEvent.Type.ADD)};a.prototype.deleteLabel=function(c){this.deselectItem(c);var b=this.labels.indexOf(c);if(b!==-1){c.setLevel(null);this.labels=(this.labels.slice(0));this.labels.splice(b,1)[0];this.labelsChangeSupport.fireCollectionChanged(c,CollectionEvent.Type.DELETE)}};a.prototype.getSelectableViewableItems=function(){var c=([]);this.addViewableItems(this.walls,c);this.addViewableItems(this.rooms,c);this.addViewableItems(this.dimensionLines,c);this.addViewableItems(this.polylines,c);this.addViewableItems(this.labels,c);var b=this.getFurniture();for(var e=0;e<b.length;e++){var d=b[e];if(d.isVisible()&&(d.getLevel()==null||d.getLevel().isViewable())){(c.push(d)>0)}}if(this.compass.isVisible()){(c.push(this.compass)>0)}return c};a.prototype.addViewableItems=function(b,f){for(var d=0;d<b.length;d++){var c=b[d];if(c!=null&&(c.constructor!=null&&c.constructor.__interfaces!=null&&c.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Elevatable")>=0)){var e=c;if(e.getLevel()==null||e.getLevel().isViewable()){(f.push(c)>0)}}}};a.prototype.getHomeObjects=function(){var b=([]);(b.push(this.environment)>0);(b.push(this.compass)>0);(function(g,f){return g.push.apply(g,f)})(b,this.levels);(function(g,f){return g.push.apply(g,f)})(b,this.walls);(function(g,f){return g.push.apply(g,f)})(b,this.rooms);(function(g,f){return g.push.apply(g,f)})(b,this.dimensionLines);(function(g,f){return g.push.apply(g,f)})(b,this.polylines);(function(g,f){return g.push.apply(g,f)})(b,this.labels);var e=this.getFurniture();for(var d=0;d<e.length;d++){var c=e[d];(b.push(c)>0);if(c!=null&&c instanceof HomeFurnitureGroup){(function(g,f){return g.push.apply(g,f)})(b,c.getAllFurniture())}}(b.push(this.topCamera)>0);(b.push(this.observerCamera)>0);(function(g,f){return g.push.apply(g,f)})(b,this.storedCameras);(function(g,f){return g.push.apply(g,f)})(b,this.environment.getVideoCameraPath());return b};a.prototype.isEmpty=function(){return(this.furniture.length==0)&&(this.walls.length==0)&&(this.rooms.length==0)&&(this.dimensionLines.length==0)&&(this.polylines.length==0)&&(this.labels.length==0)};a.prototype.getWallHeight=function(){return this.wallHeight};a.prototype.getName=function(){return this.name};a.prototype.setName=function(b){if(b!==this.name&&(b==null||!(b===this.name))){var c=this.name;this.name=b;this.propertyChangeSupport.firePropertyChange("NAME",c,b)}};a.prototype.isModified=function(){return this.modified};a.prototype.setModified=function(b){if(b!==this.modified){this.modified=b;this.propertyChangeSupport.firePropertyChange("MODIFIED",!b,b)}};a.prototype.isRecovered=function(){return this.recovered};a.prototype.setRecovered=function(b){if(b!==this.recovered){this.recovered=b;this.propertyChangeSupport.firePropertyChange("RECOVERED",!b,b)}};a.prototype.isRepaired=function(){return this.repaired};a.prototype.setRepaired=function(b){if(b!==this.repaired){this.repaired=b;this.propertyChangeSupport.firePropertyChange("REPAIRED",!b,b)}};a.prototype.getFurnitureSortedProperty=function(){return this.furnitureSortedProperty};a.prototype.setFurnitureSortedProperty=function(b){if(b!==this.furnitureSortedProperty&&(b==null||!(b==this.furnitureSortedProperty))){var c=this.furnitureSortedProperty;this.furnitureSortedProperty=b;this.propertyChangeSupport.firePropertyChange("FURNITURE_SORTED_PROPERTY",c,b)}};a.prototype.isFurnitureDescendingSorted=function(){return this.furnitureDescendingSorted};a.prototype.setFurnitureDescendingSorted=function(b){if(b!==this.furnitureDescendingSorted){this.furnitureDescendingSorted=b;this.propertyChangeSupport.firePropertyChange("FURNITURE_DESCENDING_SORTED",!b,b)}};a.prototype.getFurnitureVisibleProperties=function(){if(this.furnitureVisibleProperties==null){return[]}else{return this.furnitureVisibleProperties.slice(0)}};a.prototype.setFurnitureVisibleProperties=function(c){if(c!==this.furnitureVisibleProperties&&(c==null||!(function(e,d){if(e==null&&d==null){return true}if(e==null||d==null){return false}if(e.length!=d.length){return false}for(var f=0;f<e.length;f++){if(e[f]!=d[f]){return false}}return true})(c,this.furnitureVisibleProperties))){var b=this.furnitureVisibleProperties;this.furnitureVisibleProperties=(c.slice(0));this.propertyChangeSupport.firePropertyChange("FURNITURE_VISIBLE_PROPERTIES",b.slice(0),c.slice(0))}};a.prototype.getBackgroundImage=function(){return this.backgroundImage};a.prototype.setBackgroundImage=function(c){if(c!==this.backgroundImage){var b=this.backgroundImage;this.backgroundImage=c;this.propertyChangeSupport.firePropertyChange("BACKGROUND_IMAGE",b,c)}};a.prototype.getTopCamera=function(){return this.topCamera};a.prototype.getObserverCamera=function(){return this.observerCamera};a.prototype.setCamera=function(c){if(c!==this.camera){var b=this.camera;this.camera=c;this.propertyChangeSupport.firePropertyChange("CAMERA",b,c)}};a.prototype.getCamera=function(){if(this.camera==null){this.camera=this.getTopCamera()}return this.camera};a.prototype.setStoredCameras=function(c){if(!(function(e,d){if(e==null&&d==null){return true}if(e==null||d==null){return false}if(e.length!=d.length){return false}for(var f=0;f<e.length;f++){if(e[f]!=d[f]){return false}}return true})(this.storedCameras,c)){var b=this.storedCameras;if(c==null){this.storedCameras=[]}else{this.storedCameras=(c.slice(0))}this.propertyChangeSupport.firePropertyChange("STORED_CAMERAS",b.slice(0),c.slice(0))}};a.prototype.getStoredCameras=function(){return this.storedCameras.slice(0)};a.prototype.getEnvironment=function(){return this.environment};a.prototype.getCompass=function(){return this.compass};a.prototype.getPrint=function(){return this.print};a.prototype.setPrint=function(b){if(b!==this.print){var c=this.print;this.print=b;this.propertyChangeSupport.firePropertyChange("PRINT",c,b)}this.print=b};a.prototype.getProperty=function(b){return(function(c,d){return c[d]===undefined?null:c[d]})(this.properties,b)};a.prototype.getNumericProperty=function(b){var e=(function(f,g){return f[g]===undefined?null:f[g]})(this.properties,b);if(e!=null){try{return new Number(e).valueOf()}catch(c){try{return new Number(e).valueOf()}catch(d){}}}return null};a.prototype.setProperty=function(c,d){var e=this;var b=(function(f,g){return f[g]===undefined?null:f[g]})(this.properties,c);if(d==null){if(b!=null){(function(g){var f=e.properties[c];delete e.properties[c];return f})(this.properties);this.propertyChangeSupport.firePropertyChange(c,b,null)}}else{(this.properties[c]=d);this.propertyChangeSupport.firePropertyChange(c,b,d)}};a.prototype.getPropertyNames=function(){return Object.keys(this.properties)};a.prototype.addPropertyChangeListener=function(b,c){this.propertyChangeSupport.addPropertyChangeListener(b,c)};a.prototype.removePropertyChangeListener=function(b,c){this.propertyChangeSupport.removePropertyChangeListener(b,c)};a.prototype.isBasePlanLocked=function(){return this.basePlanLocked};a.prototype.setBasePlanLocked=function(b){if(b!==this.basePlanLocked){this.basePlanLocked=b;this.propertyChangeSupport.firePropertyChange("BASE_PLAN_LOCKED",!b,b)}};a.prototype.getVersion=function(){return this.version};a.prototype.setVersion=function(b){this.version=b};a.prototype.clone=function(){try{var c=(function(e){var f=Object.create(e);for(var d in e){if(e.hasOwnProperty(d)){f[d]=e[d]}}return f})(this);a.copyHomeData(this,c);a.initListenersSupport(c);c.addModelListeners();return c}catch(b){throw new IllegalStateException("Super class isn't cloneable")}};a.copyHomeData=function(b,k){k.allLevelsSelection=b.allLevelsSelection;k.name=b.name;k.modified=b.modified;k.recovered=b.recovered;k.repaired=b.repaired;k.backgroundImage=b.backgroundImage;k.print=b.print;k.furnitureDescendingSorted=b.furnitureDescendingSorted;k.version=b.version;k.basePlanLocked=b.basePlanLocked;k.skyColor=b.skyColor;k.groundColor=b.groundColor;k.lightColor=b.lightColor;k.wallsAlpha=b.wallsAlpha;k.furnitureSortedProperty=b.furnitureSortedProperty;k.selectedItems=([]);k.furniture=a.cloneSelectableItems(b.furniture,b.selectedItems,k.selectedItems);k.rooms=a.cloneSelectableItems(b.rooms,b.selectedItems,k.selectedItems);k.dimensionLines=a.cloneSelectableItems(b.dimensionLines,b.selectedItems,k.selectedItems);k.polylines=a.cloneSelectableItems(b.polylines,b.selectedItems,k.selectedItems);k.labels=a.cloneSelectableItems(b.labels,b.selectedItems,k.selectedItems);k.walls=Wall.clone(b.walls);for(var d=0;d<b.walls.length;d++){var m=b.walls[d];if((b.selectedItems.indexOf((m))>=0)){(k.selectedItems.push(k.walls[d])>0)}}k.levels=([]);if(b.levels.length>0){for(var f=0;f<b.levels.length;f++){var c=b.levels[f];(k.levels.push((function(q){if(q.clone!=undefined){return q.clone()}else{var r=Object.create(q);for(var i in q){if(q.hasOwnProperty(i)){r[i]=q[i]}}return r}})(c))>0)}for(var d=0;d<b.furniture.length;d++){var n=b.furniture[d].getLevel();if(n!=null){k.furniture[d].setLevel(k.levels[b.levels.indexOf(n)])}}for(var d=0;d<b.rooms.length;d++){var p=b.rooms[d].getLevel();if(p!=null){k.rooms[d].setLevel(k.levels[b.levels.indexOf(p)])}}for(var d=0;d<b.dimensionLines.length;d++){var o=b.dimensionLines[d].getLevel();if(o!=null){k.dimensionLines[d].setLevel(k.levels[b.levels.indexOf(o)])}}for(var d=0;d<b.polylines.length;d++){var l=b.polylines[d].getLevel();if(l!=null){k.polylines[d].setLevel(k.levels[b.levels.indexOf(l)])}}for(var d=0;d<b.labels.length;d++){var j=b.labels[d].getLevel();if(j!=null){k.labels[d].setLevel(k.levels[b.levels.indexOf(j)])}}for(var d=0;d<b.walls.length;d++){var h=b.walls[d].getLevel();if(h!=null){k.walls[d].setLevel(k.levels[b.levels.indexOf(h)])}}if(b.selectedLevel!=null){k.selectedLevel=k.levels[b.levels.indexOf(b.selectedLevel)]}}k.observerCamera=(function(q){if(q.clone!=undefined){return q.clone()}else{var r=Object.create(q);for(var i in q){if(q.hasOwnProperty(i)){r[i]=q[i]}}return r}})(b.observerCamera);k.topCamera=(function(q){if(q.clone!=undefined){return q.clone()}else{var r=Object.create(q);for(var i in q){if(q.hasOwnProperty(i)){r[i]=q[i]}}return r}})(b.topCamera);if(b.camera===b.observerCamera){k.camera=k.observerCamera;if((b.selectedItems.indexOf((b.observerCamera))>=0)){(k.selectedItems.push(k.observerCamera)>0)}}else{k.camera=k.topCamera}k.storedCameras=([]);for(var e=0;e<b.storedCameras.length;e++){var g=b.storedCameras[e];(k.storedCameras.push((function(q){if(q.clone!=undefined){return q.clone()}else{var r=Object.create(q);for(var i in q){if(q.hasOwnProperty(i)){r[i]=q[i]}}return r}})(g))>0)}k.environment=(function(q){if(q.clone!=undefined){return q.clone()}else{var r=Object.create(q);for(var i in q){if(q.hasOwnProperty(i)){r[i]=q[i]}}return r}})(b.environment);k.compass=(function(q){if(q.clone!=undefined){return q.clone()}else{var r=Object.create(q);for(var i in q){if(q.hasOwnProperty(i)){r[i]=q[i]}}return r}})(b.compass);k.furnitureVisibleProperties=(b.furnitureVisibleProperties.slice(0));k.visualProperties=((function(s){var i={};for(var q in s){i[q]=s[q]}return i})(b.visualProperties));k.properties=((function(s){var i={};for(var q in s){i[q]=s[q]}return i})(b.properties))};a.cloneSelectableItems=function(b,h,c){var k=([]);for(var g=0;g<b.length;g++){var l=b[g];var j=(function(q){if(q.clone!=undefined){return q.clone()}else{var n=Object.create(q);for(var i in q){if(q.hasOwnProperty(i)){n[i]=q[i]}}return n}})(l);(k.push(j)>0);if((h.indexOf((l))>=0)){(c.push(j)>0)}else{if(l!=null&&l instanceof HomeFurnitureGroup){var m=l.getAllFurniture();var d=null;for(var f=0,e=m.length;f<e;f++){var o=m[f];if((h.indexOf((o))>=0)){if(d==null){d=j.getAllFurniture()}(c.push(d[f])>0)}}}}}return k};a.duplicate=function(e){var g=([]);var d=Wall.duplicate(a.getWallsSubList(e));var c=0;for(var b=0;b<e.length;b++){var f=e[b];if(f!=null&&f instanceof Wall){(g.push(d[c++])>0)}else{if(f!=null&&f instanceof HomeObject){(g.push(f.duplicate())>0)}else{(g.push((function(i){if(i.clone!=undefined){return i.clone()}else{var j=Object.create(i);for(var h in i){if(i.hasOwnProperty(h)){j[h]=i[h]}}return j}})(f))>0)}}}return g};a.getFurnitureSubList=function(b){return a.getSubList(b,HomePieceOfFurniture)};a.getWallsSubList=function(b){return a.getSubList(b,Wall)};a.getRoomsSubList=function(b){return a.getSubList(b,Room)};a.getPolylinesSubList=function(b){return a.getSubList(b,Polyline)};a.getDimensionLinesSubList=function(b){return a.getSubList(b,DimensionLine)};a.getLabelsSubList=function(b){return a.getSubList(b,Label)};a.getSubList=function(d,f){var c=([]);for(var b=0;b<d.length;b++){var e=d[b];if((function(h,g){if(typeof h==="string"){return(g.constructor&&g.constructor.__interfaces&&g.constructor.__interfaces.indexOf(h)>=0)||(g.__interfaces&&g.__interfaces.indexOf(h)>=0)}else{if(typeof h==="function"){return(g instanceof h)||(g.constructor&&g.constructor===h)}}})(f,e)){(c.push(e)>0)}}return c};a.CURRENT_VERSION=6400;a.HOME_TOP_CAMERA_ID="camera-homeTopCamera";a.HOME_OBSERVER_CAMERA_ID="observerCamera-homeObserverCamera";a.HOME_ENVIRONMENT_ID="environment-homeEnvironment";a.HOME_COMPASS_ID="compass-homeCompass";a.KEEP_BACKWARD_COMPATIBLITY=true;return a}());Home.__class="com.eteks.sweethome3d.model.Home";Home.__interfaces=["java.lang.Cloneable","java.io.Serializable"];(function(a){var b=(function(){function c(d){this.__parent=d}c.prototype.propertyChange=function(d){if(("ELEVATION"===d.getPropertyName())||("ELEVATION_INDEX"===d.getPropertyName())){this.__parent.levels=(this.__parent.levels.slice(0));(function(e,f){if(f.compare){e.sort(function(h,g){return f.compare(h,g)})}else{e.sort(f)}})(this.__parent.levels,a.LEVEL_ELEVATION_COMPARATOR_$LI$())}};return c}());a.Home$0=b;b.__interfaces=["java.util.EventListener","java.beans.PropertyChangeListener"]})(Home||(Home={}));Home.__transients=["furnitureChangeSupport","selectedItems","selectionListeners","allLevelsSelection","levelsChangeSupport","wallsChangeSupport","roomsChangeSupport","polylinesChangeSupport","dimensionLinesChangeSupport","labelsChangeSupport","modified","recovered","repaired","propertyChangeSupport"];Home.LEVEL_ELEVATION_COMPARATOR_$LI$();HomeFurnitureGroup.__com_eteks_sweethome3d_model_HomeFurnitureGroup_IDENTITY_$LI$();HomePieceOfFurniture.IDENTITY_$LI$();HomePieceOfFurniture.SORTABLE_PROPERTY_COMPARATORS_$LI$();HomePieceOfFurniture.ROUND_WALL_ANGLE_MARGIN_$LI$();HomePieceOfFurniture.STRAIGHT_WALL_ANGLE_MARGIN_$LI$();HomePieceOfFurniture.TWICE_PI_$LI$();HomePieceOfFurniture.__static_initialize();Label.TWICE_PI_$LI$();Room.TWICE_PI_$LI$();FurnitureCategory.COMPARATOR_$LI$();CatalogPieceOfFurniture.recentFilters_$LI$();CatalogPieceOfFurniture.COMPARATOR_$LI$();CatalogPieceOfFurniture.EMPTY_CRITERIA_$LI$();CatalogPieceOfFurniture.INDENTITY_ROTATION_$LI$();CatalogPieceOfFurniture.__static_initialize();Baseboard.baseboardsCache_$LI$();TextStyle.textStylesCache_$LI$();CatalogTexture.recentFilters_$LI$();CatalogTexture.COMPARATOR_$LI$();CatalogTexture.EMPTY_CRITERIA_$LI$();CatalogTexture.__static_initialize();TexturesCategory.COMPARATOR_$LI$();function DAELoader(){ModelLoader.call(this,"dae")}DAELoader.prototype=Object.create(ModelLoader.prototype);DAELoader.prototype.constructor=DAELoader;DAELoader.prototype.parseEntryScene=function(b,c,a,d,i,g){var h=new Group3D();var j=new DAEHandler(h,c);var f=new SAXParser(j,j,j,j,j);g(ModelLoader.PARSING_MODEL,c,0);try{f.parseString(b)}catch(e){h.removeAllChildren()}if(i===null){g(ModelLoader.PARSING_MODEL,c,1);return h}else{setTimeout(function(){g(ModelLoader.PARSING_MODEL,c,1);i(h)},0)}};function DAEHandler(a,b){DefaultHandler.call(this);this.sceneRoot=a;this.daeEntryName=b;this.parentGroups=[];this.parentElements=[];this.buffer="";this.postProcessingBinders=[];this.textures={};this.effectAppearances={};this.materialEffects={};this.materialNames={};this.surface2DIds={};this.sampler2DIds={};this.geometries={};this.sources={};this.positions={};this.normals={};this.textureCoordinates={};this.floatArrays={};this.sourceAccessorStrides=[];this.appearanceGeometries={};this.facesAndLinesPrimitives=[];this.polygonsPrimitives=[];this.polygonsHoles=[];this.nodes={};this.instantiatedNodes={};this.visualScenes={};this.visualScene=null;this.floats=[];this.geometryVertices=[];this.geometryNormals=[];this.geometryTextureCoordinates=[];this.vcount=[];this.transparentColor=[];this.transparency=null;this.inRootAsset=false;this.reverseTransparency=false;this.imageId=null;this.materialId=null;this.effectId=null;this.newParamSid=null;this.inSurface2D=false;this.inPhongBlinnOrLambert=false;this.techniqueProfile=null;this.inConstant=false;this.geometryId=null;this.meshSourceId=null;this.verticesId=null;this.floatArrayId=null;this.geometryAppearance=null;this.geometryVertexOffset=0;this.geometryNormalOffset=0;this.geometryTextureCoordinatesOffset=0;this.axis=null;this.meterScale=1;this.floatValue=0;this.opaque=null;this.inputCount=0}DAEHandler.prototype=Object.create(DefaultHandler.prototype);DAEHandler.prototype.constructor=DAEHandler;DAEHandler.prototype.startElement=function(o,g,I,r){this.buffer="";var s=this.parentElements.length===0?null:this.parentElements[this.parentElements.length-1];if(s===null&&!("COLLADA"==I)){throw new SAXException("Expected COLLADA element")}else{if("COLLADA"==I){var l=r.getValue("version");if(l.indexOf("1.4")!==0){throw new SAXException("Version "+l+" not supported")}}else{if("COLLADA"==s&&"asset"==I){this.inRootAsset=true}else{if("asset"==s&&"unit"==I){var B=r.getValue("meter");if(B!==null){this.meterScale=parseFloat(B)}}else{if("image"==I){this.imageId=r.getValue("id")}else{if("material"==I){this.materialId=r.getValue("id");this.materialNames[this.materialId]=r.getValue("name")}else{if("material"==s&&"instance_effect"==I){var t=r.getValue("url");if(t.indexOf("#")===0){var f=t.substring(1);this.materialEffects[this.materialId]=f}}else{if("effect"==I){this.effectId=r.getValue("id");this.effectAppearances[this.effectId]=new Appearance3D()}else{if(this.effectId!==null){if("profile_COMMON"==s&&"newparam"==I){this.newParamSid=r.getValue("sid")}else{if("newparam"==s&&"surface"==I&&"2D"==r.getValue("type")){this.inSurface2D=true}else{if("extra"==s&&"technique"==I){this.techniqueProfile=r.getValue("profile")}else{if("phong"==I||"blinn"==I){this.inPhongBlinnOrLambert=true}else{if("lambert"==I){this.inPhongBlinnOrLambert=true;this.effectAppearances[this.effectId].setSpecularColor(vec3.fromValues(0,0,0));this.effectAppearances[this.effectId].setShininess(1)}else{if("constant"==I){this.inConstant=true}else{if(this.inConstant||this.inPhongBlinnOrLambert&&("transparent"==I)){this.opaque=r.getValue("opaque");if(this.opaque===null){this.opaque="A_ONE"}}else{if("texture"==I&&"diffuse"==s){var J=this.surface2DIds[this.sampler2DIds[r.getValue("texture")]];var u=this.effectAppearances[this.effectId];var d=this;this.postProcessingBinders.push(function(){u.imageEntryName=d.textures[J]})}}}}}}}}}else{if("geometry"==I){this.geometryId=r.getValue("id");this.geometries[this.geometryId]=[]}else{if(this.geometryId!==null){if("mesh"==s&&"source"==I){this.meshSourceId=r.getValue("id")}else{if("mesh"==s&&"vertices"==I){this.verticesId=r.getValue("id")}else{if(this.meshSourceId!==null){if("float_array"==I){this.floatArrayId=r.getValue("id")}else{if("technique_common"==s&&"accessor"==I){var b=r.getValue("source").substring(1);var z=r.getValue("stride");z=z!==null?parseInt(z):1;this.sourceAccessorStrides.push({floatArray:this.floatArrays[b],stride:z})}}}else{if(this.verticesId!==null&&"input"==I){var H=r.getValue("source").substring(1);var A=this.sources[H];if("POSITION"==r.getValue("semantic")){this.positions[this.verticesId]=new Array(A.length/3);for(var E=0,C=0;C<A.length;E++,C+=3){this.positions[this.verticesId][E]=vec3.fromValues(A[C],A[C+1],A[C+2])}}else{if("NORMAL"==r.getValue("semantic")){this.normals[this.verticesId]=new Array(A.length/3);for(var E=0,C=0;C<A.length;E++,C+=3){this.normals[this.verticesId][E]=vec3.fromValues(A[C],A[C+1],A[C+2])}}else{if("TEXCOORD"==r.getValue("semantic")){this.textureCoordinates[this.verticesId]=new Array(A.length/2);for(var E=0,C=0;C<A.length;E++,C+=2){this.textureCoordinates[this.verticesId][E]=vec2.fromValues(A[C],A[C+1])}}}}}else{if(this.verticesId===null&&"input"==I){var H=r.getValue("source").substring(1);var n=parseInt(r.getValue("offset"));if(this.inputCount<n+1){this.inputCount=n+1}if("VERTEX"==r.getValue("semantic")){this.geometryVertices=this.positions[H];this.geometryVertexOffset=n;if(this.geometryNormals===null){this.geometryNormals=this.normals[H];this.geometryNormalOffset=n}if(this.geometryTextureCoordinates===null){this.geometryTextureCoordinates=this.textureCoordinates[H];this.geometryTextureCoordinatesOffset=n}}else{if("NORMAL"==r.getValue("semantic")){var A=this.sources[H];this.geometryNormals=new Array(A.length/3);for(var E=0,C=0;C<A.length;E++,C+=3){this.geometryNormals[E]=vec3.fromValues(A[C],A[C+1],A[C+2])}this.geometryNormalOffset=n}else{if("TEXCOORD"==r.getValue("semantic")){var A=this.sources[H];this.geometryTextureCoordinates=new Array(A.length/2);for(var E=0,C=0;C<A.length;E++,C+=2){this.geometryTextureCoordinates[E]=vec2.fromValues(A[C],A[C+1])}this.geometryTextureCoordinatesOffset=n}}}}else{if("triangles"==I||"trifans"==I||"tristrips"==I||"polylist"==I||"polygons"==I||"lines"==I||"linestrips"==I){this.geometryAppearance=r.getValue("material");this.inputCount=0;this.facesAndLinesPrimitives=[];this.polygonsPrimitives=[];this.polygonsHoles=[];this.vcount=null}}}}}}}else{if("visual_scene"==I){var v=new TransformGroup3D();this.parentGroups.push(v);this.visualScenes[r.getValue("id")]=v}else{if("node"==I){var G=new TransformGroup3D();if(this.parentGroups.length>0){this.parentGroups[this.parentGroups.length-1].addChild(G)}this.parentGroups.push(G);this.nodes[r.getValue("id")]=G;var c=r.getValue("name");if(c!==null){G.setName(c)}}else{if("node"==s&&"instance_geometry"==I){var D=r.getValue("url");if(D.indexOf("#")===0){var p=D.substring(1);var c=r.getValue("name");var j=new Group3D();this.parentGroups[this.parentGroups.length-1].addChild(j);this.parentGroups.push(j);var d=this;this.postProcessingBinders.push(function(){var M=0;var L=d.geometries[p];for(var K=0;K<L.length;K++){var k=new Shape3D(L[K]);j.addChild(k);if(c!==null){if(M===0){k.setName(c)}else{k.setName(c+"_"+M)}M++}}})}}else{if("instance_node"==I){var h=r.getValue("url");if(h.indexOf("#")===0){var y=h.substring(1);var F=this.parentGroups[this.parentGroups.length-1];var d=this;this.postProcessingBinders.push(function(){var i=d.instantiatedNodes[y];if(i===undefined){i=new SharedGroup3D();i.addChild(d.nodes[y]);d.instantiatedNodes[y]=i}F.addChild(new Link3D(i))})}}else{if("instance_material"==I&&this.parentGroups.length>0){var m=r.getValue("target");if(m.indexOf("#")==0){var x=m.substring(1);var a=r.getValue("symbol");var q=this.parentGroups[this.parentGroups.length-1];var d=this;this.postProcessingBinders.push(function(){var i=d.effectAppearances[d.materialEffects[x]];var k=function(O,K){if(O instanceof Group3D){var M=O.getChildren();for(var L=0;L<M.length;L++){k(M[L],K)}}else{if(O instanceof Link3D){k(O.getSharedGroup(),K)}else{if(O instanceof Shape3D){var N=d.appearanceGeometries[a];if(N!==undefined){for(var L=0;L<N.length;L++){if(N[L]===O.getGeometries()[0]){O.setAppearance(K);break}}}}}}};k(q,i);i.setName(d.materialNames[x])})}}else{if("instance_visual_scene"==I){var w=r.getValue("url");if(w.indexOf("#")===0){var e=w.substring(1);var d=this;this.postProcessingBinders.push(function(){d.visualScene=d.visualScenes[e]})}}}}}}}}}}}}}}}}}}this.parentElements.push(I)};DAEHandler.prototype.characters=function(a,c,b){this.buffer+=a.substring(c,c+b)};DAEHandler.prototype.endElement=function(c,f,b){this.parentElements.pop();var l=this.parentElements.length===0?null:this.parentElements[this.parentElements.length-1];if("color"==b||"float_array"==b||"matrix"==b||"rotate"==b||"scale"==b||"translate"==b){var g=this.getCharacters().split(/\s/);this.floats=new Array(g.length);var d=0;for(var h=0;h<g.length;h++){if(g[h].length>0){var j=parseFloat(g[h]);if(isNaN(j)){j=0}this.floats[d++]=j}}if(d!==g.length){this.floats.splice(d,this.floats.length-d)}if(this.floatArrayId!==null){this.floatArrays[this.floatArrayId]=this.floats;this.floatArrayId=null}}else{if("float"==b){this.floatValue=parseFloat(this.getCharacters())}}if(this.inRootAsset){this.handleRootAssetElementsEnd(b)}else{if("image"==b){this.imageId=null}else{if(this.imageId!==null){this.handleImageElementsEnd(b)}else{if("material"==b){this.materialId=null}else{if("effect"==b){this.effectId=null}else{if(this.effectId!==null){this.handleEffectElementsEnd(b,l)}else{if("geometry"==b){this.geometryId=null}}}}}}}if(this.geometryId!==null){this.handleGeometryElementsEnd(b,l)}else{if("visual_scene"==b||"node"==b||"node"==l&&"instance_geometry"==b){this.parentGroups.pop()}else{if("matrix"==b){var k=mat4.fromValues(this.floats[0],this.floats[4],this.floats[8],this.floats[12],this.floats[1],this.floats[5],this.floats[9],this.floats[13],this.floats[2],this.floats[6],this.floats[10],this.floats[14],this.floats[3],this.floats[7],this.floats[11],this.floats[15]);this.mulTransformGroup(k)}else{if("node"==l&&"rotate"==b){var m=mat4.create();mat4.fromRotation(m,this.floats[3]*Math.PI/180,vec3.fromValues(this.floats[0],this.floats[1],this.floats[2]));this.mulTransformGroup(m)}else{if("scale"==b){var e=mat4.create();mat4.scale(e,e,vec3.fromValues(this.floats[0],this.floats[1],this.floats[2]));this.mulTransformGroup(e)}else{if("node"==l&&"translate"==b){var a=mat4.create();mat4.translate(a,a,vec3.fromValues(this.floats[0],this.floats[1],this.floats[2]));this.mulTransformGroup(a)}}}}}}};DAEHandler.prototype.getCharacters=function(){return this.buffer.trim()};DAEHandler.prototype.handleRootAssetElementsEnd=function(c){if("asset"==c){this.inRootAsset=false}else{if("up_axis"==c){this.axis=this.getCharacters()}else{if("subject"==c){this.scene.setName(this.getCharacters())}else{if("authoring_tool"==c){var b=this.getCharacters();if(b.indexOf("Google SketchUp")===0){var d=b.substring("Google SketchUp".length).trim();if(d.length>0){var f=d.indexOf(".");var e=f===-1?d:d.substring(0,f);var a=parseInt(e);if(a<7||(a==7&&(f>=d.length-1||d[f+1]<"1"))){this.reverseTransparency=true}}}}}}}};DAEHandler.prototype.handleImageElementsEnd=function(c){if("init_from"==c){var f=this.getCharacters();if(f.indexOf("./")===0){f=f.substring(2)}var a=this.daeEntryName.lastIndexOf("/");if(a>=0){var e=this.daeEntryName.split("/");var b=f.split("/");e.splice(e.length-1,1);while(b[0]==".."||b[0]=="."){if(b[0]==".."){e.splice(e.length-1,1)}b.splice(0,1)}f="";for(var d=0;d<e.length;d++){f+=e[d]+"/"}for(var d=0;d<b.length;d++){f+=b[d]+"/"}f=f.substring(0,f.length-1)}this.textures[this.imageId]=f}else{if("data"==c){throw new SAXException("<data> not supported")}}};DAEHandler.prototype.handleEffectElementsEnd=function(b,c){if("profile_COMMON"==c&&"newparam"==b){this.newParamSid=null}else{if("newparam"==c&&"surface"==b){this.inSurface2D=false}else{if(this.newParamSid!==null){if(this.inSurface2D&&"init_from"==b){this.surface2DIds[this.newParamSid]=this.getCharacters()}else{if("sampler2D"==c&&"source"==b){this.sampler2DIds[this.newParamSid]=this.getCharacters()}}}else{if("extra"==c&&"technique"==b){this.techniqueProfile=null}else{if("phong"==b||"blinn"==b||"lambert"==b||"constant"==b){var d;if(this.transparentColor!==null){if("RGB_ZERO"==this.opaque){d=this.transparentColor[0]*0.212671+this.transparentColor[1]*0.71516+this.transparentColor[2]*0.072169;if(this.transparency!==null){d*=this.transparency}}else{if(this.transparency!==null){d=1-this.transparentColor[3]*this.transparency}else{d=1-this.transparentColor[3]}if(this.reverseTransparency){d=1-d}}}else{d=0}var a=this.effectAppearances[this.effectId];if(d>0){a.setTransparency(d)}else{var e=vec3.fromValues(0,0,0);if(!a.getAmbientColor()){a.setAmbientColor(e)}if(!a.getDiffuseColor()){a.setDiffuseColor(e)}if(!a.getSpecularColor()){a.setSpecularColor(e)}if(!a.getShininess()){a.setShininess(1)}}this.transparentColor=null;this.transparency=null;this.inPhongBlinnOrLambert=false;this.inConstant=false}else{if(this.inConstant||this.inPhongBlinnOrLambert){if("color"==b){if("emission"==c){if(this.inPhongBlinnOrLambert){this.effectAppearances[this.effectId].setEmissiveColor(vec3.fromValues(this.floats[0],this.floats[1],this.floats[2]))}else{this.effectAppearances[this.effectId].setDiffuseColor(vec3.fromValues(this.floats[0],this.floats[1],this.floats[2]))}}else{if("ambient"==c){this.effectAppearances[this.effectId].setAmbientColor(vec3.fromValues(this.floats[0],this.floats[1],this.floats[2]))}else{if("diffuse"==c){this.effectAppearances[this.effectId].setDiffuseColor(vec3.fromValues(this.floats[0],this.floats[1],this.floats[2]))}else{if("specular"==c){this.effectAppearances[this.effectId].setSpecularColor(vec3.fromValues(this.floats[0],this.floats[1],this.floats[2]))}else{if("transparent"==c){this.transparentColor=this.floats}}}}}}else{if("float"==b){if("shininess"==c){this.effectAppearances[this.effectId].setShininess(this.floatValue)}else{if("transparency"==c){this.transparency=this.floatValue}}}}}else{if("double_sided"==b&&"1"==this.getCharacters()&&("GOOGLEEARTH"==this.techniqueProfile||"MAX3D"==this.techniqueProfile||"MAYA"==this.techniqueProfile)){this.effectAppearances[this.effectId].setCullFace(Appearance3D.CULL_NONE)}}}}}}}};DAEHandler.prototype.handleGeometryElementsEnd=function(a,e){if("mesh"==e&&"source"==a){this.sources[this.meshSourceId]=this.floats;this.meshSourceId=null}else{if("mesh"==e&&"vertices"==a){this.verticesId=null}else{if("p"==a||"h"==a||"vcount"==a){var f=this.getCharacters().split(/\s/);var h=new Array(f.length);var d=0;for(var b=0;b<f.length;b++){if(f[b].length>0){h[d++]=parseInt(f[b])}}if(d!==f.length){h.splice(d,h.length-d)}if("ph"!=e&&"p"==a){this.facesAndLinesPrimitives.push(h)}else{if("vcount"==a){this.vcount=h}else{if("ph"==e){if("p"==a){this.polygonsPrimitives.push(h)}else{if("h"==a){if(this.polygonsPrimitives.length>this.polygonsHoles.length){this.polygonsHoles.push([])}this.polygonsHoles[this.polygonsPrimitives.length-1].push(h)}}}}}}else{if(("triangles"==a||"trifans"==a||"tristrips"==a||"polylist"==a||"polygons"==a||"lines"==a||"linestrips"==a)&&this.geometryVertices!==null){var g;if("lines"==a||"linestrips"==a){g=this.getLinesGeometry(a)}else{g=this.getFacesGeometry(a)}if(g!==null){this.geometries[this.geometryId].push(g);if(this.geometryAppearance!==null){var c=this.appearanceGeometries[this.geometryAppearance];if(c===undefined){c=[];this.appearanceGeometries[this.geometryAppearance]=c}c.push(g)}}this.geometryAppearance=null;this.geometryVertices=null;this.geometryNormals=null;this.geometryTextureCoordinates=null;this.facesAndLinesPrimitives=[];this.polygonsPrimitives=[];this.polygonsHoles=[];this.vcount=null}}}}};DAEHandler.prototype.getFacesGeometry=function(b){var o;if("triangles"==b){o=GeometryInfo3D.TRIANGLE_ARRAY}else{if("trifans"==b){o=GeometryInfo3D.TRIANGLE_FAN_ARRAY}else{if("tristrips"==b){o=GeometryInfo3D.TRIANGLE_STRIP_ARRAY}else{o=GeometryInfo3D.POLYGON_ARRAY}}}var d=new GeometryInfo3D(o);d.setCoordinates(this.geometryVertices);d.setCoordinateIndices(this.getIndices(this.geometryVertexOffset));if(this.geometryNormals){d.setNormals(this.geometryNormals);d.setNormalIndices(this.getIndices(this.geometryNormalOffset))}if(this.geometryTextureCoordinates){var a;for(var f=0;f<this.sourceAccessorStrides.length;f++){var p=this.sourceAccessorStrides[f];if(p.floatArray===this.geometryTextureCoordinates){a=p.stride;break}}var c;if(a>2){c=new Array(this.geometryTextureCoordinates.length/a*2);for(var f=0,e=0;e<this.geometryTextureCoordinates.length;e+=a){c[f++]=this.geometryTextureCoordinates[e];c[f++]=this.geometryTextureCoordinates[e+1]}}else{c=this.geometryTextureCoordinates}d.setTextureCoordinates(c);d.setTextureCoordinateIndices(this.getIndices(this.geometryTextureCoordinatesOffset))}if("tristrips"==b||"trifans"==b){var h=new Array(this.facesAndLinesPrimitives.length);for(var f=0;f<h.length;f++){h[f]=this.facesAndLinesPrimitives[f].length/this.inputCount}d.setStripCounts(h)}else{if("polylist"==b){d.setStripCounts(this.vcount)}else{if("polygons"==b){var m=0;for(var f=0;f<this.polygonsHoles.length;f++){m+=this.polygonsHoles[f].length}var h=new Array(this.facesAndLinesPrimitives.length+this.polygonsPrimitives.length+m);var n=new Array(this.facesAndLinesPrimitives.length+this.polygonsPrimitives.length);var l=0;var k=0;for(var f=0;f<this.facesAndLinesPrimitives.length;f++){h[l++]=this.facesAndLinesPrimitives[f].length/this.inputCount;n[k++]=1}for(var f=0;f<this.polygonsPrimitives.length;f++){h[l++]=this.polygonsPrimitives[f].length/this.inputCount;var g=this.polygonsHoles[f];for(var e=0;e<g.length;e++){h[l++]=g[e].length/this.inputCount}n[k++]=1+g.length}d.setStripCounts(h);d.setContourCounts(n)}}}if(!this.geometryNormals){d.setCreaseAngle(Math.PI/2);d.setGeneratedNormals(true)}return d.getIndexedGeometryArray()};DAEHandler.prototype.getLinesGeometry=function(a){var h=this.getIndices(this.geometryVertexOffset);if(h.length!==0){var f=this.geometryTextureCoordinates?this.getIndices(this.geometryTextureCoordinatesOffset):[];if("linestrips"==a){var j=[];var b=[];for(var d=0,e=0;d<this.facesAndLinesPrimitives.length;d++){var g=this.facesAndLinesPrimitives[d].length/this.inputCount;for(var c=0;c<g-1;c++){j.push(h[e+c]);j.push(h[e+c+1]);if(textureCoordinateIndices.length>0){b.push(textureCoordinateIndices[e+c]);b.push(textureCoordinateIndices[e+c+1])}}e+=g}h=j;f=b}return new IndexedLineArray3D(this.geometryVertices,h,this.geometryTextureCoordinates,f)}else{return null}};DAEHandler.prototype.getIndices=function(f){if(this.facesAndLinesPrimitives.length===1&&this.polygonsPrimitives.length===1&&this.inputCount===1){return facesAndLinesPrimitives[0]}else{var m=this.getIndexCount(this.facesAndLinesPrimitives);m+=this.getIndexCount(this.polygonsPrimitives);for(var e=0;e<this.polygonsHoles.length;e++){m+=this.getIndexCount(this.polygonsHoles[e])}var o=new Array(m/this.inputCount);var e=0;for(var d=0;d<this.facesAndLinesPrimitives.length;d++){var n=this.facesAndLinesPrimitives[d];for(var c=f;c<n.length;c+=this.inputCount){o[e++]=n[c]}}for(var d=0;d<this.polygonsPrimitives.length;d++){var h=this.polygonsPrimitives[d];for(var c=f;c<h.length;c+=this.inputCount){o[e++]=h[c]}var g=this.polygonsHoles[d];for(var c=0;c<g.length;c++){var a=g[c];for(var b=f;b<a.length;b+=this.inputCount){o[e++]=a[b]}}}return o}};DAEHandler.prototype.getIndexCount=function(a){var c=0;for(var b=0;b<a.length;b++){c+=a[b].length}return c};DAEHandler.prototype.mulTransformGroup=function(b){var c=this.parentGroups[this.parentGroups.length-1];var a=mat4.create();c.getTransform(a);mat4.mul(a,a,b);c.setTransform(a)};DAEHandler.prototype.endDocument=function(){for(var b=0;b<this.postProcessingBinders.length;b++){this.postProcessingBinders[b]()}if(this.visualScene!==null){var g=mat4.create();this.visualScene.getTransform(g);var e=new BoundingBox3D(vec3.fromValues(Infinity,Infinity,Infinity),vec3.fromValues(-Infinity,-Infinity,-Infinity));this.computeBounds(this.visualScene,e,mat4.create());var a=vec3.create();e.getLower(a);if(a[0]!==Infinity){var d=vec3.create();e.getUpper(d);var h=mat4.create();mat4.translate(h,h,vec3.fromValues(-a[0]-(d[0]-a[0])/2,-a[1]-(d[1]-a[1])/2,-a[2]-(d[2]-a[2])/2));mat4.mul(h,h,g);g=h}var c=mat4.create();mat4.scale(c,c,vec3.fromValues(this.meterScale*100,this.meterScale*100,this.meterScale*100));mat4.mul(c,c,g);var f=mat4.create();if("Z_UP"==this.axis){mat4.fromXRotation(f,-Math.PI/2)}else{if("X_UP"==this.axis){mat4.fromZRotation(f,Math.PI/2)}}mat4.mul(f,f,c);this.visualScene.setTransform(f);this.sceneRoot.addChild(this.visualScene)}};DAEHandler.prototype.computeBounds=function(g,f,e){if(g instanceof Group3D){if(g instanceof TransformGroup3D){e=mat4.clone(e);var b=mat4.create();g.getTransform(b);mat4.mul(e,e,b)}var d=g.getChildren();for(var c=0;c<d.length;c++){this.computeBounds(d[c],f,e)}}else{if(g instanceof Link3D){this.computeBounds(g.getSharedGroup(),f,e)}else{if(g instanceof Shape3D){var a=g.getBounds();a.transform(e);f.combine(a)}}}};function Max3DSLoader(){ModelLoader.call(this,"3ds");if(Max3DSLoader.DEFAULT_APPEARANCE===null){Max3DSLoader.DEFAULT_APPEARANCE=new Appearance3D("Default");Max3DSLoader.DEFAULT_APPEARANCE.setAmbientColor(vec3.fromValues(0.4,0.4,0.4));Max3DSLoader.DEFAULT_APPEARANCE.setDiffuseColor(vec3.fromValues(0.7102,0.702,0.6531));Max3DSLoader.DEFAULT_APPEARANCE.setSpecularColor(vec3.fromValues(0.3,0.3,0.3));Max3DSLoader.DEFAULT_APPEARANCE.setShininess(128)}}Max3DSLoader.prototype=Object.create(ModelLoader.prototype);Max3DSLoader.prototype.constructor=Max3DSLoader;Max3DSLoader.NULL_CHUNK=0;Max3DSLoader.M3DMAGIC=19789;Max3DSLoader.MLIBMAGIC=15786;Max3DSLoader.CMAGIC=49725;Max3DSLoader.M3D_VERSION=2;Max3DSLoader.COLOR_FLOAT=16;Max3DSLoader.COLOR_24=17;Max3DSLoader.LINEAR_COLOR_24=18;Max3DSLoader.LINEAR_COLOR_FLOAT=19;Max3DSLoader.PERCENTAGE_INT=48;Max3DSLoader.PERCENTAGE_FLOAT=49;Max3DSLoader.EDITOR_DATA=15677;Max3DSLoader.MESH_VERSION=15678;Max3DSLoader.MASTER_SCALE=256;Max3DSLoader.MATERIAL_ENTRY=45055;Max3DSLoader.MATERIAL_NAME=40960;Max3DSLoader.MATERIAL_AMBIENT=40976;Max3DSLoader.MATERIAL_DIFFUSE=40992;Max3DSLoader.MATERIAL_SPECULAR=41008;Max3DSLoader.MATERIAL_SHININESS=41024;Max3DSLoader.MATERIAL_TRANSPARENCY=41040;Max3DSLoader.MATERIAL_TWO_SIDED=41089;Max3DSLoader.MATERIAL_TEXMAP=41472;Max3DSLoader.MATERIAL_MAPNAME=41728;Max3DSLoader.NAMED_OBJECT=16384;Max3DSLoader.TRIANGLE_MESH_OBJECT=16640;Max3DSLoader.POINT_ARRAY=16656;Max3DSLoader.FACE_ARRAY=16672;Max3DSLoader.MESH_MATERIAL_GROUP=16688;Max3DSLoader.SMOOTHING_GROUP=16720;Max3DSLoader.MESH_BOXMAP=16784;Max3DSLoader.TEXTURE_COORDINATES=16704;Max3DSLoader.MESH_MATRIX=16736;Max3DSLoader.MESH_COLOR=16741;Max3DSLoader.KEY_FRAMER_DATA=45056;Max3DSLoader.OBJECT_NODE_TAG=45058;Max3DSLoader.NODE_ID=45104;Max3DSLoader.NODE_HIERARCHY=45072;Max3DSLoader.PIVOT=45075;Max3DSLoader.POSITION_TRACK_TAG=45088;Max3DSLoader.ROTATION_TRACK_TAG=45089;Max3DSLoader.SCALE_TRACK_TAG=45090;Max3DSLoader.TRACK_KEY_USE_TENS=1;Max3DSLoader.TRACK_KEY_USE_CONT=2;Max3DSLoader.TRACK_KEY_USE_BIAS=4;Max3DSLoader.TRACK_KEY_USE_EASE_TO=8;Max3DSLoader.TRACK_KEY_USE_EASE_FROM=16;Max3DSLoader.DEFAULT_APPEARANCE=null;Max3DSLoader.prototype.createScene=function(j,b,d,s,c,l,r){var m=new Group3D();var n=mat4.create();mat4.fromXRotation(n,-Math.PI/2);mat4.scale(n,n,vec3.fromValues(c,c,c));var g=new TransformGroup3D(n);m.addChild(g);if(s.getChildren().length>0){g.addChild(s);g=s}var q={};for(var u in d){var o=d[u];var p=new Appearance3D(u);if(o.ambientColor!==null){p.setAmbientColor(o.ambientColor)}if(o.diffuseColor!==null){p.setDiffuseColor(o.diffuseColor)}if(o.shininess!==null){p.setShininess(o.shininess*128*0.6)}if(o.specularColor!==null){if(o.shininess!==null){var a=vec3.clone(o.specularColor);vec3.scale(a,a,o.shininess);p.setSpecularColor(a)}else{p.setSpecularColor(o.specularColor)}}if(o.transparency!==null&&o.transparency>0){p.setTransparency(Math.min(1,o.transparency))}if(o.texture){p.imageEntryName=o.texture}q[u]=p}if(l===null){r(ModelLoader.BUILDING_MODEL,"",0);for(var t=0;t<j.length;t++){this.createShapes(j[t],b,q,m,g)}r(ModelLoader.BUILDING_MODEL,"",1);return m}else{var e=j.length;var h=0;var k=this;var f=function(){r(ModelLoader.BUILDING_MODEL,"",e!==0?h/e:0);var i=Date.now();while(j.length>0){k.createShapes(j[0],b,q,m,g);h++;j.splice(0,1);if(h<e&&Date.now()-i>10){setTimeout(f,0);return}}setTimeout(function(){r(ModelLoader.BUILDING_MODEL,"",1);l(m)},0)};f()}};Max3DSLoader.prototype.createShapes=function(s,R,h,w,e){var J=mat4.create();var g=s.faces;if(g!==null&&g.length>0){var a=s.vertices;var S=new Array(a.length);for(var Q=0;Q<S.length;Q++){S[Q]=null}var F=new Array(3*g.length);var p=vec3.create();var m=vec3.create();for(var Q=0,O=0;Q<g.length;Q++){var f=g[Q];var x=f.vertexIndices;for(var P=0;P<3;P++,O++){var C=x[P];vec3.subtract(p,a[x[P<2?P+1:0]],a[C]);vec3.subtract(m,a[x[P>0?P-1:2]],a[C]);var G=vec3.create();vec3.cross(G,p,m);var n=vec3.length(G);if(n>0){var I=Math.atan2(n,vec3.dot(p,m));vec3.scale(G,G,I/n)}var c=new Max3DSLoader.Mesh3DSSharedVertex(Q,G);c.nextVertex=S[C];S[C]=c;F[O]=G}}var q=new Array(3*g.length);for(var Q=0,O=0;Q<g.length;Q++){var f=g[Q];var x=f.vertexIndices;var d=new Array(3);for(var P=0;P<3;P++,O++){var C=x[P];var G=vec3.create();if(f.smoothingGroup===null){for(var c=S[C];c!==null;c=c.nextVertex){if(g[c.faceIndex].smoothingGroup===null&&(c.normal===F[O]||vec3.dot(c.normal,F[O])>0)){vec3.add(G,G,c.normal)}}}else{var E=f.smoothingGroup;for(var c=S[C];c!==null;c=c.nextVertex){var L=g[c.faceIndex];if(L.smoothingGroup!==null&&(f.smoothingGroup&L.smoothingGroup)!==0){E|=L.smoothingGroup}}for(var c=S[C];c!==null;c=c.nextVertex){var L=g[c.faceIndex];if(L.smoothingGroup!==null&&(E&L.smoothingGroup)!==0){vec3.add(G,G,c.normal)}}}if(vec3.squaredLength(G)!==0){vec3.normalize(G,G)}else{vec3.copy(G,F[O]);if(vec3.squaredLength(G)!==0){vec3.normalize(G,G)}}q[O]=G;d[P]=O}f.normalIndices=d}g.sort(function(j,l){var k=j.material;var i=l.material;if(k===null){if(i===null){return j.index-l.index}else{return -1}}else{if(i===null){return 1}else{return 0}}});var K;var B=R[s.name];if(B===undefined){K=e}else{if(B.length===1){K=B[0]}else{var b=new SharedGroup3D();for(var Q=0;Q<B.length;Q++){B[Q].addChild(new Link3D(b))}K=b}}var z=s.transform;if(z!==null){if(!mat4.exactEquals(z,J)){var y=new TransformGroup3D(z);K.addChild(y);K=y}}var r=s.textureCoordinates;var Q=0;var o=null;var N=null;while(Q<g.length){var D=g[Q];var v=D.material;var u=Q;while(++u<g.length){if(v!==g[u].material){break}}var U=u-Q;var T=new Array(U*3);var d=new Array(U*3);for(var P=0,O=0;P<U;P++){var f=g[Q+P];var x=f.vertexIndices;var A=f.normalIndices;for(var M=0;M<3;M++,O++){T[O]=x[M];d[O]=A[M]}}var H=new GeometryInfo3D(GeometryInfo3D.TRIANGLE_ARRAY);H.setCoordinates(a);H.setCoordinateIndices(T);H.setNormals(q);H.setNormalIndices(d);if(r!==null){H.setTextureCoordinates(r);H.setTextureCoordinateIndices(T)}geometryArray=H.getIndexedGeometryArray();if(o===null||N!==v){N=v;var t=Max3DSLoader.DEFAULT_APPEARANCE;if(v!==null&&h[v.name]!==undefined){t=h[v.name]}t=t.clone();if(v!==null&&v.twoSided){t.setCullFace(Appearance3D.CULL_NONE)}o=new Shape3D(geometryArray,t);K.addChild(o);o.setName(s.name+(Q===0?"":"_"+Q))}else{o.addGeometry(geometryArray)}Q=u}}};Max3DSLoader.prototype.getModelContent=function(a){return a.asUint8Array()};Max3DSLoader.prototype.parseEntryScene=function(f,a,c,g,k,h){var d=[];var m={};var l={};var b;var i=new TransformGroup3D();if(k===null){h(ModelLoader.PARSING_MODEL,a,0);b=this.parse3DSStream(new Max3DSLoader.ChunksInputStream(f),a,c,d,m,l,i);h(ModelLoader.PARSING_MODEL,a,1);return this.createScene(d,m,l,i,b,null,h)}else{var j=this;b=this.parse3DSStream(new Max3DSLoader.ChunksInputStream(f),a,c,d,m,l,i);var e=function(){setTimeout(function(){h(ModelLoader.PARSING_MODEL,a,1);j.createScene(d,m,l,i,b,function(n){k(n)},h)},0)};e()}};Max3DSLoader.prototype.parse3DSStream=function(g,a,b,c,h,i,f){try{masterScale=1;var d=false;switch(g.readChunkHeader().id){case Max3DSLoader.M3DMAGIC:case Max3DSLoader.MLIBMAGIC:case Max3DSLoader.CMAGIC:d=true;while(!g.isChunckEndReached()){switch(g.readChunkHeader().id){case Max3DSLoader.M3D_VERSION:g.readLittleEndianUnsignedInt();break;case Max3DSLoader.EDITOR_DATA:this.parseEditorData(g,a,b,c,i);break;case Max3DSLoader.KEY_FRAMER_DATA:this.parseKeyFramerData(g,h,f);break;default:g.readUntilChunkEnd();break}g.releaseChunk()}break;case Max3DSLoader.EDITOR_DATA:masterScale=this.parseEditorData(g,a,b,c,i);break;default:if(d){g.readUntilChunkEnd()}else{throw new IncorrectFormat3DException("Bad magic number")}}g.releaseChunk()}catch(e){c.length=0}return masterScale};Max3DSLoader.prototype.parseEditorData=function(e,b,g,a,c){var d=1;while(!e.isChunckEndReached()){switch(e.readChunkHeader().id){case Max3DSLoader.MESH_VERSION:e.readLittleEndianInt();break;case Max3DSLoader.MASTER_SCALE:d=e.readLittleEndianFloat();break;case Max3DSLoader.NAMED_OBJECT:this.parseNamedObject(e,a,c);break;case Max3DSLoader.MATERIAL_ENTRY:var f=this.parseMaterial(e,b,g);c[f.name]=f;break;default:e.readUntilChunkEnd();break}e.releaseChunk()}return d};Max3DSLoader.prototype.parseNamedObject=function(c,a,b){var d=c.readString();while(!c.isChunckEndReached()){switch(c.readChunkHeader().id){case Max3DSLoader.TRIANGLE_MESH_OBJECT:a.push(this.parseMeshData(c,d,b));break;default:c.readUntilChunkEnd();break}c.releaseChunk()}};Max3DSLoader.prototype.parseMeshData=function(l,a,o){var k=null;var e=null;var c=null;var f=null;var d=null;while(!l.isChunckEndReached()){switch(l.readChunkHeader().id){case Max3DSLoader.MESH_MATRIX:c=this.parseMatrix(l);c=mat4.invert(c,c);break;case Max3DSLoader.MESH_COLOR:f=l.readUnsignedByte();break;case Max3DSLoader.POINT_ARRAY:k=new Array(l.readLittleEndianUnsignedShort());for(var g=0;g<k.length;g++){k[g]=vec3.fromValues(l.readLittleEndianFloat(),l.readLittleEndianFloat(),l.readLittleEndianFloat())}break;case Max3DSLoader.FACE_ARRAY:d=this.parseFacesData(l);while(!l.isChunckEndReached()){switch(l.readChunkHeader().id){case Max3DSLoader.MESH_MATERIAL_GROUP:var m=l.readString();var j=null;if(o!==null){j=o[m]}for(var g=0,b=l.readLittleEndianUnsignedShort();g<b;g++){var h=l.readLittleEndianUnsignedShort();if(h<d.length){d[h].material=j}}break;case Max3DSLoader.SMOOTHING_GROUP:for(var g=0;g<d.length;g++){d[g].smoothingGroup=l.readLittleEndianUnsignedInt()}break;case Max3DSLoader.MESH_BOXMAP:default:l.readUntilChunkEnd();break}l.releaseChunk()}break;case Max3DSLoader.TEXTURE_COORDINATES:e=new Array(l.readLittleEndianUnsignedShort());for(var g=0;g<e.length;g++){e[g]=vec2.fromValues(l.readLittleEndianFloat(),l.readLittleEndianFloat())}break;default:l.readUntilChunkEnd();break}l.releaseChunk()}return new Max3DSLoader.Mesh3DS(a,k,e,d,f,c)};Max3DSLoader.prototype.parseKeyFramerData=function(l,b,o){var j=[];var i=null;while(!l.isChunckEndReached()){switch(l.readChunkHeader().id){case Max3DSLoader.OBJECT_NODE_TAG:var q=true;var h=null;var t=null;var f=0;var s=null;var u=null;while(!l.isChunckEndReached()){switch(l.readChunkHeader().id){case Max3DSLoader.NODE_HIERARCHY:var r=l.readString();q="$$$DUMMY"!=r;l.readLittleEndianUnsignedShort();l.readLittleEndianUnsignedShort();var p=l.readLittleEndianShort();var k=new TransformGroup3D();if(p===-1){o.addChild(k)}else{if(p>j.length-1){throw new IncorrectFormat3DException("Inconsistent nodes hierarchy")}j[p].addChild(k)}j.push(k);if(q){var d=b[r];if(d===undefined){d=[];b[r]=d}d.push(k)}i=k;break;case Max3DSLoader.PIVOT:h=this.parseVector(l);break;case Max3DSLoader.POSITION_TRACK_TAG:this.parseKeyFramerTrackStart(l);t=this.parseVector(l);l.readUntilChunkEnd();break;case Max3DSLoader.ROTATION_TRACK_TAG:this.parseKeyFramerTrackStart(l);f=l.readLittleEndianFloat();s=this.parseVector(l);l.readUntilChunkEnd();break;case Max3DSLoader.SCALE_TRACK_TAG:this.parseKeyFramerTrackStart(l);u=this.parseVector(l);l.readUntilChunkEnd();break;default:l.readUntilChunkEnd();break}l.releaseChunk()}var m=mat4.create();if(t!==null){mat4.translate(m,m,t)}if(s!==null&&f!==0){var e=vec3.length(s);if(e>0){var n=-f/2;var a=Math.sin(n)/e;var c=Math.cos(n);var g=mat4.create();mat4.fromQuat(g,quat.fromValues(s[0]*a,s[1]*a,s[2]*a,c));mat4.mul(m,m,g)}}if(u!==null){mat4.scale(m,m,u)}if(h!==null&&q){vec3.negate(h,h);mat4.translate(m,m,h)}i.setTransform(m);break;default:l.readUntilChunkEnd();break}l.releaseChunk()}};Max3DSLoader.prototype.parseKeyFramerTrackStart=function(b){b.readLittleEndianUnsignedShort();b.readLittleEndianUnsignedInt();b.readLittleEndianUnsignedInt();b.readLittleEndianInt();b.readLittleEndianInt();var a=b.readLittleEndianUnsignedShort();if((a&Max3DSLoader.TRACK_KEY_USE_TENS)!==0){b.readLittleEndianFloat()}if((a&Max3DSLoader.TRACK_KEY_USE_CONT)!==0){b.readLittleEndianFloat()}if((a&Max3DSLoader.TRACK_KEY_USE_BIAS)!==0){b.readLittleEndianFloat()}if((a&Max3DSLoader.TRACK_KEY_USE_EASE_TO)!==0){b.readLittleEndianFloat()}if((a&Max3DSLoader.TRACK_KEY_USE_EASE_FROM)!==0){b.readLittleEndianFloat()}};Max3DSLoader.prototype.parseFacesData=function(b){var a=new Array(b.readLittleEndianUnsignedShort());for(var c=0;c<a.length;c++){a[c]=new Max3DSLoader.Face3DS(c,b.readLittleEndianUnsignedShort(),b.readLittleEndianUnsignedShort(),b.readLittleEndianUnsignedShort(),b.readLittleEndianUnsignedShort())}return a};Max3DSLoader.prototype.parseMaterial=function(j,a,c){var b=null;var g=null;var h=null;var e=null;var k=null;var d=null;var f=false;var i=null;while(!j.isChunckEndReached()){switch(j.readChunkHeader().id){case Max3DSLoader.MATERIAL_NAME:b=j.readString();break;case Max3DSLoader.MATERIAL_AMBIENT:g=this.parseColor(j);break;case Max3DSLoader.MATERIAL_DIFFUSE:h=this.parseColor(j);break;case Max3DSLoader.MATERIAL_SPECULAR:e=this.parseColor(j);break;case Max3DSLoader.MATERIAL_SHININESS:k=this.parsePercentage(j);break;case Max3DSLoader.MATERIAL_TRANSPARENCY:d=this.parsePercentage(j);break;case Max3DSLoader.MATERIAL_TWO_SIDED:f=true;break;case Max3DSLoader.MATERIAL_TEXMAP:i=this.parseTextureMap(j,a,c);break;default:j.readUntilChunkEnd();break}j.releaseChunk()}return new Max3DSLoader.Material3DS(b,g,h,e,k,d,i,f)};Max3DSLoader.prototype.parseColor=function(c){var d=false;var b=null;var a;while(!c.isChunckEndReached()){switch(c.readChunkHeader().id){case Max3DSLoader.LINEAR_COLOR_24:d=true;b=vec3.fromValues(c.readUnsignedByte()/255,c.readUnsignedByte()/255,c.readUnsignedByte()/255);break;case Max3DSLoader.COLOR_24:a=vec3.fromValues(c.readUnsignedByte()/255,c.readUnsignedByte()/255,c.readUnsignedByte()/255);if(!d){b=a}break;case Max3DSLoader.LINEAR_COLOR_FLOAT:d=true;b=vec3.fromValues(c.readLittleEndianFloat(),c.readLittleEndianFloat(),c.readLittleEndianFloat());break;case Max3DSLoader.COLOR_FLOAT:a=vec3.fromValues(c.readLittleEndianFloat(),c.readLittleEndianFloat(),c.readLittleEndianFloat());if(!d){b=a}break;default:c.readUntilChunkEnd();break}c.releaseChunk()}if(b!==null){return b}else{throw new IncorrectFormat3DException("Expected color value")}};Max3DSLoader.prototype.parsePercentage=function(b){var a=null;while(!b.isChunckEndReached()){switch(b.readChunkHeader().id){case Max3DSLoader.PERCENTAGE_INT:a=b.readLittleEndianShort()/100;break;case Max3DSLoader.PERCENTAGE_FLOAT:a=b.readLittleEndianFloat();break;default:b.readUntilChunkEnd();break}b.releaseChunk()}if(a!==null){return a}else{throw new IncorrectFormat3DException("Expected percentage value")}};Max3DSLoader.prototype.parseTextureMap=function(c,b,f){var e=null;while(!c.isChunckEndReached()){switch(c.readChunkHeader().id){case Max3DSLoader.MATERIAL_MAPNAME:e=c.readString();break;case Max3DSLoader.PERCENTAGE_INT:default:c.readUntilChunkEnd();break}c.releaseChunk()}if(e!==null){var a=b.lastIndexOf("/");if(a>=0){e=b.substring(0,a+1)+e}var d=f.file(e);if(d!==null){return e}else{return this.getEntryNameIgnoreCase(f,e)}}return null};Max3DSLoader.prototype.getEntryNameIgnoreCase=function(c,d){d=d.toUpperCase();var a=c.file(/.*/);for(var b=0;b<a.length;b++){if(a[b].name.toUpperCase()==d){return a[b].name}}return null};Max3DSLoader.prototype.parseMatrix=function(a){return mat4.fromValues(a.readLittleEndianFloat(),a.readLittleEndianFloat(),a.readLittleEndianFloat(),0,a.readLittleEndianFloat(),a.readLittleEndianFloat(),a.readLittleEndianFloat(),0,a.readLittleEndianFloat(),a.readLittleEndianFloat(),a.readLittleEndianFloat(),0,a.readLittleEndianFloat(),a.readLittleEndianFloat(),a.readLittleEndianFloat(),1)};Max3DSLoader.prototype.parseVector=function(a){return vec3.fromValues(a.readLittleEndianFloat(),a.readLittleEndianFloat(),a.readLittleEndianFloat())};Max3DSLoader.Chunk3DS=function(b,a){if(a<6){throw new IncorrectFormat3DException("Invalid chunk "+b+" length "+a)}this.id=b;this.length=a;this.readLength=6};Max3DSLoader.Chunk3DS.prototype.incrementReadLength=function(a){this.readLength+=a};Max3DSLoader.Chunk3DS.prototype.toString=function(){return this.id+" "+this.length};Max3DSLoader.ChunksInputStream=function(a){this.input=a;this.index=0;this.stack=[]};Max3DSLoader.ChunksInputStream.prototype.read=function(){if(this.index>=this.input.length){return -1}else{return this.input[this.index++]}};Max3DSLoader.ChunksInputStream.prototype.readChunkHeader=function(){var a=this.readLittleEndianUnsignedShort(false);var b=new Max3DSLoader.Chunk3DS(a,this.readLittleEndianUnsignedInt(false));this.stack.push(b);return b};Max3DSLoader.ChunksInputStream.prototype.releaseChunk=function(){var a=this.stack.pop();if(a.length!==a.readLength){throw new IncorrectFormat3DException("Chunk "+a.id+" invalid length. Expected to read "+a.length+" bytes, but actually read "+a.readLength+" bytes")}if(this.stack.length!==0){this.stack[this.stack.length-1].incrementReadLength(a.length)}};Max3DSLoader.ChunksInputStream.prototype.isChunckEndReached=function(){var a=this.stack[this.stack.length-1];return a.length===a.readLength};Max3DSLoader.ChunksInputStream.prototype.readUntilChunkEnd=function(){var a=this.stack[this.stack.length-1];var c=a.length-a.readLength;for(var b=c;b>0;b--){if(this.read()<0){throw new IncorrectFormat3DException("Chunk "+a.id+" too short")}}a.incrementReadLength(c)};Max3DSLoader.ChunksInputStream.prototype.readUnsignedByte=function(){var a=this.read();if(a===-1){throw new IncorrectFormat3DException("Unexpected EOF")}else{this.stack[this.stack.length-1].incrementReadLength(1);return a}};Max3DSLoader.ChunksInputStream.prototype.readLittleEndianUnsignedShort=function(c){if(c===undefined){c=true}var b=this.read();if(b===-1){throw new IncorrectFormat3DException("Unexpected EOF")}var a=this.read();if(a===-1){throw new IncorrectFormat3DException("Can't read short")}if(c){this.stack[this.stack.length-1].incrementReadLength(2)}return(a<<8)|b};Max3DSLoader.ChunksInputStream.prototype.readLittleEndianShort=function(b){var a=this.readLittleEndianUnsignedShort(b);if(a&32768){a=(-1&~32767)|a}return a};Max3DSLoader.ChunksInputStream.converter=new Int8Array(4);Max3DSLoader.ChunksInputStream.int32Converter=new Int32Array(Max3DSLoader.ChunksInputStream.converter.buffer,0,1);Max3DSLoader.ChunksInputStream.float32Converter=new Float32Array(Max3DSLoader.ChunksInputStream.converter.buffer,0,1);Max3DSLoader.ChunksInputStream.prototype.readLittleEndianFloat=function(){Max3DSLoader.ChunksInputStream.int32Converter[0]=this.readLittleEndianUnsignedInt(true);return Max3DSLoader.ChunksInputStream.float32Converter[0]};Max3DSLoader.ChunksInputStream.prototype.readLittleEndianUnsignedInt=function(e){if(e===undefined){e=true}var d=this.read();if(d===-1){throw new IncorrectFormat3DException("Unexpected EOF")}var c=this.read();var b=this.read();var a=this.read();if(c===-1||b===-1||a===-1){throw new IncorrectFormat3DException("Can't read int")}if(e){this.stack[this.stack.length-1].incrementReadLength(4)}return(a<<24)|(b<<16)|(c<<8)|d};Max3DSLoader.ChunksInputStream.prototype.readLittleEndianInt=function(b){var a=this.readLittleEndianUnsignedInt(b);if(a&2147483648){a=(-1&~2147483647)|a}return a};Max3DSLoader.ChunksInputStream.prototype.readString=function(){var c="";var a;while((a=this.read())!==-1&&a!==0){c+=String.fromCharCode(a)}if(a===-1){throw new IncorrectFormat3DException("Unexpected end of file")}this.stack[this.stack.length-1].incrementReadLength(c.length+1);return c};Max3DSLoader.Mesh3DS=function(f,e,b,a,c,d){this.name=f;this.vertices=e;this.textureCoordinates=b;this.faces=a;this.color=c;this.transform=d};Max3DSLoader.Face3DS=function(e,d,b,c,a){this.index=e;this.vertexIndices=[d,b,c];this.normalIndices=null;this.material=null;this.smoothingGroup=null};Max3DSLoader.Material3DS=function(d,c,g,h,e,b,f,a){this.name=d;this.ambientColor=c;this.diffuseColor=g;this.specularColor=h;this.shininess=e;this.transparency=b;this.texture=f;this.twoSided=a};Max3DSLoader.Mesh3DSSharedVertex=function(a,b){this.faceIndex=a;this.normal=b;this.nextVertex=null};var ShapeTools={parsedShapes:{}};ShapeTools.getStroke=function(h,j,d,a,b){var f;switch(j){case Polyline.CapStyle.ROUND:f=java.awt.BasicStroke.CAP_ROUND;break;case Polyline.CapStyle.SQUARE:f=java.awt.BasicStroke.CAP_SQUARE;break;default:f=java.awt.BasicStroke.CAP_BUTT;break}var e;switch(d){case Polyline.JoinStyle.ROUND:case Polyline.JoinStyle.CURVED:e=java.awt.BasicStroke.JOIN_ROUND;break;case Polyline.JoinStyle.BEVEL:e=java.awt.BasicStroke.JOIN_BEVEL;break;default:e=java.awt.BasicStroke.JOIN_MITER;break}var g=0;if(a!=null){if(!Array.isArray(a)){a=undefined;g=undefined}else{a=a.slice(0);for(var c=0;c<a.length;c++){a[c]*=h;g+=a[c]}g*=b}}return new java.awt.BasicStroke(h,f,e,10,a,g)};ShapeTools.getPolylineShape=function(o,j,h){if(j){var c=new java.awt.geom.GeneralPath();for(var f=0,a=h?o.length:o.length-1;f<a;f++){var g=new java.awt.geom.CubicCurve2D.Float();var d=o[f===0?o.length-1:f-1];var m=o[f];var k=o[f===o.length-1?0:f+1];var l=[k[0]-d[0],k[1]-d[1]];var b=o[(f+2)%o.length];var e=[m[0]-b[0],m[1]-b[1]];g.setCurve(m[0],m[1],m[0]+(f!==0||h?l[0]/3.625:0),m[1]+(f!==0||h?l[1]/3.625:0),k[0]+(f!==o.length-2||h?e[0]/3.625:0),k[1]+(f!==o.length-2||h?e[1]/3.625:0),k[0],k[1]);c.append(g,true)}return c}else{return ShapeTools.getShape(o,h,null)}};ShapeTools.getShape=function(j,e,c){if(j instanceof Array){var k=new java.awt.geom.GeneralPath();k.moveTo(Math.fround(j[0][0]),Math.fround(j[0][1]));for(var d=1;d<j.length;d++){k.lineTo(Math.fround(j[d][0]),Math.fround(j[d][1]))}if(e){k.closePath()}if(c!=null){k.transform(c)}return k}else{var g=j;var b=ShapeTools.parsedShapes[g];if(!b){b=new java.awt.geom.Rectangle2D.Float(0,0,1,1);try{var a=new org.apache.batik.parser.AWTPathProducer();var h=new org.apache.batik.parser.PathParser();h.setPathHandler(a);h.parse(g);b=a.getShape()}catch(f){}ShapeTools.parsedShapes[g]=b}return b}};function HomeRecorder(){}HomeRecorder.READING_HOME="Reading home";HomeRecorder.PARSING_HOME="Parsing home";HomeRecorder.prototype.readHome=function(d,c){c.progression(HomeRecorder.READING_HOME,d,0);var b="Home.xml";if(d.indexOf("jar:")===0){var e=d.indexOf("!/");b=d.substring(e+2);d=d.substring(4,e)}var a=this;ZIPTools.getZIP(d,{zipReady:function(g){try{var h=g.file(b);if(h!==null){a.parseHomeXMLEntry(g.file(b),g,d,c)}else{this.zipError("No "+b+" entry in "+d)}}catch(f){this.zipError(f)}},zipError:function(f){if(c.homeError!==undefined){c.homeError(f)}},progression:function(g,h,f){if(c.progression!==undefined){c.progression(HomeRecorder.READING_HOME,d,f)}}})};HomeRecorder.prototype.parseHomeXMLEntry=function(h,e,f,b){var g=h.asText();b.progression(HomeRecorder.READING_HOME,h.name,1);b.progression(HomeRecorder.PARSING_HOME,h.name,0);var d=this.getHomeXMLHandler();d.homeUrl=f;var a=new SAXParser(d,d,d,d,d);try{g=g.replace(/\'/g,'"');a.parseString(g);b.homeLoaded(d.getHome())}catch(c){b.homeError(c)}b.progression(HomeRecorder.PARSING_HOME,h.name,1)};HomeRecorder.prototype.getHomeXMLHandler=function(){return new HomeXMLHandler()};function HomeComponent3D(e,d,c,b,a){this.home=d;this.object3dFactory=b!==null?b:new Object3DBranchFactory();this.homeObjects=[];this.sceneLights=[];this.camera=null;this.windowSizeListener=null;this.cameraChangeListener=null;this.homeCameraListener=null;this.groundChangeListener=null;this.backgroundChangeListener=null;this.lightColorListener=null;this.elevationChangeListener=null;this.wallsAlphaListener=null;this.levelListener=null;this.levelChangeListener=null;this.wallListener=null;this.wallChangeListener=null;this.furnitureListener=null;this.furnitureChangeListener=null;this.roomListener=null;this.roomChangeListener=null;this.polylineChangeListener=null;this.polylineListener=null;this.labelListener=null;this.labelChangeListener=null;this.approximateHomeBoundsCache=null;this.createComponent3D(e,c,a)}HomeComponent3D.prototype.createComponent3D=function(d,c,a){this.canvas3D=new HTMLCanvas3D(d);if(a){this.addMouseListeners(a,this.canvas3D);if(c!==null){this.navigationPanelId=this.createNavigationPanel(this.home,c,a);this.setNavigationPanelVisible(c.isNavigationPanelVisible());var b=this;c.addPropertyChangeListener("NAVIGATION_PANEL_VISIBLE",function(e){b.setNavigationPanelVisible(e.getNewValue())})}this.createActions(a);this.installKeyboardActions()}this.updateView(this.home.getCamera());this.updateViewPlatformTransform(this.home.getCamera(),false);this.addCameraListeners();this.canvas3D.setScene(this.createSceneTree(true,false))};HomeComponent3D.prototype.getHTMLElement=function(){return this.canvas3D.getHTMLElement()};HomeComponent3D.prototype.disposeGeometries=function(){if(this.home.structure){ModelManager.getInstance().unloadModel(this.home.structure,true)}ModelManager.getInstance().disposeGeometries(this.canvas3D.getScene())};HomeComponent3D.prototype.createNavigationPanel=function(m,h,j){var a=this.getSimulatedKeyElements(document.getElementsByTagName("body")[0]);var k=null;var c;try{c=h.getLocalizedString(HomeComponent3D,"navigationPanel.innerHTML")}catch(l){c='<img src="'+ZIPTools.getScriptFolder("gl-matrix-min.js")+'/navigationPanel.png"     style="width: 56px; height:59px; margin:5px; user-drag: none; user-select: none; -moz-user-select: none; -webkit-user-drag: none; -webkit-user-select: none; -ms-user-select: none;"     usemap="#navigationPanelMap"/><map name="navigationPanelMap" id="navigationPanelMap">  <area shape="poly" coords="19,13,28,2,36,13,31,13,31,18,24,18,24,13" data-simulated-key="UP" />  <area shape="poly" coords="3,28,13,20,13,25,18,25,18,32,13,32,13,37" data-simulated-key="LEFT" />  <area shape="poly" coords="24,40,31,40,31,45,36,45,27,55,19,45,24,45" data-simulated-key="DOWN" />  <area shape="poly" coords="37,25,42,25,42,20,52,28,42,37,42,32,37,31" data-simulated-key="RIGHT" />  <area shape="poly" coords="20,28,28,19,35,28" data-simulated-key="PAGE_UP" />  <area shape="poly" coords="20,30,36,30,28,39" data-simulated-key="PAGE_DOWN" /></map>'}var n=this;if(c!==null){k=document.createElement("div");k.setAttribute("id","div"+Math.floor(Math.random()*10000000000));k.style.position="absolute";var b=this.canvas3D.getHTMLElement();this.windowSizeListener=function(){var i=b.getBoundingClientRect();k.style.left=(i.left+window.pageXOffset)+"px";k.style.top=(i.top+window.pageYOffset)+"px";n.canvas3D.updateViewportSize()};window.addEventListener("resize",this.windowSizeListener);this.windowSizeListener();var e=0;for(var g=this.canvas3D.getHTMLElement();g&&g.style&&isNaN(e=parseInt(g.style.zIndex));g=g.parentElement){}k.style.zIndex=isNaN(e)?"1":(e+1).toString();k.style.visibility="hidden";k.innerHTML=c;a.push.apply(a,this.getSimulatedKeyElements(k));var d=document.getElementsByTagName("body")[0];d.insertBefore(k,d.firstChild);k.addEventListener("mousedown",function(i){n.userActionsListener.mousePressed(i)})}this.simulatedElementMousePressedListener=function(p){var r=p.target;var i=function(){var t=r.getAttribute("data-simulated-key");var s=t.substring(t.indexOf(":")+1);var u="";if(p.ctrlKey||s.indexOf("control ")!=-1){u+="control "}if(p.altKey||s.indexOf("alt ")!=-1){u+="alt "}if(p.metaKey||s.indexOf("meta ")!=-1){u+="meta "}if(p.shiftKey||s.indexOf("shift ")!=-1){u+="shift "}u+="pressed "+s;n.callAction(u,p)};var q=function(s){window.clearInterval(o);r.removeEventListener("mouseup",q);r.removeEventListener("mouseleave",q);n.userActionsListener.windowMouseReleased(s);s.stopPropagation()};r.addEventListener("mouseup",q);r.addEventListener("mouseleave",q);i();var o=window.setInterval(i,80)};for(var f=0;f<a.length;f++){a[f].addEventListener("mousedown",this.simulatedElementMousePressedListener)}if(k!==null){return k.getAttribute("id")}else{return null}};HomeComponent3D.prototype.getSimulatedKeyElements=function(c){var e=[];if(c.hasChildNodes()){for(var b=0;b<c.childNodes.length;b++){var d=c.childNodes[b];if(d.hasAttribute&&d.hasAttribute("data-simulated-key")){var a=d.getAttribute("data-simulated-key");if(a.indexOf(":")===-1||a.indexOf(this.canvas3D.getHTMLElement().getAttribute("id")+":")===0){e.push(d)}}e.push.apply(e,this.getSimulatedKeyElements(d))}}return e};HomeComponent3D.prototype.setNavigationPanelVisible=function(a){if(this.navigationPanelId!=null){document.getElementById(this.navigationPanelId).style.visibility=a?"visible":"hidden"}};HomeComponent3D.prototype.removeHomeListeners=function(){this.home.removePropertyChangeListener("CAMERA",this.homeCameraListener);var a=this.home.getEnvironment();a.removePropertyChangeListener("SKY_COLOR",this.backgroundChangeListener);a.removePropertyChangeListener("SKY_TEXTURE",this.backgroundChangeListener);a.removePropertyChangeListener("GROUND_COLOR",this.backgroundChangeListener);a.removePropertyChangeListener("GROUND_TEXTURE",this.backgroundChangeListener);a.removePropertyChangeListener("GROUND_COLOR",this.groundChangeListener);a.removePropertyChangeListener("GROUND_TEXTURE",this.groundChangeListener);a.removePropertyChangeListener("BACKGROUND_IMAGE_VISIBLE_ON_GROUND_3D",this.groundChangeListener);this.home.removePropertyChangeListener("BACKGROUND_IMAGE",this.groundChangeListener);a.removePropertyChangeListener("LIGHT_COLOR",this.lightColorListener);a.removePropertyChangeListener("WALLS_ALPHA",this.wallsAlphaListener);this.home.getCamera().removePropertyChangeListener(this.cameraChangeListener);this.home.removePropertyChangeListener("CAMERA",this.elevationChangeListener);this.home.getCamera().removePropertyChangeListener(this.elevationChangeListener);this.home.removeLevelsListener(this.levelListener);var f=this.home.getLevels();for(var d=0;d<f.length;d++){f[d].removePropertyChangeListener(this.levelChangeListener)}this.home.removeWallsListener(this.wallListener);var b=this.home.getWalls();for(var d=0;d<b.length;d++){b[d].removePropertyChangeListener(this.wallChangeListener)}this.home.removeFurnitureListener(this.furnitureListener);var e=this.home.getFurniture();for(var d=0;d<e.length;d++){this.removePropertyChangeListener(e[d],this.furnitureChangeListener)}this.home.removeRoomsListener(this.roomListener);var g=this.home.getRooms();for(var d=0;d<g.length;d++){g[d].removePropertyChangeListener(this.roomChangeListener)}this.home.removePolylinesListener(this.polylineListener);var c=this.home.getPolylines();for(var d=0;d<c.length;d++){c[d].removePropertyChangeListener(this.polylineChangeListener)}this.home.removeLabelsListener(this.labelListener);var h=this.home.getLabels();for(var d=0;d<h.length;d++){h[d].removePropertyChangeListener(this.labelChangeListener)}};HomeComponent3D.prototype.removeMouseListeners=function(a){if(this.userActionsListener){if(OperatingSystem.isInternetExplorerOrLegacyEdge()&&window.PointerEvent){a.getHTMLElement().removeEventListener("pointerdown",this.userActionsListener.pointerPressed);a.getHTMLElement().removeEventListener("mousedown",this.userActionsListener.pointerMousePressed);window.removeEventListener("pointermove",this.userActionsListener.windowPointerMoved);window.removeEventListener("pointerup",this.userActionsListener.windowPointerReleased);a.getHTMLElement().removeEventListener("contextmenu",userActionsListener.contextMenu)}else{a.getHTMLElement().removeEventListener("touchstart",this.userActionsListener.touchStarted);a.getHTMLElement().removeEventListener("touchmove",this.userActionsListener.touchMoved);a.getHTMLElement().removeEventListener("touchend",this.userActionsListener.touchEnded);a.getHTMLElement().removeEventListener("mousedown",this.userActionsListener.mousePressed);window.removeEventListener("mousemove",this.userActionsListener.windowMouseMoved);window.removeEventListener("mouseup",this.userActionsListener.windowMouseReleased)}a.getHTMLElement().removeEventListener("DOMMouseScroll",this.userActionsListener.mouseScrolled);a.getHTMLElement().removeEventListener("mousewheel",this.userActionsListener.mouseWheelMoved)}};HomeComponent3D.prototype.dispose=function(){this.removeHomeListeners();this.removeMouseListeners(this.canvas3D);if(this.navigationPanelId!=null){window.removeEventListener("resize",this.windowSizeListener);var c=this.getSimulatedKeyElements(document.getElementsByTagName("body")[0]);for(var b=0;b<c.length;b++){c[b].removeEventListener("mousedown",this.simulatedElementMousePressedListener)}var a=document.getElementById(this.navigationPanelId);a.parentElement.removeChild(a)}this.canvas3D.clear()};HomeComponent3D.prototype.addCameraListeners=function(){var a=this;var b=this.home;this.cameraChangeListener=function(d){if(!this.updater){var c=this;this.updater=function(){if(a.canvas3D){a.updateView(b.getCamera());a.updateViewPlatformTransform(b.getCamera(),true)}delete c.updater};setTimeout(this.updater,0)}};b.getCamera().addPropertyChangeListener(this.cameraChangeListener);this.homeCameraListener=function(c){a.updateView(b.getCamera());a.updateViewPlatformTransform(b.getCamera(),false);c.getOldValue().removePropertyChangeListener(a.cameraChangeListener);b.getCamera().addPropertyChangeListener(a.cameraChangeListener)};this.home.addPropertyChangeListener("CAMERA",this.homeCameraListener)};HomeComponent3D.prototype.updateView=function(i){var f=i.getFieldOfView();if(f===0){f=Math.PI*63/180}this.canvas3D.setFieldOfView(f);var j=2.5;var c=500000;if(this.canvas3D.getDepthBits()<=16){var c=3000;var d=this.getApproximateHomeBounds();if(d!=null&&!d.intersect(vec3.fromValues(i.getX(),i.getY(),i.getZ()))){var a=this.getDistanceToBox(i.getX(),i.getY(),i.getZ(),d);if(!isNaN(a)){j=Math.max(j,0.1*a)}}var h=this.canvas3D.getHTMLElement().getBoundingClientRect();if(i.getZ()>0&&h.width!==0&&h.height!==0){var e=Math.atan(Math.tan(f/2)*h.height/h.width);var g=i.getPitch()+e;if(g>0){var b=(i.getZ()/Math.sin(g));j=Math.min(j,0.35*b);if(j*c<b){j=b/c}}}}this.canvas3D.setFrontClipDistance(j);this.canvas3D.setBackClipDistance(j*c)};HomeComponent3D.prototype.getApproximateHomeBounds=function(){if(this.approximateHomeBoundsCache===null){var f=null;var l=this.home.getFurniture();for(var j=0;j<l.length;j++){var p=l[j];if(p.isVisible()&&(p.getLevel()===null||p.getLevel().isViewable())){var g=Math.max(p.getWidthInPlan(),p.getDepthInPlan())/2;var o=p.getGroundElevation();var d=vec3.fromValues(p.getX()-g,p.getY()-g,o);if(f===null){f=new BoundingBox3D(d,d)}else{f.combine(d)}f.combine(vec3.fromValues(p.getX()+g,p.getY()+g,o+p.getHeightInPlan()))}}var e=this.home.getWalls();for(var j=0;j<e.length;j++){var n=e[j];if(n.getLevel()===null||n.getLevel().isViewable()){var c=vec3.fromValues(n.getXStart(),n.getYStart(),n.getLevel()!==null?n.getLevel().getElevation():0);if(f===null){f=new BoundingBox3D(c,c)}else{f.combine(c)}f.combine(vec3.fromValues(n.getXEnd(),n.getYEnd(),c.z+(n.getHeight()!==null?n.getHeight():this.home.getWallHeight())))}}var h=this.home.getRooms();for(var j=0;j<h.length;j++){var b=h[j];if(b.getLevel()===null||b.getLevel().isViewable()){var a=vec3.fromValues(b.getXCenter(),b.getYCenter(),b.getLevel()!==null?b.getLevel().getElevation():0);if(f===null){f=new BoundingBox3D(a,a)}else{f.combine(a)}}}var k=this.home.getLabels();for(var j=0;j<k.length;j++){var m=k[j];if((m.getLevel()===null||m.getLevel().isViewable())&&m.getPitch()!==null){var a=vec3.fromValues(m.getX(),m.getY(),m.getGroundElevation());if(f==null){f=new BoundingBox3D(a,a)}else{f.combine(a)}}}this.approximateHomeBoundsCache=f}return this.approximateHomeBoundsCache};HomeComponent3D.prototype.getDistanceToBox=function(h,g,f,d){var j=vec3.fromValues(h,g,f);var c=vec3.create();d.getLower(c);var k=vec3.create();d.getUpper(k);var m=[vec3.fromValues(c[0],c[1],c[2]),vec3.fromValues(k[0],c[1],c[2]),vec3.fromValues(c[0],k[1],c[2]),vec3.fromValues(k[0],k[1],c[2]),vec3.fromValues(c[0],c[1],k[2]),vec3.fromValues(k[0],c[1],k[2]),vec3.fromValues(c[0],k[1],k[2]),vec3.fromValues(k[0],k[1],k[2])];var e=new Array(m.length);for(var b=0;b<e.length;b++){e[b]=vec3.squaredDistance(j,m[b])}var l=[this.getDistanceToSide(j,m,e,0,1,3,2,2),this.getDistanceToSide(j,m,e,0,1,5,4,1),this.getDistanceToSide(j,m,e,0,2,6,4,0),this.getDistanceToSide(j,m,e,4,5,7,6,2),this.getDistanceToSide(j,m,e,2,3,7,6,1),this.getDistanceToSide(j,m,e,1,3,7,5,0)];var a=l[0];for(var b=1;b<l.length;b++){a=Math.min(a,l[b])}return a};HomeComponent3D.prototype.getDistanceToSide=function(i,j,k,h,g,e,c,a){switch(a){case 0:if(i[1]<=j[h][1]){if(i[2]<=j[h][2]){return Math.sqrt(k[h])}else{if(i[2]>=j[c][2]){return Math.sqrt(k[c])}else{return this.getDistanceToLine(i,j[h],j[c])}}}else{if(i[1]>=j[g][1]){if(i[2]<=j[g][2]){return Math.sqrt(k[g])}else{if(i[2]>=j[e][2]){return Math.sqrt(k[e])}else{return this.getDistanceToLine(i,j[g],j[e])}}}else{if(i[2]<=j[h][2]){return this.getDistanceToLine(i,j[h],j[g])}else{if(i[2]>=j[c][2]){return this.getDistanceToLine(i,j[e],j[c])}}}}break;case 1:if(i[0]<=j[h][0]){if(i[2]<=j[h][2]){return Math.sqrt(k[h])}else{if(i[2]>=j[c][2]){return Math.sqrt(k[c])}else{return this.getDistanceToLine(i,j[h],j[c])}}}else{if(i[0]>=j[g][0]){if(i[2]<=j[g][2]){return Math.sqrt(k[g])}else{if(i[2]>=j[e][2]){return Math.sqrt(k[e])}else{return this.getDistanceToLine(i,j[g],j[e])}}}else{if(i[2]<=j[h][2]){return this.getDistanceToLine(i,j[h],j[g])}else{if(i[2]>=j[c][2]){return this.getDistanceToLine(i,j[e],j[c])}}}}break;case 2:if(i[0]<=j[h][0]){if(i[1]<=j[h][1]){return Math.sqrt(k[h])}else{if(i[1]>=j[c][1]){return Math.sqrt(k[c])}else{return this.getDistanceToLine(i,j[h],j[c])}}}else{if(i[0]>=j[g][0]){if(i[1]<=j[g][1]){return Math.sqrt(k[g])}else{if(i[1]>=j[e][1]){return Math.sqrt(k[e])}else{return this.getDistanceToLine(i,j[g],j[e])}}}else{if(i[1]<=j[h][1]){return this.getDistanceToLine(i,j[h],j[g])}else{if(i[1]>=j[c][1]){return this.getDistanceToLine(i,j[e],j[c])}}}}break}var d=vec3.fromValues(j[g][0]-j[h][0],j[g][1]-j[h][1],j[g][2]-j[h][2]);var b=vec3.fromValues(j[e][0]-j[h][0],j[e][1]-j[h][1],j[e][2]-j[h][2]);var f=vec3.create();vec3.cross(f,d,b);return Math.abs(vec3.dot(f,vec3.fromValues(j[h][0]-i[0],j[h][1]-i[1],j[h][2]-i[2])))/vec3.length(f)};HomeComponent3D.prototype.getDistanceToLine=function(a,e,d){var f=vec3.fromValues(d[0]-e[0],d[1]-e[1],d[2]-e[2]);var b=vec3.fromValues(a[0]-e[0],a[1]-e[1],a[2]-e[2]);var c=vec3.create();vec3.cross(c,f,b);return vec3.length(c)/vec3.length(f)};HomeComponent3D.prototype.updateViewPlatformTransform=function(b,a){if(a){this.moveCameraWithAnimation(b)}else{delete this.cameraInterpolator;var c=mat4.create();this.computeViewPlatformTransform(c,b.getX(),b.getY(),b.getZ(),b.getYaw(),b.getPitch());this.canvas3D.setViewPlatformTransform(c)}};HomeComponent3D.prototype.moveCameraWithAnimation=function(c){if(this.cameraInterpolator===undefined){this.cameraInterpolator={initialCamera:null,finalCamera:null,alpha:null}}if(this.cameraInterpolator.finalCamera===null||this.cameraInterpolator.finalCamera.getX()!==c.getX()||this.cameraInterpolator.finalCamera.getY()!==c.getY()||this.cameraInterpolator.finalCamera.getZ()!==c.getZ()||this.cameraInterpolator.finalCamera.getYaw()!==c.getYaw()||this.cameraInterpolator.finalCamera.getPitch()!==c.getPitch()){if(this.cameraInterpolator.alpha===null||this.cameraInterpolator.alpha===1){this.cameraInterpolator.initialCamera=new Camera(this.camera.getX(),this.camera.getY(),this.camera.getZ(),this.camera.getYaw(),this.camera.getPitch(),this.camera.getFieldOfView())}else{if(this.cameraInterpolator.alpha<0.3){var b=mat4.create();this.computeViewPlatformTransform(b,this.cameraInterpolator.finalCamera.getX(),this.cameraInterpolator.finalCamera.getY(),this.cameraInterpolator.finalCamera.getZ(),this.cameraInterpolator.finalCamera.getYaw(),this.cameraInterpolator.finalCamera.getPitch());this.canvas3D.setViewPlatformTransform(b);this.cameraInterpolator.initialCamera=this.cameraInterpolator.finalCamera}else{this.cameraInterpolator.initialCamera=new Camera(this.cameraInterpolator.initialCamera.getX()+(this.cameraInterpolator.finalCamera.getX()-this.cameraInterpolator.initialCamera.getX())*this.cameraInterpolator.alpha,this.cameraInterpolator.initialCamera.getY()+(this.cameraInterpolator.finalCamera.getY()-this.cameraInterpolator.initialCamera.getY())*this.cameraInterpolator.alpha,this.cameraInterpolator.initialCamera.getZ()+(this.cameraInterpolator.finalCamera.getZ()-this.cameraInterpolator.initialCamera.getZ())*this.cameraInterpolator.alpha,this.cameraInterpolator.initialCamera.getYaw()+(this.cameraInterpolator.finalCamera.getYaw()-this.cameraInterpolator.initialCamera.getYaw())*this.cameraInterpolator.alpha,this.cameraInterpolator.initialCamera.getPitch()+(this.cameraInterpolator.finalCamera.getPitch()-this.cameraInterpolator.initialCamera.getPitch())*this.cameraInterpolator.alpha,c.getFieldOfView())}}this.cameraInterpolator.finalCamera=new Camera(c.getX(),c.getY(),c.getZ(),c.getYaw(),c.getPitch(),c.getFieldOfView());if(this.cameraInterpolator.alpha===null){this.cameraInterpolator.animationDuration=75}this.cameraInterpolator.startTime=Date.now();this.cameraInterpolator.alpha=0;var a=this;requestAnimationFrame(function(){a.interpolateUntilAlphaEquals1()})}};HomeComponent3D.prototype.interpolateUntilAlphaEquals1=function(){if(this.cameraInterpolator){var c=Date.now();var d=Math.min(1,(c-this.cameraInterpolator.startTime)/this.cameraInterpolator.animationDuration);if(this.cameraInterpolator.alpha!==d){var b=mat4.create();this.computeTransform(d,b);this.canvas3D.setViewPlatformTransform(b);this.cameraInterpolator.alpha=d}if(this.cameraInterpolator.alpha<1){var a=this;requestAnimationFrame(function(){a.interpolateUntilAlphaEquals1()})}}};HomeComponent3D.prototype.computeTransform=function(b,a){this.computeViewPlatformTransform(a,this.cameraInterpolator.initialCamera.getX()+(this.cameraInterpolator.finalCamera.getX()-this.cameraInterpolator.initialCamera.getX())*b,this.cameraInterpolator.initialCamera.getY()+(this.cameraInterpolator.finalCamera.getY()-this.cameraInterpolator.initialCamera.getY())*b,this.cameraInterpolator.initialCamera.getZ()+(this.cameraInterpolator.finalCamera.getZ()-this.cameraInterpolator.initialCamera.getZ())*b,this.cameraInterpolator.initialCamera.getYaw()+(this.cameraInterpolator.finalCamera.getYaw()-this.cameraInterpolator.initialCamera.getYaw())*b,this.cameraInterpolator.initialCamera.getPitch()+(this.cameraInterpolator.finalCamera.getPitch()-this.cameraInterpolator.initialCamera.getPitch())*b)};HomeComponent3D.prototype.computeViewPlatformTransform=function(a,g,f,d,c,e){var h=mat4.create();mat4.fromYRotation(h,-c+Math.PI);var b=mat4.create();mat4.fromXRotation(b,-e);mat4.mul(h,h,b);mat4.identity(a);mat4.translate(a,a,vec3.fromValues(g,d,f));mat4.mul(a,a,h);this.camera=new Camera(g,f,d,c,e,0)};HomeComponent3D.prototype.addMouseListeners=function(a,d){var b=this;var c={xLastMove:-1,yLastMove:-1,buttonPressed:-1,pointerTouches:{},distanceLastPinch:-1,actionStartedInComponent3D:false,mousePressed:function(e){c.xLastMove=e.clientX;c.yLastMove=e.clientY;c.buttonPressed=e.button;c.actionStartedInComponent3D=true;e.stopPropagation()},windowMouseMoved:function(e){if(c.actionStartedInComponent3D){c.moved(e.clientX,e.clientY,e.altKey,e.shiftKey)}},windowMouseReleased:function(e){c.buttonPressed=-1;if(c.actionStartedInComponent3D){delete c.actionStartedInComponent3D}},pointerPressed:function(e){if(e.pointerType=="mouse"){c.mousePressed(e)}else{c.copyPointerToTargetTouches(e);c.touchStarted(e)}},pointerMousePressed:function(e){e.stopPropagation()},windowPointerMoved:function(e){if(e.pointerType=="mouse"){c.windowMouseMoved(e)}else{c.copyPointerToTargetTouches(e);c.touchMoved(e)}},windowPointerReleased:function(e){if(e.pointerType=="mouse"){c.windowMouseReleased(e)}else{delete c.pointerTouches[e.pointerId];c.touchEnded(e)}},contextMenu:function(e){e.preventDefault()},touchStarted:function(e){e.preventDefault();this.actionStartedInComponent3D=true;if(e.targetTouches.length==1){c.xLastMove=e.targetTouches[0].pageX;c.yLastMove=e.targetTouches[0].pageY;if(b.home.getCamera()===b.home.getObserverCamera()){c.xLastMove=-c.xLastMove;c.yLastMove=-c.yLastMove}c.buttonPressed=0}else{if(e.targetTouches.length==2){c.distanceLastPinch=c.distance(e.targetTouches[0],e.targetTouches[1])}}},touchMoved:function(g){if(this.actionStartedInComponent3D){g.preventDefault();if(g.targetTouches.length==1){if(b.home.getCamera()===b.home.getObserverCamera()){c.moved(-g.targetTouches[0].pageX,-g.targetTouches[0].pageY,false,false)}else{c.moved(g.targetTouches[0].pageX,g.targetTouches[0].pageY,false,false)}}else{if(g.targetTouches.length==2){var f=c.distance(g.targetTouches[0],g.targetTouches[1]);var e=f/c.distanceLastPinch;c.zoomed((1-e)*50,false);c.distanceLastPinch=f}}}},touchEnded:function(e){c.buttonPressed=-1;this.actionStartedInComponent3D=false},copyPointerToTargetTouches:function(f){c.pointerTouches[f.pointerId]={pageX:f.clientX,pageY:f.clientY};f.targetTouches=[];for(var e in c.pointerTouches){if(c.pointerTouches.hasOwnProperty(e)){f.targetTouches.push(c.pointerTouches[e])}}},distance:function(f,e){return Math.sqrt(Math.pow(e.pageX-f.pageX,2)+Math.pow(e.pageY-f.pageY,2))},moved:function(e,l,i,g){if((c.xLastMove!==e||c.yLastMove!==l)&&c.buttonPressed===0){if(i){var k=1.25*(c.yLastMove-l);if(g){k*=5}a.moveCamera(k)}else{var j=0.005;var h=j*(e-c.xLastMove);if(g){h*=5}a.rotateCameraYaw(h);var f=j*(l-c.yLastMove);a.rotateCameraPitch(f)}c.xLastMove=e;c.yLastMove=l}},mouseScrolled:function(e){c.zoomed(e.detail,e.shiftKey)},mouseWheelMoved:function(e){e.preventDefault();c.zoomed((e.deltaY!==undefined?e.deltaY:-e.wheelDelta)/4,e.shiftKey)},zoomed:function(f,e){var f=-2.5*f;if(e){f*=5}a.moveCamera(f)}};if(OperatingSystem.isInternetExplorerOrLegacyEdge()&&window.PointerEvent){d.getHTMLElement().addEventListener("pointerdown",c.pointerPressed);d.getHTMLElement().addEventListener("mousedown",c.pointerMousePressed);window.addEventListener("pointermove",c.windowPointerMoved);window.addEventListener("pointerup",c.windowPointerReleased);d.getHTMLElement().addEventListener("contextmenu",c.contextMenu)}else{d.getHTMLElement().addEventListener("touchstart",c.touchStarted);d.getHTMLElement().addEventListener("touchmove",c.touchMoved);d.getHTMLElement().addEventListener("touchend",c.touchEnded);d.getHTMLElement().addEventListener("mousedown",c.mousePressed);window.addEventListener("mousemove",c.windowMouseMoved);window.addEventListener("mouseup",c.windowMouseReleased)}d.getHTMLElement().addEventListener("DOMMouseScroll",c.mouseScrolled);d.getHTMLElement().addEventListener("mousewheel",c.mouseWheelMoved);this.userActionsListener=c};HomeComponent3D.prototype.installKeyboardActions=function(){this.inputMap={"shift pressed UP":"MOVE_CAMERA_FAST_FORWARD","alt shift pressed UP":"MOVE_CAMERA_FAST_FORWARD","shift pressed W":"MOVE_CAMERA_FAST_FORWARD","pressed UP":"MOVE_CAMERA_FORWARD","alt pressed UP":"MOVE_CAMERA_FORWARD","pressed W":"MOVE_CAMERA_FORWARD","shift pressed DOWN":"MOVE_CAMERA_FAST_BACKWARD","alt shift pressed DOWN":"MOVE_CAMERA_FAST_BACKWARD","shift pressed S":"MOVE_CAMERA_FAST_BACKWARD","pressed DOWN":"MOVE_CAMERA_BACKWARD","alt pressed DOWN":"MOVE_CAMERA_BACKWARD","pressed S":"MOVE_CAMERA_BACKWARD","alt shift pressed LEFT":"MOVE_CAMERA_FAST_LEFT","alt pressed LEFT":"MOVE_CAMERA_LEFT","alt shift pressed RIGHT":"MOVE_CAMERA_FAST_RIGHT","alt pressed RIGHT":"MOVE_CAMERA_RIGHT","shift pressed LEFT":"ROTATE_CAMERA_YAW_FAST_LEFT","shift pressed A":"ROTATE_CAMERA_YAW_FAST_LEFT","pressed LEFT":"ROTATE_CAMERA_YAW_LEFT","pressed A":"ROTATE_CAMERA_YAW_LEFT","shift pressed RIGHT":"ROTATE_CAMERA_YAW_FAST_RIGHT","shift pressed D":"ROTATE_CAMERA_YAW_FAST_RIGHT","pressed RIGHT":"ROTATE_CAMERA_YAW_RIGHT","pressed D":"ROTATE_CAMERA_YAW_RIGHT","shift pressed PAGE_UP":"ROTATE_CAMERA_PITCH_FAST_UP","pressed PAGE_UP":"ROTATE_CAMERA_PITCH_UP","shift pressed PAGE_DOWN":"ROTATE_CAMERA_PITCH_FAST_DOWN","pressed PAGE_DOWN":"ROTATE_CAMERA_PITCH_DOWN","shift pressed HOME":"ELEVATE_CAMERA_FAST_UP","pressed HOME":"ELEVATE_CAMERA_UP","shift pressed END":"ELEVATE_CAMERA_FAST_DOWN","pressed END":"ELEVATE_CAMERA_DOWN"};var a=this;this.canvas3D.getHTMLElement().addEventListener("keydown",function(b){a.callAction(KeyStroke.getKeyStrokeForEvent(b,"keydown"),b)},false)};HomeComponent3D.prototype.callAction=function(d,a){if(d!==undefined){var c=this.inputMap[d];if(c!==undefined){var b=this.actionMap[c];if(b!==undefined){b.actionPerformed(a)}a.stopPropagation()}}};HomeComponent3D.prototype.createActions=function(a){function f(g){this.delta=g}f.prototype.actionPerformed=function(g){a.moveCamera(this.delta)};function b(g){this.delta=g}b.prototype.actionPerformed=function(g){a.moveCameraSideways(this.delta)};function e(g){this.delta=g}e.prototype.actionPerformed=function(g){a.elevateCamera(this.delta)};function d(g){this.delta=g}d.prototype.actionPerformed=function(g){a.rotateCameraYaw(this.delta)};function c(g){this.delta=g}c.prototype.actionPerformed=function(g){a.rotateCameraPitch(this.delta)};this.actionMap={MOVE_CAMERA_FORWARD:new f(6.5),MOVE_CAMERA_FAST_FORWARD:new f(32.5),MOVE_CAMERA_BACKWARD:new f(-6.5),MOVE_CAMERA_FAST_BACKWARD:new f(-32.5),MOVE_CAMERA_LEFT:new b(-2.5),MOVE_CAMERA_FAST_LEFT:new b(-10),MOVE_CAMERA_RIGHT:new b(2.5),MOVE_CAMERA_FAST_RIGHT:new b(10),ELEVATE_CAMERA_DOWN:new e(-2.5),ELEVATE_CAMERA_FAST_DOWN:new e(-10),ELEVATE_CAMERA_UP:new e(2.5),ELEVATE_CAMERA_FAST_UP:new e(10),ROTATE_CAMERA_YAW_LEFT:new d(-Math.PI/60),ROTATE_CAMERA_YAW_FAST_LEFT:new d(-Math.PI/12),ROTATE_CAMERA_YAW_RIGHT:new d(Math.PI/60),ROTATE_CAMERA_YAW_FAST_RIGHT:new d(Math.PI/12),ROTATE_CAMERA_PITCH_UP:new c(-Math.PI/120),ROTATE_CAMERA_PITCH_FAST_UP:new c(-Math.PI/24),ROTATE_CAMERA_PITCH_DOWN:new c(Math.PI/120),ROTATE_CAMERA_PITCH_FAST_DOWN:new c(Math.PI/24)}};HomeComponent3D.prototype.getActionMap=function(){return this.actionMap};HomeComponent3D.prototype.getInputMap=function(){return this.inputMap};HomeComponent3D.prototype.getClosestItemAt=function(a,c){var b=this.canvas3D.getClosestShapeAt(a,c);while(b!==null&&!(b instanceof Object3DBranch)){b=b.getParent()}if(b!=null){return b.getUserData()}else{return null}};HomeComponent3D.prototype.createSceneTree=function(b,d){var a=new Group3D();a.addChild(this.createBackgroundNode(b,d));var e=this.createGroundNode(-50000,-50000,100000,100000,b,d);a.addChild(e);a.addChild(this.createHomeTree(b,d));this.sceneLights=this.createLights(b);for(var c=0;c<this.sceneLights.length;c++){a.addChild(this.sceneLights[c])}return a};HomeComponent3D.prototype.createBackgroundNode=function(e,f){var j=new Appearance3D();var d=this.createHalfSphereGeometry(true);var b=new Shape3D(d,j);var c=new BranchGroup3D();c.addChild(b);c.addChild(new Shape3D(this.createHalfSphereGeometry(false)));var h=new Appearance3D();var g=new Shape3D(new IndexedTriangleArray3D([vec3.fromValues(-1,-0.01,-1),vec3.fromValues(-1,-0.01,1),vec3.fromValues(1,-0.01,1),vec3.fromValues(1,-0.01,-1)],[0,1,2,0,2,3],[],[],[vec3.fromValues(0,1,0)],[0,0,0,0,0,0]),h);c.addChild(g);var a=new Background3D(c);this.updateBackgroundColorAndTexture(j,h,this.home,f);h.setVisible(this.home.getCamera().getZ()>=0);if(e){var i=this;this.backgroundChangeListener=function(k){i.updateBackgroundColorAndTexture(j,h,i.home,f)};i.home.getEnvironment().addPropertyChangeListener("SKY_COLOR",this.backgroundChangeListener);i.home.getEnvironment().addPropertyChangeListener("SKY_TEXTURE",this.backgroundChangeListener);i.home.getEnvironment().addPropertyChangeListener("GROUND_COLOR",this.backgroundChangeListener);i.home.getEnvironment().addPropertyChangeListener("GROUND_TEXTURE",this.backgroundChangeListener);this.elevationChangeListener=function(k){if(k.getSource()===i.home){k.getOldValue().removePropertyChangeListener(i.elevationChangeListener);i.home.getCamera().addPropertyChangeListener(i.elevationChangeListener)}if(k.getSource()===i.home||k.getPropertyName()==="Z"){h.setVisible(i.home.getCamera().getZ()>=0)}};this.home.getCamera().addPropertyChangeListener(this.elevationChangeListener);this.home.addPropertyChangeListener("CAMERA",this.elevationChangeListener)}return a};HomeComponent3D.prototype.createHalfSphereGeometry=function(l){var x=48;var q=[];var e=[];var r=[];for(var t=0,n=0;t<x;t++){var b=t*2*Math.PI/x;var g=Math.cos(b);var m=Math.sin(b);var d=(t+1)*2*Math.PI/x;var c=Math.cos(d);var v=Math.sin(d);for(var o=0,s=x/4;o<s;o++,n+=4){var w=2*o*Math.PI/x;var u=Math.cos(w);var z=Math.sin(w);var h=o!==0?(l?z:-z):-0.01;var f=2*(o+1)*Math.PI/x;if(!l){f=-f}var a=Math.cos(f);var p=Math.sin(f);q.push(vec3.fromValues(g*u,h,m*u));q.push(vec3.fromValues(c*u,h,v*u));q.push(vec3.fromValues(c*a,p,v*a));q.push(vec3.fromValues(g*a,p,m*a));if(l){e.push(n);e.push(n+1);e.push(n+2);e.push(n);e.push(n+2);e.push(n+3);r.push(vec2.fromValues(t/x,o/s));r.push(vec2.fromValues((t+1)/x,o/s));r.push(vec2.fromValues((t+1)/x,(o+1)/s));r.push(vec2.fromValues(t/x,(o+1)/s))}else{e.push(n);e.push(n+2);e.push(n+1);e.push(n);e.push(n+3);e.push(n+2)}}}return new IndexedTriangleArray3D(q,e,r,e,[],[])};HomeComponent3D.prototype.updateBackgroundColorAndTexture=function(i,g,f,e){var h=f.getEnvironment().getSkyColor();i.setDiffuseColor(vec3.fromValues(((h>>>16)&255)/255,((h>>>8)&255)/255,(h&255)/255));var j=f.getEnvironment().getSkyTexture();if(j!==null){var a=mat3.create();mat3.fromTranslation(a,vec2.fromValues(-j.getXOffset(),0));TextureManager.getInstance().loadTexture(j.getImage(),0,e,{textureUpdated:function(k){i.setTextureImage(k);i.setTextureTransform(a)},textureError:function(k){return this.textureUpdated(TextureManager.getInstance().getErrorImage())}})}else{i.setTextureImage(null)}var c=f.getEnvironment().getGroundColor();var d=vec3.fromValues(((c>>>16)&255)/255,((c>>>8)&255)/255,(c&255)/255);g.setDiffuseColor(d);g.setAmbientColor(d);var b=f.getEnvironment().getGroundTexture();if(b!==null){TextureManager.getInstance().loadTexture(b.getImage(),0,e,{textureUpdated:function(k){g.setTextureImage(k);g.setTextureCoordinatesGeneration({planeS:vec4.fromValues(100000,0,0,0),planeT:vec4.fromValues(0,0,100000,0)})},textureError:function(k){return this.textureUpdated(TextureManager.getInstance().getErrorImage())}})}else{g.setTextureImage(null)}};HomeComponent3D.prototype.createGroundNode=function(g,f,b,c,d,e){if(this.home.structure){var k=new BranchGroup3D();k.setCapability(Group3D.ALLOW_CHILDREN_EXTEND);ModelManager.getInstance().loadModel(this.home.structure,e,{modelUpdated:function(l){k.addChild(l)},modelError:function(l){var m=new Appearance3D();m.setDiffuseColor(vec3.fromValues(1,0,0));k.addChild(new Box3D(10000000,0,10000000,m))}});this.groundChangeListener=function(l){};return k}else{var j=typeof Ground3D!=="undefined"?new Ground3D(this.home,g,f,b,c,e):new Box3D(10000000,0,10000000,new Appearance3D());var a=mat4.create();mat4.translate(a,a,vec3.fromValues(0,-0.2,0));var i=new TransformGroup3D(a);i.addChild(j);if(d){this.groundChangeListener=function(m){if(!this.updater){var l=this;this.updater=function(){j.update();delete l.updater};setTimeout(this.updater,0)}};var h=this.home.getEnvironment();h.addPropertyChangeListener("GROUND_COLOR",this.groundChangeListener);h.addPropertyChangeListener("BACKGROUND_IMAGE_VISIBLE_ON_GROUND_3D",this.groundChangeListener);h.addPropertyChangeListener("GROUND_TEXTURE",this.groundChangeListener);this.home.addPropertyChangeListener("BACKGROUND_IMAGE",this.groundChangeListener)}return i}};HomeComponent3D.prototype.createLights=function(b){var c=[new DirectionalLight3D(vec3.fromValues(0.9,0.9,0.9),vec3.fromValues(1.5,-0.8,-1)),new DirectionalLight3D(vec3.fromValues(0.9,0.9,0.9),vec3.fromValues(-1.5,-0.8,-1)),new DirectionalLight3D(vec3.fromValues(0.9,0.9,0.9),vec3.fromValues(0,-0.8,1)),new DirectionalLight3D(vec3.fromValues(0.7,0.7,0.7),vec3.fromValues(0,1,0)),new AmbientLight3D(vec3.fromValues(0.2,0.2,0.2))];for(var d=0;d<c.length-1;d++){c[d].defaultColor=c[d].getColor();this.updateLightColor(c[d])}if(b){var a=this;this.lightColorListener=function(f){for(var e=0;e<c.length-1;e++){a.updateLightColor(c[e])}};this.home.getEnvironment().addPropertyChangeListener("LIGHT_COLOR",this.lightColorListener)}return c};HomeComponent3D.prototype.updateLightColor=function(b){var c=b.defaultColor;var a=this.home.getEnvironment().getLightColor();b.setColor(vec3.fromValues(((a>>>16)&255)/255*c[0],((a>>>8)&255)/255*c[1],(a&255)/255*c[2]))};HomeComponent3D.prototype.createHomeTree=function(h,k){var a=new BranchGroup3D();a.setCapability(Group3D.ALLOW_CHILDREN_EXTEND);var l=this.home.getLabels();for(var g=0;g<l.length;g++){this.addObject(a,l[g],h,k)}var e=this.home.getPolylines();for(var g=0;g<e.length;g++){this.addObject(a,e[g],h,k)}var d=this.home.getRooms();for(var g=0;g<d.length;g++){this.addObject(a,d[g],h,k)}var b=this.home.getWalls();for(var g=0;g<b.length;g++){this.addObject(a,b[g],h,k)}var m=this.home.getFurniture();for(var g=0;g<m.length;g++){var o=m[g];if(o instanceof HomeFurnitureGroup){var c=o.getAllFurniture();for(var f=0;f<c.length;f++){var n=c[f];if(!(n instanceof HomeFurnitureGroup)){this.addObject(a,n,h,k)}}}else{this.addObject(a,o,h,k)}}if(h){this.addLevelListener(a);this.addWallListener(a);this.addFurnitureListener(a);this.addRoomListener(a);this.addPolylineListener(a);this.addLabelListener(a);this.addEnvironmentListeners()}return a};HomeComponent3D.prototype.addLevelListener=function(d){var a=this;this.levelChangeListener=function(h){var e=h.getPropertyName();if("VISIBLE"==e||"VIEWABLE"==e){var j=a.homeObjects;var k=[];for(var f=0;f<j.length;f++){var g=j[f];if(g instanceof Room||g.isAtLevel!==undefined||g.isAtLevel(h.getSource())){k.push(g)}}a.updateObjects(k);a.groundChangeListener(null)}else{if("ELEVATION"==e){a.updateObjects(a.homeObjects.slice(0));a.groundChangeListener(null)}else{if("BACKGROUND_IMAGE"==e){a.groundChangeListener(null)}else{if("FLOOR_THICKNESS"==e){a.updateObjects(a.home.getWalls());a.updateObjects(a.home.getRooms())}else{if("HEIGHT"==e){a.updateObjects(a.home.getRooms())}}}}}};var c=this.home.getLevels();for(var b=0;b<c.length;b++){c[b].addPropertyChangeListener(this.levelChangeListener)}this.levelListener=function(e){var f=e.getItem();switch((e.getType())){case CollectionEvent.Type.ADD:f.addPropertyChangeListener(a.levelChangeListener);break;case CollectionEvent.Type.DELETE:f.removePropertyChangeListener(a.levelChangeListener);break}a.updateObjects(a.home.getRooms())};this.home.addLevelsListener(this.levelListener)};HomeComponent3D.prototype.addWallListener=function(d){var a=this;this.wallChangeListener=function(g){var f=g.getPropertyName();if("PATTERN"!=f){var e=g.getSource();a.updateWall(e);var h=a.home.getLevels();if(e.getLevel()===null||e.isAtLevel(h[h.length-1])){a.updateObjects(a.home.getRooms())}if(e.getLevel()!=null&&e.getLevel().getElevation()<0){a.groundChangeListener(null)}}};var b=this.home.getWalls();for(var c=0;c<b.length;c++){b[c].addPropertyChangeListener(this.wallChangeListener)}this.wallListener=function(f){var e=f.getItem();switch((f.getType())){case CollectionEvent.Type.ADD:a.addObject(d,e,true,false);e.addPropertyChangeListener(a.wallChangeListener);break;case CollectionEvent.Type.DELETE:a.deleteObject(e);e.removePropertyChangeListener(a.wallChangeListener);break}a.updateObjects(a.home.getRooms());a.groundChangeListener(null)};this.home.addWallsListener(this.wallListener)};HomeComponent3D.prototype.addFurnitureListener=function(e){var a=this;var c=function(i,g,h){a.updateObjects([i]);if(a.containsDoorsAndWindows(i)){if(h!==null){var f=i.clone();if("X"==g){f.setX(h)}else{if("Y"==g){f.setY(h)}else{if("ANGLE"==g){f.setAngle(h)}else{if("WIDTH"==g){f.setWidth(h)}else{if("DEPTH"==g){f.setDepth(h)}}}}}a.updateIntersectingWalls([f,i])}else{a.updateIntersectingWalls([i])}a.updateObjects(a.home.getWalls())}else{if(a.containsStaircases(i)){a.updateObjects(a.home.getRooms())}}if(i.getLevel()!==null&&i.getLevel().getElevation()<0){a.groundChangeListener(null)}};this.furnitureChangeListener=function(h){var f=h.getSource();var g=h.getPropertyName();if("X"==g||"Y"==g||"ANGLE"==g||"ROLL"==g||"PITCH"==g||"WIDTH"==g||"DEPTH"==g){c(f,g,h.getOldValue())}else{if("HEIGHT"==g||"ELEVATION"==g||"MODEL_MIRRORED"==g||"MODEL_TRANSFORMATIONS"==g||"VISIBLE"==g||"LEVEL"==g){c(f,null,null)}else{if("COLOR"==g||"TEXTURE"==g||"MODEL_MATERIALS"==g||"SHININESS"==g||("POWER"==g&&a.home.getEnvironment().getSubpartSizeUnderLight()>0)){a.updateObjects([f])}}}};var d=this.home.getFurniture();for(var b=0;b<d.length;b++){this.addPropertyChangeListener(d[b],this.furnitureChangeListener)}this.furnitureListener=function(g){var f=g.getItem();switch(g.getType()){case CollectionEvent.Type.ADD:a.addPieceOfFurniture(e,f,true,false);a.addPropertyChangeListener(f,a.furnitureChangeListener);break;case CollectionEvent.Type.DELETE:a.deletePieceOfFurniture(f);a.removePropertyChangeListener(f,a.furnitureChangeListener);break}if(a.containsDoorsAndWindows(f)){a.updateIntersectingWalls([f])}else{if(a.containsStaircases(f)){a.updateObjects(a.home.getRooms())}else{approximateHomeBoundsCache=null}}a.groundChangeListener(null)};this.home.addFurnitureListener(this.furnitureListener)};HomeComponent3D.prototype.addPropertyChangeListener=function(b,d){if(b instanceof HomeFurnitureGroup){var c=b.getFurniture();for(var a=0;a<c.length;a++){this.addPropertyChangeListener(c[a],d)}}else{b.addPropertyChangeListener(d)}};HomeComponent3D.prototype.removePropertyChangeListener=function(b,d){if(b instanceof HomeFurnitureGroup){var c=b.getFurniture();for(var a=0;a<c.length;a++){this.removePropertyChangeListener(c[a],d)}}else{b.removePropertyChangeListener(d)}};HomeComponent3D.prototype.containsDoorsAndWindows=function(b){if(b instanceof HomeFurnitureGroup){var c=b.getFurniture();for(var a=0;a<c.length;a++){if(this.containsDoorsAndWindows(c[a])){return true}}return false}else{return b.isDoorOrWindow()}};HomeComponent3D.prototype.containsStaircases=function(b){if(b instanceof HomeFurnitureGroup){var c=b.getFurniture();for(var a=0;a<c.length;a++){if(this.containsStaircases(c[a])){return true}}return false}else{return b.getStaircaseCutOutShape()!==null}};HomeComponent3D.prototype.addRoomListener=function(c){var a=this;this.roomChangeListener=function(o){var p=o.getSource();var m=o.getPropertyName();if("FLOOR_COLOR"==m||"FLOOR_TEXTURE"==m||"FLOOR_SHININESS"==m||"CEILING_COLOR"==m||"CEILING_TEXTURE"==m||"CEILING_SHININESS"==m){a.updateObjects([p])}else{if("FLOOR_VISIBLE"==m||"CEILING_VISIBLE"==m||"LEVEL"==m){a.updateObjects(a.home.getRooms());a.groundChangeListener(null)}else{if("POINTS"==m){if(a.homeObjectsToUpdate){a.updateObjects(a.home.getRooms())}else{a.updateObjects([p]);var f=new java.awt.geom.Area(a.getShape(o.getOldValue()));var n=new java.awt.geom.Area(a.getShape(o.getNewValue()));var j=p.getLevel();var h=a.home.getRooms();for(var k=0;k<h.length;k++){var e=h[k];var q=e.getLevel();if(e!=p&&(q==null||Math.abs(j.getElevation()+j.getHeight()-(q.getElevation()+q.getHeight()))<0.00001||Math.abs(j.getElevation()+j.getHeight()-(q.getElevation()-q.getFloorThickness()))<0.00001)){var l=new java.awt.geom.Area(a.getShape(e.getPoints()));var g=new java.awt.geom.Area(l);g.intersect(n);if(!g.isEmpty()){a.updateObjects([e])}else{l.intersect(f);if(!l.isEmpty()){a.updateObjects([e])}}}}}a.groundChangeListener(null)}}}};var d=this.home.getRooms();for(var b=0;b<d.length;b++){d[b].addPropertyChangeListener(this.roomChangeListener)}this.roomListener=function(e){var f=e.getItem();switch(e.getType()){case CollectionEvent.Type.ADD:a.addObject(c,f,e.getIndex(),true,false);f.addPropertyChangeListener(a.roomChangeListener);break;case CollectionEvent.Type.DELETE:a.deleteObject(f);f.removePropertyChangeListener(a.roomChangeListener);break}a.updateObjects(a.home.getRooms());a.groundChangeListener(null)};this.home.addRoomsListener(this.roomListener)};HomeComponent3D.prototype.getShape=function(b){var c=new java.awt.geom.GeneralPath();c.moveTo(b[0][0],b[0][1]);for(var a=1;a<b.length;a++){c.lineTo(b[a][0],b[a][1])}c.closePath();return c};HomeComponent3D.prototype.addPolylineListener=function(d){var a=this;this.polylineChangeListener=function(f){var e=f.getSource();a.updateObjects([e])};var c=this.home.getPolylines();for(var b=0;b<c.length;b++){c[b].addPropertyChangeListener(this.polylineChangeListener)}this.polylineListener=function(f){var e=f.getItem();switch(f.getType()){case CollectionEvent.Type.ADD:a.addObject(d,e,true,false);e.addPropertyChangeListener(a.polylineChangeListener);break;case CollectionEvent.Type.DELETE:a.deleteObject(e);e.removePropertyChangeListener(a.polylineChangeListener);break}};this.home.addPolylinesListener(this.polylineListener)};HomeComponent3D.prototype.addLabelListener=function(c){var a=this;this.labelChangeListener=function(f){var e=f.getSource();a.updateObjects([e])};var d=this.home.getLabels();for(var b=0;b<d.length;b++){d[b].addPropertyChangeListener(this.labelChangeListener)}this.labelListener=function(f){var e=f.getItem();switch(f.getType()){case CollectionEvent.Type.ADD:a.addObject(c,e,true,false);e.addPropertyChangeListener(a.labelChangeListener);break;case CollectionEvent.Type.DELETE:a.deleteObject(e);e.removePropertyChangeListener(a.labelChangeListener);break}};this.home.addLabelsListener(this.labelListener)};HomeComponent3D.prototype.addEnvironmentListeners=function(){var a=this;this.wallsAlphaListener=function(b){a.updateObjects(a.home.getWalls());a.updateObjects(a.home.getRooms())};this.home.getEnvironment().addPropertyChangeListener("WALLS_ALPHA",this.wallsAlphaListener)};HomeComponent3D.prototype.addObject=function(e,b,c,a,d){if(d===undefined){d=a;a=c;c=-1}var f=this.object3dFactory.createObject3D(this.home,b,d);if(a){b.object3D=f;this.homeObjects.push(b)}if(c===-1){e.addChild(f)}else{e.insertChild(f,c)}return f};HomeComponent3D.prototype.addPieceOfFurniture=function(f,c,a,e){if(c instanceof HomeFurnitureGroup){var d=c.getFurniture();for(var b=0;b<d.length;b++){this.addPieceOfFurniture(f,d[b],a,e)}}else{this.addObject(f,c,a,e)}};HomeComponent3D.prototype.deleteObject=function(a){if(a.object3D){a.object3D.detach();delete a.object3D;this.homeObjects.splice(this.homeObjects.indexOf(a),1);if(this.homeObjectsToUpdate){var b=this.homeObjectsToUpdate.indexOf(a);if(b>=0){this.homeObjectsToUpdate.splice(a)}}}};HomeComponent3D.prototype.deletePieceOfFurniture=function(b){if(b instanceof HomeFurnitureGroup){var c=b.getFurniture();for(var a=0;a<c.length;a++){this.deletePieceOfFurniture(c[a])}}else{this.deleteObject(b)}};HomeComponent3D.prototype.updateObjects=function(c){if(this.homeObjectsToUpdate){for(var b=0;b<c.length;b++){var a=c[b];if(this.homeObjectsToUpdate.indexOf(a)<=-1){this.homeObjectsToUpdate.push(a)}}}else{this.homeObjectsToUpdate=c.slice(0);setTimeout(function(e){for(var f=0;f<e.homeObjectsToUpdate.length;f++){var d=e.homeObjectsToUpdate[f];if(d.object3D){d.object3D.update()}}delete e.homeObjectsToUpdate},0,this)}this.approximateHomeBoundsCache=null};HomeComponent3D.prototype.updateIntersectingWalls=function(e){var b=this.home.getWalls();var a=0;if(this.homeObjectsToUpdate){for(var d=0;d<this.homeObjectsToUpdate.length;d++){if(this.homeObjectsToUpdate[d] instanceof Wall){a++}}}if(a!==b.length){var l=[];var g=null;for(var d=0;d<e.length;d++){var k=e[d];var h=k.getPoints();if(g===null){g=new java.awt.geom.Rectangle2D.Float(h[0][0],h[0][1],0,0)}else{g.add(h[0][0],h[0][1])}for(var c=1;c<h.length;c++){g.add(h[c][0],h[c][1])}}for(var d=0;d<b.length;d++){var f=b[d];if(f.intersectsRectangle(g.getX(),g.getY(),g.getX()+g.getWidth(),g.getY()+g.getHeight())){l.push(f)}}this.updateObjects(l)}};HomeComponent3D.prototype.updateWall=function(b){var a=[];a.push(b);if(b.getWallAtStart()!=null){a.push(b.getWallAtStart())}if(b.getWallAtEnd()!=null){a.push(b.getWallAtEnd())}this.updateObjects(a)};function Object3DBranchFactory(){}Object3DBranchFactory.prototype.createObject3D=function(c,a,b){if(a instanceof HomePieceOfFurniture){return new HomePieceOfFurniture3D(a,c,b)}else{if(a instanceof Wall){return new Wall3D(a,c,b)}else{if(a instanceof Room){return new Room3D(a,c,false,b)}else{if(a instanceof Polyline){return new Polyline3D(a,c)}else{if(a instanceof Label){return new Label3D(a,c,b)}else{return new Group3D()}}}}}};function Object3DBranch(){BranchGroup3D.call(this)}Object3DBranch.prototype=Object.create(BranchGroup3D.prototype);Object3DBranch.prototype.constructor=Object3DBranch;Object3DBranch.DEFAULT_COLOR=16777215;Object3DBranch.DEFAULT_AMBIENT_COLOR=3355443;Object3DBranch.prototype.getShape=function(a){return ShapeTools.getShape(a,true,null)};Object3DBranch.prototype.updateAppearanceMaterial=function(a,d,b,c){if(d!==null){a.setAmbientColor(vec3.fromValues(((b>>>16)&255)/255,((b>>>8)&255)/255,(b&255)/255));a.setDiffuseColor(vec3.fromValues(((d>>>16)&255)/255,((d>>>8)&255)/255,(d&255)/255));a.setSpecularColor(vec3.fromValues(c,c,c));a.setShininess(Math.max(1,c*128))}else{a.setAmbientColor(vec3.fromValues(0.2,0.2,0.2));a.setDiffuseColor(vec3.fromValues(1,1,1));a.setSpecularColor(vec3.fromValues(c,c,c));a.setShininess(Math.max(1,c*128))}};Object3DBranch.prototype.updateTextureTransform=function(e,g,c){var f=g.getWidth();var j=g.getHeight();if(f===-1||j===-1){f=100;j=100}var i=g.getXOffset();var d=g.getYOffset();var h=1/g.getScale();var k=mat3.create();mat3.rotate(k,k,g.getAngle());var a=mat3.create();var b=mat3.create();if(c){mat3.fromTranslation(a,vec2.fromValues(-i/h*f,-d/h*j));mat3.scale(b,b,vec2.fromValues(h/f,h/j))}else{mat3.fromTranslation(a,vec2.fromValues(-i/h,-d/h));mat3.multiplyScalar(b,b,h)}mat3.mul(k,k,a);mat3.mul(b,b,k);e.setTextureTransform(b)};Object3DBranch.prototype.getAreaPoints=function(t,a,C,e,M){if(e===undefined&&M===undefined){e=a;M=C;a=null;C=null}var p=[];var x=[];var s=null;var Q=null;for(var r=t.getPathIterator(null,e);!r.isDone();r.next()){var u=[0,0];switch((r.currentSegment(u))){case java.awt.geom.PathIterator.SEG_MOVETO:s=[];s.push(u);Q=u;break;case java.awt.geom.PathIterator.SEG_LINETO:if(u[0]!==Q[0]||u[1]!==Q[1]){s.push(u)}Q=u;break;case java.awt.geom.PathIterator.SEG_CLOSE:var n=s[0];if(n[0]===Q[0]&&n[1]===Q[1]){s.splice(s.length-1,1)}if(s.length>2){var G=s;var f=new Room(G);if(f.getArea()>0){var P=f.isClockwise();if(P){x.push(s)}else{p.push(s)}if(a!==null||C!==null){if(P!==M){G=s.slice(0);G.reverse()}if(P){if(C!=null){C.push(G)}}else{if(a!=null){a.push(G)}}}}}break}}var J=[];if((x.length===0)&&a!==null){J.push.apply(J,a)}else{if((p.length===0)&&!(x.length===0)){if(C!==null){C.length=0}}else{var m;var g=[];if(p.length>1){m=[];for(var L=0;p.length!==0;){var y=p[L];var K=0;for(;K<p.length;K++){if(L!==K){var O=p[K];var h=null;for(var I=0;I<g.length;I++){if(g[I].key===O){h=g[I].value;break}}if(h==null){h=new java.awt.geom.Area(this.getShape(O.slice(0)));g.push({key:O,value:h})}if(h.contains(y[0][0],y[0][1])){break}}}if(K===p.length){p.splice(L,1);m.push(y);L=0}else{if(L<p.length){L++}else{L=0}}}}else{m=p}for(var L=m.length-1;L>=0;L--){var D=m[L];var h=null;for(var I=0;I<g.length;I++){if(g[I].key===D){h=g[I].value;break}}if(h===null){h=new java.awt.geom.Area(this.getShape(D.slice(0)))}var E=[];for(var I=0;I<x.length;I++){var F=x[I];if(h.contains(F[0][0],F[0][1])){E.push(F)}}var v=null;while(E.length!==0){var c=Number.MAX_VALUE;var z=0;var w=0;var N=0;for(var K=0;K<E.length&&c>0;K++){var F=E[K];for(var I=0;I<F.length&&c>0;I++){for(var H=0;H<D.length&&c>0;H++){var q=D[H];var o=java.awt.geom.Point2D.distanceSq(F[I][0],F[I][1],q[0],q[1]);if(o<c&&v!==q){c=o;z=K;w=I;N=H}}}}var d=E[z];if(c!==0){v=D[N];D.splice(N,0,v);D.splice(++N,0,d[w])}var B=d.slice(w,d.length);for(var I=0;I<B.length;I++,N++){D.splice(N,0,B[I])}var A=d.slice(0,w);for(var I=0;I<A.length;I++,N++){D.splice(N,0,A[I])}E.splice(z,1);x.splice(d,1)}}for(var I=0;I<m.length;I++){var b=m[I];if(M){b.reverse()}J.push(b.slice(0))}}}return J};function HomePieceOfFurniture3D(a,c,b){Object3DBranch.call(this);this.setUserData(a);this.home=c;this.createPieceOfFurnitureNode(a,b)}HomePieceOfFurniture3D.prototype=Object.create(Object3DBranch.prototype);HomePieceOfFurniture3D.prototype.constructor=HomePieceOfFurniture3D;HomePieceOfFurniture3D.DEFAULT_BOX=new Object();HomePieceOfFurniture3D.prototype.createPieceOfFurnitureNode=function(e,f){var b=new TransformGroup3D();b.setCapability(Group3D.ALLOW_CHILDREN_EXTEND);b.setCapability(TransformGroup3D.ALLOW_TRANSFORM_WRITE);this.addChild(b);var d=new BranchGroup3D();var a=new TransformGroup3D();a.addChild(this.getModelBox(vec3.fromValues(1,1,1)));d.addChild(a);b.addChild(d);this.updatePieceOfFurnitureTransform();var c=e.getModel();var g=this;ModelManager.getInstance().loadModel(c,f,{modelUpdated:function(j){g.updateModelTransformations(j);var i=e.getModelRotation();var h=ModelManager.getInstance().getNormalizedTransformGroup(j,i,1,e.isModelCenteredAtOrigin());g.updatePieceOfFurnitureModelNode(j,h,f)},modelError:function(h){g.updatePieceOfFurnitureModelNode(g.getModelBox(vec3.fromValues(1,0,0)),new TransformGroup3D(),f)}})};HomePieceOfFurniture3D.prototype.update=function(){if(this.isVisible()){this.updatePieceOfFurnitureModelTransformations();this.updatePieceOfFurnitureTransform();this.updatePieceOfFurnitureModelMirrored();this.updatePieceOfFurnitureColorAndTexture(false)}this.updatePieceOfFurnitureVisibility()};HomePieceOfFurniture3D.prototype.updatePieceOfFurnitureTransform=function(){var a=this.getChild(0);var b=ModelManager.getInstance().getPieceOfFurnitureNormalizedModelTransformation(this.getUserData(),a.getChild(0));a.setTransform(b)};HomePieceOfFurniture3D.prototype.updatePieceOfFurnitureColorAndTexture=function(d){var c=this.getUserData();var a=this.getModelNode();var b=a.getChild(0);if(b.getUserData()!==HomePieceOfFurniture3D.DEFAULT_BOX){if(c.getColor()!==null){this.setColorAndTexture(a,c.getColor(),null,c.getShininess(),null,false,null,null,[])}else{if(c.getTexture()!==null){this.setColorAndTexture(a,null,c.getTexture(),c.getShininess(),null,d,vec3.fromValues(c.getWidth(),c.getHeight(),c.getDepth()),ModelManager.getInstance().getBounds(b),[])}else{if(c.getModelMaterials()!==null){this.setColorAndTexture(a,null,null,null,c.getModelMaterials(),d,vec3.fromValues(c.getWidth(),c.getHeight(),c.getDepth()),ModelManager.getInstance().getBounds(b),[])}else{this.setColorAndTexture(a,null,null,c.getShininess(),null,false,null,null,[])}}}}};HomePieceOfFurniture3D.prototype.getModelNode=function(){var a=this.getChild(0);var b=a.getChild(0);return b.getChild(0)};HomePieceOfFurniture3D.prototype.updatePieceOfFurnitureVisibility=function(){var b=this.getUserData();var c=this.isVisible();var a=b.getColor()===null&&b.getTexture()===null?b.getModelMaterials():null;this.setVisible(this.getModelNode(),c,a)};HomePieceOfFurniture3D.prototype.updatePieceOfFurnitureModelMirrored=function(){var a=this.getUserData();this.setCullFace(this.getModelNode(),a.isModelMirrored(),a.isBackFaceShown())};HomePieceOfFurniture3D.prototype.updatePieceOfFurnitureModelTransformations=function(){var b=this.getUserData();var a=this.getModelNode();if(a.getChild(0).getUserData()!==HomePieceOfFurniture3D.DEFAULT_BOX&&this.updateModelTransformations(this)){var c=ModelManager.getInstance().getNormalizedTransform(a.getChild(0),b.getModelRotation(),1,b.isModelCenteredAtOrigin());a.setTransform(c)}};HomePieceOfFurniture3D.prototype.updateModelTransformations=function(g){var e=false;var b=this.getUserData().getModelTransformations();var a=null;if(b!==null){for(var d=0;d<b.length;d++){var f=b[d];var c=f.getName()+ModelManager.DEFORMABLE_TRANSFORM_GROUP_SUFFIX;if(a===null){a=[]}a.push(c);e|=this.updateTransformation(g,c,f.getMatrix())}}e|=this.setNotUpdatedTranformationsToIdentity(g,a);return e};HomePieceOfFurniture3D.prototype.updateTransformation=function(f,g,a){var e=false;if(f instanceof Group3D){if(f instanceof TransformGroup3D&&g==f.getName()){var b=mat4.create();f.getTransform(b);if(a[0][0]!==b[0]||a[0][1]!==b[4]||a[0][2]!==b[8]||a[0][3]!==b[12]||a[1][0]!==b[1]||a[1][1]!==b[5]||a[1][2]!==b[9]||a[1][3]!==b[13]||a[2][0]!==b[2]||a[2][1]!==b[6]||a[2][2]!==b[10]||a[2][3]!==b[14]){mat4.set(b,a[0][0],a[1][0],a[2][0],0,a[0][1],a[1][1],a[2][1],0,a[0][2],a[1][2],a[2][2],0,a[0][3],a[1][3],a[2][3],1);f.setTransform(b);e=true}}else{var d=f.getChildren();for(var c=0;c<d.length;c++){e|=this.updateTransformation(d[c],g,a)}}}return e};HomePieceOfFurniture3D.prototype.setNotUpdatedTranformationsToIdentity=function(f,a){var e=false;if(f instanceof Group3D){if(f instanceof TransformGroup3D&&f.getName()!==null&&f.getName().indexOf(ModelManager.DEFORMABLE_TRANSFORM_GROUP_SUFFIX)===f.getName().length-ModelManager.DEFORMABLE_TRANSFORM_GROUP_SUFFIX.length&&(a===null||a.indexOf(f.getName())<0)){var g=f;var b=mat4.create();g.getTransform(b);if(!TransformGroup3D.isIdentity(b)){mat4.identity(b);g.setTransform(b);e=true}}var d=f.getChildren();for(var c=0;c<d.length;c++){e|=this.setNotUpdatedTranformationsToIdentity(d[c],a)}}return e};HomePieceOfFurniture3D.prototype.updatePieceOfFurnitureModelNode=function(b,a,f){a.setCapability(TransformGroup3D.ALLOW_TRANSFORM_WRITE);a.addChild(b);var d=new BranchGroup3D();d.addChild(a);var c=this.getUserData();if(c.isDoorOrWindow()){this.setTransparentShapeNotPickable(b)}var e=this.getChild(0);e.removeAllChildren();e.addChild(d);if(c.isHorizontallyRotated()){this.updatePieceOfFurnitureTransform()}if(c.isBackFaceShown()){this.setBackFaceNormalFlip(this.getModelNode(),true)}this.updatePieceOfFurnitureModelMirrored();this.updatePieceOfFurnitureColorAndTexture(f);this.updatePieceOfFurnitureVisibility()};HomePieceOfFurniture3D.prototype.getModelBox=function(a){var c=new Appearance3D();c.setDiffuseColor(a);c.setAmbientColor(vec3.scale(vec3.create(),a,0.7));var b=new Box3D(0.5,0.5,0.5,c);b.setUserData(HomePieceOfFurniture3D.DEFAULT_BOX);return b};HomePieceOfFurniture3D.prototype.setColorAndTexture=function(r,t,n,s,c,k,y,d,x){if(r instanceof Group3D){var e=r.getChildren();for(var v=0;v<e.length;v++){this.setColorAndTexture(e[v],t,n,s,c,k,y,d,x)}}else{if(r instanceof Link3D){this.setColorAndTexture(r.getSharedGroup(),t,n,s,c,k,y,d,x)}else{if(r instanceof Shape3D){var b=r;var u=b.getName();var m=b.getAppearance();if(m===null){m=new Appearance3D();r.setAppearance(m)}if(x.indexOf(m)===-1){var a=null;var w=t!==null;var p=!w&&n!==null;var g=!w&&!p&&c!==null&&c.length>0;var j=w||p||g||s!==null;var q=u!==null&&u.indexOf(ModelManager.WINDOW_PANE_SHAPE_PREFIX)===0;if(!q&&j||q&&g){if(m.defaultAppearance===undefined){m.defaultAppearance=m.clone()}a=m.defaultAppearance}var f=0;if(j){f=s!==null?s:(m.getSpecularColor()!==undefined&&m.getShininess()!==undefined?m.getShininess()/128:0)}if(w){if(q){this.restoreDefaultAppearance(m,null)}else{this.updateAppearanceMaterial(m,t,t,f);if(a.getTransparency()!==undefined){m.setTransparency(a.getTransparency())}if(a.getCullFace()!==undefined){m.setCullFace(a.getCullFace())}if(a.getBackFaceNormalFlip()!==undefined){m.setBackFaceNormalFlip(a.getBackFaceNormalFlip())}m.setTextureCoordinatesGeneration(a.getTextureCoordinatesGeneration());m.setTextureImage(null)}}else{if(p){if(q){this.restoreDefaultAppearance(m,null)}else{m.setTextureCoordinatesGeneration(this.getTextureCoordinates(m,n,y,d));this.updateTextureTransform(m,n,true);this.updateAppearanceMaterial(m,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_AMBIENT_COLOR,f);TextureManager.getInstance().loadTexture(n.getImage(),0,k,this.getTextureObserver(m))}}else{if(g){var o=false;for(var v=0;v<c.length;v++){var l=c[v];if(l!==null&&(l.getKey()!=null&&l.getKey()==m.getName()||l.getKey()==null&&l.getName()==m.getName())){if(l.getShininess()!==null){f=l.getShininess()}t=l.getColor();if(t!==null&&(t&4278190080)!=0){this.updateAppearanceMaterial(m,t,t,f);if(a.getTransparency()!==undefined){m.setTransparency(a.getTransparency())}if(a.getCullFace()!==undefined){m.setCullFace(a.getCullFace())}if(a.getBackFaceNormalFlip()!==undefined){m.setBackFaceNormalFlip(a.getBackFaceNormalFlip())}m.setTextureImage(null)}else{if(t===null&&l.getTexture()!==null){var h=l.getTexture();if(this.isTexturesCoordinatesDefined(b)){this.restoreDefaultTextureCoordinatesGeneration(m);this.updateTextureTransform(m,h)}else{m.setTextureCoordinatesGeneration(this.getTextureCoordinates(m,l.getTexture(),y,d));this.updateTextureTransform(m,h,true)}this.updateAppearanceMaterial(m,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_AMBIENT_COLOR,f);var h=l.getTexture();TextureManager.getInstance().loadTexture(h.getImage(),0,k,this.getTextureObserver(m))}else{this.restoreDefaultAppearance(m,l.getShininess())}}o=true;break}}if(!o){this.restoreDefaultAppearance(m,null)}}else{this.restoreDefaultAppearance(m,s)}}}x.push(m)}}}}};HomePieceOfFurniture3D.prototype.getTextureObserver=function(a){return{textureUpdated:function(b){if(TextureManager.getInstance().isTextureTransparent(b)){a.setCullFace(Appearance3D.CULL_NONE)}else{var c=a.defaultAppearance;if(c!==null&&c.getCullFace()!==null){a.setCullFace(c.getCullFace())}}if(a.getTextureImage()!==b){a.setTextureImage(b)}},textureError:function(b){return this.textureUpdated(TextureManager.getInstance().getErrorImage())}}};HomePieceOfFurniture3D.prototype.getTextureCoordinates=function(g,h,d,k){var e=vec3.create();k.getLower(e);var l=vec3.create();k.getUpper(l);var a=ModelManager.getInstance().getMinimumSize();var i=d[0]/Math.max(l[0]-e[0],a);var j=-e[0]*i;var c=d[1]/Math.max(l[1]-e[1],a);var b=d[2]/Math.max(l[2]-e[2],a);var f=-e[1]*c+l[2]*b;return{planeS:vec4.fromValues(i,0,0,j),planeT:vec4.fromValues(0,c,-b,f)}};HomePieceOfFurniture3D.prototype.isTexturesCoordinatesDefined=function(a){var c=a.getGeometries();for(var b=0,d=c.length;b<d;b++){if(!c[b].hasTextureCoordinates()){return false}}return true};HomePieceOfFurniture3D.prototype.restoreDefaultAppearance=function(a,b){if(a.defaultAppearance!==undefined){var c=a.defaultAppearance;if(c.getAmbientColor()!==undefined){a.setAmbientColor(c.getAmbientColor())}if(c.getDiffuseColor()!==undefined){a.setDiffuseColor(c.getDiffuseColor());a.setSpecularColor(vec3.fromValues(b,b,b));a.setShininess(b*128)}if(c.getTransparency()!==undefined){a.setTransparency(c.getTransparency())}if(a.getCullFace()!==undefined){a.setCullFace(c.getCullFace());a.setBackFaceNormalFlip(c.isBackFaceNormalFlip())}if(c.getTextureCoordinatesGeneration()!==undefined){a.setTextureCoordinatesGeneration(c.getTextureCoordinatesGeneration())}if(a.getTextureImage()!==undefined){a.setTextureImage(c.getTextureImage())}}};HomePieceOfFurniture3D.prototype.restoreDefaultTextureCoordinatesGeneration=function(a){if(a.defaultAppearance!==undefined){var b=a.defaultAppearance;if(b.getTextureCoordinatesGeneration()!==undefined){a.setTextureCoordinatesGeneration(b.getTextureCoordinatesGeneration())}}};HomePieceOfFurniture3D.prototype.setVisible=function(c,b,k){if(c instanceof Group3D){var a=c.getChildren();for(var e=0;e<a.length;e++){this.setVisible(a[e],b,k)}}else{if(c instanceof Link3D){this.setVisible(c.getSharedGroup(),b,k)}else{if(c instanceof Shape3D){var h=c;var f=h.getAppearance();if(f===null){f=new Appearance3D();c.setAppearance(f)}var j=h.getName();if(b&&j!==null&&j.indexOf(ModelManager.LIGHT_SHAPE_PREFIX)===0&&this.home!==null&&!this.isSelected(this.home.getSelectedItems())&&(typeof HomeLight==="undefined"||this.getUserData() instanceof HomeLight)){b=false}if(b&&k!==null){for(var e=0;e<k.length;e++){var g=k[e];if(g!==null&&g.getName()==f.getName()){var d=g.getColor();b=d===null||(d&4278190080)!==0;break}}}f.setVisible(b)}}}};HomePieceOfFurniture3D.prototype.isVisible=function(){var a=this.getUserData();return a.isVisible()&&(a.getLevel()===null||a.getLevel().isViewableAndVisible())};HomePieceOfFurniture3D.prototype.isSelected=function(c){for(var a=0;a<c.length;a++){var b=c[a];if(b===this.getUserData()||(b instanceof HomeFurnitureGroup&&this.isSelected(b.getFurniture()))){return true}}return false};HomePieceOfFurniture3D.prototype.setCullFace=function(f,g,h){if(f instanceof Group3D){var e=f.getChildren();for(var d=0;d<e.length;d++){this.setCullFace(e[d],g,h)}}else{if(f instanceof Link3D){this.setCullFace(f.getSharedGroup(),g,h)}else{if(f instanceof Shape3D){var a=f.getAppearance();if(a===null){a=new Appearance3D();f.setAppearance(a)}if(a.getCullFace()!==Appearance3D.CULL_NONE){var c=a.getCullFace()!==undefined?a.getCullFace():Appearance3D.CULL_BACK;var b=a.defaultCullFace;if(b===undefined){a.defaultCullFace=(b=c)}a.setCullFace((g^h^b===Appearance3D.CULL_FRONT)?Appearance3D.CULL_FRONT:Appearance3D.CULL_BACK)}}}}};HomePieceOfFurniture3D.prototype.setBackFaceNormalFlip=function(d,e){if(d instanceof Group3D){var c=d.getChildren();for(var b=0;b<c.length;b++){this.setBackFaceNormalFlip(c[b],e)}}else{if(d instanceof Link3D){this.setBackFaceNormalFlip(d.getSharedGroup(),e)}else{if(d instanceof Shape3D){var a=d.getAppearance();if(a===null){a=new Appearance3D();d.setAppearance(a)}a.setBackFaceNormalFlip(e^a.getCullFace()===Appearance3D.CULL_FRONT)}}}};HomePieceOfFurniture3D.prototype.setTransparentShapeNotPickable=function(d){if(d instanceof Group3D){var c=d.getChildren();for(var b=0;b<c.length;b++){this.setTransparentShapeNotPickable(c[b])}}else{if(d instanceof Link3D){this.setTransparentShapeNotPickable(d.getSharedGroup())}else{if(d instanceof Shape3D){var a=d.getAppearance();if(a!==null&&a.getTransparency()>0){d.setPickable(false)}}}}};function Wall3D(b,e,d){Object3DBranch.call(this);this.setUserData(b);this.home=e;for(var c=0;c<8;c++){var a=new Group3D();a.addChild(this.createWallPartShape());this.addChild(a)}this.updateWallGeometry(d);this.updateWallAppearance(d)}Wall3D.prototype=Object.create(Object3DBranch.prototype);Wall3D.prototype.constructor=Wall3D;Wall3D.LEVEL_ELEVATION_SHIFT=0.1;Wall3D.FULL_FACE_CUT_OUT_AREA=new java.awt.geom.Area(new java.awt.geom.Rectangle2D.Float(-0.5,0.5,1,1));Wall3D.WALL_LEFT_SIDE=0;Wall3D.WALL_RIGHT_SIDE=1;Wall3D.rotatedModelsFrontAreas=[];Wall3D.prototype.createWallPartShape=function(){var b=new Shape3D();b.setCapability(Shape3D.ALLOW_GEOMETRY_WRITE);var a=new Appearance3D();b.setAppearance(a);this.updateAppearanceMaterial(a,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_AMBIENT_COLOR,0);return b};Wall3D.prototype.update=function(){this.updateWallGeometry(false);this.updateWallAppearance(false)};Wall3D.prototype.updateWallGeometry=function(a){this.updateWallSideGeometry(Wall3D.WALL_LEFT_SIDE,a);this.updateWallSideGeometry(Wall3D.WALL_RIGHT_SIDE,a);this.setPickable(this.home.getEnvironment().getWallsAlpha()==0)};Wall3D.prototype.updateWallSideGeometry=function(b,l){var n=this.getUserData();var d;var a;if(b===Wall3D.WALL_LEFT_SIDE){d=n.getLeftSideTexture();a=n.getLeftSideBaseboard()}else{d=n.getRightSideTexture();a=n.getRightSideBaseboard()}var m=[this.getChild(b),this.getChild(b+2),this.getChild(b+4),this.getChild(b+6)];var g=new Array(m.length);var h=new Array(m.length);for(var f=0;f<m.length;f++){g[f]=m[f].getChild(0);h[f]=g[f].getGeometries().length}if(n.getLevel()==null||n.getLevel().isViewableAndVisible()){var o=[[],[],[],[]];this.createWallGeometries(o[0],o[2],o[3],b,null,d,l);if(a!=null){var c=a.getTexture();if(c===null&&a.getColor()===null){c=d}this.createWallGeometries(o[1],o[1],o[1],b,a,c,l)}for(var f=0;f<m.length;f++){for(var e=0;e<o[f].length;e++){var k=o[f][e];if(k!==null){g[f].addGeometry(k)}}}}for(var f=0;f<m.length;f++){for(var e=h[f]-1;e>=0;e--){g[f].removeGeometry(e)}}};Wall3D.prototype.createWallGeometries=function(x,W,N,ai,ag,ae,av){var aw=this.getUserData();var at=this.getShape(aw.getPoints());var af=this.getWallSidePoints(ai);var y=this.getShape(af);var K=ag==null?af:this.getWallBaseboardPoints(ai);var aq=this.getShape(K);var a=new java.awt.geom.Area(aq);var V=ai===Wall3D.WALL_LEFT_SIDE?K[0].slice(0):K[K.length-1].slice(0);var k=this.getWallElevation(ag!==null);var ab;var j;if(ag===null){ab=this.getWallTopElevationAtStart();j=this.getWallTopElevationAtEnd()}else{ab=j=this.getBaseboardTopElevation(ag)}var s=Math.max(ab,j);var O=Math.atan2(aw.getYEnd()-aw.getYStart(),aw.getXEnd()-aw.getXStart());var J=Math.cos(O);var P=Math.sin(O);var ak=J*aw.getXStart()+P*aw.getYStart();var g=J*aw.getXEnd()+P*aw.getYEnd();var R=aw.getArcExtent();var am=R!==null&&R!==0;var u;var b;if(ab===j){u=0;b=ab}else{u=(j-ab)/(g-ak);b=ab-u*ak}var z=[];var t=[];var o=this.getVisibleDoorsAndWindows(this.home.getFurniture());for(var H=0;H<o.length;H++){var an=o[H];var q=an.getGroundElevation();if(q+an.getHeight()>k&&q<s){var d=new java.awt.geom.Area(this.getShape(an.getPoints()));var S=new java.awt.geom.Area(at);S.intersect(d);if(!S.isEmpty()){var l=null;if(an.isParallelToWall(aw)){if(ag!==null){l=an.clone();l.setDepthInPlan(l.getDepth()+2*ag.getThickness())}if(typeof HomeDoorOrWindow!=="undefined"&&an instanceof HomeDoorOrWindow){if(an.isWallCutOutOnBothSides()){if(l===null){l=an.clone()}l.setDepthInPlan(l.getDepth()+4*aw.getThickness())}}}if(l!==null){d=new java.awt.geom.Area(this.getShape(l.getPoints()));S=new java.awt.geom.Area(aq);S.intersect(d)}else{S=new java.awt.geom.Area(y);S.intersect(d)}if(!S.isEmpty()&&(!aw.isTrapezoidal()||q<this.getMaxElevationAtWallIntersection(S,J,P,u,b))){z.push(new Wall3D.DoorOrWindowArea(S,[an]));t.push(an);a.subtract(d)}}}}if(z.length>1){for(var L=0;L<z.length;L++){var X=z[L];var ar=[];var p=0;for(var H=0;H<z.length;H++){var ac=z[H];if(X.getArea().isEmpty()){break}else{if(p>L){var aj=new java.awt.geom.Area(ac.getArea());aj.intersect(X.getArea());if(!aj.isEmpty()){ac.getArea().subtract(aj);X.getArea().subtract(aj);var m=(X.getDoorsOrWindows().slice(0));m.push.apply(m,ac.getDoorsOrWindows());ar.push(new Wall3D.DoorOrWindowArea(aj,m))}}}p++}z.push.apply(z,ar)}}var G=[];var e=null;for(var B=a.getPathIterator(null);!B.isDone();B.next()){var aa=[0,0];if(B.currentSegment(aa)===java.awt.geom.PathIterator.SEG_CLOSE){if(G.length>2){if(G[0][0]===G[G.length-1][0]&&G[0][1]===G[G.length-1][1]){G.splice(G.length-1,1)}if(G.length>2){var r=G.slice(0);W.push(this.createVerticalPartGeometry(aw,r,k,J,P,u,b,ag,ae,V,ai));x.push(this.createHorizontalPartGeometry(r,k,true,am));N.push(this.createTopPartGeometry(r,J,P,u,b,am))}}G.length=0;e=null}else{if(e===null||aa[0]!==e[0]||aa[1]!==e[1]){G.push(aa);e=aa}}}var U=aw.getLevel();e=null;for(var ap=0;ap<z.length;ap++){var X=z[ap];if(!X.getArea().isEmpty()){for(var B=X.getArea().getPathIterator(null);!B.isDone();B.next()){var aa=[0,0];if(B.currentSegment(aa)===java.awt.geom.PathIterator.SEG_CLOSE){if(G[0][0]===G[G.length-1][0]&&G[0][1]===G[G.length-1][1]){G.splice(G.length-1,1)}if(G.length>2){var r=G.slice(0);var m=X.getDoorsOrWindows();if(m.length>1){m.sort(function(az,ax){var i=az.getGroundElevation();var ay=ax.getGroundElevation();if(i<ay){return -1}else{if(i>ay){return 1}else{return 0}}})}var n=m[0];var C=n.getGroundElevation();if(C>k){if(U!=null&&U.getElevation()!==k&&n.getElevation()<Wall3D.LEVEL_ELEVATION_SHIFT){C-=Wall3D.LEVEL_ELEVATION_SHIFT}W.push(this.createVerticalPartGeometry(aw,r,k,J,P,0,C,ag,ae,V,ai));x.push(this.createHorizontalPartGeometry(r,k,true,am));W.push(this.createHorizontalPartGeometry(r,C,false,am))}for(var H=0;H<m.length-1;){var A=m[H];var T=A.getGroundElevation();var E=m[++H];var Z=E.getGroundElevation();while((T+A.getHeight()>=Z+E.getHeight()&&++H<m.length)){E=m[H]}if(H<m.length&&T+A.getHeight()<Z){W.push(this.createVerticalPartGeometry(aw,r,T+A.getHeight(),J,P,0,Z,ag,ae,V,ai));W.push(this.createHorizontalPartGeometry(r,T+A.getHeight(),true,am));W.push(this.createHorizontalPartGeometry(r,Z,false,am))}}var Q=m[m.length-1];var f=Q.getGroundElevation();for(var H=m.length-2;H>=0;H--){var v=m[H];if(v.getGroundElevation()+v.getHeight()>f+Q.getHeight()){Q=v}}var ad=f+Q.getHeight();var ah=true;for(var H=0;H<r.length;H++){var D=J*r[H][0]+P*r[H][1];var F=u*D+b;if(ad>F){if(u===0||am){ah=false;break}var c=(ad-F)/u;r[H][0]+=(c*J);r[H][1]+=(c*P)}}if(ah){W.push(this.createVerticalPartGeometry(aw,r,ad,J,P,u,b,ag,ae,V,ai));W.push(this.createHorizontalPartGeometry(r,ad,true,am));N.push(this.createTopPartGeometry(r,J,P,u,b,am))}}G.length=0;e=null}else{if(e==null||aa[0]!==e[0]||aa[1]!==e[1]){G.push(aa);e=aa}}}}}if(!am&&t.length>0){var M=Math.PI/720;var au=[];for(var H=0;H<t.length;H++){var an=t[H];if(typeof HomeDoorOrWindow!=="undefined"&&an instanceof HomeDoorOrWindow&&(PieceOfFurniture.DEFAULT_CUT_OUT_SHAPE!=an.getCutOutShape()||an.getWallWidth()!==1||an.getWallLeft()!==0||an.getWallHeight()!==1||an.getWallTop()!==0)){var al=Math.abs(O-an.getAngle())%(2*Math.PI);if(al<M||al>2*Math.PI-M||Math.abs(al-Math.PI)<M){var h=Math.abs(al-Math.PI)<M?1:-1;var w=Wall3D.getRotatedModelFrontArea(an);if(w!==null&&(au.length===0||!av)){this.createGeometriesSurroundingDoorOrWindow(an,w,h,aw,W,N,K,k,J,P,u,b,ae,V,ai)}else{au.push(an)}}}}if(au.length>0){var I=ModelManager.getInstance();au=au.slice(0);var ao=this;for(var H=0;H<au.length;H++){var Y={doorOrWindow:au[H],modelUpdated:function(aB){var ay=Wall3D.getRotatedModelFrontArea(this.doorOrWindow);var ax;if(ay===null){var az=new TransformGroup3D(I.getRotationTransformation(this.doorOrWindow.getModelRotation()));az.addChild(aB);ax=I.getFrontArea(this.doorOrWindow.getCutOutShape(),az);Wall3D.rotatedModelsFrontAreas.push({model:this.doorOrWindow.getModel(),modelRotation:this.doorOrWindow.getModelRotation(),frontArea:ax})}var i=Math.abs(O-this.doorOrWindow.getAngle())%(2*Math.PI);var aA=Math.abs(i-Math.PI)<M?1:-1;if(av){ao.createGeometriesSurroundingDoorOrWindow(this.doorOrWindow,ax,aA,aw,W,N,K,k,J,P,u,b,ae,V,ai)}else{au.splice(au.indexOf(this.doorOrWindow),1);if(au.length===0&&this.baseboard==null){setTimeout(function(){ao.updateWallSideGeometry(ai,av)},0)}}},modelError:function(i){if(Wall3D.getRotatedModelFrontArea(this.doorOrWindow)===null){Wall3D.rotatedModelsFrontAreas.push({model:this.doorOrWindow.getModel(),modelRotation:this.doorOrWindow.getModelRotation(),frontArea:Wall3D.FULL_FACE_CUT_OUT_AREA})}if(!av){au.splice(au.indexOf(this.doorOrWindow),1)}}};I.loadModel(au[H].getModel(),av,Y)}}}};Wall3D.getRotatedModelFrontArea=function(c){var a=null;for(var b=0;b<Wall3D.rotatedModelsFrontAreas.length;b++){if(Wall3D.rotatedModelsFrontAreas[b].model===c.getModel()&&Wall3D.areModelRotationsEqual(Wall3D.rotatedModelsFrontAreas[b].modelRotation,c.getModelRotation())){return Wall3D.rotatedModelsFrontAreas[b].frontArea}}return null};Wall3D.areModelRotationsEqual=function(a,d){for(var c=0;c<a.length;c++){for(var b=0;b<d.length;b++){if(a[c][b]!==d[c][b]){return false}}}return true};Wall3D.prototype.getVisibleDoorsAndWindows=function(d){var c=[];for(var a=0;a<d.length;a++){var b=d[a];if(b.isVisible()&&(b.getLevel()==null||b.getLevel().isViewableAndVisible())){if(b instanceof HomeFurnitureGroup){c.push.apply(c,this.getVisibleDoorsAndWindows(b.getFurniture()))}else{if(b.isDoorOrWindow()){c.push(b)}}}}return c};Wall3D.prototype.getWallSidePoints=function(c){var a=this.getUserData();var b=a.getPoints();if(c===Wall3D.WALL_LEFT_SIDE){for(var d=(b.length/2|0);d<b.length;d++){b[d][0]=(b[d][0]+b[b.length-d-1][0])/2;b[d][1]=(b[d][1]+b[b.length-d-1][1])/2}}else{for(var d=0,e=(b.length/2|0);d<e;d++){b[d][0]=(b[d][0]+b[b.length-d-1][0])/2;b[d][1]=(b[d][1]+b[b.length-d-1][1])/2}}return b};Wall3D.prototype.getWallBaseboardPoints=function(c){var a=this.getUserData();var e=a.getPoints$boolean(true);var b=a.getPoints();if(c===Wall3D.WALL_LEFT_SIDE){for(var d=Math.floor(e.length/2);d<e.length;d++){e[d]=b[b.length-d-1]}}else{for(var d=0,f=Math.floor(b.length/2);d<f;d++){e[d]=b[b.length-d-1]}}return e};Wall3D.prototype.createVerticalPartGeometry=function(m,L,ab,D,B,T,q,b,u,ad,ac){var x=this.home.getEnvironment().getSubpartSizeUnderLight();var e=m.getArcExtent();if((e===null||e===0)&&x>0){var M=[];M.push(L[0]);for(var X=1;X<L.length;X++){var z=java.awt.geom.Point2D.distance(L[X-1][0],L[X-1][1],L[X][0],L[X][1])-x/2;var t=Math.atan2(L[X][1]-L[X-1][1],L[X][0]-L[X-1][0]);var C=Math.cos(t);var l=Math.sin(t);for(var aa=0;aa<z;aa+=x){M.push([(L[X-1][0]+aa*C),(L[X-1][1]+aa*l)])}M.push(L[X])}L=M.slice(0)}var a=new Array(L.length);var g=new Array(L.length);var E=new Array(L.length);var k=m.getXStart();var I=m.getYStart();var s=m.getXEnd();var O=m.getYEnd();var W=null;var H=0;var S=0;if(e!==null&&e!==0){W=[m.getXArcCircleCenter(),m.getYArcCircleCenter()];H=java.awt.geom.Point2D.distance(W[0],W[1],k,I);S=Math.fround(Math.atan2(ad[1]-W[1],ad[0]-W[0]))}for(var X=0;X<L.length;X++){a[X]=vec3.fromValues(L[X][0],ab,L[X][1]);var o=this.getWallPointElevation(L[X][0],L[X][1],D,B,T,q);g[X]=vec3.fromValues(L[X][0],o,L[X][1])}var p=new Array(L.length);for(var X=0;X<L.length;X++){if(W===null){p[X]=java.awt.geom.Line2D.ptLineDistSq(k,I,s,O,a[X][0],a[X][2])}else{p[X]=H-java.awt.geom.Point2D.distance(W[0],W[1],a[X][0],a[X][2]);p[X]*=p[X]}}var ae=L.length;var h=new Array(L.length);if(b===null){for(var X=0;X<L.length-1;X++){h[X]=p[X]>0.001||p[X+1]>0.001;if(!h[X]){ae--}}h[h.length-1]=p[0]>0.001||p[L.length-1]>0.001;if(!h[h.length-1]){ae--}if(ae===0){return null}}else{for(var X=0;X<h.length;X++){h[X]=true}}var n=[];for(var G=0;G<L.length;G++){if(h[G]){var K=ab;var w=a[G];var r=(G+1)%L.length;var v=a[r];if(x>0){for(var U=Math.min(g[G][1],g[r][1])-x/2;K<U;K+=x){n.push(w);n.push(v);w=vec3.fromValues(a[G][0],K,a[G][2]);v=vec3.fromValues(a[r][0],K,a[r][2]);n.push(v);n.push(w)}}n.push(w);n.push(v);n.push(g[r]);n.push(g[G])}}var P=new GeometryInfo3D(GeometryInfo3D.QUAD_ARRAY);P.setCoordinates(n.slice(0));if(u!==null){var Q;if(b!==null){Q=m.getThickness()/2+b.getThickness();Q*=Q}else{Q=(m.getThickness()*m.getThickness())/4}var Z=new Array(n.length);var A=vec2.fromValues(0,ab);var V=0;var R=W===null?m.getThickness()/10000:Q/4;for(var G=0;G<L.length;G++){if(h[G]){var r=(G+1)%L.length;var N;var J;if(Math.abs(p[G]-Q)<R&&Math.abs(p[r]-Q)<R){var f;var F;if(W===null){f=java.awt.geom.Point2D.distance(ad[0],ad[1],L[G][0],L[G][1]);F=java.awt.geom.Point2D.distance(ad[0],ad[1],L[r][0],L[r][1])}else{if(E[G]===undefined){var c=Math.fround(Math.atan2(L[G][1]-W[1],L[G][0]-W[0]));c=this.adjustAngleOnReferencePointAngle(c,S,e);E[G]=(c-S)*H}if(E[r]===undefined){var c=Math.fround(Math.atan2(L[r][1]-W[1],L[r][0]-W[0]));c=this.adjustAngleOnReferencePointAngle(c,S,e);E[r]=(c-S)*H}f=E[G];F=E[r]}if(ac===Wall3D.WALL_LEFT_SIDE&&u.isLeftToRightOriented()){f=-f;F=-F}N=vec2.fromValues(f,ab);J=vec2.fromValues(F,ab)}else{N=A;var Y=java.awt.geom.Point2D.distance(L[G][0],L[G][1],L[r][0],L[r][1]);J=vec2.fromValues(Y,ab)}if(x>0){var K=ab;for(var U=Math.min(g[G][1],g[r][1])-x/2;K<U;K+=x){Z[V++]=N;Z[V++]=J;N=vec2.fromValues(N[0],K);J=vec2.fromValues(J[0],K);Z[V++]=J;Z[V++]=N}}Z[V++]=N;Z[V++]=J;Z[V++]=vec2.fromValues(J[0],g[r][1]);Z[V++]=vec2.fromValues(N[0],g[G][1])}}P.setTextureCoordinates(Z)}if(W===null){P.setCreaseAngle(0)}P.setGeneratedNormals(true);return P.getIndexedGeometryArray()};Wall3D.prototype.getMaxElevationAtWallIntersection=function(b,a,c,e,f){var g=-Infinity;for(var d=b.getPathIterator(null);!d.isDone();d.next()){var h=[0,0];if(d.currentSegment(h)!==java.awt.geom.PathIterator.SEG_CLOSE){g=Math.max(g,this.getWallPointElevation(h[0],h[1],a,c,e,f))}}return g};Wall3D.prototype.getWallPointElevation=function(e,g,a,b,c,d){var f=a*e+b*g;return(c*f+d)};Wall3D.prototype.adjustAngleOnReferencePointAngle=function(a,b,c){if(c>0){if((b>0&&(a<0||a<b))||(b<0&&a<b)){a+=2*Math.PI}}else{if((b<0&&(a>0||b<a))||(b>0&&b<a)){a-=2*Math.PI}}return a};Wall3D.prototype.createHorizontalPartGeometry=function(c,g,f,d){var e=new Array(c.length);for(var b=0;b<c.length;b++){e[b]=vec3.fromValues(c[b][0],g,c[b][1])}var a=new GeometryInfo3D(GeometryInfo3D.POLYGON_ARRAY);a.setCoordinates(f?e.reverse():e);a.setStripCounts([e.length]);if(d){a.setCreaseAngle(0)}a.setGeneratedNormals(true);return a.getIndexedGeometryArray()};Wall3D.prototype.createTopPartGeometry=function(k,b,g,d,c,l){var j=new Array(k.length);for(var f=0;f<k.length;f++){var h=b*k[f][0]+g*k[f][1];var a=(d*h+c);j[f]=vec3.fromValues(k[f][0],a,k[f][1])}var e=new GeometryInfo3D(GeometryInfo3D.POLYGON_ARRAY);e.setCoordinates(j);e.setStripCounts([j.length]);if(l){e.setCreaseAngle(0)}e.setGeneratedNormals(true);return e.getIndexedGeometryArray()};Wall3D.prototype.createGeometriesSurroundingDoorOrWindow=function(N,b,L,n,O,c,v,X,C,A,Y,r,u,ai,ah){if(N.getModelTransformations()!==null){b=new java.awt.geom.Area(b);b.transform(java.awt.geom.AffineTransform.getTranslateInstance(0.5,0.5));b.transform(java.awt.geom.AffineTransform.getScaleInstance(N.getWidth()*N.getWallWidth(),N.getHeight()*N.getWallHeight()));b.transform(java.awt.geom.AffineTransform.getTranslateInstance(N.getWallLeft()*N.getWidth(),(1-N.getWallHeight()-N.getWallTop())*N.getHeight()));b.transform(java.awt.geom.AffineTransform.getScaleInstance(1/N.getWidth(),1/N.getHeight()));b.transform(java.awt.geom.AffineTransform.getTranslateInstance(-0.5,-0.5))}var h=new java.awt.geom.Area(Wall3D.FULL_FACE_CUT_OUT_AREA);h.subtract(b);if(!h.isEmpty()){var y=N.getDepth();var k=(N.getX()-L*y/2*Math.sin(N.getAngle()));var t=(N.getY()+L*y/2*Math.cos(N.getAngle()));var aa=ah===Wall3D.WALL_LEFT_SIDE?v[0]:v[v.length-1];var W=ah===Wall3D.WALL_LEFT_SIDE?v[(v.length/2|0)-1]:v[(v.length/2|0)];var I=java.awt.geom.Line2D.ptLineDist(aa[0],aa[1],W[0],W[1],k,t);var R=java.awt.geom.Line2D.relativeCCW(aa[0],aa[1],W[0],W[1],k,t);var S=L*(0.5-R*I/y);var p=ModelManager.getInstance().getPieceOfFurnitureNormalizedModelTransformation(N,null);var e=mat4.create();mat4.fromTranslation(e,vec3.fromValues(0,0,S));mat4.mul(p,p,e);var E=mat4.create();mat4.invert(E,p);var w=new java.awt.geom.GeneralPath();var M=vec3.fromValues(aa[0],X,aa[1]);vec3.transformMat4(M,M,E);w.moveTo(M[0],M[1]);M=vec3.fromValues(W[0],X,W[1]);vec3.transformMat4(M,M,E);w.lineTo(M[0],M[1]);var d=vec3.fromValues(W[0],this.getWallPointElevation(W[0],W[1],C,A,Y,r),W[1]);vec3.transformMat4(d,d,E);w.lineTo(d[0],d[1]);var a=vec3.fromValues(aa[0],this.getWallPointElevation(aa[0],aa[1],C,A,Y,r),aa[1]);vec3.transformMat4(a,a,E);w.lineTo(a[0],a[1]);w.closePath();var T=new java.awt.geom.GeneralPath();T.moveTo(-0.5,-0.5);T.lineTo(-0.5,0.5);T.lineTo(0.5,0.5);T.lineTo(0.5,-0.5);T.closePath();var H=new java.awt.geom.Area(T);H.intersect(new java.awt.geom.Area(w));H.subtract(b);var q=0.5/(Math.max(N.getWidth(),N.getHeight()));if(!H.isEmpty()){var ac=L>0!==(ah===Wall3D.WALL_RIGHT_SIDE)!==N.isModelMirrored();var x=this.getAreaPoints(H,q,ac);if(!(x.length===0)){var V=new Array(x.length);var ae=0;for(var ab=0;ab<x.length;ab++){var f=x[ab];V[ab]=f.length+1;ae+=V[ab]}var l=n.getThickness()/2;var F=l*A;var aj=-l*C;if(ah===Wall3D.WALL_LEFT_SIDE){F*=-1;aj*=-1}var m=new Array(ae);var z=([]);var B=([]);var af;var D;if(u!=null){af=new Array(m.length);D=[]}else{af=null;D=null}var ab=0;for(var G=0;G<x.length;G++){var f=x[G];var K=vec3.fromValues(f[0][0],f[0][1],0);vec3.transformMat4(K,K,p);var J=null;if(u!=null){var ad=java.awt.geom.Point2D.distance(ai[0],ai[1],K[0],K[2]);if(ah===Wall3D.WALL_LEFT_SIDE&&u.isLeftToRightOriented()){ad=-ad}J=vec2.fromValues(ad,K[1])}var Q=java.awt.geom.Line2D.ptLineDistSq(d[0],d[1],a[0],a[1],f[0][0],f[0][1]);for(var Z=0;Z<f.length;Z++,ab++){m[ab]=K;if(u!=null){af[ab]=J}var ag=Z<f.length-1?Z+1:0;var o;var g=java.awt.geom.Line2D.ptLineDistSq(d[0],d[1],a[0],a[1],f[ag][0],f[ag][1]);if(Q<1e-10&&g<1e-10){o=B}else{o=z}var s=vec3.fromValues(f[ag][0],f[ag][1],0);vec3.transformMat4(s,s,p);o.push(K);o.push(vec3.fromValues(K[0]+F,K[1],K[2]+aj));o.push(vec3.fromValues(s[0]+F,s[1],s[2]+aj));o.push(s);var P=null;if(u!=null){var ad=java.awt.geom.Point2D.distance(ai[0],ai[1],s[0],s[2]);if(ah===Wall3D.WALL_LEFT_SIDE&&u.isLeftToRightOriented()){ad=-ad}P=vec2.fromValues(ad,s[1]);if(o===z){D.push(J);D.push(J);D.push(P);D.push(P)}}Q=g;K=s;J=P}m[ab]=K;if(u!=null){af[ab]=J}ab++}var U=new GeometryInfo3D(GeometryInfo3D.POLYGON_ARRAY);U.setStripCounts(V);U.setCoordinates(m);if(u!==null){U.setTextureCoordinates(af)}U.setGeneratedNormals(true);O.push(U.getIndexedGeometryArray());if(z.length>0){U=new GeometryInfo3D(GeometryInfo3D.QUAD_ARRAY);U.setCoordinates(z.slice(0));if(u!==null){U.setTextureCoordinates(D.slice(0))}U.setCreaseAngle(Math.PI/2);U.setGeneratedNormals(true);O.push(U.getIndexedGeometryArray())}if(B.length>0){U=new GeometryInfo3D(GeometryInfo3D.QUAD_ARRAY);U.setCoordinates(B.slice(0));U.setGeneratedNormals(true);c.push(U.getIndexedGeometryArray())}}}}};Wall3D.prototype.getWallElevation=function(b){var a=this.getUserData();var d=a.getLevel();if(d===null){return 0}else{if(b){return d.getElevation()}else{var c=this.getFloorThicknessBottomWall();if(c>0){c-=Wall3D.LEVEL_ELEVATION_SHIFT}return d.getElevation()-c}}};Wall3D.prototype.getFloorThicknessBottomWall=function(){var a=this.getUserData();var c=a.getLevel();if(c==null){return 0}else{var b=this.home.getLevels();if(!(b.length===0)&&b[0].getElevation()===c.getElevation()){return 0}else{return c.getFloorThickness()}}};Wall3D.prototype.getWallTopElevationAtStart=function(){var a=this.getUserData().getHeight();var b;if(a!==null){b=a+this.getWallElevation(false)+this.getFloorThicknessBottomWall()}else{b=this.home.getWallHeight()+this.getWallElevation(false)+this.getFloorThicknessBottomWall()}return b+this.getTopElevationShift()};Wall3D.prototype.getTopElevationShift=function(){var b=this.getUserData().getLevel();if(b!==null){var a=this.home.getLevels();if(a[a.length-1]!==b){return Wall3D.LEVEL_ELEVATION_SHIFT}}return 0};Wall3D.prototype.getWallTopElevationAtEnd=function(){var a=this.getUserData();if(a.isTrapezoidal()){return a.getHeightAtEnd()+this.getWallElevation(false)+this.getFloorThicknessBottomWall()+this.getTopElevationShift()}else{return this.getWallTopElevationAtStart()}};Wall3D.prototype.getBaseboardTopElevation=function(a){return a.getHeight()+this.getWallElevation(true)};Wall3D.prototype.updateWallAppearance=function(e){var h=this.getUserData();var b=h.getTopColor();var k=[this.getChild(0),this.getChild(2),this.getChild(4),this.getChild(6)];var a=[this.getChild(1),this.getChild(3),this.getChild(5),this.getChild(7)];for(var f=0;f<k.length;f++){if(f===1){var c=h.getLeftSideBaseboard();if(c!=null){var g=c.getTexture();var d=c.getColor();if(d===null&&g===null){g=h.getLeftSideTexture();d=h.getLeftSideColor()}this.updateFilledWallSideAppearance(k[f].getChild(0).getAppearance(),g,e,d,h.getLeftSideShininess())}var j=h.getRightSideBaseboard();if(j!=null){var g=j.getTexture();var d=j.getColor();if(d==null&&g==null){g=h.getRightSideTexture();d=h.getRightSideColor()}this.updateFilledWallSideAppearance(a[f].getChild(0).getAppearance(),g,e,d,h.getRightSideShininess())}}else{if(f!==3||b==null){this.updateFilledWallSideAppearance(k[f].getChild(0).getAppearance(),h.getLeftSideTexture(),e,h.getLeftSideColor(),h.getLeftSideShininess());this.updateFilledWallSideAppearance(a[f].getChild(0).getAppearance(),h.getRightSideTexture(),e,h.getRightSideColor(),h.getRightSideShininess())}else{this.updateFilledWallSideAppearance(k[f].getChild(0).getAppearance(),null,e,b,0);this.updateFilledWallSideAppearance(a[f].getChild(0).getAppearance(),null,e,b,0)}}}};Wall3D.prototype.updateFilledWallSideAppearance=function(g,a,e,c,b){if(a==null){this.updateAppearanceMaterial(g,c,c,b);g.setTextureImage(null)}else{this.updateAppearanceMaterial(g,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_AMBIENT_COLOR,b);this.updateTextureTransform(g,a,true);var d=this;TextureManager.getInstance().loadTexture(a.getImage(),e,{textureUpdated:function(h){g.setTextureImage(h)},textureError:function(h){return this.textureUpdated(TextureManager.getInstance().getErrorImage())}})}var f=this.home.getEnvironment().getWallsAlpha();g.setTransparency(f)};Wall3D.DoorOrWindowArea=function(a,b){this.area=a;this.doorsOrWindows=b};Wall3D.DoorOrWindowArea.prototype.getArea=function(){return this.area};Wall3D.DoorOrWindowArea.prototype.getDoorsOrWindows=function(){return this.doorsOrWindows};function Room3D(c,d,a,b){Object3DBranch.call(this);if(a===undefined){a=false;b=false}this.setUserData(c);this.home=d;this.addChild(this.createRoomPartShape());this.addChild(this.createRoomPartShape());this.updateRoomGeometry();this.updateRoomAppearance(b);if(a){this.removeChild(Room3D.CEILING_PART)}}Room3D.prototype=Object.create(Object3DBranch.prototype);Room3D.prototype.constructor=Room3D;Room3D.FLOOR_PART=0;Room3D.CEILING_PART=1;Room3D.prototype.createRoomPartShape=function(){var b=new Shape3D();b.setCapability(Shape3D.ALLOW_GEOMETRY_WRITE);var a=new Appearance3D();b.setAppearance(a);this.updateAppearanceMaterial(a,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_AMBIENT_COLOR,0);return b};Room3D.prototype.update=function(){this.updateRoomGeometry();this.updateRoomAppearance(false)};Room3D.prototype.updateRoomGeometry=function(){this.updateRoomPartGeometry(Room3D.FLOOR_PART,this.getUserData().getFloorTexture());this.updateRoomPartGeometry(Room3D.CEILING_PART,this.getUserData().getCeilingTexture());var a=this.getUserData();this.setPickable(this.home.getEnvironment().getWallsAlpha()==0||a.getLevel()==null||a.getLevel().getElevation()<=0)};Room3D.prototype.updateRoomPartGeometry=function(a,e){var f=this.getChild(a);var d=f.getGeometries().length;var g=this.getUserData();if(g.getLevel()==null||g.getLevel().isViewableAndVisible()){var c=this.createRoomGeometries(a,e);for(var b=0;b<c.length;b++){f.addGeometry(c[b])}}for(var b=d-1;b>=0;b--){f.removeGeometry(b)}};Room3D.prototype.createRoomGeometries=function(P,n){var A=this.getUserData();var H=A.getPoints();if((P===Room3D.FLOOR_PART&&A.isFloorVisible()||P===Room3D.CEILING_PART&&A.isCeilingVisible())&&H.length>2){var G=A.getLevel();var o=this.home.getLevels();var D=this.isLastLevel(G,o);var q;var m;if(G!=null){m=G.getElevation();q=m-G.getFloorThickness()}else{m=0;q=0}var c;if(o.length===0){c=0}else{c=o[0].getElevation()}var x=P===Room3D.FLOOR_PART&&G!==null&&m!==c;var k=[];var f=[];var J=this.home.getRooms();for(var S=0;S<J.length;S++){var v=J[S];var l=v.getLevel();if(l===null||l.isViewableAndVisible()){if(A===v||G===l&&(P===Room3D.FLOOR_PART&&v.isFloorVisible()||P===Room3D.CEILING_PART&&v.isCeilingVisible())||G!=null&&l!=null&&(P===Room3D.FLOOR_PART&&v.isFloorVisible()&&Math.abs(m-l.getElevation())<0.0001||P===Room3D.CEILING_PART&&v.isCeilingVisible()&&!D&&!this.isLastLevel(l,o)&&Math.abs(m+G.getHeight()-(l.getElevation()+l.getHeight()))<0.0001)){k.push(v)}else{if(x&&l!=null&&v.isCeilingVisible()&&!this.isLastLevel(l,o)&&Math.abs(q-(l.getElevation()+l.getHeight()))<0.0001){f.push(v)}}}}if(G!=null){k.sort(function(Y,j){var i=(Y.getLevel().getElevation()-j.getLevel().getElevation());if(i!==0){return i}else{return Y.getLevel().getElevationIndex()-j.getLevel().getElevationIndex()}})}var s;if(G===null||P===Room3D.CEILING_PART&&D){s=[]}else{s=this.getVisibleStaircases(this.home.getFurniture(),P,G,G.getElevation()===c)}var X=true;if(P===Room3D.CEILING_PART&&(G===null||D)){var z=this.getRoomHeightAt(H[0][0],H[0][1]);for(var S=1;S<H.length&&X;S++){X=this.getRoomHeightAt(H[S][0],H[S][1])===z}}var d;var W;var e;var E;if(!A.isSingular()||X&&(k[k.length-1]!==A||s.length>0)){E=new java.awt.geom.Area(this.getShape(H));if((k.indexOf(A)>=0)){for(var S=k.length-1;S>0&&k[S]!==A;S--){var a=k[S];E.subtract(new java.awt.geom.Area(this.getShape(a.getPoints())))}}this.removeStaircasesFromArea(s,E);d=[];W=[];e=this.getAreaPoints(E,d,W,1,P===Room3D.CEILING_PART)}else{var O=A.isClockwise();if(O&&P===Room3D.FLOOR_PART||!O&&P===Room3D.CEILING_PART){H=this.getReversedArray(H)}e=d=[H];W=[];E=null}var g=[];var r=this.home.getEnvironment().getSubpartSizeUnderLight();if(e.length!==0){var b=[];var y=true;for(var S=0;S<e.length;S++){var K=e[S];var u=new Array(K.length);for(var R=0;R<K.length;R++){u[R]=P===Room3D.FLOOR_PART?m:this.getRoomHeightAt(K[R][0],K[R][1]);if(y&&R>0){y=u[R]===u[R-1]}}b.push(u)}if(y&&r>0){for(var R=0;R<e.length;R++){var K=e[R];var U=Number.MAX_VALUE;var t=Number.MIN_VALUE;var N=Number.MAX_VALUE;var h=Number.MIN_VALUE;for(var S=0;S<K.length;S++){var C=K[S];U=Math.min(U,C[0]);t=Math.max(t,C[0]);N=Math.min(N,C[1]);h=Math.max(h,C[1])}var w=new java.awt.geom.Area(this.getShape(K));for(var I=U;I<t;I+=r){for(var M=N;M<h;M+=r){var V=new java.awt.geom.Area(new java.awt.geom.Rectangle2D.Float(I,M,r,r));V.intersect(w);if(!V.isEmpty()){var B=this.getAreaPoints(V,1,P===Room3D.CEILING_PART);if(!(B.length==0)){g.push(this.computeRoomPartGeometry(B,null,G,b[S][0],q,P===Room3D.FLOOR_PART,false,n))}}}}}}else{g.push(this.computeRoomPartGeometry(e,b,G,m,q,P===Room3D.FLOOR_PART,false,n))}if(G!=null&&P===Room3D.FLOOR_PART&&G.getElevation()!==c){g.push(this.computeRoomBorderGeometry(d,W,G,m,n))}}if(x){var p;if(E!=null||f.length>0){var Q=E!=null?E:new java.awt.geom.Area(this.getShape(H));for(var S=0;S<f.length;S++){var a=f[S];Q.subtract(new java.awt.geom.Area(this.getShape(a.getPoints())))}p=this.getAreaPoints(Q,1,true)}else{p=[this.getReversedArray(H)]}if(p.length!==0){if(r>0){for(var S=0;S<p.length;S++){var F=p[S];var U=Number.MAX_VALUE;var t=Number.MIN_VALUE;var N=Number.MAX_VALUE;var h=Number.MIN_VALUE;for(var R=0;R<F.length;R++){var C=F[R];U=Math.min(U,C[0]);t=Math.max(t,C[0]);N=Math.min(N,C[1]);h=Math.max(h,C[1])}var L=new java.awt.geom.Area(this.getShape(F));for(var I=U;I<t;I+=r){for(var M=N;M<h;M+=r){var T=new java.awt.geom.Area(new java.awt.geom.Rectangle2D.Float(I,M,r,r));T.intersect(L);if(!T.isEmpty()){var B=this.getAreaPoints(T,1,true);if(B.length!==0){g.push(this.computeRoomPartGeometry(B,null,G,m,q,true,true,n))}}}}}}else{g.push(this.computeRoomPartGeometry(p,null,G,m,q,true,true,n))}}}return g.slice(0)}else{return[]}};Room3D.prototype.computeRoomPartGeometry=function(v,t,b,g,u,m,s,h){var c=new Array(v.length);var f=0;for(var r=0;r<v.length;r++){var d=v[r];c[r]=d.length;f+=c[r]}var q=new Array(f);var r=0;for(var o=0;o<v.length;o++){var d=v[o];var a=t!=null?t[o]:null;for(var n=0;n<d.length;n++){var e=s?u:(a!=null?a[n]:g);q[r++]=vec3.fromValues(d[n][0],e,d[n][1])}}var l=new GeometryInfo3D(GeometryInfo3D.POLYGON_ARRAY);l.setCoordinates(q);l.setStripCounts(c);if(h!=null){var p=new Array(f);r=0;for(var o=0;o<v.length;o++){var d=v[o];for(var n=0;n<d.length;n++){p[r++]=vec2.fromValues(d[n][0],m?-d[n][1]:d[n][1])}}l.setTextureCoordinates(p)}l.setGeneratedNormals(true);return l.getIndexedGeometryArray()};Room3D.prototype.computeRoomBorderGeometry=function(q,p,r,n,h){var a=0;for(var e=0;e<q.length;e++){a+=q[e].length}for(var e=0;e<p.length;e++){a+=p[e].length}a=a*4;var e=0;var o=new Array(a);var g=n-r.getFloorThickness();for(var f=0;f<q.length;f++){var k=q[f];for(var d=0;d<k.length;d++){o[e++]=vec3.fromValues(k[d][0],n,k[d][1]);o[e++]=vec3.fromValues(k[d][0],g,k[d][1]);var m=d<k.length-1?d+1:0;o[e++]=vec3.fromValues(k[m][0],g,k[m][1]);o[e++]=vec3.fromValues(k[m][0],n,k[m][1])}}for(var f=0;f<p.length;f++){var b=p[f];for(var d=0;d<b.length;d++){o[e++]=vec3.fromValues(b[d][0],n,b[d][1]);var m=d<b.length-1?d+1:0;o[e++]=vec3.fromValues(b[m][0],n,b[m][1]);o[e++]=vec3.fromValues(b[m][0],g,b[m][1]);o[e++]=vec3.fromValues(b[d][0],g,b[d][1])}}var c=new GeometryInfo3D(GeometryInfo3D.QUAD_ARRAY);c.setCoordinates(o);if(h!=null){var l=new Array(a);e=0;for(var f=0;f<q.length;f++){var k=q[f];for(var d=0;d<k.length;d++){l[e++]=vec2.fromValues(0,r.getFloorThickness());l[e++]=vec2.fromValues(0,0);var m=d<k.length-1?d+1:0;var s=java.awt.geom.Point2D.distance(k[d][0],k[d][1],k[m][0],k[m][1]);l[e++]=vec2.fromValues(s,0);l[e++]=vec2.fromValues(s,r.getFloorThickness())}}for(var f=0;f<p.length;f++){var b=p[f];for(var d=0;d<b.length;d++){l[e++]=vec2.fromValues(0,0);var m=d<b.length-1?d+1:0;var s=java.awt.geom.Point2D.distance(b[d][0],b[d][1],b[m][0],b[m][1]);l[e++]=vec2.fromValues(s,0);l[e++]=vec2.fromValues(s,r.getFloorThickness());l[e++]=vec2.fromValues(0,r.getFloorThickness())}}c.setTextureCoordinates(l)}c.setCreaseAngle(Math.PI/8);c.setGeneratedNormals(true);return c.getIndexedGeometryArray()};Room3D.prototype.removeStaircasesFromArea=function(b,d){var a=ModelManager.getInstance();for(var c=0;c<b.length;c++){var e=b[c];d.subtract(a.getAreaOnFloor(e))}};Room3D.prototype.getVisibleStaircases=function(f,b,d,g){var a=[];for(var c=0;c<f.length;c++){var e=f[c];if(e.isVisible()&&(e.getLevel()===null||e.getLevel().isViewableAndVisible())){if(e instanceof HomeFurnitureGroup){a.push.apply(a,this.getVisibleStaircases(e.getFurniture(),b,d,g))}else{if(e.getStaircaseCutOutShape()!=null&&"false"!=e.getStaircaseCutOutShape().toLowerCase()&&((b===Room3D.FLOOR_PART&&e.getGroundElevation()<d.getElevation()&&e.getGroundElevation()+e.getHeight()>=d.getElevation()-(g?0:d.getFloorThickness())||b===Room3D.CEILING_PART&&e.getGroundElevation()<d.getElevation()+d.getHeight()&&e.getGroundElevation()+e.getHeight()>=d.getElevation()+d.getHeight()))){a.push(e)}}}}return a};Room3D.prototype.getReversedArray=function(a){a=a.slice(0);return a.reverse()};Room3D.prototype.getRoomHeightAt=function(p,o){var F=Infinity;var C=this.getUserData();var g=C.getLevel();var n=g!==null?g.getElevation():0;var q=n+(g==null?this.home.getWallHeight():g.getHeight());var h=this.home.getLevels();if(g==null||this.isLastLevel(g,h)){var l=null;var E=null;var A=-1;var D=this.home.getWalls();for(var j=0;j<D.length;j++){var B=D[j];if((B.getLevel()===null||B.getLevel().isViewable())&&B.isAtLevel(g)){var w=B.getPoints();for(var z=0;z<w.length;z++){var d=java.awt.geom.Point2D.distanceSq(w[z][0],w[z][1],p,o);if(d<F){l=B;E=w;A=z;F=d}}}}if(l!=null){q=l.getLevel()==null?0:l.getLevel().getElevation();var s=l.getHeight();if(A===0||A===E.length-1){q+=s!=null?s:this.home.getWallHeight()}else{if(l.isTrapezoidal()){var t=l.getArcExtent();if(t==null||t===0||A===Math.floor(E.length/2)||A===Math.floor(E.length/2)-1){q+=l.getHeightAtEnd()}else{var f=l.getXArcCircleCenter();var r=l.getYArcCircleCenter();var c=E[A][0];var k=E[A][1];var u=java.awt.geom.Point2D.distance(f,r,c,k);var e=l.getXStart();var m=l.getYStart();var b=java.awt.geom.Point2D.distance(f,r,e,m);var a=(c-f)*(e-f)+(k-r)*(m-r);a/=(u*b);var v=Math.acos(a)*(t>0?1:(t<0?-1:0));q+=s+(l.getHeightAtEnd()-s)*v/t}}else{q+=(s!=null?s:this.home.getWallHeight())}}}}return q};Room3D.prototype.isLastLevel=function(b,a){return a.indexOf(b)===a.length-1};Room3D.prototype.updateRoomAppearance=function(c){var b=this.getUserData();var d=b.getLevel()==null||b.getLevel().getElevation()<=0;this.updateRoomPartAppearance(this.getChild(Room3D.FLOOR_PART).getAppearance(),b.getFloorTexture(),c,b.getFloorColor(),b.getFloorShininess(),b.isFloorVisible(),d);var a=b.getLevel()==null;this.updateRoomPartAppearance(this.getChild(Room3D.CEILING_PART).getAppearance(),b.getCeilingTexture(),c,b.getCeilingColor(),b.getCeilingShininess(),b.isCeilingVisible(),a)};Room3D.prototype.updateRoomPartAppearance=function(e,b,f,d,c,h,g){if(b==null){this.updateAppearanceMaterial(e,d,d,c);e.setTextureImage(null)}else{this.updateAppearanceMaterial(e,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_AMBIENT_COLOR,c);this.updateTextureTransform(e,b,true);TextureManager.getInstance().loadTexture(b.getImage(),f,{textureUpdated:function(i){e.setTextureImage(i)},textureError:function(i){return this.textureUpdated(TextureManager.getInstance().getErrorImage())}})}if(!g){var a=this.home.getEnvironment().getWallsAlpha();e.setTransparency(a)}e.setVisible(h)};function Ground3D(h,k,j,a,e,b){Object3DBranch.call(this);this.setUserData(h);this.originX=k;this.originY=j;this.width=a;this.depth=e;var c=new Appearance3D();var f=new Shape3D();f.setCapability(Shape3D.ALLOW_GEOMETRY_WRITE);f.setAppearance(c);this.addChild(f);var i=new Appearance3D();this.updateAppearanceMaterial(i,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_COLOR,0);i.setCullFace(Appearance3D.CULL_NONE);var g=new TransformGroup3D();g.setCapability(TransformGroup3D.ALLOW_TRANSFORM_WRITE);var d=new Shape3D(new IndexedTriangleArray3D([vec3.fromValues(-0.5,0,-0.5),vec3.fromValues(-0.5,0,0.5),vec3.fromValues(0.5,0,0.5),vec3.fromValues(0.5,0,-0.5)],[0,1,2,0,2,3],[vec2.fromValues(0,0),vec2.fromValues(1,0),vec2.fromValues(1,1),vec2.fromValues(0,1)],[3,0,1,3,1,2],[vec3.fromValues(0,1,0)],[0,0,0,0,0,0]),i);g.addChild(d);this.addChild(g);this.update(b)}Ground3D.prototype=Object.create(Object3DBranch.prototype);Ground3D.prototype.constructor=Ground3D;Ground3D.prototype.update=function(c){if(c===undefined){c=false}var g=this.getUserData();var f=this.getChild(1);var d=f.getChild(0);var j=d.getAppearance();var h=null;if(g.getEnvironment().isBackgroundImageVisibleOnGround3D()){var k=g.getLevels();if(k.length>0){for(var e=k.length-1;e>=0;e--){var a=k[e];if(a.getElevation()==0&&a.isViewableAndVisible()&&a.getBackgroundImage()!==null&&a.getBackgroundImage().isVisible()){h=a.getBackgroundImage();break}}}else{if(g.getBackgroundImage()!==null&&g.getBackgroundImage().isVisible()){h=g.getBackgroundImage()}}}if(h!==null){var b=this;TextureManager.getInstance().loadTexture(h.getImage(),c,{textureUpdated:function(o){var p=h.getScale();var m=p*o.width;var i=p*o.height;var l=mat4.create();mat4.scale(l,l,vec3.fromValues(m,1,i));var n=mat4.create();mat4.fromTranslation(n,vec3.fromValues(m/2-h.getXOrigin(),0,i/2-h.getYOrigin()));mat4.mul(l,n,l);j.setTextureImage(o);f.setTransform(l);b.updateGround(c,new java.awt.geom.Rectangle2D.Float(-h.getXOrigin(),-h.getYOrigin(),m,i))},textureError:function(i){return this.textureUpdated(TextureManager.getInstance().getErrorImage())},progression:function(l,m,i){}});j.setVisible(true)}else{j.setVisible(false);this.updateGround(c,null)}};Ground3D.prototype.updateGround=function(r,K){var p=this.getUserData();var e=this.getChild(0);var d=e.getGeometries().length;var w=e.getAppearance();var v=p.getEnvironment().getGroundTexture();if(v===null){var s=p.getEnvironment().getGroundColor();this.updateAppearanceMaterial(w,s,s,0);w.setTextureImage(null)}else{this.updateAppearanceMaterial(w,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_COLOR,0);this.updateTextureTransform(w,v,true);TextureManager.getInstance().loadTexture(v.getImage(),r,{textureUpdated:function(i){w.setTextureImage(i)},textureError:function(i){return this.textureUpdated(TextureManager.getInstance().getErrorImage())}})}var n=new java.awt.geom.Area();if(K!==null){n.add(new java.awt.geom.Area(K))}var a=[];var D=p.getRooms();for(var H=0;H<D.length;H++){var y=D[H];var B=y.getLevel();if((B===null||B.isViewable())&&y.isFloorVisible()){var f=y.getPoints();if(f.length>2){var h=new java.awt.geom.Area(this.getShape(f));var g=B!==null&&B.getElevation()<0?this.getUndergroundAreas(a,B):null;if(B===null||(B.getElevation()<=0&&B.isViewableAndVisible())){n.add(h);if(g!==null){g.roomArea.add(h)}}if(g!==null){g.undergroundArea.add(h)}}}}this.updateUndergroundAreasDugByFurniture(a,p.getFurniture());var t=p.getWalls();for(var H=0;H<t.length;H++){var q=t[H];var o=q.getLevel();if(o!==null&&o.isViewable()&&o.getElevation()<0){var g=this.getUndergroundAreas(a,o);g.wallArea.add(new java.awt.geom.Area(this.getShape(q.getPoints())))}}var u=a;for(var H=0;H<u.length;H++){var g=u[H];var b=this.getPoints(g.wallArea);for(var G=0;G<b.length;G++){var C=b[G];if(!new Room(C).isClockwise()){g.undergroundArea.add(new java.awt.geom.Area(this.getShape(C)))}}}u.sort(function(i,j){return -(i.level.getElevation()-j.level.getElevation())});for(var H=0;H<u.length;H++){var g=u[H];var l=g.level;var z=g.undergroundArea;var J=z.clone();g.undergroundSideArea.add(z.clone());for(var G=0;G<u.length;G++){var c=u[G];if(c.level.getElevation()<l.getElevation()){var b=this.getPoints(c.undergroundArea);for(var F=0;F<b.length;F++){var C=b[F];if(!new Room(C).isClockwise()){var L=new java.awt.geom.Area(this.getShape(C));z.subtract(L);g.undergroundSideArea.add(L)}}}}var b=this.getPoints(z);for(var G=0;G<b.length;G++){var C=b[G];if(new Room(C).isClockwise()){var I=new java.awt.geom.Area(this.getShape(C));I.exclusiveOr(J);I.subtract(J);g.upperLevelArea.add(I)}else{n.add(new java.awt.geom.Area(this.getShape(C)))}}}for(var H=0;H<u.length;H++){var g=u[H];var h=g.roomArea;if(h!==null){g.undergroundArea.subtract(h)}}var E=new java.awt.geom.Area(this.getShape([[this.originX,this.originY],[this.originX,this.originY+this.depth],[this.originX+this.width,this.originY+this.depth],[this.originX+this.width,this.originY]]));var A=n.getBounds2D();if(!E.getBounds2D().equals(A)){var x=E;if(n.isEmpty()){A=new java.awt.geom.Rectangle2D.Float(Math.max(-5000,this.originX),Math.max(-5000,this.originY),0,0);A.add(Math.min(5000,this.originX+this.width),Math.min(5000,this.originY+this.depth))}else{A.add(Math.max(A.getMinX()-5000,this.originX),Math.max(A.getMinY()-5000,this.originY));A.add(Math.min(A.getMaxX()+5000,this.originX+this.width),Math.min(A.getMaxY()+5000,this.originY+this.depth))}E=new java.awt.geom.Area(A);x.subtract(E);this.addAreaGeometry(e,v,x,0)}E.subtract(n);u.splice(0,0,new Ground3D.LevelAreas(new Level("Ground",0,0,0),E));var M=0;for(var H=0;H<u.length;H++){var g=u[H];var m=g.level.getElevation();this.addAreaGeometry(e,v,g.undergroundArea,m);if(M-m>0){var b=this.getPoints(g.undergroundSideArea);for(var G=0;G<b.length;G++){var C=b[G];this.addAreaSidesGeometry(e,v,C,m,M-m)}this.addAreaGeometry(e,v,g.upperLevelArea,M)}M=m}for(var H=d-1;H>=0;H--){e.removeGeometry(H)}};Ground3D.prototype.getPoints=function(d){var f=[];var e=[];var a=null;for(var c=d.getPathIterator(null,1);!c.isDone();c.next()){var b=[0,0];if(c.currentSegment(b)===java.awt.geom.PathIterator.SEG_CLOSE){if(e[0][0]===a[0]&&e[0][1]===a[1]){e.splice(e.length-1,1)}if(e.length>2){f.push(e.slice(0))}e.length=0;a=null}else{if(a===null||b[0]!==a[0]||b[1]!==a[1]){e.push(b)}a=b}}return f};Ground3D.prototype.getUndergroundAreas=function(a,d){var c=null;for(var b=0;b<a.length;b++){if(a[b].level===d){c=a[b];break}}if(c===null){a.push(c=new Ground3D.LevelAreas(d))}return c};Ground3D.prototype.updateUndergroundAreasDugByFurniture=function(a,e){for(var c=0;c<e.length;c++){var d=e[c];var b=d.getLevel();if(d.getGroundElevation()<0&&d.isVisible()&&b!==null&&b.isViewable()&&b.getElevation()<0){if(d instanceof HomeFurnitureGroup){this.updateUndergroundAreasDugByFurniture(a,d.getFurniture())}else{var f=this.getUndergroundAreas(a,b);if(d.getStaircaseCutOutShape()===null){f.undergroundArea.add(new java.awt.geom.Area(this.getShape(d.getPoints())))}else{f.undergroundArea.add(ModelManager.getInstance().getAreaOnFloor(d))}}}}};Ground3D.prototype.addAreaGeometry=function(h,c,b,q){var n=this.getAreaPoints(b,1,false);if(n.length!==0){var a=0;var l=new Array(n.length);for(var f=0;f<l.length;f++){l[f]=n[f].length;a+=l[f]}var k=new Array(a);var m=c!==null?new Array(a):null;var e=0;for(var g=0;g<n.length;g++){var p=n[g];for(var f=0;f<p.length;f++,e++){var o=p[f];k[e]=vec3.fromValues(o[0],q,o[1]);if(c!==null){m[e]=vec2.fromValues(o[0]-this.originX,this.originY-o[1])}}}var d=new GeometryInfo3D(GeometryInfo3D.POLYGON_ARRAY);d.setCoordinates(k);if(c!==null){d.setTextureCoordinates(m)}d.setStripCounts(l);d.setCreaseAngle(0);d.setGeneratedNormals(true);h.addGeometry(d.getIndexedGeometryArray())}};Ground3D.prototype.addAreaSidesGeometry=function(f,b,m,o,h){var g=new Array(m.length*4);var k=b!==null?new Array(g.length):null;for(var e=0,d=0;e<m.length;e++){var n=m[e];var l=m[e<m.length-1?e+1:0];g[d++]=vec3.fromValues(n[0],o,n[1]);g[d++]=vec3.fromValues(n[0],o+h,n[1]);g[d++]=vec3.fromValues(l[0],o+h,l[1]);g[d++]=vec3.fromValues(l[0],o,l[1]);if(b!==null){var a=java.awt.geom.Point2D.distance(n[0],n[1],l[0],l[1]);k[d-4]=vec2.fromValues(n[0],o);k[d-3]=vec2.fromValues(n[0],o+h);k[d-2]=vec2.fromValues(n[0]-a,o+h);k[d-1]=vec2.fromValues(n[0]-a,o)}}var c=new GeometryInfo3D(GeometryInfo3D.QUAD_ARRAY);c.setCoordinates(g);if(b!==null){c.setTextureCoordinates(k)}c.setCreaseAngle(0);c.setGeneratedNormals(true);f.addGeometry(c.getIndexedGeometryArray())};Ground3D.LevelAreas=function(b,a){if(a===undefined){a=new java.awt.geom.Area()}this.level=b;this.undergroundArea=a;this.roomArea=new java.awt.geom.Area();this.wallArea=new java.awt.geom.Area();this.undergroundSideArea=new java.awt.geom.Area();this.upperLevelArea=new java.awt.geom.Area()};function Polyline3D(a,c,b){Object3DBranch.call(this);this.setUserData(a);if(Polyline3D.ARROW===null){Polyline3D.ARROW=new java.awt.geom.GeneralPath();Polyline3D.ARROW.moveTo(-5,-2);Polyline3D.ARROW.lineTo(0,0);Polyline3D.ARROW.lineTo(-5,2)}this.setCapability(Group3D.ALLOW_CHILDREN_EXTEND);this.update()}Polyline3D.prototype=Object.create(Object3DBranch.prototype);Polyline3D.prototype.constructor=Polyline3D;Polyline3D.ARROW=null;Polyline3D.prototype.update=function(){var v=this.getUserData();if(v.isVisibleIn3D()&&(v.getLevel()==null||v.getLevel().isViewableAndVisible())){var n=ShapeTools.getStroke(v.getThickness(),v.getCapStyle(),v.getJoinStyle(),v.getDashPattern(),v.getDashOffset());var f=ShapeTools.getPolylineShape(v.getPoints(),v.getJoinStyle()===Polyline.JoinStyle.CURVED,v.isClosedPath());var r=null;var q=null;var a=null;var g=null;for(var k=f.getPathIterator(null,0.5);!k.isDone();k.next()){var b=[0,0];if(k.currentSegment(b)!==java.awt.geom.PathIterator.SEG_CLOSE){if(r===null){r=b}else{if(q===null){q=b}}a=g;g=b}}var E=Math.atan2(r[1]-q[1],r[0]-q[0]);var h=Math.atan2(g[1]-a[1],g[0]-a[0]);var d=v.getCapStyle()!==Polyline.CapStyle.BUTT?v.getThickness()/2:0;var A=[this.getArrowShape(r,E,v.getStartArrowStyle(),v.getThickness(),d),this.getArrowShape(g,h,v.getEndArrowStyle(),v.getThickness(),d),n.createStrokedShape(f)];var F=new java.awt.geom.Area();for(var C=0;C<A.length;C++){var e=A[C];if(e!=null){F.add(new java.awt.geom.Area(e))}}var l=[];var D=this.getAreaPoints(F,0.5,false);var m=new Array(D.length);var c=0;for(var C=0;C<D.length;C++){var B=D[C];for(var z=0;z<B.length;z++){var y=B[z];l.push(vec3.fromValues(y[0],0,y[1]))}m[C]=l.length-c;c=l.length}var x=new GeometryInfo3D(GeometryInfo3D.POLYGON_ARRAY);x.setCoordinates(l.slice(0));var u=new Array(l.length);var G=vec3.fromValues(0,1,0);for(var C=0;C<l.length;C++){u[C]=G}x.setNormals(u);x.setStripCounts(m);var w=x.getIndexedGeometryArray();if(this.getChildren().length===0){var o=new BranchGroup3D();var p=new TransformGroup3D();p.setCapability(TransformGroup3D.ALLOW_TRANSFORM_WRITE);o.addChild(p);var t=new Appearance3D();this.updateAppearanceMaterial(t,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_AMBIENT_COLOR,0);t.setCullFace(Appearance3D.CULL_NONE);var e=new Shape3D(w,t);e.setCapability(Shape3D.ALLOW_GEOMETRY_WRITE);p.addChild(e);this.addChild(o)}else{var e=this.getChild(0).getChild(0).getChild(0);e.removeGeometry(0);e.addGeometry(w)}var p=this.getChild(0).getChild(0);var s=mat4.create();mat4.fromTranslation(s,vec3.fromValues(0,v.getGroundElevation()+(v.getElevation()<0.05?0.05:0),0));p.setTransform(s);this.updateAppearanceMaterial(p.getChild(0).getAppearance(),v.getColor(),v.getColor(),0)}else{this.removeAllChildren()}};Polyline3D.prototype.getArrowShape=function(j,c,g,i,a){if(g!=null&&g!==Polyline.ArrowStyle.NONE){var b=java.awt.geom.AffineTransform.getTranslateInstance(j[0],j[1]);b.rotate(c);b.translate(a,0);var d=Math.pow(i,0.66)*2;b.scale(d,d);var f=new java.awt.geom.GeneralPath();switch(g){case Polyline.ArrowStyle.DISC:f.append(new java.awt.geom.Ellipse2D.Float(-3.5,-2,4,4),false);break;case Polyline.ArrowStyle.OPEN:var h=new java.awt.BasicStroke((i/d/0.9),java.awt.BasicStroke.CAP_BUTT,java.awt.BasicStroke.JOIN_MITER);f.append(h.createStrokedShape(Polyline3D.ARROW).getPathIterator(java.awt.geom.AffineTransform.getScaleInstance(0.9,0.9),0),false);break;case Polyline.ArrowStyle.DELTA:var e=new java.awt.geom.GeneralPath(Polyline3D.ARROW);e.closePath();f.append(e.getPathIterator(java.awt.geom.AffineTransform.getTranslateInstance(1.65,0),0),false);break;default:return null}return f.createTransformedShape(b)}return null};function Label3D(a,c,b){Object3DBranch.call(this);this.setUserData(a);this.setCapability(Group3D.ALLOW_CHILDREN_EXTEND);this.update()}Label3D.prototype=Object.create(Object3DBranch.prototype);Label3D.prototype.constructor=Label3D;Label3D.dummyContext=document.createElement("canvas").getContext("2d");Label3D.prototype.update=function(){var n=this.getUserData();var o=n.getPitch();var C=n.getStyle();if(o!=null&&C!=null&&(n.getLevel()==null||n.getLevel().isViewableAndVisible())){var t=n.getText();var z=n.getColor();var I=n.getOutlineColor();if(t!=this.text||(C==null&&this.style!=null)||(C!=null&&!C.equals(this.style))||(z==null&&this.color!=null)||(z!=null&&z!==this.color)){var h="";if(C.isBold()){h="bold "}if(C.isItalic()){h+="italic "}var u=C.getFontName();if(u===null){u="sans-serif"}var f=50;var x=f;if(["Times","Serif","Helvetica"].indexOf(u)===-1){x*=1.18}var l=f/C.getFontSize();var F=0.23*x;var v=h+" "+f+"px "+u;Label3D.dummyContext.font=v;var b=t.split("\n");var J=new Array(b.length);var g=-Infinity;var j=-F+x*b.length;for(var A=0;A<b.length;A++){J[A]=Label3D.dummyContext.measureText(b[A]).width;if(C.isItalic()){J[A]+=x*0.154}g=Math.max(J[A],g)}var a=x*b.length;var E=Math.sqrt(g/a);var E=Math.sqrt(g/a);var y;var w;var H;if(E>1){y=Math.ceil(Math.max(255*E,Math.min(g,511*E)));H=y/g;w=Math.ceil(H*a)}else{w=Math.ceil(Math.max(255*E,Math.min(a,511/E)));H=w/a;y=Math.ceil(H*g)}if(y>0&&w>0){var G=document.createElement("canvas");G.width=Appearance3D.getNextHighestPowerOfTwo(y)/2;G.height=Appearance3D.getNextHighestPowerOfTwo(w)/2;G.transparent=true;var e=G.getContext("2d");e.scale(H/y*G.width,H/w*G.height);e.translate(0,j);e.font=v;if(z!==null){e.fillStyle="rgb("+((z>>>16)&255)+","+((z>>>8)&255)+","+(z&255)+")"}if(I!==null){e.strokeStyle="rgb("+((I>>>16)&255)+","+((I>>>8)&255)+","+(I&255)+")"}for(var A=b.length-1;A>=0;A--){var q=b[A];var B;if(C.getAlignment()===TextStyle.Alignment.LEFT){B=0}else{if(C.getAlignment()===TextStyle.Alignment.RIGHT){B=g-J[A]}else{B=(g-J[A])/2}}e.translate(B,0);e.fillText(q,0,0);if(I!==null){e.strokeText(q,0,0)}e.translate(-B,-x)}var d=mat4.create();mat4.scale(d,d,vec3.fromValues(g/l,1,a/l));this.baseLineTransform=mat4.create();var B;if(C.getAlignment()==TextStyle.Alignment.LEFT){B=g/2}else{if(C.getAlignment()==TextStyle.Alignment.RIGHT){B=-g/2}else{B=0}}mat4.fromTranslation(this.baseLineTransform,vec3.fromValues(B/l,0,(a/2-j)/l));mat4.mul(this.baseLineTransform,this.baseLineTransform,d);this.texture=G;this.text=t;this.style=C;this.color=z}else{this.clear()}}if(this.texture!==null){if(this.getChildren().length===0){var m=new BranchGroup3D();var p=new TransformGroup3D();p.setCapability(TransformGroup3D.ALLOW_TRANSFORM_WRITE);m.addChild(p);var s=new Appearance3D();this.updateAppearanceMaterial(s,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_AMBIENT_COLOR,0);s.setCullFace(Appearance3D.CULL_NONE);var c=new Shape3D(new IndexedTriangleArray3D([vec3.fromValues(-0.5,0,-0.5),vec3.fromValues(-0.5,0,0.5),vec3.fromValues(0.5,0,0.5),vec3.fromValues(0.5,0,-0.5)],[0,1,2,0,2,3],[vec2.fromValues(0,0),vec2.fromValues(1,0),vec2.fromValues(1,1),vec2.fromValues(0,1)],[3,0,1,3,1,2],[vec3.fromValues(0,1,0)],[0,0,0,0,0,0]),s);p.addChild(c);this.addChild(m)}var p=this.getChild(0).getChild(0);var D=mat4.create();mat4.fromXRotation(D,o);mat4.mul(D,D,this.baseLineTransform);var k=mat4.create();mat4.fromYRotation(k,-n.getAngle());mat4.mul(k,k,D);var r=mat4.create();mat4.fromTranslation(r,vec3.fromValues(n.getX(),n.getGroundElevation()+(o==0&&n.getElevation()<0.1?0.1:0),n.getY()));mat4.mul(r,r,k);p.setTransform(r);p.getChild(0).getAppearance().setTextureImage(this.texture)}}else{this.clear()}};Label3D.prototype.clear=function(){this.removeAllChildren();this.text=null;this.style=null;this.color=null;this.texture=null;this.baseLineTransform=null};function TextureManager(){this.loadedTextureImages={};this.loadingTextureObservers={}}TextureManager.READING_TEXTURE="Reading texture";TextureManager.instance=null;TextureManager.getInstance=function(){if(TextureManager.instance==null){TextureManager.instance=new TextureManager()}return TextureManager.instance};TextureManager.prototype.clear=function(){this.loadedTextureImages={};this.loadingTextureObservers={}};TextureManager.prototype.loadTexture=function(d,g,b,c){if(b===undefined){c=g;g=0;b=false}else{if(c===undefined){c=b;b=false}}var f=d.getURL();if(f in this.loadedTextureImages){if(c.textureUpdated!==undefined){c.textureUpdated(this.loadedTextureImages[f])}}else{if(b){var a=this;this.load(f,b,{textureLoaded:function(h){a.loadedTextureImages[f]=h;if(c.textureUpdated!==undefined){c.textureUpdated(h)}},textureError:function(h){if(c.textureError!==undefined){c.textureError(h)}},progression:function(i,j,h){if(c.progression!==undefined){c.progression(i,j,h)}}})}else{if(f in this.loadingTextureObservers){this.loadingTextureObservers[f].push(c)}else{var e=[];e.push(c);this.loadingTextureObservers[f]=e;var a=this;this.load(f,b,{textureLoaded:function(h){var k=a.loadingTextureObservers[f];if(k){delete a.loadingTextureObservers[f];a.loadedTextureImages[f]=h;for(var j=0;j<k.length;j++){if(k[j].textureUpdated!==undefined){k[j].textureUpdated(h)}}}},textureError:function(h){var k=a.loadingTextureObservers[f];if(k){delete a.loadingTextureObservers[f];for(var j=0;j<k.length;j++){if(k[j].textureError!==undefined){k[j].textureError(h)}}}},progression:function(j,l,h){var m=a.loadingTextureObservers[f];if(m){for(var k=0;k<m.length;k++){if(m[k].progression!==undefined){m[k].progression(j,l,h)}}}}})}}}};TextureManager.prototype.load=function(b,a,d){d.progression(TextureManager.READING_TEXTURE,b,0);var h=new Image();h.url=b;var e=function(j){h.removeEventListener("load",i);h.removeEventListener("error",e);d.textureError("Can't load "+b)};var i=function(){h.removeEventListener("load",i);h.removeEventListener("error",e);d.progression(TextureManager.READING_TEXTURE,b,1);d.textureLoaded(h)};if(b.indexOf("jar:")===0){var g=b.indexOf("!/");var c=decodeURIComponent(b.substring(g+2));var f=b.substring(4,g);ZIPTools.getZIP(f,a,{zipReady:function(l){try{h.addEventListener("load",i);h.addEventListener("error",e);var j=l.file(c);var n=j.asBinary();var m=btoa(n);h.transparent=ZIPTools.isTransparentImage(n);h.src="data:image;base64,"+m;if(h.width!==0||a){i()}}catch(k){this.zipError(k)}},zipError:function(j){d.textureError("Can't load "+f)},progression:function(k,l,j){d.progression(k,l,j)}})}else{h.addEventListener("load",i);h.addEventListener("error",e);h.src=b;if(h.width!==0){h.removeEventListener("load",i);h.removeEventListener("error",e);d.progression(TextureManager.READING_TEXTURE,b,1);d.textureLoaded(h)}}};TextureManager.prototype.isTextureTransparent=function(a){return a.transparent===true};TextureManager.prototype.getRotatedTextureWidth=function(a){var b=a.getAngle();if(b!==0){return Math.round(Math.abs(a.getWidth()*Math.cos(b))+Math.abs(a.getHeight()*Math.sin(b)))}else{return a.getWidth()}};TextureManager.prototype.getRotatedTextureHeight=function(a){var b=a.getAngle();if(b!==0){return Math.round(Math.abs(a.getWidth()*Math.sin(b))+Math.abs(a.getHeight()*Math.cos(b)))}else{return a.getHeight()}};TextureManager.prototype.getErrorImage=function(){if(TextureManager.errorImage===undefined){TextureManager.errorImage=this.getColoredImage("#FF0000")}return TextureManager.errorImage};TextureManager.prototype.getWaitImage=function(){if(TextureManager.waitImage===undefined){TextureManager.waitImage=this.getColoredImage("#FFFFFF")}return TextureManager.waitImage};TextureManager.prototype.getColoredImage=function(b){var c=document.createElement("canvas");c.width=2;c.height=2;var d=c.getContext("2d");d.fillStyle=b;d.fillRect(0,0,2,2);var e=c.toDataURL();var a=new Image();a.url=e;a.src=e;return a};var LengthUnit={};LengthUnit.getMagnetizedMeterLength=function(d,a){a*=2;var b=1/10;if(a>100){b=100}else{if(a>10){b=10}else{if(a>5){b=5}else{if(a>1){b=1}else{if(a>0.5){b=0.5}}}}}var c=Math.round(d/b)*b;if(c===0&&d>0){return d}else{return c}};LengthUnit.getMagnetizedInchLength=function(d,a){a=LengthUnit.centimeterToInch(a)*2;var b=1/8;if(a>6){b=6}else{if(a>3){b=3}else{if(a>1){b=1}else{if(a>0.5){b=0.5}else{if(a>0.25){b=0.25}}}}}var c=LengthUnit.inchToCentimeter(Math.round(LengthUnit.centimeterToInch(d)/b)*b);if(c===0&&d>0){return d}else{return c}};LengthUnit.centimeterToInch=function(a){return a/2.54};LengthUnit.centimeterToFoot=function(a){return a/2.54/12};LengthUnit.inchToCentimeter=function(a){return a*2.54};LengthUnit.footToCentimeter=function(a){return a*2.54*12};LengthUnit.MILLIMETER={formatLocale:null};LengthUnit.MILLIMETER.getFormatWithUnit=function(){this.checkLocaleChange();return this.lengthFormatWithUnit};LengthUnit.MILLIMETER.getAreaFormatWithUnit=function(){this.checkLocaleChange();return this.areaFormatWithUnit};LengthUnit.MILLIMETER.getFormat=function(){this.checkLocaleChange();return this.lengthFormat};LengthUnit.MILLIMETER.getName=function(){this.checkLocaleChange();return this.name};LengthUnit.MILLIMETER.checkLocaleChange=function(){if(Locale.getDefault()!=this.formatLocale){this.formatLocale=Locale.getDefault();var d=CoreTools.loadResourceBundles("resources/LengthUnit",this.formatLocale);this.name=CoreTools.getStringFromKey(d,"millimeterUnit");var c=CoreTools.getStringFromKey(d,"groupingSeparator");var b=CoreTools.getStringFromKey(d,"decimalSeparator");this.lengthFormatWithUnit=new MeterFamilyFormat(c,b,"",10,this.name);this.lengthFormat=new MeterFamilyFormat(c,b,"",10);var a=CoreTools.getStringFromKey(d,"squareMeterUnit");this.areaFormatWithUnit=new SquareMeterAreaFormatWithUnit(c,b,a)}};LengthUnit.MILLIMETER.getMagnetizedLength=function(b,a){return LengthUnit.getMagnetizedMeterLength(b,a)};LengthUnit.MILLIMETER.getMinimumLength=function(){return 0.1};LengthUnit.MILLIMETER.getMaximumLength=function(){return 100000};LengthUnit.MILLIMETER.getMaximumElevation=function(){return this.getMaximumLength()/10};LengthUnit.MILLIMETER.centimeterToUnit=function(a){return a*10};LengthUnit.MILLIMETER.unitToCentimeter=function(a){return a/10};LengthUnit.CENTIMETER={formatLocale:null};LengthUnit.CENTIMETER.getFormatWithUnit=function(){this.checkLocaleChange();return this.lengthFormatWithUnit};LengthUnit.CENTIMETER.getAreaFormatWithUnit=function(){this.checkLocaleChange();return this.areaFormatWithUnit};LengthUnit.CENTIMETER.getFormat=function(){this.checkLocaleChange();return this.lengthFormat};LengthUnit.CENTIMETER.getName=function(){this.checkLocaleChange();return this.name};LengthUnit.CENTIMETER.checkLocaleChange=function(){if(Locale.getDefault()!=this.formatLocale){this.formatLocale=Locale.getDefault();var d=CoreTools.loadResourceBundles("resources/LengthUnit",this.formatLocale);this.name=CoreTools.getStringFromKey(d,"centimeterUnit");var c=CoreTools.getStringFromKey(d,"groupingSeparator");var b=CoreTools.getStringFromKey(d,"decimalSeparator");this.lengthFormatWithUnit=new MeterFamilyFormat(c,b,"#",1,this.name);this.lengthFormat=new MeterFamilyFormat(c,b,"#",1);var a=CoreTools.getStringFromKey(d,"squareMeterUnit");this.areaFormatWithUnit=new SquareMeterAreaFormatWithUnit(c,b,a)}};LengthUnit.CENTIMETER.getMagnetizedLength=function(b,a){return LengthUnit.getMagnetizedMeterLength(b,a)};LengthUnit.CENTIMETER.getMinimumLength=function(){return 0.1};LengthUnit.CENTIMETER.getMaximumLength=function(){return 100000};LengthUnit.CENTIMETER.getMaximumElevation=function(){return this.getMaximumLength()/10};LengthUnit.CENTIMETER.centimeterToUnit=function(a){return a};LengthUnit.CENTIMETER.unitToCentimeter=function(a){return a};LengthUnit.METER={formatLocale:null};LengthUnit.METER.getFormatWithUnit=function(){this.checkLocaleChange();return this.lengthFormatWithUnit};LengthUnit.METER.getAreaFormatWithUnit=function(){this.checkLocaleChange();return this.areaFormatWithUnit};LengthUnit.METER.getFormat=function(){this.checkLocaleChange();return this.lengthFormat};LengthUnit.METER.getName=function(){this.checkLocaleChange();return this.name};LengthUnit.METER.checkLocaleChange=function(){if(Locale.getDefault()!=this.formatLocale){this.formatLocale=Locale.getDefault();var d=CoreTools.loadResourceBundles("resources/LengthUnit",this.formatLocale);this.name=CoreTools.getStringFromKey(d,"meterUnit");var c=CoreTools.getStringFromKey(d,"groupingSeparator");var b=CoreTools.getStringFromKey(d,"decimalSeparator");this.lengthFormatWithUnit=new MeterFamilyFormat(c,b,"00#",0.01,this.name);this.lengthFormat=new MeterFamilyFormat(c,b,"00#",0.01);var a=CoreTools.getStringFromKey(d,"squareMeterUnit");this.areaFormatWithUnit=new SquareMeterAreaFormatWithUnit(c,b,a)}};LengthUnit.METER.getMagnetizedLength=function(b,a){return LengthUnit.getMagnetizedMeterLength(b,a)};LengthUnit.METER.getMinimumLength=function(){return 0.1};LengthUnit.METER.getMaximumLength=function(){return 100000};LengthUnit.METER.getMaximumElevation=function(){return this.getMaximumLength()/10};LengthUnit.METER.centimeterToUnit=function(a){return a/100};LengthUnit.METER.unitToCentimeter=function(a){return a*100};LengthUnit.INCH={formatLocale:null};LengthUnit.INCH.getFormatWithUnit=function(){this.checkLocaleChange();return this.lengthFormat};LengthUnit.INCH.getFormat=function(){return this.getFormatWithUnit()};LengthUnit.INCH.getAreaFormatWithUnit=function(){this.checkLocaleChange();return this.areaFormatWithUnit};LengthUnit.INCH.getName=function(){this.checkLocaleChange();return this.name};LengthUnit.INCH.checkLocaleChange=function(){if(Locale.getDefault()!=this.formatLocale){this.formatLocale=Locale.getDefault();var b=CoreTools.loadResourceBundles("resources/LengthUnit",this.formatLocale);this.name=CoreTools.getStringFromKey(b,"inchUnit");this.lengthFormat=new InchFormat(this.name);this.lengthFormatWithUnit=new InchFormat(this.name);var a=CoreTools.getStringFromKey(b,"squareFootUnit");this.areaFormatWithUnit=new SquareFootAreaFormatWithUnit(this.formatLocale,a)}};LengthUnit.INCH.getMagnetizedLength=function(b,a){return LengthUnit.getMagnetizedInchLength(b,a)};LengthUnit.INCH.getMinimumLength=function(){return LengthUnit.inchToCentimeter(0.125)};LengthUnit.INCH.getMaximumLength=function(){return LengthUnit.inchToCentimeter(99974.4)};LengthUnit.INCH.getMaximumElevation=function(){return this.getMaximumLength()/10};LengthUnit.INCH.centimeterToUnit=function(a){return LengthUnit.centimeterToInch(a)};LengthUnit.INCH.unitToCentimeter=function(a){return LengthUnit.inchToCentimeter(a)};LengthUnit.INCH_DECIMALS={formatLocale:null};LengthUnit.INCH_DECIMALS.getFormatWithUnit=function(){this.checkLocaleChange();return this.lengthFormatWithUnit};LengthUnit.INCH_DECIMALS.getFormat=function(){this.checkLocaleChange();return this.lengthFormat};LengthUnit.INCH_DECIMALS.getAreaFormatWithUnit=function(){this.checkLocaleChange();return this.areaFormatWithUnit};LengthUnit.INCH_DECIMALS.getName=function(){this.checkLocaleChange();return this.name};LengthUnit.INCH_DECIMALS.checkLocaleChange=function(){if(Locale.getDefault()!=this.formatLocale){this.formatLocale=Locale.getDefault();var d=CoreTools.loadResourceBundles("resources/LengthUnit",this.formatLocale);this.name=CoreTools.getStringFromKey(d,"inchUnit");var c=CoreTools.getStringFromKey(d,"groupingSeparator");var b=CoreTools.getStringFromKey(d,"decimalSeparator");this.lengthFormatWithUnit=new InchDecimalFormat(c,b,"###",this.name);this.lengthFormat=new InchDecimalFormat(c,b,"###");var a=CoreTools.getStringFromKey(d,"squareFootUnit");this.areaFormatWithUnit=new SquareFootAreaFormatWithUnit(this.formatLocale,a)}};LengthUnit.INCH_DECIMALS.getMagnetizedLength=function(b,a){return LengthUnit.getMagnetizedInchLength(b,a)};LengthUnit.INCH_DECIMALS.getMinimumLength=function(){return LengthUnit.inchToCentimeter(0.125)};LengthUnit.INCH_DECIMALS.getMaximumLength=function(){return LengthUnit.inchToCentimeter(99974.4)};LengthUnit.INCH_DECIMALS.getMaximumElevation=function(){return this.getMaximumLength()/10};LengthUnit.INCH_DECIMALS.centimeterToUnit=function(a){return centimeterToInch(a)};LengthUnit.INCH_DECIMALS.unitToCentimeter=function(a){return LengthUnit.inchToCentimeter(a)};function MeterFamilyFormat(d,b,e,a,c){Format.call(this);this.groupingSeparator=d;this.decimalSeparator=b;this.decimalsFormat=e;this.unitMultiplier=a;this.unit=c}MeterFamilyFormat.prototype=Object.create(Format.prototype);MeterFamilyFormat.prototype.constructor=MeterFamilyFormat;MeterFamilyFormat.prototype.format=function(a){var b=toLocaleStringUniversal(a*this.unitMultiplier,this.groupingSeparator,this.decimalSeparator,{maximumFractionDigits:this.decimalsFormat.length,minimumFractionDigits:this.decimalsFormat.split("0").length-1});return b+(this.unit?" "+this.unit:"")};function SquareMeterAreaFormatWithUnit(c,a,b){Format.call(this);this.groupingSeparator=c;this.decimalSeparator=a;this.unit=b}SquareMeterAreaFormatWithUnit.prototype=Object.create(Format.prototype);SquareMeterAreaFormatWithUnit.prototype.constructor=SquareMeterAreaFormatWithUnit;SquareMeterAreaFormatWithUnit.prototype.format=function(a){var b=toLocaleStringUniversal(a/10000,this.groupingSeparator,this.decimalSeparator,{maximumFractionDigits:2,minimumFractionDigits:0});return b+(this.unit?" "+this.unit:"")};var inchFractionCharacters=["\u215b","\u00bc","\u215c","\u00bd","\u215d","\u00be","\u215e"];function InchFormat(a){Format.call(this);this.unit=a}InchFormat.prototype=Object.create(Format.prototype);InchFormat.prototype.constructor=InchFormat;InchFormat.prototype.format=function(d){var c=Math.abs(d);var b=Math.floor(LengthUnit.centimeterToFoot(c));var h=LengthUnit.centimeterToInch(c-LengthUnit.footToCentimeter(b));if(h>=11.9375){b++;h-=12}var a=d>=0?"":"-";if(h>=0.0005){var g=Math.floor(h);var e=h-g;var f=Math.round(e*8);a+=b;if(f===0||f===8){a+="'";a+=Math.round(h*8)/8;a+='"'}else{a+="'";a+=g;a+=inchFractionCharacters[f-1];a+='"'}}else{a+=b;a+="'"}return a};function SquareFootAreaFormatWithUnit(b,a){Format.call(this);this.formatLocale=b;this.unit=a}SquareFootAreaFormatWithUnit.prototype=Object.create(Format.prototype);SquareFootAreaFormatWithUnit.prototype.constructor=SquareFootAreaFormatWithUnit;SquareFootAreaFormatWithUnit.prototype.format=function(a){var b=toLocaleStringUniversal(a/929.0304,this.groupingSeparator,this.decimalSeparator,{maximumFractionDigits:0,minimumFractionDigits:0});return b+(this.unit?" "+this.unit:"")};function InchDecimalFormat(b,a,c){Format.call(this);this.groupingSeparator=b;this.decimalSeparator=a;this.decimalsFormat=c}InchDecimalFormat.prototype=Object.create(Format.prototype);InchDecimalFormat.prototype.constructor=InchDecimalFormat;InchDecimalFormat.prototype.format=function(a){var b=toLocaleStringUniversal(LengthUnit.centimeterToInch(a),this.groupingSeparator,this.decimalSeparator,{maximumFractionDigits:this.decimalsFormat.length,minimumFractionDigits:this.decimalsFormat.split("0").length-1});return b+'"'};function toLocaleStringUniversal(d,e,c,b){var g=d.toLocaleString("en",b);var a=g.indexOf(".");if(a===-1){a=g.length}if(b.maximumFractionDigits===0){if(a<g.length){g=Math.round(d).toString();a=g.length}}else{if(b.maximumFractionDigits<g.length-a-1){g=Math.round(d*Math.pow(10,b.maximumFractionDigits)).toString();if(Math.abs(d)<1){g=d>0?"0."+g:"-0."+g.substring(1)}else{g=g.substring(0,a)+"."+g.substring(a)}}}if(b.minimumFractionDigits>0){if(a===g.length){g+="."}while(b.minimumFractionDigits>g.length-a-1){g+="0"}}if(a>3&&g.indexOf(",")===-1){for(var f=a-3;f>(d>0?0:1);f-=3){g=g.substring(0,f)+","+g.substring(f);a++}}return g.replace(".","#").replace(",",e).replace("#",c).replace(" ","\u00a0")}function UserPreferences(){this.propertyChangeSupport=new PropertyChangeSupport(this);this.initSupportedLanguages(UserPreferences.DEFAULT_SUPPORTED_LANGUAGES);this.resourceBundles=[];this.furnitureCatalogResourceBundles=[];this.furnitureCatalog=null;this.texturesCatalog=null;this.patternsCatalog=null;this.currency=null;this.valueAddedTaxEnabled=false;this.defaultValueAddedTaxPercentage=null;this.unit=null;this.furnitureCatalogViewedInTree=true;this.aerialViewCenteredOnSelectionEnabled=false;this.observerCameraSelectedAtChange=true;this.navigationPanelVisible=true;this.magnetismEnabled=true;this.rulersVisible=true;this.gridVisible=true;this.defaultFontName=null;this.furnitureViewedFromTop=true;this.furnitureModelIconSize=128;this.roomFloorColoredOrTextured=true;this.wallPattern=null;this.newWallPattern=null;this.newWallThickness=7.5;this.newWallHeight=250;this.newWallBaseboardThickness=1;this.newWallBaseboardHeight=7;this.newRoomFloorColor=null;this.newFloorThickness=12;this.recentHomes=[];this.autoSaveDelayForRecovery;this.autoCompletionStrings={};this.recentColors=[];this.recentTextures=[];this.homeExamples=[]}UserPreferences.DEFAULT_SUPPORTED_LANGUAGES=["bg","cs","de","el","en","es","fr","it","ja","hu","nl","pl","pt","ru","sv","vi","zh_CN","zh_TW"];UserPreferences.DEFAULT_TEXT_STYLE=new TextStyle(18);UserPreferences.DEFAULT_ROOM_TEXT_STYLE=new TextStyle(24);UserPreferences.prototype.initSupportedLanguages=function(a){this.supportedLanguages=a;if(!this.language||this.supportedLanguages.indexOf(this.language)===-1){var d=Locale.getDefault();if(d===null){d="en"}this.defaultCountry="";var e=d;if(d.indexOf("_")>0){this.defaultCountry=d.substring(d.indexOf("_")+1,d.length);e=this.language?this.language.substring(0,this.language.indexOf("_")):d.substring(0,d.indexOf("_"))}for(var b=0;b<this.supportedLanguages.length;b++){var c=this.supportedLanguages[b];if(this.defaultCountry!=""&&c==e+"_"+this.defaultCountry||this.defaultCountry==""&&c==e){this.language=c;break}else{if(this.language===undefined&&c.indexOf(e)===0){this.language=c}}}if(this.language===undefined){this.language="en"}this.updateDefaultLocale()}};UserPreferences.prototype.updateDefaultLocale=function(){if(this.language.indexOf("_")!==-1){Locale.setDefault(this.language)}else{Locale.setDefault(this.language+"_"+this.defaultCountry)}};UserPreferences.prototype.write=function(){};UserPreferences.prototype.addPropertyChangeListener=function(a){this.propertyChangeSupport.addPropertyChangeListener(a)};UserPreferences.prototype.removePropertyChangeListener=function(a){this.propertyChangeSupport.removePropertyChangeListener(a)};UserPreferences.prototype.addPropertyChangeListener=function(b,a){this.propertyChangeSupport.addPropertyChangeListener(b,a)};UserPreferences.prototype.removePropertyChangeListener=function(b,a){this.propertyChangeSupport.removePropertyChangeListener(b,a)};UserPreferences.prototype.getFurnitureCatalog=function(){return this.furnitureCatalog};UserPreferences.prototype.setFurnitureCatalog=function(a){this.furnitureCatalog=a};UserPreferences.prototype.getTexturesCatalog=function(){return this.texturesCatalog};UserPreferences.prototype.setTexturesCatalog=function(a){this.texturesCatalog=a};UserPreferences.prototype.getPatternsCatalog=function(){return this.patternsCatalog};UserPreferences.prototype.setPatternsCatalog=function(a){this.patternsCatalog=a};UserPreferences.prototype.getLengthUnit=function(){return this.unit};UserPreferences.prototype.setUnit=function(a){if(this.unit!==a){var b=this.unit;this.unit=a;this.propertyChangeSupport.firePropertyChange("UNIT",b,a)}};UserPreferences.prototype.getLanguage=function(){return this.language};UserPreferences.prototype.setLanguage=function(b){if(b!=this.language&&this.isLanguageEditable()){var a=this.language;this.language=b;this.updateDefaultLocale();this.resourceBundles=[];this.furnitureCatalogResourceBundles=[];this.propertyChangeSupport.firePropertyChange("LANGUAGE",a,b)}};UserPreferences.prototype.isLanguageEditable=function(){return true};UserPreferences.prototype.getDefaultSupportedLanguages=function(){return UserPreferences.DEFAULT_SUPPORTED_LANGUAGES.slice(0)};UserPreferences.prototype.getSupportedLanguages=function(){return this.supportedLanguages.slice(0)};UserPreferences.prototype.setSupportedLanguages=function(a){if(this.supportedLanguages!=a){var c=this.supportedLanguages;var b=this.language;this.initSupportedLanguages(a.slice(0));this.propertyChangeSupport.firePropertyChange("SUPPORTED_LANGUAGES",c,a);if(b!=this.language){this.propertyChangeSupport.firePropertyChange("LANGUAGE",b,language)}}};UserPreferences.prototype.getLocalizedString=function(a,c,e){this.getResourceBundles(a);if(a=="DefaultFurnitureCatalog"){return CoreTools.getStringFromKey.apply(null,[this.furnitureCatalogResourceBundles,c].concat(Array.prototype.slice.call(arguments,2)))}else{if(a.__class){var d=a.__class.split(".");a=d[d.length-1]}var b=a+"."+c;return CoreTools.getStringFromKey.apply(null,[this.resourceBundles,b].concat(Array.prototype.slice.call(arguments,2)))}};UserPreferences.prototype.getLocalizedStringKeys=function(c){if(resourceClass=="DefaultFurnitureCatalog"){var b={};for(var a=0;a<resourceBundles.length;a++){if(resourceBundles[a]!=null){CoreTools.merge(b,resourceBundles[a])}}return Object.getOwnPropertyNames(b)}else{throw new IllegalArgumentException("unsupported family")}};UserPreferences.prototype.getResourceBundles=function(a){if(a=="DefaultFurnitureCatalog"){if(this.furnitureCatalogResourceBundles.length==0){this.furnitureCatalogResourceBundles=CoreTools.loadResourceBundles("resources/DefaultFurnitureCatalog",Locale.getDefault())}return this.furnitureCatalogResourceBundles}else{if(this.resourceBundles.length==0){this.resourceBundles=CoreTools.loadResourceBundles("resources/localization",Locale.getDefault())}return this.resourceBundles}};UserPreferences.prototype.getCurrency=function(){return this.currency};UserPreferences.prototype.setCurrency=function(a){this.currency=a};UserPreferences.prototype.isValueAddedTaxEnabled=function(){return this.valueAddedTaxEnabled};UserPreferences.prototype.setValueAddedTaxEnabled=function(a){if(this.valueAddedTaxEnabled!==a){this.valueAddedTaxEnabled=a;this.propertyChangeSupport.firePropertyChange("VALUE_ADDED_TAX_ENABLED",!a,a)}};UserPreferences.prototype.getDefaultValueAddedTaxPercentage=function(){return this.defaultValueAddedTaxPercentage};UserPreferences.prototype.setDefaultValueAddedTaxPercentage=function(b){if(b!==this.defaultValueAddedTaxPercentage&&(b==null||!b.eq(this.defaultValueAddedTaxPercentage))){var a=this.defaultValueAddedTaxPercentage;this.defaultValueAddedTaxPercentage=b;this.propertyChangeSupport.firePropertyChange("DEFAULT_VALUE_ADDED_TAX_PERCENTAGE",a,b)}};UserPreferences.prototype.isFurnitureCatalogViewedInTree=function(){return this.furnitureCatalogViewedInTree};UserPreferences.prototype.setFurnitureCatalogViewedInTree=function(a){if(this.furnitureCatalogViewedInTree!==a){this.furnitureCatalogViewedInTree=a;this.propertyChangeSupport.firePropertyChange("FURNITURE_CATALOG_VIEWED_IN_TREE",!a,a)}};UserPreferences.prototype.isNavigationPanelVisible=function(){return this.navigationPanelVisible};UserPreferences.prototype.setNavigationPanelVisible=function(a){if(this.navigationPanelVisible!==a){this.navigationPanelVisible=a;this.propertyChangeSupport.firePropertyChange("NAVIGATION_PANEL_VISIBLE",!a,a)}};UserPreferences.prototype.setAerialViewCenteredOnSelectionEnabled=function(a){if(a!==this.aerialViewCenteredOnSelectionEnabled){this.aerialViewCenteredOnSelectionEnabled=a;this.propertyChangeSupport.firePropertyChange("AERIAL_VIEW_CENTERED_ON_SELECTION_ENABLED",!a,a)}};UserPreferences.prototype.isAerialViewCenteredOnSelectionEnabled=function(){return this.aerialViewCenteredOnSelectionEnabled};UserPreferences.prototype.setObserverCameraSelectedAtChange=function(a){if(a!==this.observerCameraSelectedAtChange){this.observerCameraSelectedAtChange=a;this.propertyChangeSupport.firePropertyChange("OBSERVER_CAMERA_SELECTED_AT_CHANGE",!a,a)}};UserPreferences.prototype.isObserverCameraSelectedAtChange=function(){return this.observerCameraSelectedAtChange};UserPreferences.prototype.isMagnetismEnabled=function(){return this.magnetismEnabled};UserPreferences.prototype.setMagnetismEnabled=function(a){if(this.magnetismEnabled!==a){this.magnetismEnabled=a;this.propertyChangeSupport.firePropertyChange("MAGNETISM_ENABLED",!a,a)}};UserPreferences.prototype.isRulersVisible=function(){return this.rulersVisible};UserPreferences.prototype.setRulersVisible=function(a){if(this.rulersVisible!==a){this.rulersVisible=a;this.propertyChangeSupport.firePropertyChange("RULERS_VISIBLE",!a,a)}};UserPreferences.prototype.isGridVisible=function(){return this.gridVisible};UserPreferences.prototype.setGridVisible=function(a){if(this.gridVisible!==a){this.gridVisible=a;this.propertyChangeSupport.firePropertyChange("GRID_VISIBLE",!a,a)}};UserPreferences.prototype.getDefaultFontName=function(){return this.defaultFontName};UserPreferences.prototype.setDefaultFontName=function(b){if(b!=this.defaultFontName){var a=this.defaultFontName;this.defaultFontName=b;this.propertyChangeSupport.firePropertyChange("DEFAULT_FONT_NAME",a,b)}};UserPreferences.prototype.isFurnitureViewedFromTop=function(){return this.furnitureViewedFromTop};UserPreferences.prototype.setFurnitureViewedFromTop=function(a){if(this.furnitureViewedFromTop!==a){this.furnitureViewedFromTop=a;this.propertyChangeSupport.firePropertyChange("FURNITURE_VIEWED_FROM_TOP",!a,a)}};UserPreferences.prototype.getFurnitureModelIconSize=function(){return this.furnitureModelIconSize};UserPreferences.prototype.setFurnitureModelIconSize=function(a){if(a!==this.furnitureModelIconSize){var b=this.furnitureModelIconSize;this.furnitureModelIconSize=a;this.propertyChangeSupport.firePropertyChange("FURNITURE_MODEL_ICON_SIZE",b,a)}};UserPreferences.prototype.isRoomFloorColoredOrTextured=function(){return this.roomFloorColoredOrTextured};UserPreferences.prototype.setFloorColoredOrTextured=function(a){if(this.roomFloorColoredOrTextured!==a){this.roomFloorColoredOrTextured=a;this.propertyChangeSupport.firePropertyChange("ROOM_FLOOR_COLORED_OR_TEXTURED",!a,a)}};UserPreferences.prototype.getWallPattern=function(){return this.wallPattern};UserPreferences.prototype.setWallPattern=function(a){if(this.wallPattern!==a){var b=this.wallPattern;this.wallPattern=a;this.propertyChangeSupport.firePropertyChange("WALL_PATTERN",b,a)}};UserPreferences.prototype.getNewWallPattern=function(){return this.newWallPattern};UserPreferences.prototype.setNewWallPattern=function(a){if(this.newWallPattern!==a){var b=this.newWallPattern;this.newWallPattern=a;this.propertyChangeSupport.firePropertyChange("NEW_WALL_PATTERN",b,a)}};UserPreferences.prototype.getNewWallThickness=function(){return this.newWallThickness};UserPreferences.prototype.setNewWallThickness=function(b){if(this.newWallThickness!==b){var a=this.newWallThickness;this.newWallThickness=b;this.propertyChangeSupport.firePropertyChange("NEW_WALL_THICKNESS",a,b)}};UserPreferences.prototype.getNewWallHeight=function(){return this.newWallHeight};UserPreferences.prototype.setNewWallHeight=function(a){if(this.newWallHeight!==a){var b=this.newWallHeight;this.newWallHeight=a;this.propertyChangeSupport.firePropertyChange("NEW_WALL_HEIGHT",b,a)}};UserPreferences.prototype.getNewWallBaseboardThickness=function(){return this.newWallBaseboardThickness};UserPreferences.prototype.setNewWallBaseboardThickness=function(b){if(this.newWallBaseboardThickness!==b){var a=this.newWallBaseboardThickness;this.newWallBaseboardThickness=b;this.propertyChangeSupport.firePropertyChange("NEW_WALL_SIDEBOARD_THICKNESS",a,b)}};UserPreferences.prototype.getNewWallBaseboardHeight=function(){return this.newWallBaseboardHeight};UserPreferences.prototype.setNewWallBaseboardHeight=function(a){if(this.newWallBaseboardHeight!==a){var b=this.newWallBaseboardHeight;this.newWallBaseboardHeight=a;this.propertyChangeSupport.firePropertyChange("NEW_WALL_SIDEBOARD_HEIGHT",b,a)}};UserPreferences.prototype.getNewRoomFloorColor=function(){return this.newRoomFloorColor};UserPreferences.prototype.setNewRoomFloorColor=function(b){if(this.newRoomFloorColor!==b){var a=this.newRoomFloorColor;this.newRoomFloorColor=b;this.propertyChangeSupport.firePropertyChange("NEW_ROOM_FLOOR_COLOR",a,b)}};UserPreferences.prototype.getNewFloorThickness=function(){return this.newFloorThickness};UserPreferences.prototype.setNewFloorThickness=function(a){if(this.newFloorThickness!==a){var b=this.newFloorThickness;this.newFloorThickness=a;this.propertyChangeSupport.firePropertyChange("NEW_FLOOR_THICKNESS",b,a)}};UserPreferences.prototype.getAutoSaveDelayForRecovery=function(){return this.autoSaveDelayForRecovery};UserPreferences.prototype.setAutoSaveDelayForRecovery=function(b){if(this.autoSaveDelayForRecovery!==b){var a=this.autoSaveDelayForRecovery;this.autoSaveDelayForRecovery=b;this.propertyChangeSupport.firePropertyChange("AUTO_SAVE_DELAY_FOR_RECOVERY",a,b)}};UserPreferences.prototype.getRecentHomes=function(){return this.recentHomes.slice(0)};UserPreferences.prototype.setRecentHomes=function(b){if(b!=this.recentHomes){var a=this.recentHomes;this.recentHomes=b.slice(0);this.propertyChangeSupport.firePropertyChange("RECENT_HOMES",a,this.getRecentHomes())}};UserPreferences.prototype.getRecentHomesMaxCount=function(){return 10};UserPreferences.prototype.getStoredCamerasMaxCount=function(){return 50};UserPreferences.prototype.setActionTipIgnored=function(a){this.propertyChangeSupport.firePropertyChange("IGNORED_ACTION_TIP",null,a)};UserPreferences.prototype.isActionTipIgnored=function(a){return true};UserPreferences.prototype.resetIgnoredActionTips=function(){this.propertyChangeSupport.firePropertyChange("IGNORED_ACTION_TIP",null,null)};UserPreferences.prototype.getDefaultTextStyle=function(a){if(a.name=="Room"){return UserPreferences.DEFAULT_ROOM_TEXT_STYLE}else{return UserPreferences.DEFAULT_TEXT_STYLE}};UserPreferences.prototype.getAutoCompletionStrings=function(b){var a=this.autoCompletionStrings.get(b);if(a!==undefined){return a.slice(0)}else{return[]}};UserPreferences.prototype.addAutoCompletionString=function(c,b){if(b!==null&&b.length>0){var a=this.autoCompletionStrings[c];if(a===undefined){a=[]}else{if(a.indexOf(b)<0){a=a.slice(0)}else{return}}a.splice(0,0,b);this.setAutoCompletionStrings(c,a)}};UserPreferences.prototype.setAutoCompletionStrings=function(b,c){var a=this.autoCompletionStrings[b];if(c!=a){this.autoCompletionStrings[b]=c.slice(0);this.propertyChangeSupport.firePropertyChange("AUTO_COMPLETION_STRINGS",null,b)}};UserPreferences.prototype.getAutoCompletedProperties=function(){if(this.autoCompletionStrings!==null){return Object.keys(this.autoCompletionStrings)}else{return[]}};UserPreferences.prototype.getRecentColors=function(){return this.recentColors};UserPreferences.prototype.setRecentColors=function(a){if(a!=this.recentColors){var b=this.recentColors;this.recentColors=a.slice(0);this.propertyChangeSupport.firePropertyChange("RECENT_COLORS",b,this.getRecentColors())}};UserPreferences.prototype.getRecentTextures=function(){return this.recentTextures};UserPreferences.prototype.setRecentTextures=function(b){if(b!=this.recentTextures){var a=this.recentTextures;this.recentTextures=b.slice(0);this.propertyChangeSupport.firePropertyChange("RECENT_TEXTURES",a,this.getRecentTextures())}};UserPreferences.prototype.setHomeExamples=function(a){if(a!=this.homeExamples){var b=this.homeExamples;this.homeExamples=a.slice(0);this.propertyChangeSupport.firePropertyChange("HOME_EXAMPLES",b,this.getHomeExamples())}};UserPreferences.prototype.getHomeExamples=function(){return this.homeExamples};function DefaultUserPreferences(b,a,f,d){UserPreferences.call(this);var c=[];c.push(new DefaultPatternTexture("foreground"));c.push(new DefaultPatternTexture("reversedHatchUp"));c.push(new DefaultPatternTexture("reversedHatchDown"));c.push(new DefaultPatternTexture("reversedCrossHatch"));c.push(new DefaultPatternTexture("background"));c.push(new DefaultPatternTexture("hatchUp"));c.push(new DefaultPatternTexture("hatchDown"));c.push(new DefaultPatternTexture("crossHatch"));var e=new PatternsCatalog(c);this.setPatternsCatalog(e);this.setFurnitureCatalog(typeof DefaultFurnitureCatalog==="function"?(Array.isArray(b)?new DefaultFurnitureCatalog(b,a):new DefaultFurnitureCatalog(this)):new FurnitureCatalog());this.setTexturesCatalog(typeof DefaultTextureCatalog==="function"?(Array.isArray(f)?new DefaultTextureCatalog(f,d):new DefaultTextureCatalog(this)):new TexturesCatalog());if(Locale.getDefault()=="en_US"){this.setUnit(LengthUnit.INCH);this.setNewWallThickness(7.62);this.setNewWallHeight(243.84);this.setNewWallBaseboardThickness(0.9525);this.setNewWallBaseboardHeight(6.35)}else{this.setUnit(LengthUnit.CENTIMETER);this.setNewWallThickness(7.5);this.setNewWallHeight(250);this.setNewWallBaseboardThickness(1);this.setNewWallBaseboardHeight(7)}this.setNavigationPanelVisible(false);this.setWallPattern(e.getPattern("hatchUp"));this.setNewWallPattern(this.getWallPattern())}DefaultUserPreferences.prototype=Object.create(UserPreferences.prototype);DefaultUserPreferences.prototype.constructor=DefaultUserPreferences;function DefaultPatternTexture(a){this.name=a;this.image=new URLContent(ZIPTools.getScriptFolder()+"/resources/patterns/"+this.name+".png")}DefaultPatternTexture.__class="com.eteks.sweethome3d.io.DefaultPatternTexture";DefaultPatternTexture.__interfaces=["com.eteks.sweethome3d.model.TextureImage"];DefaultPatternTexture.__transients=["image"];DefaultPatternTexture.prototype.getName=function(){return this.name};DefaultPatternTexture.prototype.getCreator=function(){return null};DefaultPatternTexture.prototype.getImage=function(){return this.image};DefaultPatternTexture.prototype.getWidth=function(){return 10};DefaultPatternTexture.prototype.getHeight=function(){return 10};DefaultPatternTexture.prototype.equals=function(b){if(b===this){return true}else{if(b instanceof DefaultPatternTexture){var a=b;return a.name==this.name}else{return false}}};function viewHome(e,c,a,b,d){return new HomePreviewComponent(e,c,a,b,d)}function viewHomeInOverlay(f,s){var g=4/3;if(s&&s.widthByHeightRatio){g=s.widthByHeightRatio}hideHomeOverlay();var o=document.createElement("div");o.setAttribute("id","viewerOverlay");o.style.position="absolute";o.style.left="0";o.style.top="0";o.style.zIndex="100";o.style.background="rgba(127, 127, 127, .5)";var m=document.getElementsByTagName("body").item(0);m.insertBefore(o,m.firstChild);var v=document.createElement("div");var l='<canvas id="viewerCanvas" class="viewerComponent"  style="background-color: #CCCCCC; border: 1px solid gray; position: absolute; outline: none; touch-action: none" tabIndex="1"></canvas><div id="viewerProgressDiv" style="position:absolute; width: 300px; background-color: rgba(128, 128, 128, 0.7); padding: 20px; border-radius: 25px">  <progress id="viewerProgress"  class="viewerComponent" value="0" max="200" style="width: 300px;"></progress>  <label id="viewerProgressLabel" class="viewerComponent" style="margin-top: 2px; margin-left: 10px; margin-right: 0px; display: block;"></label></div>';if(s&&(s.aerialViewButtonText&&s.virtualVisitButtonText||s.viewerControlsAdditionalHTML)){l+='<div id="viewerControls" style="position: absolute; padding: 10px; padding-top: 5px">';if(s.aerialViewButtonText&&s.virtualVisitButtonText){l+='   <input  id="aerialView" class="viewerComponent" name="cameraType" type="radio" style="visibility: hidden;"/>      <label class="viewerComponent" for="aerialView" style="visibility: hidden;">'+s.aerialViewButtonText+'</label>   <input  id="virtualVisit" class="viewerComponent" name="cameraType" type="radio" style="visibility: hidden;">      <label class="viewerComponent" for="virtualVisit" style="visibility: hidden;">'+s.virtualVisitButtonText+'</label>   <select id="levelsAndCameras" class="viewerComponent" style="visibility: hidden;"></select>'}if(s.viewerControlsAdditionalHTML){l+=s.viewerControlsAdditionalHTML}l+="</div>"}v.innerHTML=l;o.appendChild(v);var i=new Image();i.src=ZIPTools.getScriptFolder()+"/close.png";i.style.position="absolute";o.appendChild(i);o.escKeyListener=function(x){if(x.keyCode===27){hideHomeOverlay()}};window.addEventListener("keydown",o.escKeyListener);i.addEventListener("click",hideHomeOverlay);var t={mousePressed:function(x){t.mousePressedInOverlay=true},mouseClicked:function(x){if(t.mousePressedInOverlay){delete t.mousePressedInOverlay;hideHomeOverlay()}}};o.addEventListener("mousedown",t.mousePressed);o.addEventListener("click",t.mouseClicked);o.addEventListener("touchmove",function(x){x.preventDefault()});var w=self.innerWidth;var k=self.innerHeight;var u=document.documentElement.clientWidth;var j=document.documentElement.clientHeight;if(m&&m.scrollWidth){if(m.scrollWidth>u){u=m.scrollWidth}if(m.scrollHeight>j){j=m.scrollHeight}}var d=self.pageXOffset?self.pageXOffset:0;var b=self.pageYOffset?self.pageYOffset:0;o.style.height=Math.max(j,k)+"px";o.style.width=u<=w?"100%":u+"px";o.style.display="block";var e=document.getElementById("viewerCanvas");if(w<k*g){e.width=0.9*w;e.height=0.9*w/g}else{e.height=0.9*k;e.width=0.9*k*g}e.style.width=e.width+"px";e.style.height=e.height+"px";var q=d+(w-e.width-10)/2;e.style.left=q+"px";var r=b+(k-e.height-10)/2;e.style.top=r+"px";i.style.left=(q+e.width-5)+"px";i.style.top=(r-10)+"px";var p=document.getElementById("viewerControls");if(p){p.style.left=(q-10)+"px";p.style.top=(r+e.height)+"px";p.addEventListener("mousedown",function(x){x.stopPropagation()})}var h=document.getElementById("viewerProgressDiv");h.style.left=(q+(e.width-300)/2)+"px";h.style.top=(r+(e.height-50)/2)+"px";h.style.visibility="visible";var a=function(y){hideHomeOverlay();if(y=="No WebGL"){var x="Sorry, your browser doesn't support WebGL.";if(s.noWebGLSupportError){x=s.noWebGLSupportError}alert(x)}else{if(typeof y==="string"&&y.indexOf("No Home.xml entry")==0){var x="Ensure your home file was saved with Sweet Home 3D 5.3 or a newer version.";if(s.missingHomeXmlEntryError){x=s.missingHomeXmlEntryError}alert(x)}else{console.log(y.stack);alert("Error: "+(y.message?y.constructor.name+" "+y.message:y))}}};var n=function(z,A,x){var y=document.getElementById("viewerProgress");if(y){var B=null;if(z===HomeRecorder.READING_HOME){y.value=x*100;A=A.substring(A.lastIndexOf("/")+1);B=s&&s.readingHomeText?s.readingHomeText:z}else{if(z===ModelLoader.READING_MODEL){y.value=100+x*100;if(x===1){document.getElementById("viewerProgressDiv").style.visibility="hidden"}B=s&&s.readingModelText?s.readingModelText:z}}if(B!==null){document.getElementById("viewerProgressLabel").innerHTML=(x?Math.floor(x*100)+"% ":"")+B+" "+A}}};var c=HomePreviewComponent;if(s){if(s.homePreviewComponentContructor){c=s.homePreviewComponentContructor}if(s.aerialViewButtonText&&s.virtualVisitButtonText){e.homePreviewComponent=new c("viewerCanvas",f,a,n,{roundsPerMinute:s.roundsPerMinute,navigationPanel:s.navigationPanel,aerialViewButtonId:"aerialView",virtualVisitButtonId:"virtualVisit",levelsAndCamerasListId:"levelsAndCameras",level:s.level,selectableLevels:s.selectableLevels,camera:s.camera,selectableCameras:s.selectableCameras,activateCameraSwitchKey:s.activateCameraSwitchKey})}else{e.homePreviewComponent=new c("viewerCanvas",f,a,n,{roundsPerMinute:s.roundsPerMinute,navigationPanel:s.navigationPanel})}}else{e.homePreviewComponent=new c("viewerCanvas",f,a,n)}}function hideHomeOverlay(){var b=document.getElementById("viewerOverlay");if(b){var a=document.getElementById("viewerCanvas");if(a.homePreviewComponent){a.homePreviewComponent.dispose()}ModelManager.getInstance().clear();TextureManager.getInstance().clear();ZIPTools.clear();window.removeEventListener("keydown",b.escKeyListener);document.getElementsByTagName("body").item(0).removeChild(b)}}function HomePreviewComponent(f,d,a,c,e){if(document.getElementById(f)){var b=this;this.createHomeRecorder().readHome(d,{homeLoaded:function(j){try{var g=document.getElementById(f);if(g){if(e&&e.navigationPanel!="none"&&e.navigationPanel!="default"){function i(k){DefaultUserPreferences.call(this);this.navigationPanel=k}i.prototype=Object.create(DefaultUserPreferences.prototype);i.prototype.constructor=i;i.prototype.getLocalizedString=function(k,l,m){if(k===HomeComponent3D&&l=="navigationPanel.innerHTML"){return this.navigationPanel}else{return UserPreferences.prototype.getLocalizedString.call(this,k,l,m)}};b.preferences=new i(e.navigationPanel)}else{b.preferences=new DefaultUserPreferences()}b.home=j;b.controller=new HomeController3D(j,b.preferences);b.component3D=b.createComponent3D(f,j,b.preferences,b.controller);b.prepareComponent(f,c,e?{roundsPerMinute:e.roundsPerMinute,navigationPanelVisible:e.navigationPanel&&e.navigationPanel!="none",aerialViewButtonId:e.aerialViewButtonId,virtualVisitButtonId:e.virtualVisitButtonId,levelsAndCamerasListId:e.levelsAndCamerasListId,level:e.level,selectableLevels:e.selectableLevels,camera:e.camera,selectableCameras:e.selectableCameras,activateCameraSwitchKey:e.activateCameraSwitchKey}:undefined)}}catch(h){a(h)}},homeError:function(g){a(g)},progression:c})}else{a("No canvas with id equal to "+f)}}HomePreviewComponent.prototype.createHomeRecorder=function(){return new HomeRecorder()};HomePreviewComponent.prototype.createComponent3D=function(a){return new HomeComponent3D(a,this.getHome(),this.getUserPreferences(),null,this.getController())};HomePreviewComponent.prototype.prepareComponent=function(q,m,v){var g=v&&v.roundsPerMinute?v.roundsPerMinute:0;this.startRotationAnimationAfterLoading=g!=0;if(v&&typeof v.navigationPanelVisible){this.getUserPreferences().setNavigationPanelVisible(v.navigationPanelVisible)}var s=this.getHome();if(s.structure){s.getEnvironment().setAllLevelsVisible(true)}else{var h=function(){s.getEnvironment().setAllLevelsVisible(s.getCamera() instanceof ObserverCamera)};h();s.addPropertyChangeListener(Home.CAMERA,h)}s.getEnvironment().setObserverCameraElevationAdjusted(true);this.trackFurnitureModels(m,g);var t=this;var e=function(){t.stopRotationAnimation();if(v&&v.aerialViewButtonId&&v.virtualVisitButtonId){if(s.getCamera()===s.getTopCamera()){document.getElementById(v.aerialViewButtonId).checked=true}else{document.getElementById(v.virtualVisitButtonId).checked=true}}};var y=function(){t.startRotationAnimationAfterLoading=false;s.setCamera(s.getCamera()===s.getTopCamera()?s.getObserverCamera():s.getTopCamera());e()};var b=document.getElementById(q);if(v===undefined||v.activateCameraSwitchKey===undefined||v.activateCameraSwitchKey){b.addEventListener("keydown",function(i){if(i.keyCode===32){y()}})}if(v&&v.aerialViewButtonId&&v.virtualVisitButtonId){var n=document.getElementById(v.aerialViewButtonId);n.addEventListener("change",function(){t.startRotationAnimationAfterLoading=false;s.setCamera(n.checked?s.getTopCamera():s.getObserverCamera())});var w=document.getElementById(v.virtualVisitButtonId);w.addEventListener("change",function(){t.startRotationAnimationAfterLoading=false;s.setCamera(w.checked?s.getObserverCamera():s.getTopCamera())});e();n.style.visibility="visible";w.style.visibility="visible";var f=function(A){var B=document.getElementsByTagName("label");for(var z=0;z<B.length;z++){if(B[z].getAttribute("for")==A){B[z].style.visibility="visible"}}};f(v.aerialViewButtonId);f(v.virtualVisitButtonId);s.addPropertyChangeListener("CAMERA",function(){e();if(s.structure&&v&&v.levelsAndCamerasListId){document.getElementById(v.levelsAndCamerasListId).disabled=s.getCamera()===s.getTopCamera()}})}if(v&&v.level){var d=s.getLevels();if(d.length>0){for(var o=0;o<d.length;o++){var a=d[o];if(a.isViewable()&&a.getName()==v.level){s.setSelectedLevel(a);break}}}}if(v&&v.camera){var u=s.getStoredCameras();if(u.length>0){for(var o=0;o<u.length;o++){var p=u[o];if(p.getName()==v.camera){this.getController().goToCamera(p);break}}}}if(v&&v.levelsAndCamerasListId){var x=document.getElementById(v.levelsAndCamerasListId);x.disabled=s.structure!==undefined&&s.getCamera()===s.getTopCamera();var d=s.getLevels();if(d.length>0){for(var o=0;o<d.length;o++){var a=d[o];if(a.isViewable()&&(!v.selectableLevels||v.selectableLevels.indexOf(a.getName())>=0)){var k=document.createElement("option");k.text=a.getName();k.level=a;x.add(k);if(a===s.getSelectedLevel()){x.selectedIndex=x.options.length-1}}}if(v.selectableCameras!==undefined){var u=s.getStoredCameras();if(u.length>0){var c=x.options.length>0;for(var o=0;o<u.length;o++){var p=u[o];if(v.selectableCameras.indexOf(p.getName())>=0){if(c){x.add(document.createElement("option"));c=false}var k=document.createElement("option");k.text=p.getName();k.camera=p;x.add(k)}}}}if(x.options.length>1){var l=this.getController();x.addEventListener("change",function(){t.startRotationAnimationAfterLoading=false;var i=x.options[x.selectedIndex];if(i.level!==undefined){s.setSelectedLevel(i.level)}else{if(i.camera!==undefined){l.goToCamera(i.camera)}}});x.style.visibility="visible"}}}if(g){var l=this.getController();l.goToCamera(s.getTopCamera());l.rotateCameraPitch(Math.PI/6-s.getCamera().getPitch());l.moveCamera(10000);l.moveCamera(-50);this.clickListener=function(i){t.startRotationAnimationAfterLoading=false;t.stopRotationAnimation()};b.addEventListener("keydown",this.clickListener);if(OperatingSystem.isInternetExplorerOrLegacyEdge()&&window.PointerEvent){b.addEventListener("pointerdown",this.clickListener);b.addEventListener("pointermove",this.clickListener)}else{b.addEventListener("mousedown",this.clickListener);b.addEventListener("touchstart",this.clickListener);b.addEventListener("touchmove",this.clickListener)}var j=this.component3D.getSimulatedKeyElements(document.getElementsByTagName("body").item(0));for(var o=0;o<j.length;o++){if(OperatingSystem.isInternetExplorerOrLegacyEdge()&&window.PointerEvent){j[o].addEventListener("pointerdown",this.clickListener)}else{j[o].addEventListener("mousedown",this.clickListener)}}this.visibilityChanged=function(i){if(document.visibilityState=="hidden"){t.stopRotationAnimation()}};document.addEventListener("visibilitychange",this.visibilityChanged);var r=b.getBoundingClientRect();if(r.top>=0&&r.bottom<=self.innerHeight){b.focus()}}};HomePreviewComponent.prototype.getHome=function(){return this.home};HomePreviewComponent.prototype.getComponent3D=function(){return this.component3D};HomePreviewComponent.prototype.getController=function(){return this.controller};HomePreviewComponent.prototype.getUserPreferences=function(){return this.preferences};HomePreviewComponent.prototype.trackFurnitureModels=function(o,h){var u=[];var b={};var k={};var s=this.getHome();var m=s.getFurniture();for(var q=0;q<m.length;q++){var c=m[q];var f=[];if(c instanceof HomeFurnitureGroup){var g=c.getAllFurniture();for(var p=0;p<g.length;p++){var n=g[p];if(!(n instanceof HomeFurnitureGroup)){f.push(n)}}}else{f.push(c)}u.push.apply(u,f);for(var p=0;p<f.length;p++){var d=f[p].getModel();if(d.isJAREntry()){var e=d.getJAREntryURL();if(e in b){b[e]++}else{b[e]=1}}var t=d.getURL();if(t in k){k[t]++}else{k[t]=1}}}if(u.length===0){o(ModelLoader.READING_MODEL,undefined,1)}else{var a=0;var r=this;for(var q=0;q<u.length;q++){var l=function(i){ModelManager.getInstance().loadModel(i.getModel(),false,{modelUpdated:function(x){var j=i.getModel();if(j.isJAREntry()){var w=j.getJAREntryURL();if(--b[w]===0){ZIPTools.disposeZIP(w);delete b[w]}}var v=j.getURL();if(--k[v]===0){ModelManager.getInstance().unloadModel(j);delete k[v]}o(ModelLoader.READING_MODEL,i.getName(),++a/u.length);if(a===u.length){r.component3D.disposeGeometries();u=[];if(r.startRotationAnimationAfterLoading){delete r.startRotationAnimationAfterLoading;r.startRotationAnimation(h)}}},modelError:function(j){this.modelUpdated()}})};l(u[q])}}};HomePreviewComponent.prototype.dispose=function(){this.stopRotationAnimation();if(this.component3D){if(this.clickListener){document.removeEventListener("visibilitychange",this.visibilityChanged);var b=this.component3D.getSimulatedKeyElements(document.getElementsByTagName("body").item(0));for(var a=0;a<b.length;a++){if(OperatingSystem.isInternetExplorerOrLegacyEdge()&&window.PointerEvent){b[a].removeEventListener("pointerdown",this.clickListener)}else{b[a].removeEventListener("mousedown",this.clickListener)}}}this.component3D.dispose()}};HomePreviewComponent.prototype.startRotationAnimation=function(a){this.roundsPerMinute=a!==undefined?a:1;if(!this.rotationAnimationStarted){this.rotationAnimationStarted=true;this.animate()}};HomePreviewComponent.prototype.animate=function(){if(this.rotationAnimationStarted){var b=Date.now();if(this.lastRotationAnimationTime!==undefined){var a=this.roundsPerMinute*2*Math.PI/60000;var d=((b-this.lastRotationAnimationTime)*a)%(2*Math.PI);d-=this.home.getCamera().getYaw()-this.lastRotationAnimationYaw;if(d>0){this.controller.rotateCameraYaw(d)}}this.lastRotationAnimationTime=b;this.lastRotationAnimationYaw=this.home.getCamera().getYaw();var c=this;requestAnimationFrame(function(){c.animate()})}};HomePreviewComponent.prototype.stopRotationAnimation=function(){delete this.lastRotationAnimationTime;delete this.lastRotationAnimationYaw;delete this.rotationAnimationStarted};